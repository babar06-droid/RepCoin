{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":13,"index":126},"end":{"line":7,"column":29,"index":142}}],"key":"XN65eZP/QkNMzaBAXbG/zPyidpY=","exportNames":["*"],"imports":1}},{"name":"../NativeWorklets","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":22,"index":166},"end":{"line":8,"column":50,"index":194}}],"key":"ZVbZ/Myyknlp3g0Nj4brcnzTE70=","exportNames":["*"],"imports":1}},{"name":"../worklet","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":15,"index":211},"end":{"line":9,"column":36,"index":232}}],"key":"oGosbvD1FXHwcAdOSUltwH+bINE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useWorklet = useWorklet;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _NativeWorklets = require(_dependencyMap[1], \"../NativeWorklets\");\n  var _worklet = require(_dependencyMap[2], \"../worklet\");\n  /**\n   * Create a Worklet function that automatically memoizes itself using it's auto-captured closure.\n   * The returned function can be called from both a Worklet context and the JS context, but will execute on a Worklet context.\n   *\n   * @worklet\n   * @param context The context to run this Worklet in. Can be `default` to use the default background context, or a custom context.\n   * @param callback The Worklet. Must be marked with the `'worklet'` directive.\n   * @returns A memoized Worklet\n   * ```ts\n   * const sayHello = useWorklet('default', (name: string) => {\n   *   'worklet'\n   *   console.log(`Hello ${name}, I am running on the Worklet Thread!`)\n   * })\n   * sayHello()\n   * ```\n   */\n  function useWorklet(context, callback) {\n    // Since `Worklets.defaultContext` always constructs a new jsi::Object,\n    // we cannot use it in React's dependency-list as that'd trigger a new dependency each render.\n    // Instead, we compare only it's name as a unique ID to re-trigger useMemo only when the name changes.\n    const contextName = context === \"default\" ? context : context.name;\n\n    // As a dependency for this use-memo we use all of the values captured inside the worklet,\n    // as well as the unique context name.\n    const dependencies = [...(0, _worklet.getWorkletDependencies)(callback), contextName];\n    return (0, _react.useMemo)(() => {\n      const actualContext = context === \"default\" ? _NativeWorklets.Worklets.defaultContext : context;\n      return actualContext.createRunAsync(callback);\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    dependencies);\n  }\n});","lineCount":43,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"useWorklet"],[7,20,6,18],[7,23,6,21,"useWorklet"],[7,33,6,31],[8,2,7,0],[8,6,7,4,"_react"],[8,12,7,10],[8,15,7,13,"require"],[8,22,7,20],[8,23,7,20,"_dependencyMap"],[8,37,7,20],[8,49,7,28],[8,50,7,29],[9,2,8,0],[9,6,8,4,"_NativeWorklets"],[9,21,8,19],[9,24,8,22,"require"],[9,31,8,29],[9,32,8,29,"_dependencyMap"],[9,46,8,29],[9,70,8,49],[9,71,8,50],[10,2,9,0],[10,6,9,4,"_worklet"],[10,14,9,12],[10,17,9,15,"require"],[10,24,9,22],[10,25,9,22,"_dependencyMap"],[10,39,9,22],[10,56,9,35],[10,57,9,36],[11,2,10,0],[12,0,11,0],[13,0,12,0],[14,0,13,0],[15,0,14,0],[16,0,15,0],[17,0,16,0],[18,0,17,0],[19,0,18,0],[20,0,19,0],[21,0,20,0],[22,0,21,0],[23,0,22,0],[24,0,23,0],[25,0,24,0],[26,0,25,0],[27,2,26,0],[27,11,26,9,"useWorklet"],[27,21,26,19,"useWorklet"],[27,22,26,20,"context"],[27,29,26,27],[27,31,26,29,"callback"],[27,39,26,37],[27,41,26,39],[28,4,27,2],[29,4,28,2],[30,4,29,2],[31,4,30,2],[31,10,30,8,"contextName"],[31,21,30,19],[31,24,30,22,"context"],[31,31,30,29],[31,36,30,34],[31,45,30,43],[31,48,30,46,"context"],[31,55,30,53],[31,58,30,56,"context"],[31,65,30,63],[31,66,30,64,"name"],[31,70,30,68],[33,4,32,2],[34,4,33,2],[35,4,34,2],[35,10,34,8,"dependencies"],[35,22,34,20],[35,25,34,23],[35,26,34,24],[35,29,34,27],[35,30,34,28],[35,31,34,29],[35,33,34,31,"_worklet"],[35,41,34,39],[35,42,34,40,"getWorkletDependencies"],[35,64,34,62],[35,66,34,64,"callback"],[35,74,34,72],[35,75,34,73],[35,77,34,75,"contextName"],[35,88,34,86],[35,89,34,87],[36,4,35,2],[36,11,35,9],[36,12,35,10],[36,13,35,11],[36,15,35,13,"_react"],[36,21,35,19],[36,22,35,20,"useMemo"],[36,29,35,27],[36,31,35,29],[36,37,35,35],[37,6,36,4],[37,12,36,10,"actualContext"],[37,25,36,23],[37,28,36,26,"context"],[37,35,36,33],[37,40,36,38],[37,49,36,47],[37,52,36,50,"_NativeWorklets"],[37,67,36,65],[37,68,36,66,"Worklets"],[37,76,36,74],[37,77,36,75,"defaultContext"],[37,91,36,89],[37,94,36,92,"context"],[37,101,36,99],[38,6,37,4],[38,13,37,11,"actualContext"],[38,26,37,24],[38,27,37,25,"createRunAsync"],[38,41,37,39],[38,42,37,40,"callback"],[38,50,37,48],[38,51,37,49],[39,4,38,2],[39,5,38,3],[40,4,39,2],[41,4,40,2,"dependencies"],[41,16,40,14],[41,17,40,15],[42,2,41,0],[43,0,41,1],[43,3]],"functionMap":{"names":["<global>","useWorklet","<anonymous>"],"mappings":"AAA;ACyB;6BCS;GDG;CDG"},"hasCjsExports":true},"type":"js/module"}]}