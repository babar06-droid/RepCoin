{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":50,"index":753}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}},{"name":"../cpu_util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":754},"end":{"line":18,"column":47,"index":801}}],"key":"5L5S4GXlh/uJh1MrXQbkPSVOWm4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.lRN = lRN;\n  Object.defineProperty(exports, \"LRNConfig\", {\n    enumerable: true,\n    get: function () {\n      return LRNConfig;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  var _cpu_util = require(_dependencyMap[1], \"../cpu_util\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  function lRN(args) {\n    const {\n      inputs,\n      backend,\n      attrs\n    } = args;\n    const {\n      x\n    } = inputs;\n    const {\n      depthRadius,\n      bias,\n      alpha,\n      beta\n    } = attrs;\n    (0, _cpu_util.assertNotComplex)(x, 'LRN');\n    const channels = x.shape[3];\n    const maxD = channels - 1;\n    const xValues = backend.data.get(x.dataId).values;\n    const size = _tensorflowTfjsCore.util.sizeFromShape(x.shape);\n    const result = new Float32Array(size);\n    function sumAcrossChannels(offset) {\n      const currentChannel = offset % channels;\n      let beginSumOffset = offset - currentChannel + Math.max(0, currentChannel - depthRadius);\n      const endSumOffset = offset - currentChannel + Math.min(currentChannel + depthRadius, maxD);\n      let sum = 0.0;\n      for (; beginSumOffset <= endSumOffset; beginSumOffset++) {\n        const z = xValues[beginSumOffset];\n        sum += z * z;\n      }\n      return sum;\n    }\n    for (let offset = 0; offset < size; offset++) {\n      const sum = sumAcrossChannels(offset);\n      const val = xValues[offset] * Math.pow(bias + alpha * sum, -beta);\n      result[offset] = val;\n    }\n    return backend.makeTensorInfo(x.shape, x.dtype, result);\n  }\n  // tslint:disable-next-line: variable-name\n  const LRNConfig = {\n    kernelName: _tensorflowTfjsCore.LRN,\n    backendName: 'cpu',\n    kernelFunc: lRN\n  };\n});","lineCount":78,"map":[[7,2,19,0,"exports"],[7,9,19,0],[7,10,19,0,"lRN"],[7,13,19,0],[7,16,19,0,"lRN"],[7,19,19,0],[8,2,48,0,"Object"],[8,8,48,0],[8,9,48,0,"defineProperty"],[8,23,48,0],[8,24,48,0,"exports"],[8,31,48,0],[9,4,48,0,"enumerable"],[9,14,48,0],[10,4,48,0,"get"],[10,7,48,0],[10,18,48,0,"get"],[10,19,48,0],[11,6,48,0],[11,13,48,0,"LRNConfig"],[11,22,48,0],[12,4,48,0],[13,2,48,0],[14,2,17,0],[14,6,17,0,"_tensorflowTfjsCore"],[14,25,17,0],[14,28,17,0,"require"],[14,35,17,0],[14,36,17,0,"_dependencyMap"],[14,50,17,0],[15,2,18,0],[15,6,18,0,"_cpu_util"],[15,15,18,0],[15,18,18,0,"require"],[15,25,18,0],[15,26,18,0,"_dependencyMap"],[15,40,18,0],[16,2,1,0],[17,0,2,0],[18,0,3,0],[19,0,4,0],[20,0,5,0],[21,0,6,0],[22,0,7,0],[23,0,8,0],[24,0,9,0],[25,0,10,0],[26,0,11,0],[27,0,12,0],[28,0,13,0],[29,0,14,0],[30,0,15,0],[31,0,16,0],[33,2,19,7],[33,11,19,16,"lRN"],[33,14,19,19,"lRN"],[33,15,19,20,"args"],[33,19,19,24],[33,21,19,26],[34,4,20,4],[34,10,20,10],[35,6,20,12,"inputs"],[35,12,20,18],[36,6,20,20,"backend"],[36,13,20,27],[37,6,20,29,"attrs"],[38,4,20,35],[38,5,20,36],[38,8,20,39,"args"],[38,12,20,43],[39,4,21,4],[39,10,21,10],[40,6,21,12,"x"],[41,4,21,14],[41,5,21,15],[41,8,21,18,"inputs"],[41,14,21,24],[42,4,22,4],[42,10,22,10],[43,6,22,12,"depthRadius"],[43,17,22,23],[44,6,22,25,"bias"],[44,10,22,29],[45,6,22,31,"alpha"],[45,11,22,36],[46,6,22,38,"beta"],[47,4,22,43],[47,5,22,44],[47,8,22,47,"attrs"],[47,13,22,52],[48,4,23,4],[48,8,23,4,"assertNotComplex"],[48,17,23,20],[48,18,23,20,"assertNotComplex"],[48,34,23,20],[48,36,23,21,"x"],[48,37,23,22],[48,39,23,24],[48,44,23,29],[48,45,23,30],[49,4,24,4],[49,10,24,10,"channels"],[49,18,24,18],[49,21,24,21,"x"],[49,22,24,22],[49,23,24,23,"shape"],[49,28,24,28],[49,29,24,29],[49,30,24,30],[49,31,24,31],[50,4,25,4],[50,10,25,10,"maxD"],[50,14,25,14],[50,17,25,17,"channels"],[50,25,25,25],[50,28,25,28],[50,29,25,29],[51,4,26,4],[51,10,26,10,"xValues"],[51,17,26,17],[51,20,26,20,"backend"],[51,27,26,27],[51,28,26,28,"data"],[51,32,26,32],[51,33,26,33,"get"],[51,36,26,36],[51,37,26,37,"x"],[51,38,26,38],[51,39,26,39,"dataId"],[51,45,26,45],[51,46,26,46],[51,47,26,47,"values"],[51,53,26,53],[52,4,27,4],[52,10,27,10,"size"],[52,14,27,14],[52,17,27,17,"util"],[52,36,27,21],[52,37,27,21,"util"],[52,41,27,21],[52,42,27,22,"sizeFromShape"],[52,55,27,35],[52,56,27,36,"x"],[52,57,27,37],[52,58,27,38,"shape"],[52,63,27,43],[52,64,27,44],[53,4,28,4],[53,10,28,10,"result"],[53,16,28,16],[53,19,28,19],[53,23,28,23,"Float32Array"],[53,35,28,35],[53,36,28,36,"size"],[53,40,28,40],[53,41,28,41],[54,4,29,4],[54,13,29,13,"sumAcrossChannels"],[54,30,29,30,"sumAcrossChannels"],[54,31,29,31,"offset"],[54,37,29,37],[54,39,29,39],[55,6,30,8],[55,12,30,14,"currentChannel"],[55,26,30,28],[55,29,30,31,"offset"],[55,35,30,37],[55,38,30,40,"channels"],[55,46,30,48],[56,6,31,8],[56,10,31,12,"beginSumOffset"],[56,24,31,26],[56,27,31,29,"offset"],[56,33,31,35],[56,36,31,38,"currentChannel"],[56,50,31,52],[56,53,31,55,"Math"],[56,57,31,59],[56,58,31,60,"max"],[56,61,31,63],[56,62,31,64],[56,63,31,65],[56,65,31,67,"currentChannel"],[56,79,31,81],[56,82,31,84,"depthRadius"],[56,93,31,95],[56,94,31,96],[57,6,32,8],[57,12,32,14,"endSumOffset"],[57,24,32,26],[57,27,32,29,"offset"],[57,33,32,35],[57,36,32,38,"currentChannel"],[57,50,32,52],[57,53,32,55,"Math"],[57,57,32,59],[57,58,32,60,"min"],[57,61,32,63],[57,62,32,64,"currentChannel"],[57,76,32,78],[57,79,32,81,"depthRadius"],[57,90,32,92],[57,92,32,94,"maxD"],[57,96,32,98],[57,97,32,99],[58,6,33,8],[58,10,33,12,"sum"],[58,13,33,15],[58,16,33,18],[58,19,33,21],[59,6,34,8],[59,13,34,15,"beginSumOffset"],[59,27,34,29],[59,31,34,33,"endSumOffset"],[59,43,34,45],[59,45,34,47,"beginSumOffset"],[59,59,34,61],[59,61,34,63],[59,63,34,65],[60,8,35,12],[60,14,35,18,"z"],[60,15,35,19],[60,18,35,22,"xValues"],[60,25,35,29],[60,26,35,30,"beginSumOffset"],[60,40,35,44],[60,41,35,45],[61,8,36,12,"sum"],[61,11,36,15],[61,15,36,19,"z"],[61,16,36,20],[61,19,36,23,"z"],[61,20,36,24],[62,6,37,8],[63,6,38,8],[63,13,38,15,"sum"],[63,16,38,18],[64,4,39,4],[65,4,40,4],[65,9,40,9],[65,13,40,13,"offset"],[65,19,40,19],[65,22,40,22],[65,23,40,23],[65,25,40,25,"offset"],[65,31,40,31],[65,34,40,34,"size"],[65,38,40,38],[65,40,40,40,"offset"],[65,46,40,46],[65,48,40,48],[65,50,40,50],[66,6,41,8],[66,12,41,14,"sum"],[66,15,41,17],[66,18,41,20,"sumAcrossChannels"],[66,35,41,37],[66,36,41,38,"offset"],[66,42,41,44],[66,43,41,45],[67,6,42,8],[67,12,42,14,"val"],[67,15,42,17],[67,18,42,20,"xValues"],[67,25,42,27],[67,26,42,28,"offset"],[67,32,42,34],[67,33,42,35],[67,36,42,38,"Math"],[67,40,42,42],[67,41,42,43,"pow"],[67,44,42,46],[67,45,42,47,"bias"],[67,49,42,51],[67,52,42,54,"alpha"],[67,57,42,59],[67,60,42,62,"sum"],[67,63,42,65],[67,65,42,67],[67,66,42,68,"beta"],[67,70,42,72],[67,71,42,73],[68,6,43,8,"result"],[68,12,43,14],[68,13,43,15,"offset"],[68,19,43,21],[68,20,43,22],[68,23,43,25,"val"],[68,26,43,28],[69,4,44,4],[70,4,45,4],[70,11,45,11,"backend"],[70,18,45,18],[70,19,45,19,"makeTensorInfo"],[70,33,45,33],[70,34,45,34,"x"],[70,35,45,35],[70,36,45,36,"shape"],[70,41,45,41],[70,43,45,43,"x"],[70,44,45,44],[70,45,45,45,"dtype"],[70,50,45,50],[70,52,45,52,"result"],[70,58,45,58],[70,59,45,59],[71,2,46,0],[72,2,47,0],[73,2,48,7],[73,8,48,13,"LRNConfig"],[73,17,48,22],[73,20,48,25],[74,4,49,4,"kernelName"],[74,14,49,14],[74,16,49,16,"LRN"],[74,35,49,19],[74,36,49,19,"LRN"],[74,39,49,19],[75,4,50,4,"backendName"],[75,15,50,15],[75,17,50,17],[75,22,50,22],[76,4,51,4,"kernelFunc"],[76,14,51,14],[76,16,51,16,"lRN"],[77,2,52,0],[77,3,52,1],[78,0,52,2],[78,3]],"functionMap":{"names":["<global>","lRN","sumAcrossChannels"],"mappings":"AAA;OCkB;ICU;KDU;CDO"},"hasCjsExports":false},"type":"js/module"}]}