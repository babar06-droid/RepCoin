{"dependencies":[{"name":"../../engine","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":38,"index":741}}],"key":"v39fFCcPTN6kCKPiVEOA5hKbvfQ=","exportNames":["*"],"imports":1}},{"name":"../../kernel_names","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":742},"end":{"line":18,"column":51,"index":793}}],"key":"rL3QmnnDJzxi3tNgrJ9K3IiMDQ8=","exportNames":["*"],"imports":1}},{"name":"../../tensor_util_env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":794},"end":{"line":19,"column":56,"index":850}}],"key":"xfSGNGkCJdZhfQ673y/6d+no2yU=","exportNames":["*"],"imports":1}},{"name":"../../util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":851},"end":{"line":20,"column":35,"index":886}}],"key":"OiLVMoS12Mp3xgHkQeTdnQIBX6Q=","exportNames":["*"],"imports":1}},{"name":"../operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":887},"end":{"line":21,"column":34,"index":921}}],"key":"fQilPqfSvhAHjyfKT0P4wel7jE4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"cropAndResize\", {\n    enumerable: true,\n    get: function () {\n      return cropAndResize;\n    }\n  });\n  var _engine = require(_dependencyMap[0], \"../../engine\");\n  var _kernel_names = require(_dependencyMap[1], \"../../kernel_names\");\n  var _tensor_util_env = require(_dependencyMap[2], \"../../tensor_util_env\");\n  var _util = require(_dependencyMap[3], \"../../util\");\n  var util = _interopNamespace(_util);\n  var _operation = require(_dependencyMap[4], \"../operation\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  /**\n   * Extracts crops from the input image tensor and resizes them using bilinear\n   * sampling or nearest neighbor sampling (possibly with aspect ratio change)\n   * to a common output size specified by cropSize.\n   *\n   * @param image 4d tensor of shape `[batch,imageHeight,imageWidth, depth]`,\n   *     where imageHeight and imageWidth must be positive, specifying the\n   *     batch of images from which to take crops\n   * @param boxes 2d float32 tensor of shape `[numBoxes, 4]`. Each entry is\n   *     `[y1, x1, y2, x2]`, where `(y1, x1)` and `(y2, x2)` are the normalized\n   *     coordinates of the box in the `boxInd[i]`th image in the batch\n   * @param boxInd 1d int32 tensor of shape `[numBoxes]` with values in range\n   *     `[0, batch)` that specifies the image that the `i`-th box refers to.\n   * @param cropSize 1d int32 tensor of 2 elements `[cropHeigh, cropWidth]`\n   *     specifying the size to which all crops are resized to.\n   * @param method Optional string from `'bilinear' | 'nearest'`,\n   *     defaults to bilinear, which specifies the sampling method for resizing\n   * @param extrapolationValue A threshold for deciding when to remove boxes based\n   *     on score. Defaults to 0.\n   * @return A 4D tensor of the shape `[numBoxes,cropHeight,cropWidth,depth]`\n   *\n   * @doc {heading: 'Operations', subheading: 'Images', namespace: 'image'}\n   */\n  function cropAndResize_(image, boxes, boxInd, cropSize, method = 'bilinear', extrapolationValue = 0) {\n    const $image = (0, _tensor_util_env.convertToTensor)(image, 'image', 'cropAndResize');\n    const $boxes = (0, _tensor_util_env.convertToTensor)(boxes, 'boxes', 'cropAndResize', 'float32');\n    const $boxInd = (0, _tensor_util_env.convertToTensor)(boxInd, 'boxInd', 'cropAndResize', 'int32');\n    const numBoxes = $boxes.shape[0];\n    util.assert($image.rank === 4, () => 'Error in cropAndResize: image must be rank 4,' + `but got rank ${$image.rank}.`);\n    util.assert($boxes.rank === 2 && $boxes.shape[1] === 4, () => `Error in cropAndResize: boxes must be have size [${numBoxes},4] ` + `but had shape ${$boxes.shape}.`);\n    util.assert($boxInd.rank === 1 && $boxInd.shape[0] === numBoxes, () => `Error in cropAndResize: boxInd must be have size [${numBoxes}] ` + `but had shape ${$boxes.shape}.`);\n    util.assert(cropSize.length === 2, () => `Error in cropAndResize: cropSize must be of length 2, but got ` + `length ${cropSize.length}.`);\n    util.assert(cropSize[0] >= 1 && cropSize[1] >= 1, () => `cropSize must be atleast [1,1], but was ${cropSize}`);\n    util.assert(method === 'bilinear' || method === 'nearest', () => `method must be bilinear or nearest, but was ${method}`);\n    const inputs = {\n      image: $image,\n      boxes: $boxes,\n      boxInd: $boxInd\n    };\n    const attrs = {\n      method,\n      extrapolationValue,\n      cropSize\n    };\n    const res = _engine.ENGINE.runKernel(_kernel_names.CropAndResize, inputs, attrs);\n    return res;\n  }\n  const cropAndResize = /* @__PURE__ */(0, _operation.op)({\n    cropAndResize_\n  });\n});","lineCount":101,"map":[[22,2,65,0,"Object"],[22,8,65,0],[22,9,65,0,"defineProperty"],[22,23,65,0],[22,24,65,0,"exports"],[22,31,65,0],[23,4,65,0,"enumerable"],[23,14,65,0],[24,4,65,0,"get"],[24,7,65,0],[24,18,65,0,"get"],[24,19,65,0],[25,6,65,0],[25,13,65,0,"cropAndResize"],[25,26,65,0],[26,4,65,0],[27,2,65,0],[28,2,17,0],[28,6,17,0,"_engine"],[28,13,17,0],[28,16,17,0,"require"],[28,23,17,0],[28,24,17,0,"_dependencyMap"],[28,38,17,0],[29,2,18,0],[29,6,18,0,"_kernel_names"],[29,19,18,0],[29,22,18,0,"require"],[29,29,18,0],[29,30,18,0,"_dependencyMap"],[29,44,18,0],[30,2,19,0],[30,6,19,0,"_tensor_util_env"],[30,22,19,0],[30,25,19,0,"require"],[30,32,19,0],[30,33,19,0,"_dependencyMap"],[30,47,19,0],[31,2,20,0],[31,6,20,0,"_util"],[31,11,20,0],[31,14,20,0,"require"],[31,21,20,0],[31,22,20,0,"_dependencyMap"],[31,36,20,0],[32,2,20,0],[32,6,20,0,"util"],[32,10,20,0],[32,13,20,0,"_interopNamespace"],[32,30,20,0],[32,31,20,0,"_util"],[32,36,20,0],[33,2,21,0],[33,6,21,0,"_operation"],[33,16,21,0],[33,19,21,0,"require"],[33,26,21,0],[33,27,21,0,"_dependencyMap"],[33,41,21,0],[34,2,1,0],[35,0,2,0],[36,0,3,0],[37,0,4,0],[38,0,5,0],[39,0,6,0],[40,0,7,0],[41,0,8,0],[42,0,9,0],[43,0,10,0],[44,0,11,0],[45,0,12,0],[46,0,13,0],[47,0,14,0],[48,0,15,0],[49,0,16,0],[51,2,22,0],[52,0,23,0],[53,0,24,0],[54,0,25,0],[55,0,26,0],[56,0,27,0],[57,0,28,0],[58,0,29,0],[59,0,30,0],[60,0,31,0],[61,0,32,0],[62,0,33,0],[63,0,34,0],[64,0,35,0],[65,0,36,0],[66,0,37,0],[67,0,38,0],[68,0,39,0],[69,0,40,0],[70,0,41,0],[71,0,42,0],[72,0,43,0],[73,0,44,0],[74,2,45,0],[74,11,45,9,"cropAndResize_"],[74,25,45,23,"cropAndResize_"],[74,26,45,24,"image"],[74,31,45,29],[74,33,45,31,"boxes"],[74,38,45,36],[74,40,45,38,"boxInd"],[74,46,45,44],[74,48,45,46,"cropSize"],[74,56,45,54],[74,58,45,56,"method"],[74,64,45,62],[74,67,45,65],[74,77,45,75],[74,79,45,77,"extrapolationValue"],[74,97,45,95],[74,100,45,98],[74,101,45,99],[74,103,45,101],[75,4,46,4],[75,10,46,10,"$image"],[75,16,46,16],[75,19,46,19],[75,23,46,19,"convertToTensor"],[75,39,46,34],[75,40,46,34,"convertToTensor"],[75,55,46,34],[75,57,46,35,"image"],[75,62,46,40],[75,64,46,42],[75,71,46,49],[75,73,46,51],[75,88,46,66],[75,89,46,67],[76,4,47,4],[76,10,47,10,"$boxes"],[76,16,47,16],[76,19,47,19],[76,23,47,19,"convertToTensor"],[76,39,47,34],[76,40,47,34,"convertToTensor"],[76,55,47,34],[76,57,47,35,"boxes"],[76,62,47,40],[76,64,47,42],[76,71,47,49],[76,73,47,51],[76,88,47,66],[76,90,47,68],[76,99,47,77],[76,100,47,78],[77,4,48,4],[77,10,48,10,"$boxInd"],[77,17,48,17],[77,20,48,20],[77,24,48,20,"convertToTensor"],[77,40,48,35],[77,41,48,35,"convertToTensor"],[77,56,48,35],[77,58,48,36,"boxInd"],[77,64,48,42],[77,66,48,44],[77,74,48,52],[77,76,48,54],[77,91,48,69],[77,93,48,71],[77,100,48,78],[77,101,48,79],[78,4,49,4],[78,10,49,10,"numBoxes"],[78,18,49,18],[78,21,49,21,"$boxes"],[78,27,49,27],[78,28,49,28,"shape"],[78,33,49,33],[78,34,49,34],[78,35,49,35],[78,36,49,36],[79,4,50,4,"util"],[79,8,50,8],[79,9,50,9,"assert"],[79,15,50,15],[79,16,50,16,"$image"],[79,22,50,22],[79,23,50,23,"rank"],[79,27,50,27],[79,32,50,32],[79,33,50,33],[79,35,50,35],[79,41,50,41],[79,88,50,88],[79,91,51,8],[79,107,51,24,"$image"],[79,113,51,30],[79,114,51,31,"rank"],[79,118,51,35],[79,121,51,38],[79,122,51,39],[80,4,52,4,"util"],[80,8,52,8],[80,9,52,9,"assert"],[80,15,52,15],[80,16,52,16,"$boxes"],[80,22,52,22],[80,23,52,23,"rank"],[80,27,52,27],[80,32,52,32],[80,33,52,33],[80,37,52,37,"$boxes"],[80,43,52,43],[80,44,52,44,"shape"],[80,49,52,49],[80,50,52,50],[80,51,52,51],[80,52,52,52],[80,57,52,57],[80,58,52,58],[80,60,52,60],[80,66,52,66],[80,118,52,118,"numBoxes"],[80,126,52,126],[80,132,52,132],[80,135,53,8],[80,152,53,25,"$boxes"],[80,158,53,31],[80,159,53,32,"shape"],[80,164,53,37],[80,167,53,40],[80,168,53,41],[81,4,54,4,"util"],[81,8,54,8],[81,9,54,9,"assert"],[81,15,54,15],[81,16,54,16,"$boxInd"],[81,23,54,23],[81,24,54,24,"rank"],[81,28,54,28],[81,33,54,33],[81,34,54,34],[81,38,54,38,"$boxInd"],[81,45,54,45],[81,46,54,46,"shape"],[81,51,54,51],[81,52,54,52],[81,53,54,53],[81,54,54,54],[81,59,54,59,"numBoxes"],[81,67,54,67],[81,69,54,69],[81,75,54,75],[81,128,54,128,"numBoxes"],[81,136,54,136],[81,140,54,140],[81,143,55,8],[81,160,55,25,"$boxes"],[81,166,55,31],[81,167,55,32,"shape"],[81,172,55,37],[81,175,55,40],[81,176,55,41],[82,4,56,4,"util"],[82,8,56,8],[82,9,56,9,"assert"],[82,15,56,15],[82,16,56,16,"cropSize"],[82,24,56,24],[82,25,56,25,"length"],[82,31,56,31],[82,36,56,36],[82,37,56,37],[82,39,56,39],[82,45,56,45],[82,109,56,109],[82,112,57,8],[82,122,57,18,"cropSize"],[82,130,57,26],[82,131,57,27,"length"],[82,137,57,33],[82,140,57,36],[82,141,57,37],[83,4,58,4,"util"],[83,8,58,8],[83,9,58,9,"assert"],[83,15,58,15],[83,16,58,16,"cropSize"],[83,24,58,24],[83,25,58,25],[83,26,58,26],[83,27,58,27],[83,31,58,31],[83,32,58,32],[83,36,58,36,"cropSize"],[83,44,58,44],[83,45,58,45],[83,46,58,46],[83,47,58,47],[83,51,58,51],[83,52,58,52],[83,54,58,54],[83,60,58,60],[83,103,58,103,"cropSize"],[83,111,58,111],[83,113,58,113],[83,114,58,114],[84,4,59,4,"util"],[84,8,59,8],[84,9,59,9,"assert"],[84,15,59,15],[84,16,59,16,"method"],[84,22,59,22],[84,27,59,27],[84,37,59,37],[84,41,59,41,"method"],[84,47,59,47],[84,52,59,52],[84,61,59,61],[84,63,59,63],[84,69,59,69],[84,116,59,116,"method"],[84,122,59,122],[84,124,59,124],[84,125,59,125],[85,4,60,4],[85,10,60,10,"inputs"],[85,16,60,16],[85,19,60,19],[86,6,60,21,"image"],[86,11,60,26],[86,13,60,28,"$image"],[86,19,60,34],[87,6,60,36,"boxes"],[87,11,60,41],[87,13,60,43,"$boxes"],[87,19,60,49],[88,6,60,51,"boxInd"],[88,12,60,57],[88,14,60,59,"$boxInd"],[89,4,60,67],[89,5,60,68],[90,4,61,4],[90,10,61,10,"attrs"],[90,15,61,15],[90,18,61,18],[91,6,61,20,"method"],[91,12,61,26],[92,6,61,28,"extrapolationValue"],[92,24,61,46],[93,6,61,48,"cropSize"],[94,4,61,57],[94,5,61,58],[95,4,62,4],[95,10,62,10,"res"],[95,13,62,13],[95,16,62,16,"ENGINE"],[95,23,62,22],[95,24,62,22,"ENGINE"],[95,30,62,22],[95,31,62,23,"runKernel"],[95,40,62,32],[95,41,62,33,"CropAndResize"],[95,54,62,46],[95,55,62,46,"CropAndResize"],[95,68,62,46],[95,70,62,48,"inputs"],[95,76,62,54],[95,78,62,56,"attrs"],[95,83,62,61],[95,84,62,62],[96,4,63,4],[96,11,63,11,"res"],[96,14,63,14],[97,2,64,0],[98,2,65,7],[98,8,65,13,"cropAndResize"],[98,21,65,26],[98,24,65,29],[98,39,65,45],[98,43,65,45,"op"],[98,53,65,47],[98,54,65,47,"op"],[98,56,65,47],[98,58,65,48],[99,4,65,50,"cropAndResize_"],[100,2,65,65],[100,3,65,66],[100,4,65,67],[101,0,65,68],[101,3]],"functionMap":{"names":["<global>","cropAndResize_","util.assert$argument_1"],"mappings":"AAA;AC4C;mCCK;sCDC;4DCC;wCDC;qECC;wCDC;uCCC;oCDC;sDCC,2DD;+DCC,6DD;CDK"},"hasCjsExports":false},"type":"js/module"}]}