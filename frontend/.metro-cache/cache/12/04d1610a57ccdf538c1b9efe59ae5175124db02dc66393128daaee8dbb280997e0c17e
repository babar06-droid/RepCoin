{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":53,"index":756}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"BatchNormProgram\", {\n    enumerable: true,\n    get: function () {\n      return BatchNormProgram;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  /**\n   * @license\n   * Copyright 2017 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  class BatchNormProgram {\n    constructor(xShape, meanShape, varianceShape, offsetShape, scaleShape, varianceEpsilon) {\n      this.outputShape = [];\n      this.variableNames = ['x', 'mean', 'variance'];\n      _tensorflowTfjsCore.backend_util.assertAndGetBroadcastShape(xShape, meanShape);\n      _tensorflowTfjsCore.backend_util.assertAndGetBroadcastShape(xShape, varianceShape);\n      let offsetSnippet = '0.0';\n      if (offsetShape != null) {\n        _tensorflowTfjsCore.backend_util.assertAndGetBroadcastShape(xShape, offsetShape);\n        this.variableNames.push('offset');\n        offsetSnippet = 'getOffsetAtOutCoords()';\n      }\n      let scaleSnippet = '1.0';\n      if (scaleShape != null) {\n        _tensorflowTfjsCore.backend_util.assertAndGetBroadcastShape(xShape, scaleShape);\n        this.variableNames.push('scale');\n        scaleSnippet = 'getScaleAtOutCoords()';\n      }\n      this.outputShape = xShape;\n      this.userCode = `\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${offsetSnippet};\n        float scale = ${scaleSnippet};\n        float inv = scale * inversesqrt(variance + float(${varianceEpsilon}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `;\n    }\n  }\n});","lineCount":63,"map":[[7,2,18,0,"Object"],[7,8,18,0],[7,9,18,0,"defineProperty"],[7,23,18,0],[7,24,18,0,"exports"],[7,31,18,0],[8,4,18,0,"enumerable"],[8,14,18,0],[9,4,18,0,"get"],[9,7,18,0],[9,18,18,0,"get"],[9,19,18,0],[10,6,18,0],[10,13,18,0,"BatchNormProgram"],[10,29,18,0],[11,4,18,0],[12,2,18,0],[13,2,17,0],[13,6,17,0,"_tensorflowTfjsCore"],[13,25,17,0],[13,28,17,0,"require"],[13,35,17,0],[13,36,17,0,"_dependencyMap"],[13,50,17,0],[14,2,1,0],[15,0,2,0],[16,0,3,0],[17,0,4,0],[18,0,5,0],[19,0,6,0],[20,0,7,0],[21,0,8,0],[22,0,9,0],[23,0,10,0],[24,0,11,0],[25,0,12,0],[26,0,13,0],[27,0,14,0],[28,0,15,0],[29,0,16,0],[31,2,18,7],[31,8,18,13,"BatchNormProgram"],[31,24,18,29],[31,25,18,30],[32,4,19,4,"constructor"],[32,15,19,15,"constructor"],[32,16,19,16,"xShape"],[32,22,19,22],[32,24,19,24,"meanShape"],[32,33,19,33],[32,35,19,35,"varianceShape"],[32,48,19,48],[32,50,19,50,"offsetShape"],[32,61,19,61],[32,63,19,63,"scaleShape"],[32,73,19,73],[32,75,19,75,"varianceEpsilon"],[32,90,19,90],[32,92,19,92],[33,6,20,8],[33,10,20,12],[33,11,20,13,"outputShape"],[33,22,20,24],[33,25,20,27],[33,27,20,29],[34,6,21,8],[34,10,21,12],[34,11,21,13,"variableNames"],[34,24,21,26],[34,27,21,29],[34,28,21,30],[34,31,21,33],[34,33,21,35],[34,39,21,41],[34,41,21,43],[34,51,21,53],[34,52,21,54],[35,6,22,8,"backend_util"],[35,25,22,20],[35,26,22,20,"backend_util"],[35,38,22,20],[35,39,22,21,"assertAndGetBroadcastShape"],[35,65,22,47],[35,66,22,48,"xShape"],[35,72,22,54],[35,74,22,56,"meanShape"],[35,83,22,65],[35,84,22,66],[36,6,23,8,"backend_util"],[36,25,23,20],[36,26,23,20,"backend_util"],[36,38,23,20],[36,39,23,21,"assertAndGetBroadcastShape"],[36,65,23,47],[36,66,23,48,"xShape"],[36,72,23,54],[36,74,23,56,"varianceShape"],[36,87,23,69],[36,88,23,70],[37,6,24,8],[37,10,24,12,"offsetSnippet"],[37,23,24,25],[37,26,24,28],[37,31,24,33],[38,6,25,8],[38,10,25,12,"offsetShape"],[38,21,25,23],[38,25,25,27],[38,29,25,31],[38,31,25,33],[39,8,26,12,"backend_util"],[39,27,26,24],[39,28,26,24,"backend_util"],[39,40,26,24],[39,41,26,25,"assertAndGetBroadcastShape"],[39,67,26,51],[39,68,26,52,"xShape"],[39,74,26,58],[39,76,26,60,"offsetShape"],[39,87,26,71],[39,88,26,72],[40,8,27,12],[40,12,27,16],[40,13,27,17,"variableNames"],[40,26,27,30],[40,27,27,31,"push"],[40,31,27,35],[40,32,27,36],[40,40,27,44],[40,41,27,45],[41,8,28,12,"offsetSnippet"],[41,21,28,25],[41,24,28,28],[41,48,28,52],[42,6,29,8],[43,6,30,8],[43,10,30,12,"scaleSnippet"],[43,22,30,24],[43,25,30,27],[43,30,30,32],[44,6,31,8],[44,10,31,12,"scaleShape"],[44,20,31,22],[44,24,31,26],[44,28,31,30],[44,30,31,32],[45,8,32,12,"backend_util"],[45,27,32,24],[45,28,32,24,"backend_util"],[45,40,32,24],[45,41,32,25,"assertAndGetBroadcastShape"],[45,67,32,51],[45,68,32,52,"xShape"],[45,74,32,58],[45,76,32,60,"scaleShape"],[45,86,32,70],[45,87,32,71],[46,8,33,12],[46,12,33,16],[46,13,33,17,"variableNames"],[46,26,33,30],[46,27,33,31,"push"],[46,31,33,35],[46,32,33,36],[46,39,33,43],[46,40,33,44],[47,8,34,12,"scaleSnippet"],[47,20,34,24],[47,23,34,27],[47,46,34,50],[48,6,35,8],[49,6,36,8],[49,10,36,12],[49,11,36,13,"outputShape"],[49,22,36,24],[49,25,36,27,"xShape"],[49,31,36,33],[50,6,37,8],[50,10,37,12],[50,11,37,13,"userCode"],[50,19,37,21],[50,22,37,24],[51,0,38,0],[52,0,39,0],[53,0,40,0],[54,0,41,0],[55,0,42,0],[55,25,42,25,"offsetSnippet"],[55,38,42,38],[56,0,43,0],[56,24,43,24,"scaleSnippet"],[56,36,43,36],[57,0,44,0],[57,59,44,59,"varianceEpsilon"],[57,74,44,74],[58,0,45,0],[59,0,46,0],[60,0,47,0],[60,5,47,5],[61,4,48,4],[62,2,49,0],[63,0,49,1],[63,3]],"functionMap":{"names":["<global>","BatchNormProgram","BatchNormProgram#constructor"],"mappings":"AAA;OCiB;ICC;KD6B;CDC"},"hasCjsExports":false},"type":"js/module"}]}