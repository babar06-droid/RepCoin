{"dependencies":[{"name":"../../tensor_util_env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":56,"index":759}}],"key":"xfSGNGkCJdZhfQ673y/6d+no2yU=","exportNames":["*"],"imports":1}},{"name":"../../util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":760},"end":{"line":18,"column":47,"index":807}}],"key":"OiLVMoS12Mp3xgHkQeTdnQIBX6Q=","exportNames":["*"],"imports":1}},{"name":"../abs","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":808},"end":{"line":19,"column":29,"index":837}}],"key":"Nl0FY0FYJAJat87d2xJ8W/Uz/QE=","exportNames":["*"],"imports":1}},{"name":"../add","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":838},"end":{"line":20,"column":29,"index":867}}],"key":"S+ID0fW8sc9iwSUS6COac9En52o=","exportNames":["*"],"imports":1}},{"name":"../loss_ops_utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":868},"end":{"line":21,"column":46,"index":914}}],"key":"DAPyQ0ldu7pmRn3jRz+wBfmq/uQ=","exportNames":["*"],"imports":1}},{"name":"../minimum","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":22,"column":0,"index":915},"end":{"line":22,"column":37,"index":952}}],"key":"DG2Ts+fX15219OO561/F/dCACXE=","exportNames":["*"],"imports":1}},{"name":"../mul","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":23,"column":0,"index":953},"end":{"line":23,"column":29,"index":982}}],"key":"IV74B7MBUPoSZUTM5ocGXe9fIRE=","exportNames":["*"],"imports":1}},{"name":"../operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":24,"column":0,"index":983},"end":{"line":24,"column":34,"index":1017}}],"key":"fQilPqfSvhAHjyfKT0P4wel7jE4=","exportNames":["*"],"imports":1}},{"name":"../scalar","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":25,"column":0,"index":1018},"end":{"line":25,"column":35,"index":1053}}],"key":"u3TTm6Tdu30WLt+AMD6qMWu+U20=","exportNames":["*"],"imports":1}},{"name":"../square","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":26,"column":0,"index":1054},"end":{"line":26,"column":35,"index":1089}}],"key":"BMVc/seKk4djYuOhF8w2omyCHSw=","exportNames":["*"],"imports":1}},{"name":"../sub","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":27,"column":0,"index":1090},"end":{"line":27,"column":29,"index":1119}}],"key":"VHM5JuAkEzgPhqMJH9y/GvrNozc=","exportNames":["*"],"imports":1}},{"name":"./compute_weighted_loss","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":28,"column":0,"index":1120},"end":{"line":28,"column":62,"index":1182}}],"key":"GQ6sNEw27lLpLYC7mByWPpwMOcY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"huberLoss\", {\n    enumerable: true,\n    get: function () {\n      return huberLoss;\n    }\n  });\n  var _tensor_util_env = require(_dependencyMap[0], \"../../tensor_util_env\");\n  var _util = require(_dependencyMap[1], \"../../util\");\n  var _abs = require(_dependencyMap[2], \"../abs\");\n  var _add = require(_dependencyMap[3], \"../add\");\n  var _loss_ops_utils = require(_dependencyMap[4], \"../loss_ops_utils\");\n  var _minimum = require(_dependencyMap[5], \"../minimum\");\n  var _mul = require(_dependencyMap[6], \"../mul\");\n  var _operation = require(_dependencyMap[7], \"../operation\");\n  var _scalar = require(_dependencyMap[8], \"../scalar\");\n  var _square = require(_dependencyMap[9], \"../square\");\n  var _sub = require(_dependencyMap[10], \"../sub\");\n  var _compute_weighted_loss = require(_dependencyMap[11], \"./compute_weighted_loss\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  /**\n   * Computes the Huber loss between two tensors.\n   *\n   * @param labels The ground truth output tensor, same dimensions as\n   *    'predictions'.\n   * @param predictions The predicted outputs.\n   * @param weights Tensor whose rank is either 0, or the same rank as\n   *    `labels`, and must be broadcastable to `labels` (i.e., all dimensions\n   *    must be either `1`, or the same as the corresponding `losses`\n   *    dimension).\n   * @param delta Point where Huber loss changes from quadratic to linear.\n   * @param reduction Type of reduction to apply to loss. Should be of type\n   *    `Reduction`.\n   *\n   * @doc {heading: 'Training', subheading: 'Losses', namespace: 'losses'}\n   */\n  function huberLoss_(labels, predictions, weights, delta = 1.0, reduction = _loss_ops_utils.Reduction.SUM_BY_NONZERO_WEIGHTS) {\n    const $labels = (0, _tensor_util_env.convertToTensor)(labels, 'labels', 'huberLoss');\n    const $predictions = (0, _tensor_util_env.convertToTensor)(predictions, 'predictions', 'huberLoss');\n    let $weights = null;\n    if (weights != null) {\n      $weights = (0, _tensor_util_env.convertToTensor)(weights, 'weights', 'huberLoss');\n    }\n    (0, _util.assertShapesMatch)($labels.shape, $predictions.shape, 'Error in huberLoss: ');\n    const deltaScalar = (0, _scalar.scalar)(delta);\n    const error = (0, _abs.abs)((0, _sub.sub)($predictions, $labels));\n    const quadratic = (0, _minimum.minimum)(error, deltaScalar);\n    const linear = (0, _sub.sub)(error, quadratic);\n    const losses = (0, _add.add)((0, _mul.mul)((0, _scalar.scalar)(0.5), (0, _square.square)(quadratic)), (0, _mul.mul)(deltaScalar, linear));\n    return (0, _compute_weighted_loss.computeWeightedLoss)(losses, $weights, reduction);\n  }\n  const huberLoss = /* @__PURE__ */(0, _operation.op)({\n    huberLoss_\n  });\n});","lineCount":76,"map":[[7,2,60,0,"Object"],[7,8,60,0],[7,9,60,0,"defineProperty"],[7,23,60,0],[7,24,60,0,"exports"],[7,31,60,0],[8,4,60,0,"enumerable"],[8,14,60,0],[9,4,60,0,"get"],[9,7,60,0],[9,18,60,0,"get"],[9,19,60,0],[10,6,60,0],[10,13,60,0,"huberLoss"],[10,22,60,0],[11,4,60,0],[12,2,60,0],[13,2,17,0],[13,6,17,0,"_tensor_util_env"],[13,22,17,0],[13,25,17,0,"require"],[13,32,17,0],[13,33,17,0,"_dependencyMap"],[13,47,17,0],[14,2,18,0],[14,6,18,0,"_util"],[14,11,18,0],[14,14,18,0,"require"],[14,21,18,0],[14,22,18,0,"_dependencyMap"],[14,36,18,0],[15,2,19,0],[15,6,19,0,"_abs"],[15,10,19,0],[15,13,19,0,"require"],[15,20,19,0],[15,21,19,0,"_dependencyMap"],[15,35,19,0],[16,2,20,0],[16,6,20,0,"_add"],[16,10,20,0],[16,13,20,0,"require"],[16,20,20,0],[16,21,20,0,"_dependencyMap"],[16,35,20,0],[17,2,21,0],[17,6,21,0,"_loss_ops_utils"],[17,21,21,0],[17,24,21,0,"require"],[17,31,21,0],[17,32,21,0,"_dependencyMap"],[17,46,21,0],[18,2,22,0],[18,6,22,0,"_minimum"],[18,14,22,0],[18,17,22,0,"require"],[18,24,22,0],[18,25,22,0,"_dependencyMap"],[18,39,22,0],[19,2,23,0],[19,6,23,0,"_mul"],[19,10,23,0],[19,13,23,0,"require"],[19,20,23,0],[19,21,23,0,"_dependencyMap"],[19,35,23,0],[20,2,24,0],[20,6,24,0,"_operation"],[20,16,24,0],[20,19,24,0,"require"],[20,26,24,0],[20,27,24,0,"_dependencyMap"],[20,41,24,0],[21,2,25,0],[21,6,25,0,"_scalar"],[21,13,25,0],[21,16,25,0,"require"],[21,23,25,0],[21,24,25,0,"_dependencyMap"],[21,38,25,0],[22,2,26,0],[22,6,26,0,"_square"],[22,13,26,0],[22,16,26,0,"require"],[22,23,26,0],[22,24,26,0,"_dependencyMap"],[22,38,26,0],[23,2,27,0],[23,6,27,0,"_sub"],[23,10,27,0],[23,13,27,0,"require"],[23,20,27,0],[23,21,27,0,"_dependencyMap"],[23,35,27,0],[24,2,28,0],[24,6,28,0,"_compute_weighted_loss"],[24,28,28,0],[24,31,28,0,"require"],[24,38,28,0],[24,39,28,0,"_dependencyMap"],[24,53,28,0],[25,2,1,0],[26,0,2,0],[27,0,3,0],[28,0,4,0],[29,0,5,0],[30,0,6,0],[31,0,7,0],[32,0,8,0],[33,0,9,0],[34,0,10,0],[35,0,11,0],[36,0,12,0],[37,0,13,0],[38,0,14,0],[39,0,15,0],[40,0,16,0],[42,2,29,0],[43,0,30,0],[44,0,31,0],[45,0,32,0],[46,0,33,0],[47,0,34,0],[48,0,35,0],[49,0,36,0],[50,0,37,0],[51,0,38,0],[52,0,39,0],[53,0,40,0],[54,0,41,0],[55,0,42,0],[56,0,43,0],[57,0,44,0],[58,2,45,0],[58,11,45,9,"huberLoss_"],[58,21,45,19,"huberLoss_"],[58,22,45,20,"labels"],[58,28,45,26],[58,30,45,28,"predictions"],[58,41,45,39],[58,43,45,41,"weights"],[58,50,45,48],[58,52,45,50,"delta"],[58,57,45,55],[58,60,45,58],[58,63,45,61],[58,65,45,63,"reduction"],[58,74,45,72],[58,77,45,75,"Reduction"],[58,92,45,84],[58,93,45,84,"Reduction"],[58,102,45,84],[58,103,45,85,"SUM_BY_NONZERO_WEIGHTS"],[58,125,45,107],[58,127,45,109],[59,4,46,4],[59,10,46,10,"$labels"],[59,17,46,17],[59,20,46,20],[59,24,46,20,"convertToTensor"],[59,40,46,35],[59,41,46,35,"convertToTensor"],[59,56,46,35],[59,58,46,36,"labels"],[59,64,46,42],[59,66,46,44],[59,74,46,52],[59,76,46,54],[59,87,46,65],[59,88,46,66],[60,4,47,4],[60,10,47,10,"$predictions"],[60,22,47,22],[60,25,47,25],[60,29,47,25,"convertToTensor"],[60,45,47,40],[60,46,47,40,"convertToTensor"],[60,61,47,40],[60,63,47,41,"predictions"],[60,74,47,52],[60,76,47,54],[60,89,47,67],[60,91,47,69],[60,102,47,80],[60,103,47,81],[61,4,48,4],[61,8,48,8,"$weights"],[61,16,48,16],[61,19,48,19],[61,23,48,23],[62,4,49,4],[62,8,49,8,"weights"],[62,15,49,15],[62,19,49,19],[62,23,49,23],[62,25,49,25],[63,6,50,8,"$weights"],[63,14,50,16],[63,17,50,19],[63,21,50,19,"convertToTensor"],[63,37,50,34],[63,38,50,34,"convertToTensor"],[63,53,50,34],[63,55,50,35,"weights"],[63,62,50,42],[63,64,50,44],[63,73,50,53],[63,75,50,55],[63,86,50,66],[63,87,50,67],[64,4,51,4],[65,4,52,4],[65,8,52,4,"assertShapesMatch"],[65,13,52,21],[65,14,52,21,"assertShapesMatch"],[65,31,52,21],[65,33,52,22,"$labels"],[65,40,52,29],[65,41,52,30,"shape"],[65,46,52,35],[65,48,52,37,"$predictions"],[65,60,52,49],[65,61,52,50,"shape"],[65,66,52,55],[65,68,52,57],[65,90,52,79],[65,91,52,80],[66,4,53,4],[66,10,53,10,"deltaScalar"],[66,21,53,21],[66,24,53,24],[66,28,53,24,"scalar"],[66,35,53,30],[66,36,53,30,"scalar"],[66,42,53,30],[66,44,53,31,"delta"],[66,49,53,36],[66,50,53,37],[67,4,54,4],[67,10,54,10,"error"],[67,15,54,15],[67,18,54,18],[67,22,54,18,"abs"],[67,26,54,21],[67,27,54,21,"abs"],[67,30,54,21],[67,32,54,22],[67,36,54,22,"sub"],[67,40,54,25],[67,41,54,25,"sub"],[67,44,54,25],[67,46,54,26,"$predictions"],[67,58,54,38],[67,60,54,40,"$labels"],[67,67,54,47],[67,68,54,48],[67,69,54,49],[68,4,55,4],[68,10,55,10,"quadratic"],[68,19,55,19],[68,22,55,22],[68,26,55,22,"minimum"],[68,34,55,29],[68,35,55,29,"minimum"],[68,42,55,29],[68,44,55,30,"error"],[68,49,55,35],[68,51,55,37,"deltaScalar"],[68,62,55,48],[68,63,55,49],[69,4,56,4],[69,10,56,10,"linear"],[69,16,56,16],[69,19,56,19],[69,23,56,19,"sub"],[69,27,56,22],[69,28,56,22,"sub"],[69,31,56,22],[69,33,56,23,"error"],[69,38,56,28],[69,40,56,30,"quadratic"],[69,49,56,39],[69,50,56,40],[70,4,57,4],[70,10,57,10,"losses"],[70,16,57,16],[70,19,57,19],[70,23,57,19,"add"],[70,27,57,22],[70,28,57,22,"add"],[70,31,57,22],[70,33,57,23],[70,37,57,23,"mul"],[70,41,57,26],[70,42,57,26,"mul"],[70,45,57,26],[70,47,57,27],[70,51,57,27,"scalar"],[70,58,57,33],[70,59,57,33,"scalar"],[70,65,57,33],[70,67,57,34],[70,70,57,37],[70,71,57,38],[70,73,57,40],[70,77,57,40,"square"],[70,84,57,46],[70,85,57,46,"square"],[70,91,57,46],[70,93,57,47,"quadratic"],[70,102,57,56],[70,103,57,57],[70,104,57,58],[70,106,57,60],[70,110,57,60,"mul"],[70,114,57,63],[70,115,57,63,"mul"],[70,118,57,63],[70,120,57,64,"deltaScalar"],[70,131,57,75],[70,133,57,77,"linear"],[70,139,57,83],[70,140,57,84],[70,141,57,85],[71,4,58,4],[71,11,58,11],[71,15,58,11,"computeWeightedLoss"],[71,37,58,30],[71,38,58,30,"computeWeightedLoss"],[71,57,58,30],[71,59,58,31,"losses"],[71,65,58,37],[71,67,58,39,"$weights"],[71,75,58,47],[71,77,58,49,"reduction"],[71,86,58,58],[71,87,58,59],[72,2,59,0],[73,2,60,7],[73,8,60,13,"huberLoss"],[73,17,60,22],[73,20,60,25],[73,35,60,41],[73,39,60,41,"op"],[73,49,60,43],[73,50,60,43,"op"],[73,52,60,43],[73,54,60,44],[74,4,60,46,"huberLoss_"],[75,2,60,57],[75,3,60,58],[75,4,60,59],[76,0,60,60],[76,3]],"functionMap":{"names":["<global>","huberLoss_"],"mappings":"AAA;AC4C;CDc"},"hasCjsExports":false},"type":"js/module"}]}