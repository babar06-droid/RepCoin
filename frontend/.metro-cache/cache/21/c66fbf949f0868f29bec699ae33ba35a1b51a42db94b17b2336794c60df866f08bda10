{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":69,"index":772}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}},{"name":"../scatter_gpu","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":773},"end":{"line":18,"column":48,"index":821}}],"key":"GRK5YsbRkKChK693sWTEUrzdWBE=","exportNames":["*"],"imports":1}},{"name":"../scatter_packed_gpu","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":822},"end":{"line":19,"column":61,"index":883}}],"key":"w+XcpLjxmzpPy59uEthtPZtK2vU=","exportNames":["*"],"imports":1}},{"name":"./Reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":884},"end":{"line":20,"column":36,"index":920}}],"key":"EUWK+oKi/AwokPOQ1jng5DYfQSc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.scatterNd = scatterNd;\n  Object.defineProperty(exports, \"scatterNdConfig\", {\n    enumerable: true,\n    get: function () {\n      return scatterNdConfig;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  var _scatter_gpu = require(_dependencyMap[1], \"../scatter_gpu\");\n  var _scatter_packed_gpu = require(_dependencyMap[2], \"../scatter_packed_gpu\");\n  var _Reshape = require(_dependencyMap[3], \"./Reshape\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  function scatterNd(args) {\n    const {\n      inputs,\n      backend,\n      attrs\n    } = args;\n    const {\n      indices,\n      updates\n    } = inputs;\n    const {\n      shape\n    } = attrs;\n    const {\n      sliceRank,\n      numUpdates,\n      sliceSize,\n      strides,\n      outputSize\n    } = _tensorflowTfjsCore.backend_util.calculateShapes(updates, indices, shape);\n    const flattenShape = [outputSize / sliceSize, sliceSize];\n    if (outputSize === 0) {\n      return backend.makeTensorInfo(shape, indices.dtype);\n    }\n    const flattenIndices = (0, _Reshape.reshape)({\n      inputs: {\n        x: indices\n      },\n      backend,\n      attrs: {\n        shape: [numUpdates, sliceRank]\n      }\n    });\n    const flattenX = (0, _Reshape.reshape)({\n      inputs: {\n        x: updates\n      },\n      backend,\n      attrs: {\n        shape: [numUpdates, sliceSize]\n      }\n    });\n    const defaultValue = backend.makeTensorInfo([], 'float32', new Float32Array([0])); // scalar(0)\n    let program;\n    if ((0, _tensorflowTfjsCore.env)().getBool('WEBGL_PACK')) {\n      program = new _scatter_packed_gpu.ScatterPackedProgram(numUpdates, sliceRank, flattenIndices.shape.length, flattenX.shape.length, strides, flattenShape);\n    } else {\n      program = new _scatter_gpu.ScatterProgram(numUpdates, sliceRank, flattenIndices.shape.length, flattenX.shape.length, strides, flattenShape);\n    }\n    const res = backend.runWebGLProgram(program, [flattenX, flattenIndices, defaultValue], flattenX.dtype);\n    const reshaped = (0, _Reshape.reshape)({\n      inputs: {\n        x: res\n      },\n      backend,\n      attrs: {\n        shape\n      }\n    });\n    backend.disposeIntermediateTensorInfo(flattenIndices);\n    backend.disposeIntermediateTensorInfo(flattenX);\n    backend.disposeIntermediateTensorInfo(res);\n    backend.disposeIntermediateTensorInfo(defaultValue);\n    return reshaped;\n  }\n  const scatterNdConfig = {\n    kernelName: _tensorflowTfjsCore.ScatterNd,\n    backendName: 'webgl',\n    kernelFunc: scatterNd\n  };\n});","lineCount":105,"map":[[7,2,21,0,"exports"],[7,9,21,0],[7,10,21,0,"scatterNd"],[7,19,21,0],[7,22,21,0,"scatterNd"],[7,31,21,0],[8,2,48,0,"Object"],[8,8,48,0],[8,9,48,0,"defineProperty"],[8,23,48,0],[8,24,48,0,"exports"],[8,31,48,0],[9,4,48,0,"enumerable"],[9,14,48,0],[10,4,48,0,"get"],[10,7,48,0],[10,18,48,0,"get"],[10,19,48,0],[11,6,48,0],[11,13,48,0,"scatterNdConfig"],[11,28,48,0],[12,4,48,0],[13,2,48,0],[14,2,17,0],[14,6,17,0,"_tensorflowTfjsCore"],[14,25,17,0],[14,28,17,0,"require"],[14,35,17,0],[14,36,17,0,"_dependencyMap"],[14,50,17,0],[15,2,18,0],[15,6,18,0,"_scatter_gpu"],[15,18,18,0],[15,21,18,0,"require"],[15,28,18,0],[15,29,18,0,"_dependencyMap"],[15,43,18,0],[16,2,19,0],[16,6,19,0,"_scatter_packed_gpu"],[16,25,19,0],[16,28,19,0,"require"],[16,35,19,0],[16,36,19,0,"_dependencyMap"],[16,50,19,0],[17,2,20,0],[17,6,20,0,"_Reshape"],[17,14,20,0],[17,17,20,0,"require"],[17,24,20,0],[17,25,20,0,"_dependencyMap"],[17,39,20,0],[18,2,1,0],[19,0,2,0],[20,0,3,0],[21,0,4,0],[22,0,5,0],[23,0,6,0],[24,0,7,0],[25,0,8,0],[26,0,9,0],[27,0,10,0],[28,0,11,0],[29,0,12,0],[30,0,13,0],[31,0,14,0],[32,0,15,0],[33,0,16,0],[35,2,21,7],[35,11,21,16,"scatterNd"],[35,20,21,25,"scatterNd"],[35,21,21,26,"args"],[35,25,21,30],[35,27,21,32],[36,4,22,4],[36,10,22,10],[37,6,22,12,"inputs"],[37,12,22,18],[38,6,22,20,"backend"],[38,13,22,27],[39,6,22,29,"attrs"],[40,4,22,35],[40,5,22,36],[40,8,22,39,"args"],[40,12,22,43],[41,4,23,4],[41,10,23,10],[42,6,23,12,"indices"],[42,13,23,19],[43,6,23,21,"updates"],[44,4,23,29],[44,5,23,30],[44,8,23,33,"inputs"],[44,14,23,39],[45,4,24,4],[45,10,24,10],[46,6,24,12,"shape"],[47,4,24,18],[47,5,24,19],[47,8,24,22,"attrs"],[47,13,24,27],[48,4,25,4],[48,10,25,10],[49,6,25,12,"sliceRank"],[49,15,25,21],[50,6,25,23,"numUpdates"],[50,16,25,33],[51,6,25,35,"sliceSize"],[51,15,25,44],[52,6,25,46,"strides"],[52,13,25,53],[53,6,25,55,"outputSize"],[54,4,25,66],[54,5,25,67],[54,8,25,70,"backend_util"],[54,27,25,82],[54,28,25,82,"backend_util"],[54,40,25,82],[54,41,25,83,"calculateShapes"],[54,56,25,98],[54,57,25,99,"updates"],[54,64,25,106],[54,66,25,108,"indices"],[54,73,25,115],[54,75,25,117,"shape"],[54,80,25,122],[54,81,25,123],[55,4,26,4],[55,10,26,10,"flattenShape"],[55,22,26,22],[55,25,26,25],[55,26,26,26,"outputSize"],[55,36,26,36],[55,39,26,39,"sliceSize"],[55,48,26,48],[55,50,26,50,"sliceSize"],[55,59,26,59],[55,60,26,60],[56,4,27,4],[56,8,27,8,"outputSize"],[56,18,27,18],[56,23,27,23],[56,24,27,24],[56,26,27,26],[57,6,28,8],[57,13,28,15,"backend"],[57,20,28,22],[57,21,28,23,"makeTensorInfo"],[57,35,28,37],[57,36,28,38,"shape"],[57,41,28,43],[57,43,28,45,"indices"],[57,50,28,52],[57,51,28,53,"dtype"],[57,56,28,58],[57,57,28,59],[58,4,29,4],[59,4,30,4],[59,10,30,10,"flattenIndices"],[59,24,30,24],[59,27,30,27],[59,31,30,27,"reshape"],[59,39,30,34],[59,40,30,34,"reshape"],[59,47,30,34],[59,49,30,35],[60,6,30,37,"inputs"],[60,12,30,43],[60,14,30,45],[61,8,30,47,"x"],[61,9,30,48],[61,11,30,50,"indices"],[62,6,30,58],[62,7,30,59],[63,6,30,61,"backend"],[63,13,30,68],[64,6,30,70,"attrs"],[64,11,30,75],[64,13,30,77],[65,8,30,79,"shape"],[65,13,30,84],[65,15,30,86],[65,16,30,87,"numUpdates"],[65,26,30,97],[65,28,30,99,"sliceRank"],[65,37,30,108],[66,6,30,110],[67,4,30,112],[67,5,30,113],[67,6,30,114],[68,4,31,4],[68,10,31,10,"flattenX"],[68,18,31,18],[68,21,31,21],[68,25,31,21,"reshape"],[68,33,31,28],[68,34,31,28,"reshape"],[68,41,31,28],[68,43,31,29],[69,6,31,31,"inputs"],[69,12,31,37],[69,14,31,39],[70,8,31,41,"x"],[70,9,31,42],[70,11,31,44,"updates"],[71,6,31,52],[71,7,31,53],[72,6,31,55,"backend"],[72,13,31,62],[73,6,31,64,"attrs"],[73,11,31,69],[73,13,31,71],[74,8,31,73,"shape"],[74,13,31,78],[74,15,31,80],[74,16,31,81,"numUpdates"],[74,26,31,91],[74,28,31,93,"sliceSize"],[74,37,31,102],[75,6,31,104],[76,4,31,106],[76,5,31,107],[76,6,31,108],[77,4,32,4],[77,10,32,10,"defaultValue"],[77,22,32,22],[77,25,32,25,"backend"],[77,32,32,32],[77,33,32,33,"makeTensorInfo"],[77,47,32,47],[77,48,32,48],[77,50,32,50],[77,52,32,52],[77,61,32,61],[77,63,32,63],[77,67,32,67,"Float32Array"],[77,79,32,79],[77,80,32,80],[77,81,32,81],[77,82,32,82],[77,83,32,83],[77,84,32,84],[77,85,32,85],[77,86,32,86],[77,87,32,87],[78,4,33,4],[78,8,33,8,"program"],[78,15,33,15],[79,4,34,4],[79,8,34,8],[79,12,34,8,"env"],[79,31,34,11],[79,32,34,11,"env"],[79,35,34,11],[79,37,34,12],[79,38,34,13],[79,39,34,14,"getBool"],[79,46,34,21],[79,47,34,22],[79,59,34,34],[79,60,34,35],[79,62,34,37],[80,6,35,8,"program"],[80,13,35,15],[80,16,35,18],[80,20,35,22,"ScatterPackedProgram"],[80,39,35,42],[80,40,35,42,"ScatterPackedProgram"],[80,60,35,42],[80,61,35,43,"numUpdates"],[80,71,35,53],[80,73,35,55,"sliceRank"],[80,82,35,64],[80,84,35,66,"flattenIndices"],[80,98,35,80],[80,99,35,81,"shape"],[80,104,35,86],[80,105,35,87,"length"],[80,111,35,93],[80,113,35,95,"flattenX"],[80,121,35,103],[80,122,35,104,"shape"],[80,127,35,109],[80,128,35,110,"length"],[80,134,35,116],[80,136,35,118,"strides"],[80,143,35,125],[80,145,35,127,"flattenShape"],[80,157,35,139],[80,158,35,140],[81,4,36,4],[81,5,36,5],[81,11,37,9],[82,6,38,8,"program"],[82,13,38,15],[82,16,38,18],[82,20,38,22,"ScatterProgram"],[82,32,38,36],[82,33,38,36,"ScatterProgram"],[82,47,38,36],[82,48,38,37,"numUpdates"],[82,58,38,47],[82,60,38,49,"sliceRank"],[82,69,38,58],[82,71,38,60,"flattenIndices"],[82,85,38,74],[82,86,38,75,"shape"],[82,91,38,80],[82,92,38,81,"length"],[82,98,38,87],[82,100,38,89,"flattenX"],[82,108,38,97],[82,109,38,98,"shape"],[82,114,38,103],[82,115,38,104,"length"],[82,121,38,110],[82,123,38,112,"strides"],[82,130,38,119],[82,132,38,121,"flattenShape"],[82,144,38,133],[82,145,38,134],[83,4,39,4],[84,4,40,4],[84,10,40,10,"res"],[84,13,40,13],[84,16,40,16,"backend"],[84,23,40,23],[84,24,40,24,"runWebGLProgram"],[84,39,40,39],[84,40,40,40,"program"],[84,47,40,47],[84,49,40,49],[84,50,40,50,"flattenX"],[84,58,40,58],[84,60,40,60,"flattenIndices"],[84,74,40,74],[84,76,40,76,"defaultValue"],[84,88,40,88],[84,89,40,89],[84,91,40,91,"flattenX"],[84,99,40,99],[84,100,40,100,"dtype"],[84,105,40,105],[84,106,40,106],[85,4,41,4],[85,10,41,10,"reshaped"],[85,18,41,18],[85,21,41,21],[85,25,41,21,"reshape"],[85,33,41,28],[85,34,41,28,"reshape"],[85,41,41,28],[85,43,41,29],[86,6,41,31,"inputs"],[86,12,41,37],[86,14,41,39],[87,8,41,41,"x"],[87,9,41,42],[87,11,41,44,"res"],[88,6,41,48],[88,7,41,49],[89,6,41,51,"backend"],[89,13,41,58],[90,6,41,60,"attrs"],[90,11,41,65],[90,13,41,67],[91,8,41,69,"shape"],[92,6,41,75],[93,4,41,77],[93,5,41,78],[93,6,41,79],[94,4,42,4,"backend"],[94,11,42,11],[94,12,42,12,"disposeIntermediateTensorInfo"],[94,41,42,41],[94,42,42,42,"flattenIndices"],[94,56,42,56],[94,57,42,57],[95,4,43,4,"backend"],[95,11,43,11],[95,12,43,12,"disposeIntermediateTensorInfo"],[95,41,43,41],[95,42,43,42,"flattenX"],[95,50,43,50],[95,51,43,51],[96,4,44,4,"backend"],[96,11,44,11],[96,12,44,12,"disposeIntermediateTensorInfo"],[96,41,44,41],[96,42,44,42,"res"],[96,45,44,45],[96,46,44,46],[97,4,45,4,"backend"],[97,11,45,11],[97,12,45,12,"disposeIntermediateTensorInfo"],[97,41,45,41],[97,42,45,42,"defaultValue"],[97,54,45,54],[97,55,45,55],[98,4,46,4],[98,11,46,11,"reshaped"],[98,19,46,19],[99,2,47,0],[100,2,48,7],[100,8,48,13,"scatterNdConfig"],[100,23,48,28],[100,26,48,31],[101,4,49,4,"kernelName"],[101,14,49,14],[101,16,49,16,"ScatterNd"],[101,35,49,25],[101,36,49,25,"ScatterNd"],[101,45,49,25],[102,4,50,4,"backendName"],[102,15,50,15],[102,17,50,17],[102,24,50,24],[103,4,51,4,"kernelFunc"],[103,14,51,14],[103,16,51,16,"scatterNd"],[104,2,52,0],[104,3,52,1],[105,0,52,2],[105,3]],"functionMap":{"names":["<global>","scatterNd"],"mappings":"AAA;OCoB;CD0B"},"hasCjsExports":false},"type":"js/module"}]}