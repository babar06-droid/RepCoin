{"dependencies":[{"name":"../kernel_names","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":39,"index":742}}],"key":"gQVznmdGA0uoBQvR5Q4/qW+ITHg=","exportNames":["*"],"imports":1}},{"name":"../ops/add","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":743},"end":{"line":18,"column":33,"index":776}}],"key":"7ECkFW8cIZ5BD7vBhwC0T14nXmk=","exportNames":["*"],"imports":1}},{"name":"../ops/slice","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":777},"end":{"line":19,"column":37,"index":814}}],"key":"Vb2kmDOOXuYTybrp7oIv11Dhk7A=","exportNames":["*"],"imports":1}},{"name":"../ops/zeros_like","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":815},"end":{"line":20,"column":46,"index":861}}],"key":"W8oXMgkxT4zTnXtvBRWiid+nzbc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"tileGradConfig\", {\n    enumerable: true,\n    get: function () {\n      return tileGradConfig;\n    }\n  });\n  var _kernel_names = require(_dependencyMap[0], \"../kernel_names\");\n  var _opsAdd = require(_dependencyMap[1], \"../ops/add\");\n  var _opsSlice = require(_dependencyMap[2], \"../ops/slice\");\n  var _opsZeros_like = require(_dependencyMap[3], \"../ops/zeros_like\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  const tileGradConfig = {\n    kernelName: _kernel_names.Tile,\n    inputsToSave: ['x'],\n    gradFunc: (dy, saved, attrs) => {\n      const [x] = saved;\n      const {\n        reps\n      } = attrs;\n      const derX = () => {\n        let xGrad = (0, _opsZeros_like.zerosLike)(x);\n        // TODO(cais): Maybe reduce memory footprint by avoiding repeated\n        // slicing.\n        if (x.rank === 1) {\n          for (let i = 0; i < reps[0]; ++i) {\n            xGrad = (0, _opsAdd.add)(xGrad, (0, _opsSlice.slice)(dy, [i * x.shape[0]], [x.shape[0]]));\n          }\n        } else if (x.rank === 2) {\n          for (let i = 0; i < reps[0]; ++i) {\n            for (let j = 0; j < reps[1]; ++j) {\n              xGrad = (0, _opsAdd.add)(xGrad, (0, _opsSlice.slice)(dy, [i * x.shape[0], j * x.shape[1]], [x.shape[0], x.shape[1]]));\n            }\n          }\n        } else if (x.rank === 3) {\n          for (let i = 0; i < reps[0]; ++i) {\n            for (let j = 0; j < reps[1]; ++j) {\n              for (let k = 0; k < reps[2]; ++k) {\n                xGrad = (0, _opsAdd.add)(xGrad, (0, _opsSlice.slice)(dy, [i * x.shape[0], j * x.shape[1], k * x.shape[2]], [x.shape[0], x.shape[1], x.shape[2]]));\n              }\n            }\n          }\n        } else if (x.rank === 4) {\n          for (let i = 0; i < reps[0]; ++i) {\n            for (let j = 0; j < reps[1]; ++j) {\n              for (let k = 0; k < reps[2]; ++k) {\n                for (let l = 0; l < reps[3]; ++l) {\n                  xGrad = (0, _opsAdd.add)(xGrad, (0, _opsSlice.slice)(dy, [i * x.shape[0], j * x.shape[1], k * x.shape[2], l * x.shape[3]], [x.shape[0], x.shape[1], x.shape[2], x.shape[3]]));\n                }\n              }\n            }\n          }\n        } else {\n          throw new Error(`Gradient for tile operation is not implemented for rank-` + `${x.rank} tensors yet.`);\n        }\n        return xGrad;\n      };\n      return {\n        x: derX\n      };\n    }\n  };\n});","lineCount":84,"map":[[7,2,21,0,"Object"],[7,8,21,0],[7,9,21,0,"defineProperty"],[7,23,21,0],[7,24,21,0,"exports"],[7,31,21,0],[8,4,21,0,"enumerable"],[8,14,21,0],[9,4,21,0,"get"],[9,7,21,0],[9,18,21,0,"get"],[9,19,21,0],[10,6,21,0],[10,13,21,0,"tileGradConfig"],[10,27,21,0],[11,4,21,0],[12,2,21,0],[13,2,17,0],[13,6,17,0,"_kernel_names"],[13,19,17,0],[13,22,17,0,"require"],[13,29,17,0],[13,30,17,0,"_dependencyMap"],[13,44,17,0],[14,2,18,0],[14,6,18,0,"_opsAdd"],[14,13,18,0],[14,16,18,0,"require"],[14,23,18,0],[14,24,18,0,"_dependencyMap"],[14,38,18,0],[15,2,19,0],[15,6,19,0,"_opsSlice"],[15,15,19,0],[15,18,19,0,"require"],[15,25,19,0],[15,26,19,0,"_dependencyMap"],[15,40,19,0],[16,2,20,0],[16,6,20,0,"_opsZeros_like"],[16,20,20,0],[16,23,20,0,"require"],[16,30,20,0],[16,31,20,0,"_dependencyMap"],[16,45,20,0],[17,2,1,0],[18,0,2,0],[19,0,3,0],[20,0,4,0],[21,0,5,0],[22,0,6,0],[23,0,7,0],[24,0,8,0],[25,0,9,0],[26,0,10,0],[27,0,11,0],[28,0,12,0],[29,0,13,0],[30,0,14,0],[31,0,15,0],[32,0,16,0],[34,2,21,7],[34,8,21,13,"tileGradConfig"],[34,22,21,27],[34,25,21,30],[35,4,22,4,"kernelName"],[35,14,22,14],[35,16,22,16,"Tile"],[35,29,22,20],[35,30,22,20,"Tile"],[35,34,22,20],[36,4,23,4,"inputsToSave"],[36,16,23,16],[36,18,23,18],[36,19,23,19],[36,22,23,22],[36,23,23,23],[37,4,24,4,"gradFunc"],[37,12,24,12],[37,14,24,14,"gradFunc"],[37,15,24,15,"dy"],[37,17,24,17],[37,19,24,19,"saved"],[37,24,24,24],[37,26,24,26,"attrs"],[37,31,24,31],[37,36,24,36],[38,6,25,8],[38,12,25,14],[38,13,25,15,"x"],[38,14,25,16],[38,15,25,17],[38,18,25,20,"saved"],[38,23,25,25],[39,6,26,8],[39,12,26,14],[40,8,26,16,"reps"],[41,6,26,21],[41,7,26,22],[41,10,26,25,"attrs"],[41,15,26,30],[42,6,27,8],[42,12,27,14,"derX"],[42,16,27,18],[42,19,27,21,"derX"],[42,20,27,21],[42,25,27,27],[43,8,28,12],[43,12,28,16,"xGrad"],[43,17,28,21],[43,20,28,24],[43,24,28,24,"zerosLike"],[43,38,28,33],[43,39,28,33,"zerosLike"],[43,48,28,33],[43,50,28,34,"x"],[43,51,28,35],[43,52,28,36],[44,8,29,12],[45,8,30,12],[46,8,31,12],[46,12,31,16,"x"],[46,13,31,17],[46,14,31,18,"rank"],[46,18,31,22],[46,23,31,27],[46,24,31,28],[46,26,31,30],[47,10,32,16],[47,15,32,21],[47,19,32,25,"i"],[47,20,32,26],[47,23,32,29],[47,24,32,30],[47,26,32,32,"i"],[47,27,32,33],[47,30,32,36,"reps"],[47,34,32,40],[47,35,32,41],[47,36,32,42],[47,37,32,43],[47,39,32,45],[47,41,32,47,"i"],[47,42,32,48],[47,44,32,50],[48,12,33,20,"xGrad"],[48,17,33,25],[48,20,33,28],[48,24,33,28,"add"],[48,31,33,31],[48,32,33,31,"add"],[48,35,33,31],[48,37,33,32,"xGrad"],[48,42,33,37],[48,44,33,39],[48,48,33,39,"slice"],[48,57,33,44],[48,58,33,44,"slice"],[48,63,33,44],[48,65,33,45,"dy"],[48,67,33,47],[48,69,33,49],[48,70,33,50,"i"],[48,71,33,51],[48,74,33,54,"x"],[48,75,33,55],[48,76,33,56,"shape"],[48,81,33,61],[48,82,33,62],[48,83,33,63],[48,84,33,64],[48,85,33,65],[48,87,33,67],[48,88,33,68,"x"],[48,89,33,69],[48,90,33,70,"shape"],[48,95,33,75],[48,96,33,76],[48,97,33,77],[48,98,33,78],[48,99,33,79],[48,100,33,80],[48,101,33,81],[49,10,34,16],[50,8,35,12],[50,9,35,13],[50,15,36,17],[50,19,36,21,"x"],[50,20,36,22],[50,21,36,23,"rank"],[50,25,36,27],[50,30,36,32],[50,31,36,33],[50,33,36,35],[51,10,37,16],[51,15,37,21],[51,19,37,25,"i"],[51,20,37,26],[51,23,37,29],[51,24,37,30],[51,26,37,32,"i"],[51,27,37,33],[51,30,37,36,"reps"],[51,34,37,40],[51,35,37,41],[51,36,37,42],[51,37,37,43],[51,39,37,45],[51,41,37,47,"i"],[51,42,37,48],[51,44,37,50],[52,12,38,20],[52,17,38,25],[52,21,38,29,"j"],[52,22,38,30],[52,25,38,33],[52,26,38,34],[52,28,38,36,"j"],[52,29,38,37],[52,32,38,40,"reps"],[52,36,38,44],[52,37,38,45],[52,38,38,46],[52,39,38,47],[52,41,38,49],[52,43,38,51,"j"],[52,44,38,52],[52,46,38,54],[53,14,39,24,"xGrad"],[53,19,39,29],[53,22,39,32],[53,26,39,32,"add"],[53,33,39,35],[53,34,39,35,"add"],[53,37,39,35],[53,39,39,36,"xGrad"],[53,44,39,41],[53,46,39,43],[53,50,39,43,"slice"],[53,59,39,48],[53,60,39,48,"slice"],[53,65,39,48],[53,67,39,49,"dy"],[53,69,39,51],[53,71,39,53],[53,72,39,54,"i"],[53,73,39,55],[53,76,39,58,"x"],[53,77,39,59],[53,78,39,60,"shape"],[53,83,39,65],[53,84,39,66],[53,85,39,67],[53,86,39,68],[53,88,39,70,"j"],[53,89,39,71],[53,92,39,74,"x"],[53,93,39,75],[53,94,39,76,"shape"],[53,99,39,81],[53,100,39,82],[53,101,39,83],[53,102,39,84],[53,103,39,85],[53,105,39,87],[53,106,40,28,"x"],[53,107,40,29],[53,108,40,30,"shape"],[53,113,40,35],[53,114,40,36],[53,115,40,37],[53,116,40,38],[53,118,40,40,"x"],[53,119,40,41],[53,120,40,42,"shape"],[53,125,40,47],[53,126,40,48],[53,127,40,49],[53,128,40,50],[53,129,41,25],[53,130,41,26],[53,131,41,27],[54,12,42,20],[55,10,43,16],[56,8,44,12],[56,9,44,13],[56,15,45,17],[56,19,45,21,"x"],[56,20,45,22],[56,21,45,23,"rank"],[56,25,45,27],[56,30,45,32],[56,31,45,33],[56,33,45,35],[57,10,46,16],[57,15,46,21],[57,19,46,25,"i"],[57,20,46,26],[57,23,46,29],[57,24,46,30],[57,26,46,32,"i"],[57,27,46,33],[57,30,46,36,"reps"],[57,34,46,40],[57,35,46,41],[57,36,46,42],[57,37,46,43],[57,39,46,45],[57,41,46,47,"i"],[57,42,46,48],[57,44,46,50],[58,12,47,20],[58,17,47,25],[58,21,47,29,"j"],[58,22,47,30],[58,25,47,33],[58,26,47,34],[58,28,47,36,"j"],[58,29,47,37],[58,32,47,40,"reps"],[58,36,47,44],[58,37,47,45],[58,38,47,46],[58,39,47,47],[58,41,47,49],[58,43,47,51,"j"],[58,44,47,52],[58,46,47,54],[59,14,48,24],[59,19,48,29],[59,23,48,33,"k"],[59,24,48,34],[59,27,48,37],[59,28,48,38],[59,30,48,40,"k"],[59,31,48,41],[59,34,48,44,"reps"],[59,38,48,48],[59,39,48,49],[59,40,48,50],[59,41,48,51],[59,43,48,53],[59,45,48,55,"k"],[59,46,48,56],[59,48,48,58],[60,16,49,28,"xGrad"],[60,21,49,33],[60,24,50,32],[60,28,50,32,"add"],[60,35,50,35],[60,36,50,35,"add"],[60,39,50,35],[60,41,50,36,"xGrad"],[60,46,50,41],[60,48,50,43],[60,52,50,43,"slice"],[60,61,50,48],[60,62,50,48,"slice"],[60,67,50,48],[60,69,50,49,"dy"],[60,71,50,51],[60,73,50,53],[60,74,50,54,"i"],[60,75,50,55],[60,78,50,58,"x"],[60,79,50,59],[60,80,50,60,"shape"],[60,85,50,65],[60,86,50,66],[60,87,50,67],[60,88,50,68],[60,90,50,70,"j"],[60,91,50,71],[60,94,50,74,"x"],[60,95,50,75],[60,96,50,76,"shape"],[60,101,50,81],[60,102,50,82],[60,103,50,83],[60,104,50,84],[60,106,50,86,"k"],[60,107,50,87],[60,110,50,90,"x"],[60,111,50,91],[60,112,50,92,"shape"],[60,117,50,97],[60,118,50,98],[60,119,50,99],[60,120,50,100],[60,121,50,101],[60,123,50,103],[60,124,50,104,"x"],[60,125,50,105],[60,126,50,106,"shape"],[60,131,50,111],[60,132,50,112],[60,133,50,113],[60,134,50,114],[60,136,50,116,"x"],[60,137,50,117],[60,138,50,118,"shape"],[60,143,50,123],[60,144,50,124],[60,145,50,125],[60,146,50,126],[60,148,50,128,"x"],[60,149,50,129],[60,150,50,130,"shape"],[60,155,50,135],[60,156,50,136],[60,157,50,137],[60,158,50,138],[60,159,50,139],[60,160,50,140],[60,161,50,141],[61,14,51,24],[62,12,52,20],[63,10,53,16],[64,8,54,12],[64,9,54,13],[64,15,55,17],[64,19,55,21,"x"],[64,20,55,22],[64,21,55,23,"rank"],[64,25,55,27],[64,30,55,32],[64,31,55,33],[64,33,55,35],[65,10,56,16],[65,15,56,21],[65,19,56,25,"i"],[65,20,56,26],[65,23,56,29],[65,24,56,30],[65,26,56,32,"i"],[65,27,56,33],[65,30,56,36,"reps"],[65,34,56,40],[65,35,56,41],[65,36,56,42],[65,37,56,43],[65,39,56,45],[65,41,56,47,"i"],[65,42,56,48],[65,44,56,50],[66,12,57,20],[66,17,57,25],[66,21,57,29,"j"],[66,22,57,30],[66,25,57,33],[66,26,57,34],[66,28,57,36,"j"],[66,29,57,37],[66,32,57,40,"reps"],[66,36,57,44],[66,37,57,45],[66,38,57,46],[66,39,57,47],[66,41,57,49],[66,43,57,51,"j"],[66,44,57,52],[66,46,57,54],[67,14,58,24],[67,19,58,29],[67,23,58,33,"k"],[67,24,58,34],[67,27,58,37],[67,28,58,38],[67,30,58,40,"k"],[67,31,58,41],[67,34,58,44,"reps"],[67,38,58,48],[67,39,58,49],[67,40,58,50],[67,41,58,51],[67,43,58,53],[67,45,58,55,"k"],[67,46,58,56],[67,48,58,58],[68,16,59,28],[68,21,59,33],[68,25,59,37,"l"],[68,26,59,38],[68,29,59,41],[68,30,59,42],[68,32,59,44,"l"],[68,33,59,45],[68,36,59,48,"reps"],[68,40,59,52],[68,41,59,53],[68,42,59,54],[68,43,59,55],[68,45,59,57],[68,47,59,59,"l"],[68,48,59,60],[68,50,59,62],[69,18,60,32,"xGrad"],[69,23,60,37],[69,26,61,36],[69,30,61,36,"add"],[69,37,61,39],[69,38,61,39,"add"],[69,41,61,39],[69,43,61,40,"xGrad"],[69,48,61,45],[69,50,61,47],[69,54,61,47,"slice"],[69,63,61,52],[69,64,61,52,"slice"],[69,69,61,52],[69,71,61,53,"dy"],[69,73,61,55],[69,75,61,57],[69,76,62,40,"i"],[69,77,62,41],[69,80,62,44,"x"],[69,81,62,45],[69,82,62,46,"shape"],[69,87,62,51],[69,88,62,52],[69,89,62,53],[69,90,62,54],[69,92,62,56,"j"],[69,93,62,57],[69,96,62,60,"x"],[69,97,62,61],[69,98,62,62,"shape"],[69,103,62,67],[69,104,62,68],[69,105,62,69],[69,106,62,70],[69,108,62,72,"k"],[69,109,62,73],[69,112,62,76,"x"],[69,113,62,77],[69,114,62,78,"shape"],[69,119,62,83],[69,120,62,84],[69,121,62,85],[69,122,62,86],[69,124,63,40,"l"],[69,125,63,41],[69,128,63,44,"x"],[69,129,63,45],[69,130,63,46,"shape"],[69,135,63,51],[69,136,63,52],[69,137,63,53],[69,138,63,54],[69,139,64,37],[69,141,64,39],[69,142,64,40,"x"],[69,143,64,41],[69,144,64,42,"shape"],[69,149,64,47],[69,150,64,48],[69,151,64,49],[69,152,64,50],[69,154,64,52,"x"],[69,155,64,53],[69,156,64,54,"shape"],[69,161,64,59],[69,162,64,60],[69,163,64,61],[69,164,64,62],[69,166,64,64,"x"],[69,167,64,65],[69,168,64,66,"shape"],[69,173,64,71],[69,174,64,72],[69,175,64,73],[69,176,64,74],[69,178,64,76,"x"],[69,179,64,77],[69,180,64,78,"shape"],[69,185,64,83],[69,186,64,84],[69,187,64,85],[69,188,64,86],[69,189,64,87],[69,190,64,88],[69,191,64,89],[70,16,65,28],[71,14,66,24],[72,12,67,20],[73,10,68,16],[74,8,69,12],[74,9,69,13],[74,15,70,17],[75,10,71,16],[75,16,71,22],[75,20,71,26,"Error"],[75,25,71,31],[75,26,71,32],[75,84,71,90],[75,87,72,20],[75,90,72,23,"x"],[75,91,72,24],[75,92,72,25,"rank"],[75,96,72,29],[75,111,72,44],[75,112,72,45],[76,8,73,12],[77,8,74,12],[77,15,74,19,"xGrad"],[77,20,74,24],[78,6,75,8],[78,7,75,9],[79,6,76,8],[79,13,76,15],[80,8,76,17,"x"],[80,9,76,18],[80,11,76,20,"derX"],[81,6,76,25],[81,7,76,26],[82,4,77,4],[83,2,78,0],[83,3,78,1],[84,0,78,2],[84,3]],"functionMap":{"names":["<global>","tileGradConfig.gradFunc","derX"],"mappings":"AAA;cCuB;qBCG;SDgD;KDE"},"hasCjsExports":false},"type":"js/module"}]}