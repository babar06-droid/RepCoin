{"dependencies":[{"name":"../util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":32,"index":735}}],"key":"DTmef1GE5grNQfsvpIzpBlINy9c=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.axesAreInnerMostDims = axesAreInnerMostDims;\n  exports.combineLocations = combineLocations;\n  exports.computeOutAndReduceShapes = computeOutAndReduceShapes;\n  exports.expandShapeToKeepDim = expandShapeToKeepDim;\n  exports.assertAxesAreInnerMostDims = assertAxesAreInnerMostDims;\n  exports.getAxesPermutation = getAxesPermutation;\n  exports.getUndoAxesPermutation = getUndoAxesPermutation;\n  exports.getInnerMostAxes = getInnerMostAxes;\n  var _util = require(_dependencyMap[0], \"../util\");\n  var util = _interopNamespace(_util);\n  /**\n   * @license\n   * Copyright 2017 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  /**\n   * Returns true if the axis specifies the inner most dimensions of the\n   * array.\n   */\n  function axesAreInnerMostDims(axes, rank) {\n    for (let i = 0; i < axes.length; ++i) {\n      if (axes[axes.length - i - 1] !== rank - 1 - i) {\n        return false;\n      }\n    }\n    return true;\n  }\n  function combineLocations(outputLoc, reduceLoc, axes) {\n    const rank = outputLoc.length + reduceLoc.length;\n    const loc = [];\n    let outIdx = 0;\n    let reduceIdx = 0;\n    for (let dim = 0; dim < rank; dim++) {\n      if (axes.indexOf(dim) === -1) {\n        loc.push(outputLoc[outIdx++]);\n      } else {\n        loc.push(reduceLoc[reduceIdx++]);\n      }\n    }\n    return loc;\n  }\n  function computeOutAndReduceShapes(aShape, axes) {\n    const outShape = [];\n    const rank = aShape.length;\n    for (let dim = 0; dim < rank; dim++) {\n      if (axes.indexOf(dim) === -1) {\n        outShape.push(aShape[dim]);\n      }\n    }\n    const reduceShape = axes.map(dim => aShape[dim]);\n    return [outShape, reduceShape];\n  }\n  function expandShapeToKeepDim(shape, axes) {\n    const reduceSubShape = axes.map(x => 1);\n    return combineLocations(shape, reduceSubShape, axes);\n  }\n  function assertAxesAreInnerMostDims(msg, axes, rank) {\n    util.assert(axesAreInnerMostDims(axes, rank), () => `${msg} supports only inner-most axes for now. ` + `Got axes ${axes} and rank-${rank} input.`);\n  }\n  /**\n   * Returns the axes permutation to be used with `tf.transpose`, if such\n   * permutation is necessary. Otherwise it returns null. This method is used by\n   * operations that operate only on inner-most axes.\n   */\n  function getAxesPermutation(axes, rank) {\n    if (axesAreInnerMostDims(axes, rank)) {\n      return null;\n    }\n    const result = [];\n    for (let i = 0; i < rank; ++i) {\n      if (axes.indexOf(i) === -1) {\n        result.push(i);\n      }\n    }\n    axes.forEach(axis => result.push(axis));\n    return result;\n  }\n  /** Returns the axes permutation that undoes the original permutation. */\n  function getUndoAxesPermutation(axes) {\n    return axes.map((axis, i) => [i, axis]).sort((a, b) => a[1] - b[1]).map(x => x[0]);\n  }\n  function getInnerMostAxes(numAxes, rank) {\n    const res = [];\n    for (let i = rank - numAxes; i < rank; ++i) {\n      res.push(i);\n    }\n    return res;\n  }\n});","lineCount":122,"map":[[22,2,22,0,"exports"],[22,9,22,0],[22,10,22,0,"axesAreInnerMostDims"],[22,30,22,0],[22,33,22,0,"axesAreInnerMostDims"],[22,53,22,0],[23,2,30,0,"exports"],[23,9,30,0],[23,10,30,0,"combineLocations"],[23,26,30,0],[23,29,30,0,"combineLocations"],[23,45,30,0],[24,2,45,0,"exports"],[24,9,45,0],[24,10,45,0,"computeOutAndReduceShapes"],[24,35,45,0],[24,38,45,0,"computeOutAndReduceShapes"],[24,63,45,0],[25,2,56,0,"exports"],[25,9,56,0],[25,10,56,0,"expandShapeToKeepDim"],[25,30,56,0],[25,33,56,0,"expandShapeToKeepDim"],[25,53,56,0],[26,2,60,0,"exports"],[26,9,60,0],[26,10,60,0,"assertAxesAreInnerMostDims"],[26,36,60,0],[26,39,60,0,"assertAxesAreInnerMostDims"],[26,65,60,0],[27,2,69,0,"exports"],[27,9,69,0],[27,10,69,0,"getAxesPermutation"],[27,28,69,0],[27,31,69,0,"getAxesPermutation"],[27,49,69,0],[28,2,83,0,"exports"],[28,9,83,0],[28,10,83,0,"getUndoAxesPermutation"],[28,32,83,0],[28,35,83,0,"getUndoAxesPermutation"],[28,57,83,0],[29,2,88,0,"exports"],[29,9,88,0],[29,10,88,0,"getInnerMostAxes"],[29,26,88,0],[29,29,88,0,"getInnerMostAxes"],[29,45,88,0],[30,2,17,0],[30,6,17,0,"_util"],[30,11,17,0],[30,14,17,0,"require"],[30,21,17,0],[30,22,17,0,"_dependencyMap"],[30,36,17,0],[31,2,17,0],[31,6,17,0,"util"],[31,10,17,0],[31,13,17,0,"_interopNamespace"],[31,30,17,0],[31,31,17,0,"_util"],[31,36,17,0],[32,2,1,0],[33,0,2,0],[34,0,3,0],[35,0,4,0],[36,0,5,0],[37,0,6,0],[38,0,7,0],[39,0,8,0],[40,0,9,0],[41,0,10,0],[42,0,11,0],[43,0,12,0],[44,0,13,0],[45,0,14,0],[46,0,15,0],[47,0,16,0],[49,2,18,0],[50,0,19,0],[51,0,20,0],[52,0,21,0],[53,2,22,7],[53,11,22,16,"axesAreInnerMostDims"],[53,31,22,36,"axesAreInnerMostDims"],[53,32,22,37,"axes"],[53,36,22,41],[53,38,22,43,"rank"],[53,42,22,47],[53,44,22,49],[54,4,23,4],[54,9,23,9],[54,13,23,13,"i"],[54,14,23,14],[54,17,23,17],[54,18,23,18],[54,20,23,20,"i"],[54,21,23,21],[54,24,23,24,"axes"],[54,28,23,28],[54,29,23,29,"length"],[54,35,23,35],[54,37,23,37],[54,39,23,39,"i"],[54,40,23,40],[54,42,23,42],[55,6,24,8],[55,10,24,12,"axes"],[55,14,24,16],[55,15,24,17,"axes"],[55,19,24,21],[55,20,24,22,"length"],[55,26,24,28],[55,29,24,31,"i"],[55,30,24,32],[55,33,24,35],[55,34,24,36],[55,35,24,37],[55,40,24,42,"rank"],[55,44,24,46],[55,47,24,49],[55,48,24,50],[55,51,24,53,"i"],[55,52,24,54],[55,54,24,56],[56,8,25,12],[56,15,25,19],[56,20,25,24],[57,6,26,8],[58,4,27,4],[59,4,28,4],[59,11,28,11],[59,15,28,15],[60,2,29,0],[61,2,30,7],[61,11,30,16,"combineLocations"],[61,27,30,32,"combineLocations"],[61,28,30,33,"outputLoc"],[61,37,30,42],[61,39,30,44,"reduceLoc"],[61,48,30,53],[61,50,30,55,"axes"],[61,54,30,59],[61,56,30,61],[62,4,31,4],[62,10,31,10,"rank"],[62,14,31,14],[62,17,31,17,"outputLoc"],[62,26,31,26],[62,27,31,27,"length"],[62,33,31,33],[62,36,31,36,"reduceLoc"],[62,45,31,45],[62,46,31,46,"length"],[62,52,31,52],[63,4,32,4],[63,10,32,10,"loc"],[63,13,32,13],[63,16,32,16],[63,18,32,18],[64,4,33,4],[64,8,33,8,"outIdx"],[64,14,33,14],[64,17,33,17],[64,18,33,18],[65,4,34,4],[65,8,34,8,"reduceIdx"],[65,17,34,17],[65,20,34,20],[65,21,34,21],[66,4,35,4],[66,9,35,9],[66,13,35,13,"dim"],[66,16,35,16],[66,19,35,19],[66,20,35,20],[66,22,35,22,"dim"],[66,25,35,25],[66,28,35,28,"rank"],[66,32,35,32],[66,34,35,34,"dim"],[66,37,35,37],[66,39,35,39],[66,41,35,41],[67,6,36,8],[67,10,36,12,"axes"],[67,14,36,16],[67,15,36,17,"indexOf"],[67,22,36,24],[67,23,36,25,"dim"],[67,26,36,28],[67,27,36,29],[67,32,36,34],[67,33,36,35],[67,34,36,36],[67,36,36,38],[68,8,37,12,"loc"],[68,11,37,15],[68,12,37,16,"push"],[68,16,37,20],[68,17,37,21,"outputLoc"],[68,26,37,30],[68,27,37,31,"outIdx"],[68,33,37,37],[68,35,37,39],[68,36,37,40],[68,37,37,41],[69,6,38,8],[69,7,38,9],[69,13,39,13],[70,8,40,12,"loc"],[70,11,40,15],[70,12,40,16,"push"],[70,16,40,20],[70,17,40,21,"reduceLoc"],[70,26,40,30],[70,27,40,31,"reduceIdx"],[70,36,40,40],[70,38,40,42],[70,39,40,43],[70,40,40,44],[71,6,41,8],[72,4,42,4],[73,4,43,4],[73,11,43,11,"loc"],[73,14,43,14],[74,2,44,0],[75,2,45,7],[75,11,45,16,"computeOutAndReduceShapes"],[75,36,45,41,"computeOutAndReduceShapes"],[75,37,45,42,"aShape"],[75,43,45,48],[75,45,45,50,"axes"],[75,49,45,54],[75,51,45,56],[76,4,46,4],[76,10,46,10,"outShape"],[76,18,46,18],[76,21,46,21],[76,23,46,23],[77,4,47,4],[77,10,47,10,"rank"],[77,14,47,14],[77,17,47,17,"aShape"],[77,23,47,23],[77,24,47,24,"length"],[77,30,47,30],[78,4,48,4],[78,9,48,9],[78,13,48,13,"dim"],[78,16,48,16],[78,19,48,19],[78,20,48,20],[78,22,48,22,"dim"],[78,25,48,25],[78,28,48,28,"rank"],[78,32,48,32],[78,34,48,34,"dim"],[78,37,48,37],[78,39,48,39],[78,41,48,41],[79,6,49,8],[79,10,49,12,"axes"],[79,14,49,16],[79,15,49,17,"indexOf"],[79,22,49,24],[79,23,49,25,"dim"],[79,26,49,28],[79,27,49,29],[79,32,49,34],[79,33,49,35],[79,34,49,36],[79,36,49,38],[80,8,50,12,"outShape"],[80,16,50,20],[80,17,50,21,"push"],[80,21,50,25],[80,22,50,26,"aShape"],[80,28,50,32],[80,29,50,33,"dim"],[80,32,50,36],[80,33,50,37],[80,34,50,38],[81,6,51,8],[82,4,52,4],[83,4,53,4],[83,10,53,10,"reduceShape"],[83,21,53,21],[83,24,53,24,"axes"],[83,28,53,28],[83,29,53,29,"map"],[83,32,53,32],[83,33,53,33,"dim"],[83,36,53,36],[83,40,53,40,"aShape"],[83,46,53,46],[83,47,53,47,"dim"],[83,50,53,50],[83,51,53,51],[83,52,53,52],[84,4,54,4],[84,11,54,11],[84,12,54,12,"outShape"],[84,20,54,20],[84,22,54,22,"reduceShape"],[84,33,54,33],[84,34,54,34],[85,2,55,0],[86,2,56,7],[86,11,56,16,"expandShapeToKeepDim"],[86,31,56,36,"expandShapeToKeepDim"],[86,32,56,37,"shape"],[86,37,56,42],[86,39,56,44,"axes"],[86,43,56,48],[86,45,56,50],[87,4,57,4],[87,10,57,10,"reduceSubShape"],[87,24,57,24],[87,27,57,27,"axes"],[87,31,57,31],[87,32,57,32,"map"],[87,35,57,35],[87,36,57,36,"x"],[87,37,57,37],[87,41,57,41],[87,42,57,42],[87,43,57,43],[88,4,58,4],[88,11,58,11,"combineLocations"],[88,27,58,27],[88,28,58,28,"shape"],[88,33,58,33],[88,35,58,35,"reduceSubShape"],[88,49,58,49],[88,51,58,51,"axes"],[88,55,58,55],[88,56,58,56],[89,2,59,0],[90,2,60,7],[90,11,60,16,"assertAxesAreInnerMostDims"],[90,37,60,42,"assertAxesAreInnerMostDims"],[90,38,60,43,"msg"],[90,41,60,46],[90,43,60,48,"axes"],[90,47,60,52],[90,49,60,54,"rank"],[90,53,60,58],[90,55,60,60],[91,4,61,4,"util"],[91,8,61,8],[91,9,61,9,"assert"],[91,15,61,15],[91,16,61,16,"axesAreInnerMostDims"],[91,36,61,36],[91,37,61,37,"axes"],[91,41,61,41],[91,43,61,43,"rank"],[91,47,61,47],[91,48,61,48],[91,50,61,50],[91,56,61,56],[91,59,61,59,"msg"],[91,62,61,62],[91,104,61,104],[91,107,62,8],[91,119,62,20,"axes"],[91,123,62,24],[91,136,62,37,"rank"],[91,140,62,41],[91,149,62,50],[91,150,62,51],[92,2,63,0],[93,2,64,0],[94,0,65,0],[95,0,66,0],[96,0,67,0],[97,0,68,0],[98,2,69,7],[98,11,69,16,"getAxesPermutation"],[98,29,69,34,"getAxesPermutation"],[98,30,69,35,"axes"],[98,34,69,39],[98,36,69,41,"rank"],[98,40,69,45],[98,42,69,47],[99,4,70,4],[99,8,70,8,"axesAreInnerMostDims"],[99,28,70,28],[99,29,70,29,"axes"],[99,33,70,33],[99,35,70,35,"rank"],[99,39,70,39],[99,40,70,40],[99,42,70,42],[100,6,71,8],[100,13,71,15],[100,17,71,19],[101,4,72,4],[102,4,73,4],[102,10,73,10,"result"],[102,16,73,16],[102,19,73,19],[102,21,73,21],[103,4,74,4],[103,9,74,9],[103,13,74,13,"i"],[103,14,74,14],[103,17,74,17],[103,18,74,18],[103,20,74,20,"i"],[103,21,74,21],[103,24,74,24,"rank"],[103,28,74,28],[103,30,74,30],[103,32,74,32,"i"],[103,33,74,33],[103,35,74,35],[104,6,75,8],[104,10,75,12,"axes"],[104,14,75,16],[104,15,75,17,"indexOf"],[104,22,75,24],[104,23,75,25,"i"],[104,24,75,26],[104,25,75,27],[104,30,75,32],[104,31,75,33],[104,32,75,34],[104,34,75,36],[105,8,76,12,"result"],[105,14,76,18],[105,15,76,19,"push"],[105,19,76,23],[105,20,76,24,"i"],[105,21,76,25],[105,22,76,26],[106,6,77,8],[107,4,78,4],[108,4,79,4,"axes"],[108,8,79,8],[108,9,79,9,"forEach"],[108,16,79,16],[108,17,79,17,"axis"],[108,21,79,21],[108,25,79,25,"result"],[108,31,79,31],[108,32,79,32,"push"],[108,36,79,36],[108,37,79,37,"axis"],[108,41,79,41],[108,42,79,42],[108,43,79,43],[109,4,80,4],[109,11,80,11,"result"],[109,17,80,17],[110,2,81,0],[111,2,82,0],[112,2,83,7],[112,11,83,16,"getUndoAxesPermutation"],[112,33,83,38,"getUndoAxesPermutation"],[112,34,83,39,"axes"],[112,38,83,43],[112,40,83,45],[113,4,84,4],[113,11,84,11,"axes"],[113,15,84,15],[113,16,84,16,"map"],[113,19,84,19],[113,20,84,20],[113,21,84,21,"axis"],[113,25,84,25],[113,27,84,27,"i"],[113,28,84,28],[113,33,84,33],[113,34,84,34,"i"],[113,35,84,35],[113,37,84,37,"axis"],[113,41,84,41],[113,42,84,42],[113,43,84,43],[113,44,85,9,"sort"],[113,48,85,13],[113,49,85,14],[113,50,85,15,"a"],[113,51,85,16],[113,53,85,18,"b"],[113,54,85,19],[113,59,85,24,"a"],[113,60,85,25],[113,61,85,26],[113,62,85,27],[113,63,85,28],[113,66,85,31,"b"],[113,67,85,32],[113,68,85,33],[113,69,85,34],[113,70,85,35],[113,71,85,36],[113,72,86,9,"map"],[113,75,86,12],[113,76,86,13,"x"],[113,77,86,14],[113,81,86,18,"x"],[113,82,86,19],[113,83,86,20],[113,84,86,21],[113,85,86,22],[113,86,86,23],[114,2,87,0],[115,2,88,7],[115,11,88,16,"getInnerMostAxes"],[115,27,88,32,"getInnerMostAxes"],[115,28,88,33,"numAxes"],[115,35,88,40],[115,37,88,42,"rank"],[115,41,88,46],[115,43,88,48],[116,4,89,4],[116,10,89,10,"res"],[116,13,89,13],[116,16,89,16],[116,18,89,18],[117,4,90,4],[117,9,90,9],[117,13,90,13,"i"],[117,14,90,14],[117,17,90,17,"rank"],[117,21,90,21],[117,24,90,24,"numAxes"],[117,31,90,31],[117,33,90,33,"i"],[117,34,90,34],[117,37,90,37,"rank"],[117,41,90,41],[117,43,90,43],[117,45,90,45,"i"],[117,46,90,46],[117,48,90,48],[118,6,91,8,"res"],[118,9,91,11],[118,10,91,12,"push"],[118,14,91,16],[118,15,91,17,"i"],[118,16,91,18],[118,17,91,19],[119,4,92,4],[120,4,93,4],[120,11,93,11,"res"],[120,14,93,14],[121,2,94,0],[122,0,94,1],[122,3]],"functionMap":{"names":["<global>","axesAreInnerMostDims","combineLocations","computeOutAndReduceShapes","axes.map$argument_0","expandShapeToKeepDim","assertAxesAreInnerMostDims","util.assert$argument_1","getAxesPermutation","axes.forEach$argument_0","getUndoAxesPermutation","axes.map.sort$argument_0","axes.map.sort.map$argument_0","getInnerMostAxes"],"mappings":"AAA;OCqB;CDO;OEC;CFc;OGC;iCCQ,kBD;CHE;OKC;oCDC,MC;CLE;OMC;kDCC;kDDC;CNC;OQM;iBCU,yBD;CRE;OUE;oBNC,sBM;cCC,qBD;aEC,SF;CVC;OaC;CbM"},"hasCjsExports":false},"type":"js/module"}]}