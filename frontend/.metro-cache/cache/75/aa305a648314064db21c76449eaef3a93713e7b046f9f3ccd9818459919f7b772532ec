{"dependencies":[{"name":"../../engine","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":38,"index":741}}],"key":"v39fFCcPTN6kCKPiVEOA5hKbvfQ=","exportNames":["*"],"imports":1}},{"name":"../../kernel_names","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":742},"end":{"line":18,"column":50,"index":792}}],"key":"rL3QmnnDJzxi3tNgrJ9K3IiMDQ8=","exportNames":["*"],"imports":1}},{"name":"../../tensor_util_env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":793},"end":{"line":19,"column":56,"index":849}}],"key":"xfSGNGkCJdZhfQ673y/6d+no2yU=","exportNames":["*"],"imports":1}},{"name":"../operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":850},"end":{"line":20,"column":34,"index":884}}],"key":"fQilPqfSvhAHjyfKT0P4wel7jE4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"stringNGrams\", {\n    enumerable: true,\n    get: function () {\n      return stringNGrams;\n    }\n  });\n  var _engine = require(_dependencyMap[0], \"../../engine\");\n  var _kernel_names = require(_dependencyMap[1], \"../../kernel_names\");\n  var _tensor_util_env = require(_dependencyMap[2], \"../../tensor_util_env\");\n  var _operation = require(_dependencyMap[3], \"../operation\");\n  /**\n   * @license\n   * Copyright 2021 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  /**\n   * Creates ngrams from ragged string data.\n   *\n   * This op accepts a ragged tensor with 1 ragged dimension containing only\n   * strings and outputs a ragged tensor with 1 ragged dimension containing ngrams\n   * of that string, joined along the innermost axis.\n   *\n   * ```js\n   * const result = tf.string.stringNGrams(\n   *   ['a', 'b', 'c', 'd'], tf.tensor1d([0, 2, 4], 'int32'),\n   *   '|', [1, 2], 'LP', 'RP', -1, false);\n   * result['nGrams'].print(); // ['a', 'b', 'LP|a', 'a|b', 'b|RP',\n   *                           //  'c', 'd', 'LP|c', 'c|d', 'd|RP']\n   * result['nGramsSplits'].print(); // [0, 5, 10]\n   * ```\n   * @param data: The values tensor of the ragged string tensor to make ngrams out\n   *     of. Must be a 1D string tensor.\n   * @param dataSplits: The splits tensor of the ragged string tensor to make\n   *     ngrams out of.\n   * @param separator: The string to append between elements of the token. Use \"\"\n   *     for no separator.\n   * @param nGramWidths: The sizes of the ngrams to create.\n   * @param leftPad: The string to use to pad the left side of the ngram sequence.\n   *     Only used if pad_width !== 0.\n   * @param rightPad: The string to use to pad the right side of the ngram\n   *     sequence. Only used if pad_width !== 0.\n   * @param padWidth: The number of padding elements to add to each side of each\n   *     sequence. Note that padding will never be greater than `nGramWidths`-1\n   *     regardless of this value. If `padWidth`=-1, then add max(`nGramWidths`)-1\n   *     elements.\n   * @param preserveShortSequences: If true, then ensure that at least one ngram\n   *     is generated for each input sequence. In particular, if an input sequence\n   *     is shorter than min(ngramWidth) + 2*padWidth, then generate a single\n   *     ngram containing the entire sequence. If false, then no ngrams are\n   *     generated for these short input sequences.\n   * @return A map with the following properties:\n   *     - nGrams: The values tensor of the output ngrams ragged tensor.\n   *     - nGramsSplits: The splits tensor of the output ngrams ragged tensor.\n   *\n   * @doc {heading: 'Operations', subheading: 'String'}\n   */\n  function stringNGrams_(data, dataSplits, separator, nGramWidths, leftPad, rightPad, padWidth, preserveShortSequences) {\n    const $data = (0, _tensor_util_env.convertToTensor)(data, 'data', 'stringNGrams', 'string');\n    if ($data.dtype !== 'string') {\n      throw new Error('Data must be of datatype string');\n    }\n    if ($data.shape.length !== 1) {\n      throw new Error(`Data must be a vector, saw: ${$data.shape}`);\n    }\n    const $dataSplits = (0, _tensor_util_env.convertToTensor)(dataSplits, 'dataSplits', 'stringNGrams');\n    if ($dataSplits.dtype !== 'int32') {\n      throw new Error('Data splits must be of datatype int32');\n    }\n    const attrs = {\n      separator,\n      nGramWidths,\n      leftPad,\n      rightPad,\n      padWidth,\n      preserveShortSequences\n    };\n    const inputs = {\n      data: $data,\n      dataSplits: $dataSplits\n    };\n    const result = _engine.ENGINE.runKernel(_kernel_names.StringNGrams, inputs, attrs);\n    return {\n      nGrams: result[0],\n      nGramsSplits: result[1]\n    };\n  }\n  const stringNGrams = /* @__PURE__ */(0, _operation.op)({\n    stringNGrams_\n  });\n});","lineCount":108,"map":[[7,2,86,0,"Object"],[7,8,86,0],[7,9,86,0,"defineProperty"],[7,23,86,0],[7,24,86,0,"exports"],[7,31,86,0],[8,4,86,0,"enumerable"],[8,14,86,0],[9,4,86,0,"get"],[9,7,86,0],[9,18,86,0,"get"],[9,19,86,0],[10,6,86,0],[10,13,86,0,"stringNGrams"],[10,25,86,0],[11,4,86,0],[12,2,86,0],[13,2,17,0],[13,6,17,0,"_engine"],[13,13,17,0],[13,16,17,0,"require"],[13,23,17,0],[13,24,17,0,"_dependencyMap"],[13,38,17,0],[14,2,18,0],[14,6,18,0,"_kernel_names"],[14,19,18,0],[14,22,18,0,"require"],[14,29,18,0],[14,30,18,0,"_dependencyMap"],[14,44,18,0],[15,2,19,0],[15,6,19,0,"_tensor_util_env"],[15,22,19,0],[15,25,19,0,"require"],[15,32,19,0],[15,33,19,0,"_dependencyMap"],[15,47,19,0],[16,2,20,0],[16,6,20,0,"_operation"],[16,16,20,0],[16,19,20,0,"require"],[16,26,20,0],[16,27,20,0,"_dependencyMap"],[16,41,20,0],[17,2,1,0],[18,0,2,0],[19,0,3,0],[20,0,4,0],[21,0,5,0],[22,0,6,0],[23,0,7,0],[24,0,8,0],[25,0,9,0],[26,0,10,0],[27,0,11,0],[28,0,12,0],[29,0,13,0],[30,0,14,0],[31,0,15,0],[32,0,16,0],[34,2,21,0],[35,0,22,0],[36,0,23,0],[37,0,24,0],[38,0,25,0],[39,0,26,0],[40,0,27,0],[41,0,28,0],[42,0,29,0],[43,0,30,0],[44,0,31,0],[45,0,32,0],[46,0,33,0],[47,0,34,0],[48,0,35,0],[49,0,36,0],[50,0,37,0],[51,0,38,0],[52,0,39,0],[53,0,40,0],[54,0,41,0],[55,0,42,0],[56,0,43,0],[57,0,44,0],[58,0,45,0],[59,0,46,0],[60,0,47,0],[61,0,48,0],[62,0,49,0],[63,0,50,0],[64,0,51,0],[65,0,52,0],[66,0,53,0],[67,0,54,0],[68,0,55,0],[69,0,56,0],[70,0,57,0],[71,0,58,0],[72,0,59,0],[73,0,60,0],[74,0,61,0],[75,2,62,0],[75,11,62,9,"stringNGrams_"],[75,24,62,22,"stringNGrams_"],[75,25,62,23,"data"],[75,29,62,27],[75,31,62,29,"dataSplits"],[75,41,62,39],[75,43,62,41,"separator"],[75,52,62,50],[75,54,62,52,"nGramWidths"],[75,65,62,63],[75,67,62,65,"leftPad"],[75,74,62,72],[75,76,62,74,"rightPad"],[75,84,62,82],[75,86,62,84,"padWidth"],[75,94,62,92],[75,96,62,94,"preserveShortSequences"],[75,118,62,116],[75,120,62,118],[76,4,63,4],[76,10,63,10,"$data"],[76,15,63,15],[76,18,63,18],[76,22,63,18,"convertToTensor"],[76,38,63,33],[76,39,63,33,"convertToTensor"],[76,54,63,33],[76,56,63,34,"data"],[76,60,63,38],[76,62,63,40],[76,68,63,46],[76,70,63,48],[76,84,63,62],[76,86,63,64],[76,94,63,72],[76,95,63,73],[77,4,64,4],[77,8,64,8,"$data"],[77,13,64,13],[77,14,64,14,"dtype"],[77,19,64,19],[77,24,64,24],[77,32,64,32],[77,34,64,34],[78,6,65,8],[78,12,65,14],[78,16,65,18,"Error"],[78,21,65,23],[78,22,65,24],[78,55,65,57],[78,56,65,58],[79,4,66,4],[80,4,67,4],[80,8,67,8,"$data"],[80,13,67,13],[80,14,67,14,"shape"],[80,19,67,19],[80,20,67,20,"length"],[80,26,67,26],[80,31,67,31],[80,32,67,32],[80,34,67,34],[81,6,68,8],[81,12,68,14],[81,16,68,18,"Error"],[81,21,68,23],[81,22,68,24],[81,53,68,55,"$data"],[81,58,68,60],[81,59,68,61,"shape"],[81,64,68,66],[81,66,68,68],[81,67,68,69],[82,4,69,4],[83,4,70,4],[83,10,70,10,"$dataSplits"],[83,21,70,21],[83,24,70,24],[83,28,70,24,"convertToTensor"],[83,44,70,39],[83,45,70,39,"convertToTensor"],[83,60,70,39],[83,62,70,40,"dataSplits"],[83,72,70,50],[83,74,70,52],[83,86,70,64],[83,88,70,66],[83,102,70,80],[83,103,70,81],[84,4,71,4],[84,8,71,8,"$dataSplits"],[84,19,71,19],[84,20,71,20,"dtype"],[84,25,71,25],[84,30,71,30],[84,37,71,37],[84,39,71,39],[85,6,72,8],[85,12,72,14],[85,16,72,18,"Error"],[85,21,72,23],[85,22,72,24],[85,61,72,63],[85,62,72,64],[86,4,73,4],[87,4,74,4],[87,10,74,10,"attrs"],[87,15,74,15],[87,18,74,18],[88,6,75,8,"separator"],[88,15,75,17],[89,6,76,8,"nGramWidths"],[89,17,76,19],[90,6,77,8,"leftPad"],[90,13,77,15],[91,6,78,8,"rightPad"],[91,14,78,16],[92,6,79,8,"padWidth"],[92,14,79,16],[93,6,80,8,"preserveShortSequences"],[94,4,81,4],[94,5,81,5],[95,4,82,4],[95,10,82,10,"inputs"],[95,16,82,16],[95,19,82,19],[96,6,82,21,"data"],[96,10,82,25],[96,12,82,27,"$data"],[96,17,82,32],[97,6,82,34,"dataSplits"],[97,16,82,44],[97,18,82,46,"$dataSplits"],[98,4,82,58],[98,5,82,59],[99,4,83,4],[99,10,83,10,"result"],[99,16,83,16],[99,19,83,19,"ENGINE"],[99,26,83,25],[99,27,83,25,"ENGINE"],[99,33,83,25],[99,34,83,26,"runKernel"],[99,43,83,35],[99,44,83,36,"StringNGrams"],[99,57,83,48],[99,58,83,48,"StringNGrams"],[99,70,83,48],[99,72,83,50,"inputs"],[99,78,83,56],[99,80,83,58,"attrs"],[99,85,83,63],[99,86,83,64],[100,4,84,4],[100,11,84,11],[101,6,84,13,"nGrams"],[101,12,84,19],[101,14,84,21,"result"],[101,20,84,27],[101,21,84,28],[101,22,84,29],[101,23,84,30],[102,6,84,32,"nGramsSplits"],[102,18,84,44],[102,20,84,46,"result"],[102,26,84,52],[102,27,84,53],[102,28,84,54],[103,4,84,56],[103,5,84,57],[104,2,85,0],[105,2,86,7],[105,8,86,13,"stringNGrams"],[105,20,86,25],[105,23,86,28],[105,38,86,44],[105,42,86,44,"op"],[105,52,86,46],[105,53,86,46,"op"],[105,55,86,46],[105,57,86,47],[106,4,86,49,"stringNGrams_"],[107,2,86,63],[107,3,86,64],[107,4,86,65],[108,0,86,66],[108,3]],"functionMap":{"names":["<global>","stringNGrams_"],"mappings":"AAA;AC6D;CDuB"},"hasCjsExports":false},"type":"js/module"}]}