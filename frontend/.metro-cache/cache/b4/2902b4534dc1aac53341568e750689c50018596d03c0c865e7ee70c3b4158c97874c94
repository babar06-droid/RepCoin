{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":286},"end":{"line":10,"column":67,"index":353}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}},{"name":"../../utils/types_utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":354},"end":{"line":11,"column":82,"index":436}}],"key":"KNLCITfwnGLaGBjQ0rMvbYdxCWo=","exportNames":["*"],"imports":1}},{"name":"../../errors","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":12,"column":0,"index":437},"end":{"line":12,"column":42,"index":479}}],"key":"eT202ujluoOcHDbauyWnF/muvbc=","exportNames":["*"],"imports":1}},{"name":"../../engine/base_random_layer","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":13,"column":0,"index":480},"end":{"line":13,"column":65,"index":545}}],"key":"CJ0ZVm9VHGxgxQsOjAfSMiOQidw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"INTERPOLATION_METHODS\", {\n    enumerable: true,\n    get: function () {\n      return INTERPOLATION_METHODS;\n    }\n  });\n  Object.defineProperty(exports, \"RandomWidth\", {\n    enumerable: true,\n    get: function () {\n      return RandomWidth;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  var _utilsTypes_utils = require(_dependencyMap[1], \"../../utils/types_utils\");\n  var _errors = require(_dependencyMap[2], \"../../errors\");\n  var _engineBase_random_layer = require(_dependencyMap[3], \"../../engine/base_random_layer\");\n  /**\n   * @license\n   * Copyright 2023 CodeSmith LLC\n   *\n   * Use of this source code is governed by an MIT-style\n   * license that can be found in the LICENSE file or at\n   * https://opensource.org/licenses/MIT.\n   * =============================================================================\n   */\n\n  const INTERPOLATION_KEYS = ['bilinear', 'nearest'];\n  const INTERPOLATION_METHODS = new Set(INTERPOLATION_KEYS);\n  /**\n   * Preprocessing Layer with randomly varies image during training\n   *\n   * This layer randomly adjusts the width of a batch of images of a\n   * batch of images by a random factor.\n   *\n   * The input should be a 3D (unbatched) or\n   * 4D (batched) tensor in the `\"channels_last\"` image data format. Input pixel\n   * values can be of any range (e.g. `[0., 1.)` or `[0, 255]`) and of integer\n   * or floating point dtype. By default, the layer will output floats.\n   *\n   * tf methods implemented in tfjs: 'bilinear', 'nearest',\n   * tf methods unimplemented in tfjs: 'bicubic', 'area', 'lanczos3', 'lanczos5',\n   *                                   'gaussian', 'mitchellcubic'\n   *\n   */\n  class RandomWidth extends _engineBase_random_layer.BaseRandomLayer {\n    constructor(args) {\n      super(args);\n      const {\n        factor,\n        interpolation = 'bilinear'\n      } = args;\n      this.factor = factor;\n      if (Array.isArray(this.factor) && this.factor.length === 2) {\n        this.widthLower = this.factor[0];\n        this.widthUpper = this.factor[1];\n      } else if (!Array.isArray(this.factor) && this.factor > 0) {\n        this.widthLower = -this.factor;\n        this.widthUpper = this.factor;\n      } else {\n        throw new _errors.ValueError(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);\n      }\n      if (this.widthLower < -1.0 || this.widthUpper < -1.0) {\n        throw new _errors.ValueError(`factor must have values larger than -1. Got: ${this.factor}`);\n      }\n      if (this.widthUpper < this.widthLower) {\n        throw new _errors.ValueError(`factor cannot have upper bound less than lower bound.\n        Got upper bound: ${this.widthUpper}.\n        Got lower bound: ${this.widthLower}\n      `);\n      }\n      if (interpolation) {\n        if (INTERPOLATION_METHODS.has(interpolation)) {\n          this.interpolation = interpolation;\n        } else {\n          throw new _errors.ValueError(`Invalid interpolation parameter: ${interpolation} is not implemented`);\n        }\n      }\n    }\n    getConfig() {\n      const config = {\n        'factor': this.factor,\n        'interpolation': this.interpolation\n      };\n      const baseConfig = super.getConfig();\n      Object.assign(config, baseConfig);\n      return config;\n    }\n    computeOutputShape(inputShape) {\n      inputShape = (0, _utilsTypes_utils.getExactlyOneShape)(inputShape);\n      const numChannels = inputShape[2];\n      return [this.imgHeight, -1, numChannels];\n    }\n    call(inputs, kwargs) {\n      return (0, _tensorflowTfjsCore.tidy)(() => {\n        const input = (0, _utilsTypes_utils.getExactlyOneTensor)(inputs);\n        this.imgHeight = input.shape[input.shape.length - 3];\n        const imgWidth = input.shape[input.shape.length - 2];\n        this.widthFactor = (0, _tensorflowTfjsCore.randomUniform)([1], 1.0 + this.widthLower, 1.0 + this.widthUpper, 'float32', this.randomGenerator.next());\n        let adjustedWidth = this.widthFactor.dataSync()[0] * imgWidth;\n        adjustedWidth = Math.round(adjustedWidth);\n        const size = [this.imgHeight, adjustedWidth];\n        switch (this.interpolation) {\n          case 'bilinear':\n            return _tensorflowTfjsCore.image.resizeBilinear(inputs, size);\n          case 'nearest':\n            return _tensorflowTfjsCore.image.resizeNearestNeighbor(inputs, size);\n          default:\n            throw new Error(`Interpolation is ${this.interpolation}\n          but only ${[...INTERPOLATION_METHODS]} are supported`);\n        }\n      });\n    }\n  }\n  /** @nocollapse */\n  RandomWidth.className = 'RandomWidth';\n  _tensorflowTfjsCore.serialization.registerClass(RandomWidth);\n});","lineCount":123,"map":[[7,2,16,0,"Object"],[7,8,16,0],[7,9,16,0,"defineProperty"],[7,23,16,0],[7,24,16,0,"exports"],[7,31,16,0],[8,4,16,0,"enumerable"],[8,14,16,0],[9,4,16,0,"get"],[9,7,16,0],[9,18,16,0,"get"],[9,19,16,0],[10,6,16,0],[10,13,16,0,"INTERPOLATION_METHODS"],[10,34,16,0],[11,4,16,0],[12,2,16,0],[13,2,104,0,"Object"],[13,8,104,0],[13,9,104,0,"defineProperty"],[13,23,104,0],[13,24,104,0,"exports"],[13,31,104,0],[14,4,104,0,"enumerable"],[14,14,104,0],[15,4,104,0,"get"],[15,7,104,0],[15,18,104,0,"get"],[15,19,104,0],[16,6,104,0],[16,13,104,9,"RandomWidth"],[16,24,104,20],[17,4,104,20],[18,2,104,20],[19,2,10,0],[19,6,10,0,"_tensorflowTfjsCore"],[19,25,10,0],[19,28,10,0,"require"],[19,35,10,0],[19,36,10,0,"_dependencyMap"],[19,50,10,0],[20,2,11,0],[20,6,11,0,"_utilsTypes_utils"],[20,23,11,0],[20,26,11,0,"require"],[20,33,11,0],[20,34,11,0,"_dependencyMap"],[20,48,11,0],[21,2,12,0],[21,6,12,0,"_errors"],[21,13,12,0],[21,16,12,0,"require"],[21,23,12,0],[21,24,12,0,"_dependencyMap"],[21,38,12,0],[22,2,13,0],[22,6,13,0,"_engineBase_random_layer"],[22,30,13,0],[22,33,13,0,"require"],[22,40,13,0],[22,41,13,0,"_dependencyMap"],[22,55,13,0],[23,2,1,0],[24,0,2,0],[25,0,3,0],[26,0,4,0],[27,0,5,0],[28,0,6,0],[29,0,7,0],[30,0,8,0],[31,0,9,0],[33,2,15,0],[33,8,15,6,"INTERPOLATION_KEYS"],[33,26,15,24],[33,29,15,27],[33,30,15,28],[33,40,15,38],[33,42,15,40],[33,51,15,49],[33,52,15,50],[34,2,16,7],[34,8,16,13,"INTERPOLATION_METHODS"],[34,29,16,34],[34,32,16,37],[34,36,16,41,"Set"],[34,39,16,44],[34,40,16,45,"INTERPOLATION_KEYS"],[34,58,16,63],[34,59,16,64],[35,2,17,0],[36,0,18,0],[37,0,19,0],[38,0,20,0],[39,0,21,0],[40,0,22,0],[41,0,23,0],[42,0,24,0],[43,0,25,0],[44,0,26,0],[45,0,27,0],[46,0,28,0],[47,0,29,0],[48,0,30,0],[49,0,31,0],[50,0,32,0],[51,2,33,0],[51,8,33,6,"RandomWidth"],[51,19,33,17],[51,28,33,26,"BaseRandomLayer"],[51,52,33,41],[51,53,33,41,"BaseRandomLayer"],[51,68,33,41],[51,69,33,42],[52,4,34,4,"constructor"],[52,15,34,15,"constructor"],[52,16,34,16,"args"],[52,20,34,20],[52,22,34,22],[53,6,35,8],[53,11,35,13],[53,12,35,14,"args"],[53,16,35,18],[53,17,35,19],[54,6,36,8],[54,12,36,14],[55,8,36,16,"factor"],[55,14,36,22],[56,8,36,24,"interpolation"],[56,21,36,37],[56,24,36,40],[57,6,36,51],[57,7,36,52],[57,10,36,55,"args"],[57,14,36,59],[58,6,37,8],[58,10,37,12],[58,11,37,13,"factor"],[58,17,37,19],[58,20,37,22,"factor"],[58,26,37,28],[59,6,38,8],[59,10,38,12,"Array"],[59,15,38,17],[59,16,38,18,"isArray"],[59,23,38,25],[59,24,38,26],[59,28,38,30],[59,29,38,31,"factor"],[59,35,38,37],[59,36,38,38],[59,40,38,42],[59,44,38,46],[59,45,38,47,"factor"],[59,51,38,53],[59,52,38,54,"length"],[59,58,38,60],[59,63,38,65],[59,64,38,66],[59,66,38,68],[60,8,39,12],[60,12,39,16],[60,13,39,17,"widthLower"],[60,23,39,27],[60,26,39,30],[60,30,39,34],[60,31,39,35,"factor"],[60,37,39,41],[60,38,39,42],[60,39,39,43],[60,40,39,44],[61,8,40,12],[61,12,40,16],[61,13,40,17,"widthUpper"],[61,23,40,27],[61,26,40,30],[61,30,40,34],[61,31,40,35,"factor"],[61,37,40,41],[61,38,40,42],[61,39,40,43],[61,40,40,44],[62,6,41,8],[62,7,41,9],[62,13,42,13],[62,17,42,17],[62,18,42,18,"Array"],[62,23,42,23],[62,24,42,24,"isArray"],[62,31,42,31],[62,32,42,32],[62,36,42,36],[62,37,42,37,"factor"],[62,43,42,43],[62,44,42,44],[62,48,42,48],[62,52,42,52],[62,53,42,53,"factor"],[62,59,42,59],[62,62,42,62],[62,63,42,63],[62,65,42,65],[63,8,43,12],[63,12,43,16],[63,13,43,17,"widthLower"],[63,23,43,27],[63,26,43,30],[63,27,43,31],[63,31,43,35],[63,32,43,36,"factor"],[63,38,43,42],[64,8,44,12],[64,12,44,16],[64,13,44,17,"widthUpper"],[64,23,44,27],[64,26,44,30],[64,30,44,34],[64,31,44,35,"factor"],[64,37,44,41],[65,6,45,8],[65,7,45,9],[65,13,46,13],[66,8,47,12],[66,14,47,18],[66,18,47,22,"ValueError"],[66,25,47,32],[66,26,47,32,"ValueError"],[66,36,47,32],[66,37,47,33],[66,56,47,52],[66,60,47,56],[66,61,47,57,"factor"],[66,67,47,63],[66,116,47,112],[66,117,47,113],[67,6,48,8],[68,6,49,8],[68,10,49,12],[68,14,49,16],[68,15,49,17,"widthLower"],[68,25,49,27],[68,28,49,30],[68,29,49,31],[68,32,49,34],[68,36,49,38],[68,40,49,42],[68,41,49,43,"widthUpper"],[68,51,49,53],[68,54,49,56],[68,55,49,57],[68,58,49,60],[68,60,49,62],[69,8,50,12],[69,14,50,18],[69,18,50,22,"ValueError"],[69,25,50,32],[69,26,50,32,"ValueError"],[69,36,50,32],[69,37,50,33],[69,85,50,81],[69,89,50,85],[69,90,50,86,"factor"],[69,96,50,92],[69,98,50,94],[69,99,50,95],[70,6,51,8],[71,6,52,8],[71,10,52,12],[71,14,52,16],[71,15,52,17,"widthUpper"],[71,25,52,27],[71,28,52,30],[71,32,52,34],[71,33,52,35,"widthLower"],[71,43,52,45],[71,45,52,47],[72,8,53,12],[72,14,53,18],[72,18,53,22,"ValueError"],[72,25,53,32],[72,26,53,32,"ValueError"],[72,36,53,32],[72,37,53,33],[73,0,54,0],[73,27,54,27],[73,31,54,31],[73,32,54,32,"widthUpper"],[73,42,54,42],[74,0,55,0],[74,27,55,27],[74,31,55,31],[74,32,55,32,"widthLower"],[74,42,55,42],[75,0,56,0],[75,7,56,7],[75,8,56,8],[76,6,57,8],[77,6,58,8],[77,10,58,12,"interpolation"],[77,23,58,25],[77,25,58,27],[78,8,59,12],[78,12,59,16,"INTERPOLATION_METHODS"],[78,33,59,37],[78,34,59,38,"has"],[78,37,59,41],[78,38,59,42,"interpolation"],[78,51,59,55],[78,52,59,56],[78,54,59,58],[79,10,60,16],[79,14,60,20],[79,15,60,21,"interpolation"],[79,28,60,34],[79,31,60,37,"interpolation"],[79,44,60,50],[80,8,61,12],[80,9,61,13],[80,15,62,17],[81,10,63,16],[81,16,63,22],[81,20,63,26,"ValueError"],[81,27,63,36],[81,28,63,36,"ValueError"],[81,38,63,36],[81,39,63,37],[81,75,63,73,"interpolation"],[81,88,63,86],[81,109,63,107],[81,110,63,108],[82,8,64,12],[83,6,65,8],[84,4,66,4],[85,4,67,4,"getConfig"],[85,13,67,13,"getConfig"],[85,14,67,13],[85,16,67,16],[86,6,68,8],[86,12,68,14,"config"],[86,18,68,20],[86,21,68,23],[87,8,69,12],[87,16,69,20],[87,18,69,22],[87,22,69,26],[87,23,69,27,"factor"],[87,29,69,33],[88,8,70,12],[88,23,70,27],[88,25,70,29],[88,29,70,33],[88,30,70,34,"interpolation"],[89,6,71,8],[89,7,71,9],[90,6,72,8],[90,12,72,14,"baseConfig"],[90,22,72,24],[90,25,72,27],[90,30,72,32],[90,31,72,33,"getConfig"],[90,40,72,42],[90,41,72,43],[90,42,72,44],[91,6,73,8,"Object"],[91,12,73,14],[91,13,73,15,"assign"],[91,19,73,21],[91,20,73,22,"config"],[91,26,73,28],[91,28,73,30,"baseConfig"],[91,38,73,40],[91,39,73,41],[92,6,74,8],[92,13,74,15,"config"],[92,19,74,21],[93,4,75,4],[94,4,76,4,"computeOutputShape"],[94,22,76,22,"computeOutputShape"],[94,23,76,23,"inputShape"],[94,33,76,33],[94,35,76,35],[95,6,77,8,"inputShape"],[95,16,77,18],[95,19,77,21],[95,23,77,21,"getExactlyOneShape"],[95,40,77,39],[95,41,77,39,"getExactlyOneShape"],[95,59,77,39],[95,61,77,40,"inputShape"],[95,71,77,50],[95,72,77,51],[96,6,78,8],[96,12,78,14,"numChannels"],[96,23,78,25],[96,26,78,28,"inputShape"],[96,36,78,38],[96,37,78,39],[96,38,78,40],[96,39,78,41],[97,6,79,8],[97,13,79,15],[97,14,79,16],[97,18,79,20],[97,19,79,21,"imgHeight"],[97,28,79,30],[97,30,79,32],[97,31,79,33],[97,32,79,34],[97,34,79,36,"numChannels"],[97,45,79,47],[97,46,79,48],[98,4,80,4],[99,4,81,4,"call"],[99,8,81,8,"call"],[99,9,81,9,"inputs"],[99,15,81,15],[99,17,81,17,"kwargs"],[99,23,81,23],[99,25,81,25],[100,6,82,8],[100,13,82,15],[100,17,82,15,"tidy"],[100,36,82,19],[100,37,82,19,"tidy"],[100,41,82,19],[100,43,82,20],[100,49,82,26],[101,8,83,12],[101,14,83,18,"input"],[101,19,83,23],[101,22,83,26],[101,26,83,26,"getExactlyOneTensor"],[101,43,83,45],[101,44,83,45,"getExactlyOneTensor"],[101,63,83,45],[101,65,83,46,"inputs"],[101,71,83,52],[101,72,83,53],[102,8,84,12],[102,12,84,16],[102,13,84,17,"imgHeight"],[102,22,84,26],[102,25,84,29,"input"],[102,30,84,34],[102,31,84,35,"shape"],[102,36,84,40],[102,37,84,41,"input"],[102,42,84,46],[102,43,84,47,"shape"],[102,48,84,52],[102,49,84,53,"length"],[102,55,84,59],[102,58,84,62],[102,59,84,63],[102,60,84,64],[103,8,85,12],[103,14,85,18,"imgWidth"],[103,22,85,26],[103,25,85,29,"input"],[103,30,85,34],[103,31,85,35,"shape"],[103,36,85,40],[103,37,85,41,"input"],[103,42,85,46],[103,43,85,47,"shape"],[103,48,85,52],[103,49,85,53,"length"],[103,55,85,59],[103,58,85,62],[103,59,85,63],[103,60,85,64],[104,8,86,12],[104,12,86,16],[104,13,86,17,"widthFactor"],[104,24,86,28],[104,27,86,31],[104,31,86,31,"randomUniform"],[104,50,86,44],[104,51,86,44,"randomUniform"],[104,64,86,44],[104,66,86,45],[104,67,86,46],[104,68,86,47],[104,69,86,48],[104,71,86,51],[104,74,86,54],[104,77,86,57],[104,81,86,61],[104,82,86,62,"widthLower"],[104,92,86,72],[104,94,86,76],[104,97,86,79],[104,100,86,82],[104,104,86,86],[104,105,86,87,"widthUpper"],[104,115,86,97],[104,117,86,100],[104,126,86,109],[104,128,86,111],[104,132,86,115],[104,133,86,116,"randomGenerator"],[104,148,86,131],[104,149,86,132,"next"],[104,153,86,136],[104,154,86,137],[104,155,86,138],[104,156,86,139],[105,8,87,12],[105,12,87,16,"adjustedWidth"],[105,25,87,29],[105,28,87,32],[105,32,87,36],[105,33,87,37,"widthFactor"],[105,44,87,48],[105,45,87,49,"dataSync"],[105,53,87,57],[105,54,87,58],[105,55,87,59],[105,56,87,60],[105,57,87,61],[105,58,87,62],[105,61,87,65,"imgWidth"],[105,69,87,73],[106,8,88,12,"adjustedWidth"],[106,21,88,25],[106,24,88,28,"Math"],[106,28,88,32],[106,29,88,33,"round"],[106,34,88,38],[106,35,88,39,"adjustedWidth"],[106,48,88,52],[106,49,88,53],[107,8,89,12],[107,14,89,18,"size"],[107,18,89,22],[107,21,89,25],[107,22,89,26],[107,26,89,30],[107,27,89,31,"imgHeight"],[107,36,89,40],[107,38,89,42,"adjustedWidth"],[107,51,89,55],[107,52,89,56],[108,8,90,12],[108,16,90,20],[108,20,90,24],[108,21,90,25,"interpolation"],[108,34,90,38],[109,10,91,16],[109,15,91,21],[109,25,91,31],[110,12,92,20],[110,19,92,27,"image"],[110,38,92,32],[110,39,92,32,"image"],[110,44,92,32],[110,45,92,33,"resizeBilinear"],[110,59,92,47],[110,60,92,48,"inputs"],[110,66,92,54],[110,68,92,56,"size"],[110,72,92,60],[110,73,92,61],[111,10,93,16],[111,15,93,21],[111,24,93,30],[112,12,94,20],[112,19,94,27,"image"],[112,38,94,32],[112,39,94,32,"image"],[112,44,94,32],[112,45,94,33,"resizeNearestNeighbor"],[112,66,94,54],[112,67,94,55,"inputs"],[112,73,94,61],[112,75,94,63,"size"],[112,79,94,67],[112,80,94,68],[113,10,95,16],[114,12,96,20],[114,18,96,26],[114,22,96,30,"Error"],[114,27,96,35],[114,28,96,36],[114,48,96,56],[114,52,96,60],[114,53,96,61,"interpolation"],[114,66,96,74],[115,0,97,0],[115,21,97,21],[115,22,97,22],[115,25,97,25,"INTERPOLATION_METHODS"],[115,46,97,46],[115,47,97,47],[115,63,97,63],[115,64,97,64],[116,8,98,12],[117,6,99,8],[117,7,99,9],[117,8,99,10],[118,4,100,4],[119,2,101,0],[120,2,102,0],[121,2,103,0,"RandomWidth"],[121,13,103,11],[121,14,103,12,"className"],[121,23,103,21],[121,26,103,24],[121,39,103,37],[122,2,105,0,"serialization"],[122,21,105,13],[122,22,105,13,"serialization"],[122,35,105,13],[122,36,105,14,"registerClass"],[122,49,105,27],[122,50,105,28,"RandomWidth"],[122,61,105,39],[122,62,105,40],[123,0,105,41],[123,3]],"functionMap":{"names":["<global>","RandomWidth","RandomWidth#constructor","RandomWidth#getConfig","RandomWidth#computeOutputShape","RandomWidth#call","tidy$argument_0"],"mappings":"AAA;ACgC;ICC;KDgC;IEC;KFQ;IGC;KHI;IIC;oBCC;SDiB;KJC;CDC"},"hasCjsExports":false},"type":"js/module"}]}