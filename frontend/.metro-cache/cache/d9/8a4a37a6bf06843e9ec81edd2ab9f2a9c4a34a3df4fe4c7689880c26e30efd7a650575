{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH\", {\n    enumerable: true,\n    get: function () {\n      return MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH;\n    }\n  });\n  exports.checkUserDefinedMetadata = checkUserDefinedMetadata;\n  exports.plainObjectCheck = plainObjectCheck;\n  /**\n   * @license\n   * Copyright 2019 Google LLC\n   *\n   * Use of this source code is governed by an MIT-style\n   * license that can be found in the LICENSE file or at\n   * https://opensource.org/licenses/MIT.\n   * =============================================================================\n   */\n  /** Utility functions related to user-defined metadata. */\n  // Maximum recommended serialized size for user-defined metadata.\n  // Beyond this limit, a warning message will be printed during model loading and\n  // saving.\n  const MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH = 1 * 1024 * 1024;\n  /**\n   * Check validity of user-defined metadata.\n   *\n   * @param userDefinedMetadata\n   * @param modelName Name of the model that the user-defined metadata belongs to.\n   *   Used during construction of error messages.\n   * @param checkSize Whether to check the size of the metadata is under\n   *   recommended limit. Default: `false`. If `true`, will try stringify the\n   *   JSON object and print a console warning if the serialzied size is above the\n   *   limit.\n   * @throws Error if `userDefinedMetadata` is not a plain JSON object.\n   */\n  function checkUserDefinedMetadata(userDefinedMetadata, modelName, checkSize = false) {\n    if (userDefinedMetadata == null || typeof userDefinedMetadata !== 'object' || Object.getPrototypeOf(userDefinedMetadata) !== Object.prototype || !plainObjectCheck(userDefinedMetadata)) {\n      throw new Error('User-defined metadata is expected to be a JSON object, but is not.');\n    }\n    if (checkSize) {\n      const out = JSON.stringify(userDefinedMetadata);\n      if (out.length > MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH) {\n        console.warn(`User-defined metadata of model \"${modelName}\" is too large in ` + `size (length=${out.length} when serialized). It is not ` + `recommended to store such large objects in user-defined metadata. ` + `Please make sure its serialized length is <= ` + `${MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH}.`);\n      }\n    }\n  }\n  /**\n   * Check if an input is plain JSON object or any valid subfield of it.\n   *\n   * @param x The input to be checked.\n   * @param assertObject Whether to assert `x` is a JSON object, i.e., reject\n   *   cases of arrays and primitives.\n   * @return Returns `true` if and only if `x` is a plain JSON object,\n   *   a JSON-valid primitive including string, number, boolean and null,\n   *   or an array of the said types.\n   */\n  // tslint:disable-next-line:no-any\n  function plainObjectCheck(x) {\n    if (x === null) {\n      // Note: typeof `null` is 'object', and `null` is valid in JSON.\n      return true;\n    } else if (typeof x === 'object') {\n      if (Object.getPrototypeOf(x) === Object.prototype) {\n        // `x` is a JavaScript object and its prototype is Object.\n        const keys = Object.keys(x);\n        for (const key of keys) {\n          if (typeof key !== 'string') {\n            // JSON keys must be strings.\n            return false;\n          }\n          if (!plainObjectCheck(x[key])) {\n            // Recursive call.\n            return false;\n          }\n        }\n        return true;\n      } else {\n        // `x` is a JavaScript object but its prototype is not Object.\n        if (Array.isArray(x)) {\n          // `x` is a JavaScript array.\n          for (const item of x) {\n            if (!plainObjectCheck(item)) {\n              // Recursive call.\n              return false;\n            }\n          }\n          return true;\n        } else {\n          // `x` is a JavaScript object and its prototype is not Object,\n          // and it's not an Array. I.e., it's a complex object such as\n          // `Error` and `Date`.\n          return false;\n        }\n      }\n    } else {\n      // `x` is not a JavaScript object or `null`.\n      const xType = typeof x;\n      return xType === 'string' || xType === 'number' || xType === 'boolean';\n    }\n  }\n});","lineCount":106,"map":[[7,2,14,0,"Object"],[7,8,14,0],[7,9,14,0,"defineProperty"],[7,23,14,0],[7,24,14,0,"exports"],[7,31,14,0],[8,4,14,0,"enumerable"],[8,14,14,0],[9,4,14,0,"get"],[9,7,14,0],[9,18,14,0,"get"],[9,19,14,0],[10,6,14,0],[10,13,14,0,"MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH"],[10,56,14,0],[11,4,14,0],[12,2,14,0],[13,2,27,0,"exports"],[13,9,27,0],[13,10,27,0,"checkUserDefinedMetadata"],[13,34,27,0],[13,37,27,0,"checkUserDefinedMetadata"],[13,61,27,0],[14,2,56,0,"exports"],[14,9,56,0],[14,10,56,0,"plainObjectCheck"],[14,26,56,0],[14,29,56,0,"plainObjectCheck"],[14,45,56,0],[15,2,1,0],[16,0,2,0],[17,0,3,0],[18,0,4,0],[19,0,5,0],[20,0,6,0],[21,0,7,0],[22,0,8,0],[23,0,9,0],[24,2,10,0],[25,2,11,0],[26,2,12,0],[27,2,13,0],[28,2,14,7],[28,8,14,13,"MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH"],[28,51,14,56],[28,54,14,59],[28,55,14,60],[28,58,14,63],[28,62,14,67],[28,65,14,70],[28,69,14,74],[29,2,15,0],[30,0,16,0],[31,0,17,0],[32,0,18,0],[33,0,19,0],[34,0,20,0],[35,0,21,0],[36,0,22,0],[37,0,23,0],[38,0,24,0],[39,0,25,0],[40,0,26,0],[41,2,27,7],[41,11,27,16,"checkUserDefinedMetadata"],[41,35,27,40,"checkUserDefinedMetadata"],[41,36,27,41,"userDefinedMetadata"],[41,55,27,60],[41,57,27,62,"modelName"],[41,66,27,71],[41,68,27,73,"checkSize"],[41,77,27,82],[41,80,27,85],[41,85,27,90],[41,87,27,92],[42,4,28,4],[42,8,28,8,"userDefinedMetadata"],[42,27,28,27],[42,31,28,31],[42,35,28,35],[42,39,29,8],[42,46,29,15,"userDefinedMetadata"],[42,65,29,34],[42,70,29,39],[42,78,29,47],[42,82,30,8,"Object"],[42,88,30,14],[42,89,30,15,"getPrototypeOf"],[42,103,30,29],[42,104,30,30,"userDefinedMetadata"],[42,123,30,49],[42,124,30,50],[42,129,30,55,"Object"],[42,135,30,61],[42,136,30,62,"prototype"],[42,145,30,71],[42,149,31,8],[42,150,31,9,"plainObjectCheck"],[42,166,31,25],[42,167,31,26,"userDefinedMetadata"],[42,186,31,45],[42,187,31,46],[42,189,31,48],[43,6,32,8],[43,12,32,14],[43,16,32,18,"Error"],[43,21,32,23],[43,22,32,24],[43,90,32,92],[43,91,32,93],[44,4,33,4],[45,4,34,4],[45,8,34,8,"checkSize"],[45,17,34,17],[45,19,34,19],[46,6,35,8],[46,12,35,14,"out"],[46,15,35,17],[46,18,35,20,"JSON"],[46,22,35,24],[46,23,35,25,"stringify"],[46,32,35,34],[46,33,35,35,"userDefinedMetadata"],[46,52,35,54],[46,53,35,55],[47,6,36,8],[47,10,36,12,"out"],[47,13,36,15],[47,14,36,16,"length"],[47,20,36,22],[47,23,36,25,"MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH"],[47,66,36,68],[47,68,36,70],[48,8,37,12,"console"],[48,15,37,19],[48,16,37,20,"warn"],[48,20,37,24],[48,21,37,25],[48,56,37,60,"modelName"],[48,65,37,69],[48,85,37,89],[48,88,38,16],[48,104,38,32,"out"],[48,107,38,35],[48,108,38,36,"length"],[48,114,38,42],[48,145,38,73],[48,148,39,16],[48,216,39,84],[48,219,40,16],[48,266,40,63],[48,269,41,16],[48,272,41,19,"MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH"],[48,315,41,62],[48,318,41,65],[48,319,41,66],[49,6,42,8],[50,4,43,4],[51,2,44,0],[52,2,45,0],[53,0,46,0],[54,0,47,0],[55,0,48,0],[56,0,49,0],[57,0,50,0],[58,0,51,0],[59,0,52,0],[60,0,53,0],[61,0,54,0],[62,2,55,0],[63,2,56,7],[63,11,56,16,"plainObjectCheck"],[63,27,56,32,"plainObjectCheck"],[63,28,56,33,"x"],[63,29,56,34],[63,31,56,36],[64,4,57,4],[64,8,57,8,"x"],[64,9,57,9],[64,14,57,14],[64,18,57,18],[64,20,57,20],[65,6,58,8],[66,6,59,8],[66,13,59,15],[66,17,59,19],[67,4,60,4],[67,5,60,5],[67,11,61,9],[67,15,61,13],[67,22,61,20,"x"],[67,23,61,21],[67,28,61,26],[67,36,61,34],[67,38,61,36],[68,6,62,8],[68,10,62,12,"Object"],[68,16,62,18],[68,17,62,19,"getPrototypeOf"],[68,31,62,33],[68,32,62,34,"x"],[68,33,62,35],[68,34,62,36],[68,39,62,41,"Object"],[68,45,62,47],[68,46,62,48,"prototype"],[68,55,62,57],[68,57,62,59],[69,8,63,12],[70,8,64,12],[70,14,64,18,"keys"],[70,18,64,22],[70,21,64,25,"Object"],[70,27,64,31],[70,28,64,32,"keys"],[70,32,64,36],[70,33,64,37,"x"],[70,34,64,38],[70,35,64,39],[71,8,65,12],[71,13,65,17],[71,19,65,23,"key"],[71,22,65,26],[71,26,65,30,"keys"],[71,30,65,34],[71,32,65,36],[72,10,66,16],[72,14,66,20],[72,21,66,27,"key"],[72,24,66,30],[72,29,66,35],[72,37,66,43],[72,39,66,45],[73,12,67,20],[74,12,68,20],[74,19,68,27],[74,24,68,32],[75,10,69,16],[76,10,70,16],[76,14,70,20],[76,15,70,21,"plainObjectCheck"],[76,31,70,37],[76,32,70,38,"x"],[76,33,70,39],[76,34,70,40,"key"],[76,37,70,43],[76,38,70,44],[76,39,70,45],[76,41,70,47],[77,12,70,49],[78,12,71,20],[78,19,71,27],[78,24,71,32],[79,10,72,16],[80,8,73,12],[81,8,74,12],[81,15,74,19],[81,19,74,23],[82,6,75,8],[82,7,75,9],[82,13,76,13],[83,8,77,12],[84,8,78,12],[84,12,78,16,"Array"],[84,17,78,21],[84,18,78,22,"isArray"],[84,25,78,29],[84,26,78,30,"x"],[84,27,78,31],[84,28,78,32],[84,30,78,34],[85,10,79,16],[86,10,80,16],[86,15,80,21],[86,21,80,27,"item"],[86,25,80,31],[86,29,80,35,"x"],[86,30,80,36],[86,32,80,38],[87,12,81,20],[87,16,81,24],[87,17,81,25,"plainObjectCheck"],[87,33,81,41],[87,34,81,42,"item"],[87,38,81,46],[87,39,81,47],[87,41,81,49],[88,14,81,51],[89,14,82,24],[89,21,82,31],[89,26,82,36],[90,12,83,20],[91,10,84,16],[92,10,85,16],[92,17,85,23],[92,21,85,27],[93,8,86,12],[93,9,86,13],[93,15,87,17],[94,10,88,16],[95,10,89,16],[96,10,90,16],[97,10,91,16],[97,17,91,23],[97,22,91,28],[98,8,92,12],[99,6,93,8],[100,4,94,4],[100,5,94,5],[100,11,95,9],[101,6,96,8],[102,6,97,8],[102,12,97,14,"xType"],[102,17,97,19],[102,20,97,22],[102,27,97,29,"x"],[102,28,97,30],[103,6,98,8],[103,13,98,15,"xType"],[103,18,98,20],[103,23,98,25],[103,31,98,33],[103,35,98,37,"xType"],[103,40,98,42],[103,45,98,47],[103,53,98,55],[103,57,98,59,"xType"],[103,62,98,64],[103,67,98,69],[103,76,98,78],[104,4,99,4],[105,2,100,0],[106,0,100,1],[106,3]],"functionMap":{"names":["<global>","checkUserDefinedMetadata","plainObjectCheck"],"mappings":"AAA;OC0B;CDiB;OEY;CF4C"},"hasCjsExports":false},"type":"js/module"}]}