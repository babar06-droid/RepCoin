{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getBroadcastDims = getBroadcastDims;\n  exports.getReductionAxes = getReductionAxes;\n  exports.assertAndGetBroadcastShape = assertAndGetBroadcastShape;\n  /**\n   * @license\n   * Copyright 2017 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n  /**\n   * Returns the dimensions in the input shape that are broadcasted to\n   * produce the provided output shape.\n   *\n   * The returned dimensions are 0-indexed and sorted. An example:\n   * inShape = [4, 1, 3]\n   * outShape = [5, 4, 3, 3]\n   * result = [1]. Dimension 1 (2nd dimension of input) gets broadcasted 1 => 3.\n   */\n  function getBroadcastDims(inShape, outShape) {\n    const inRank = inShape.length;\n    const dims = [];\n    for (let i = 0; i < inRank; i++) {\n      const dim = inRank - 1 - i;\n      const a = inShape[dim] || 1;\n      const b = outShape[outShape.length - 1 - i] || 1;\n      if (b > 1 && a === 1) {\n        dims.unshift(dim);\n      }\n    }\n    return dims;\n  }\n  /**\n   * Returns the axes in the output space that should be reduced to produce\n   * the input space.\n   */\n  function getReductionAxes(inShape, outShape) {\n    const result = [];\n    for (let i = 0; i < outShape.length; i++) {\n      const inDim = inShape[inShape.length - i - 1];\n      const outAxis = outShape.length - i - 1;\n      const outDim = outShape[outAxis];\n      if (inDim == null || inDim === 1 && outDim > 1) {\n        result.unshift(outAxis);\n      }\n    }\n    return result;\n  }\n  function assertAndGetBroadcastShape(shapeA, shapeB) {\n    const l = Math.max(shapeA.length, shapeB.length);\n    const result = new Array(l);\n    for (let i = 0; i < l; i++) {\n      let a = shapeA[shapeA.length - i - 1];\n      if (a == null) {\n        a = 1;\n      }\n      let b = shapeB[shapeB.length - i - 1];\n      if (b == null) {\n        b = 1;\n      }\n      if (a === 1) {\n        result[l - i - 1] = b;\n      } else if (b === 1) {\n        result[l - i - 1] = a;\n      } else if (a !== b) {\n        const errMsg = `Operands could not be broadcast together with shapes ` + `${shapeA} and ${shapeB}.`;\n        throw Error(errMsg);\n      } else {\n        result[l - i - 1] = a;\n      }\n    }\n    return result;\n  }\n});","lineCount":89,"map":[[7,2,26,0,"exports"],[7,9,26,0],[7,10,26,0,"getBroadcastDims"],[7,26,26,0],[7,29,26,0,"getBroadcastDims"],[7,45,26,0],[8,2,43,0,"exports"],[8,9,43,0],[8,10,43,0,"getReductionAxes"],[8,26,43,0],[8,29,43,0,"getReductionAxes"],[8,45,43,0],[9,2,55,0,"exports"],[9,9,55,0],[9,10,55,0,"assertAndGetBroadcastShape"],[9,36,55,0],[9,39,55,0,"assertAndGetBroadcastShape"],[9,65,55,0],[10,2,1,0],[11,0,2,0],[12,0,3,0],[13,0,4,0],[14,0,5,0],[15,0,6,0],[16,0,7,0],[17,0,8,0],[18,0,9,0],[19,0,10,0],[20,0,11,0],[21,0,12,0],[22,0,13,0],[23,0,14,0],[24,0,15,0],[25,0,16,0],[26,2,17,0],[27,0,18,0],[28,0,19,0],[29,0,20,0],[30,0,21,0],[31,0,22,0],[32,0,23,0],[33,0,24,0],[34,0,25,0],[35,2,26,7],[35,11,26,16,"getBroadcastDims"],[35,27,26,32,"getBroadcastDims"],[35,28,26,33,"inShape"],[35,35,26,40],[35,37,26,42,"outShape"],[35,45,26,50],[35,47,26,52],[36,4,27,4],[36,10,27,10,"inRank"],[36,16,27,16],[36,19,27,19,"inShape"],[36,26,27,26],[36,27,27,27,"length"],[36,33,27,33],[37,4,28,4],[37,10,28,10,"dims"],[37,14,28,14],[37,17,28,17],[37,19,28,19],[38,4,29,4],[38,9,29,9],[38,13,29,13,"i"],[38,14,29,14],[38,17,29,17],[38,18,29,18],[38,20,29,20,"i"],[38,21,29,21],[38,24,29,24,"inRank"],[38,30,29,30],[38,32,29,32,"i"],[38,33,29,33],[38,35,29,35],[38,37,29,37],[39,6,30,8],[39,12,30,14,"dim"],[39,15,30,17],[39,18,30,20,"inRank"],[39,24,30,26],[39,27,30,29],[39,28,30,30],[39,31,30,33,"i"],[39,32,30,34],[40,6,31,8],[40,12,31,14,"a"],[40,13,31,15],[40,16,31,18,"inShape"],[40,23,31,25],[40,24,31,26,"dim"],[40,27,31,29],[40,28,31,30],[40,32,31,34],[40,33,31,35],[41,6,32,8],[41,12,32,14,"b"],[41,13,32,15],[41,16,32,18,"outShape"],[41,24,32,26],[41,25,32,27,"outShape"],[41,33,32,35],[41,34,32,36,"length"],[41,40,32,42],[41,43,32,45],[41,44,32,46],[41,47,32,49,"i"],[41,48,32,50],[41,49,32,51],[41,53,32,55],[41,54,32,56],[42,6,33,8],[42,10,33,12,"b"],[42,11,33,13],[42,14,33,16],[42,15,33,17],[42,19,33,21,"a"],[42,20,33,22],[42,25,33,27],[42,26,33,28],[42,28,33,30],[43,8,34,12,"dims"],[43,12,34,16],[43,13,34,17,"unshift"],[43,20,34,24],[43,21,34,25,"dim"],[43,24,34,28],[43,25,34,29],[44,6,35,8],[45,4,36,4],[46,4,37,4],[46,11,37,11,"dims"],[46,15,37,15],[47,2,38,0],[48,2,39,0],[49,0,40,0],[50,0,41,0],[51,0,42,0],[52,2,43,7],[52,11,43,16,"getReductionAxes"],[52,27,43,32,"getReductionAxes"],[52,28,43,33,"inShape"],[52,35,43,40],[52,37,43,42,"outShape"],[52,45,43,50],[52,47,43,52],[53,4,44,4],[53,10,44,10,"result"],[53,16,44,16],[53,19,44,19],[53,21,44,21],[54,4,45,4],[54,9,45,9],[54,13,45,13,"i"],[54,14,45,14],[54,17,45,17],[54,18,45,18],[54,20,45,20,"i"],[54,21,45,21],[54,24,45,24,"outShape"],[54,32,45,32],[54,33,45,33,"length"],[54,39,45,39],[54,41,45,41,"i"],[54,42,45,42],[54,44,45,44],[54,46,45,46],[55,6,46,8],[55,12,46,14,"inDim"],[55,17,46,19],[55,20,46,22,"inShape"],[55,27,46,29],[55,28,46,30,"inShape"],[55,35,46,37],[55,36,46,38,"length"],[55,42,46,44],[55,45,46,47,"i"],[55,46,46,48],[55,49,46,51],[55,50,46,52],[55,51,46,53],[56,6,47,8],[56,12,47,14,"outAxis"],[56,19,47,21],[56,22,47,24,"outShape"],[56,30,47,32],[56,31,47,33,"length"],[56,37,47,39],[56,40,47,42,"i"],[56,41,47,43],[56,44,47,46],[56,45,47,47],[57,6,48,8],[57,12,48,14,"outDim"],[57,18,48,20],[57,21,48,23,"outShape"],[57,29,48,31],[57,30,48,32,"outAxis"],[57,37,48,39],[57,38,48,40],[58,6,49,8],[58,10,49,12,"inDim"],[58,15,49,17],[58,19,49,21],[58,23,49,25],[58,27,49,30,"inDim"],[58,32,49,35],[58,37,49,40],[58,38,49,41],[58,42,49,45,"outDim"],[58,48,49,51],[58,51,49,54],[58,52,49,56],[58,54,49,58],[59,8,50,12,"result"],[59,14,50,18],[59,15,50,19,"unshift"],[59,22,50,26],[59,23,50,27,"outAxis"],[59,30,50,34],[59,31,50,35],[60,6,51,8],[61,4,52,4],[62,4,53,4],[62,11,53,11,"result"],[62,17,53,17],[63,2,54,0],[64,2,55,7],[64,11,55,16,"assertAndGetBroadcastShape"],[64,37,55,42,"assertAndGetBroadcastShape"],[64,38,55,43,"shapeA"],[64,44,55,49],[64,46,55,51,"shapeB"],[64,52,55,57],[64,54,55,59],[65,4,56,4],[65,10,56,10,"l"],[65,11,56,11],[65,14,56,14,"Math"],[65,18,56,18],[65,19,56,19,"max"],[65,22,56,22],[65,23,56,23,"shapeA"],[65,29,56,29],[65,30,56,30,"length"],[65,36,56,36],[65,38,56,38,"shapeB"],[65,44,56,44],[65,45,56,45,"length"],[65,51,56,51],[65,52,56,52],[66,4,57,4],[66,10,57,10,"result"],[66,16,57,16],[66,19,57,19],[66,23,57,23,"Array"],[66,28,57,28],[66,29,57,29,"l"],[66,30,57,30],[66,31,57,31],[67,4,58,4],[67,9,58,9],[67,13,58,13,"i"],[67,14,58,14],[67,17,58,17],[67,18,58,18],[67,20,58,20,"i"],[67,21,58,21],[67,24,58,24,"l"],[67,25,58,25],[67,27,58,27,"i"],[67,28,58,28],[67,30,58,30],[67,32,58,32],[68,6,59,8],[68,10,59,12,"a"],[68,11,59,13],[68,14,59,16,"shapeA"],[68,20,59,22],[68,21,59,23,"shapeA"],[68,27,59,29],[68,28,59,30,"length"],[68,34,59,36],[68,37,59,39,"i"],[68,38,59,40],[68,41,59,43],[68,42,59,44],[68,43,59,45],[69,6,60,8],[69,10,60,12,"a"],[69,11,60,13],[69,15,60,17],[69,19,60,21],[69,21,60,23],[70,8,61,12,"a"],[70,9,61,13],[70,12,61,16],[70,13,61,17],[71,6,62,8],[72,6,63,8],[72,10,63,12,"b"],[72,11,63,13],[72,14,63,16,"shapeB"],[72,20,63,22],[72,21,63,23,"shapeB"],[72,27,63,29],[72,28,63,30,"length"],[72,34,63,36],[72,37,63,39,"i"],[72,38,63,40],[72,41,63,43],[72,42,63,44],[72,43,63,45],[73,6,64,8],[73,10,64,12,"b"],[73,11,64,13],[73,15,64,17],[73,19,64,21],[73,21,64,23],[74,8,65,12,"b"],[74,9,65,13],[74,12,65,16],[74,13,65,17],[75,6,66,8],[76,6,67,8],[76,10,67,12,"a"],[76,11,67,13],[76,16,67,18],[76,17,67,19],[76,19,67,21],[77,8,68,12,"result"],[77,14,68,18],[77,15,68,19,"l"],[77,16,68,20],[77,19,68,23,"i"],[77,20,68,24],[77,23,68,27],[77,24,68,28],[77,25,68,29],[77,28,68,32,"b"],[77,29,68,33],[78,6,69,8],[78,7,69,9],[78,13,70,13],[78,17,70,17,"b"],[78,18,70,18],[78,23,70,23],[78,24,70,24],[78,26,70,26],[79,8,71,12,"result"],[79,14,71,18],[79,15,71,19,"l"],[79,16,71,20],[79,19,71,23,"i"],[79,20,71,24],[79,23,71,27],[79,24,71,28],[79,25,71,29],[79,28,71,32,"a"],[79,29,71,33],[80,6,72,8],[80,7,72,9],[80,13,73,13],[80,17,73,17,"a"],[80,18,73,18],[80,23,73,23,"b"],[80,24,73,24],[80,26,73,26],[81,8,74,12],[81,14,74,18,"errMsg"],[81,20,74,24],[81,23,74,27],[81,78,74,82],[81,81,75,16],[81,84,75,19,"shapeA"],[81,90,75,25],[81,98,75,33,"shapeB"],[81,104,75,39],[81,107,75,42],[82,8,76,12],[82,14,76,18,"Error"],[82,19,76,23],[82,20,76,24,"errMsg"],[82,26,76,30],[82,27,76,31],[83,6,77,8],[83,7,77,9],[83,13,78,13],[84,8,79,12,"result"],[84,14,79,18],[84,15,79,19,"l"],[84,16,79,20],[84,19,79,23,"i"],[84,20,79,24],[84,23,79,27],[84,24,79,28],[84,25,79,29],[84,28,79,32,"a"],[84,29,79,33],[85,6,80,8],[86,4,81,4],[87,4,82,4],[87,11,82,11,"result"],[87,17,82,17],[88,2,83,0],[89,0,83,1],[89,3]],"functionMap":{"names":["<global>","getBroadcastDims","getReductionAxes","assertAndGetBroadcastShape"],"mappings":"AAA;OCyB;CDY;OEK;CFW;OGC;CH4B"},"hasCjsExports":false},"type":"js/module"}]}