{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":45,"index":748}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.stringSplitImpl = stringSplitImpl;\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  /**\n   * @license\n   * Copyright 2021 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  function split(str, delimiters, skipEmpty, result) {\n    if (!str.length) {\n      return;\n    }\n    // When the delimiter is empty, the input is split into individual characters.\n    if (delimiters.length === 0) {\n      for (let i = 0; i < str.length; ++i) {\n        result.push(str.subarray(i, i + 1));\n      }\n      return;\n    }\n    // When there is one delimiter, the input is split only at that delimiter.\n    if (delimiters.length === 1) {\n      const delimiter = delimiters[0];\n      let f = str.indexOf(delimiter);\n      while (f !== -1) {\n        const token = str.subarray(0, f);\n        if (!skipEmpty || token.length !== 0) {\n          result.push(token);\n        }\n        str = str.subarray(f + 1);\n        f = str.indexOf(delimiter);\n      }\n      if (!skipEmpty || str.length !== 0) {\n        result.push(str);\n      }\n      return;\n    }\n    // When there are multiple delimiters, the input is split at every instance\n    // one of the delimiters appears.\n    let tokenStart = 0;\n    for (let i = 0; i < str.length + 1; i++) {\n      if (i === str.length || delimiters.indexOf(str[i]) !== -1) {\n        const token = str.subarray(tokenStart, i);\n        if (!skipEmpty || token.length !== 0) {\n          result.push(token);\n        }\n        tokenStart = i + 1;\n      }\n    }\n  }\n  function stringSplitImpl(input, delimiter, skipEmpty) {\n    const batchSize = input.length;\n    // Empty delimiter means split the input character by character.\n    const tokens = [];\n    let outputSize = 0;\n    let maxNumEntries = 0;\n    const numIndices = new Array(batchSize);\n    for (let i = 0; i < batchSize; ++i) {\n      const prevTokensLength = tokens.length;\n      split(input[i], delimiter, skipEmpty, tokens);\n      const nEntries = tokens.length - prevTokensLength;\n      numIndices[i] = nEntries;\n      outputSize += nEntries;\n      maxNumEntries = Math.max(maxNumEntries, nEntries);\n    }\n    const indices = _tensorflowTfjsCore.util.getArrayFromDType('int32', outputSize * 2);\n    const values = new Array(outputSize);\n    const shape = [batchSize, maxNumEntries];\n    let c = 0;\n    for (let i = 0; i < batchSize; ++i) {\n      for (let j = 0; j < numIndices[i]; ++j) {\n        // indices is a 2d tensor with shape of [outputSize, 2]\n        indices[c * 2] = i;\n        indices[c * 2 + 1] = j;\n        values[c] = tokens[c];\n        ++c;\n      }\n    }\n    return [indices, values, shape];\n  }\n});","lineCount":97,"map":[[7,2,59,0,"exports"],[7,9,59,0],[7,10,59,0,"stringSplitImpl"],[7,25,59,0],[7,28,59,0,"stringSplitImpl"],[7,43,59,0],[8,2,17,0],[8,6,17,0,"_tensorflowTfjsCore"],[8,25,17,0],[8,28,17,0,"require"],[8,35,17,0],[8,36,17,0,"_dependencyMap"],[8,50,17,0],[9,2,1,0],[10,0,2,0],[11,0,3,0],[12,0,4,0],[13,0,5,0],[14,0,6,0],[15,0,7,0],[16,0,8,0],[17,0,9,0],[18,0,10,0],[19,0,11,0],[20,0,12,0],[21,0,13,0],[22,0,14,0],[23,0,15,0],[24,0,16,0],[26,2,18,0],[26,11,18,9,"split"],[26,16,18,14,"split"],[26,17,18,15,"str"],[26,20,18,18],[26,22,18,20,"delimiters"],[26,32,18,30],[26,34,18,32,"skipEmpty"],[26,43,18,41],[26,45,18,43,"result"],[26,51,18,49],[26,53,18,51],[27,4,19,4],[27,8,19,8],[27,9,19,9,"str"],[27,12,19,12],[27,13,19,13,"length"],[27,19,19,19],[27,21,19,21],[28,6,20,8],[29,4,21,4],[30,4,22,4],[31,4,23,4],[31,8,23,8,"delimiters"],[31,18,23,18],[31,19,23,19,"length"],[31,25,23,25],[31,30,23,30],[31,31,23,31],[31,33,23,33],[32,6,24,8],[32,11,24,13],[32,15,24,17,"i"],[32,16,24,18],[32,19,24,21],[32,20,24,22],[32,22,24,24,"i"],[32,23,24,25],[32,26,24,28,"str"],[32,29,24,31],[32,30,24,32,"length"],[32,36,24,38],[32,38,24,40],[32,40,24,42,"i"],[32,41,24,43],[32,43,24,45],[33,8,25,12,"result"],[33,14,25,18],[33,15,25,19,"push"],[33,19,25,23],[33,20,25,24,"str"],[33,23,25,27],[33,24,25,28,"subarray"],[33,32,25,36],[33,33,25,37,"i"],[33,34,25,38],[33,36,25,40,"i"],[33,37,25,41],[33,40,25,44],[33,41,25,45],[33,42,25,46],[33,43,25,47],[34,6,26,8],[35,6,27,8],[36,4,28,4],[37,4,29,4],[38,4,30,4],[38,8,30,8,"delimiters"],[38,18,30,18],[38,19,30,19,"length"],[38,25,30,25],[38,30,30,30],[38,31,30,31],[38,33,30,33],[39,6,31,8],[39,12,31,14,"delimiter"],[39,21,31,23],[39,24,31,26,"delimiters"],[39,34,31,36],[39,35,31,37],[39,36,31,38],[39,37,31,39],[40,6,32,8],[40,10,32,12,"f"],[40,11,32,13],[40,14,32,16,"str"],[40,17,32,19],[40,18,32,20,"indexOf"],[40,25,32,27],[40,26,32,28,"delimiter"],[40,35,32,37],[40,36,32,38],[41,6,33,8],[41,13,33,15,"f"],[41,14,33,16],[41,19,33,21],[41,20,33,22],[41,21,33,23],[41,23,33,25],[42,8,34,12],[42,14,34,18,"token"],[42,19,34,23],[42,22,34,26,"str"],[42,25,34,29],[42,26,34,30,"subarray"],[42,34,34,38],[42,35,34,39],[42,36,34,40],[42,38,34,42,"f"],[42,39,34,43],[42,40,34,44],[43,8,35,12],[43,12,35,16],[43,13,35,17,"skipEmpty"],[43,22,35,26],[43,26,35,30,"token"],[43,31,35,35],[43,32,35,36,"length"],[43,38,35,42],[43,43,35,47],[43,44,35,48],[43,46,35,50],[44,10,36,16,"result"],[44,16,36,22],[44,17,36,23,"push"],[44,21,36,27],[44,22,36,28,"token"],[44,27,36,33],[44,28,36,34],[45,8,37,12],[46,8,38,12,"str"],[46,11,38,15],[46,14,38,18,"str"],[46,17,38,21],[46,18,38,22,"subarray"],[46,26,38,30],[46,27,38,31,"f"],[46,28,38,32],[46,31,38,35],[46,32,38,36],[46,33,38,37],[47,8,39,12,"f"],[47,9,39,13],[47,12,39,16,"str"],[47,15,39,19],[47,16,39,20,"indexOf"],[47,23,39,27],[47,24,39,28,"delimiter"],[47,33,39,37],[47,34,39,38],[48,6,40,8],[49,6,41,8],[49,10,41,12],[49,11,41,13,"skipEmpty"],[49,20,41,22],[49,24,41,26,"str"],[49,27,41,29],[49,28,41,30,"length"],[49,34,41,36],[49,39,41,41],[49,40,41,42],[49,42,41,44],[50,8,42,12,"result"],[50,14,42,18],[50,15,42,19,"push"],[50,19,42,23],[50,20,42,24,"str"],[50,23,42,27],[50,24,42,28],[51,6,43,8],[52,6,44,8],[53,4,45,4],[54,4,46,4],[55,4,47,4],[56,4,48,4],[56,8,48,8,"tokenStart"],[56,18,48,18],[56,21,48,21],[56,22,48,22],[57,4,49,4],[57,9,49,9],[57,13,49,13,"i"],[57,14,49,14],[57,17,49,17],[57,18,49,18],[57,20,49,20,"i"],[57,21,49,21],[57,24,49,24,"str"],[57,27,49,27],[57,28,49,28,"length"],[57,34,49,34],[57,37,49,37],[57,38,49,38],[57,40,49,40,"i"],[57,41,49,41],[57,43,49,43],[57,45,49,45],[58,6,50,8],[58,10,50,13,"i"],[58,11,50,14],[58,16,50,19,"str"],[58,19,50,22],[58,20,50,23,"length"],[58,26,50,29],[58,30,50,35,"delimiters"],[58,40,50,45],[58,41,50,46,"indexOf"],[58,48,50,53],[58,49,50,54,"str"],[58,52,50,57],[58,53,50,58,"i"],[58,54,50,59],[58,55,50,60],[58,56,50,61],[58,61,50,66],[58,62,50,67],[58,63,50,69],[58,65,50,71],[59,8,51,12],[59,14,51,18,"token"],[59,19,51,23],[59,22,51,26,"str"],[59,25,51,29],[59,26,51,30,"subarray"],[59,34,51,38],[59,35,51,39,"tokenStart"],[59,45,51,49],[59,47,51,51,"i"],[59,48,51,52],[59,49,51,53],[60,8,52,12],[60,12,52,16],[60,13,52,17,"skipEmpty"],[60,22,52,26],[60,26,52,30,"token"],[60,31,52,35],[60,32,52,36,"length"],[60,38,52,42],[60,43,52,47],[60,44,52,48],[60,46,52,50],[61,10,53,16,"result"],[61,16,53,22],[61,17,53,23,"push"],[61,21,53,27],[61,22,53,28,"token"],[61,27,53,33],[61,28,53,34],[62,8,54,12],[63,8,55,12,"tokenStart"],[63,18,55,22],[63,21,55,25,"i"],[63,22,55,26],[63,25,55,29],[63,26,55,30],[64,6,56,8],[65,4,57,4],[66,2,58,0],[67,2,59,7],[67,11,59,16,"stringSplitImpl"],[67,26,59,31,"stringSplitImpl"],[67,27,59,32,"input"],[67,32,59,37],[67,34,59,39,"delimiter"],[67,43,59,48],[67,45,59,50,"skipEmpty"],[67,54,59,59],[67,56,59,61],[68,4,60,4],[68,10,60,10,"batchSize"],[68,19,60,19],[68,22,60,22,"input"],[68,27,60,27],[68,28,60,28,"length"],[68,34,60,34],[69,4,61,4],[70,4,62,4],[70,10,62,10,"tokens"],[70,16,62,16],[70,19,62,19],[70,21,62,21],[71,4,63,4],[71,8,63,8,"outputSize"],[71,18,63,18],[71,21,63,21],[71,22,63,22],[72,4,64,4],[72,8,64,8,"maxNumEntries"],[72,21,64,21],[72,24,64,24],[72,25,64,25],[73,4,65,4],[73,10,65,10,"numIndices"],[73,20,65,20],[73,23,65,23],[73,27,65,27,"Array"],[73,32,65,32],[73,33,65,33,"batchSize"],[73,42,65,42],[73,43,65,43],[74,4,66,4],[74,9,66,9],[74,13,66,13,"i"],[74,14,66,14],[74,17,66,17],[74,18,66,18],[74,20,66,20,"i"],[74,21,66,21],[74,24,66,24,"batchSize"],[74,33,66,33],[74,35,66,35],[74,37,66,37,"i"],[74,38,66,38],[74,40,66,40],[75,6,67,8],[75,12,67,14,"prevTokensLength"],[75,28,67,30],[75,31,67,33,"tokens"],[75,37,67,39],[75,38,67,40,"length"],[75,44,67,46],[76,6,68,8,"split"],[76,11,68,13],[76,12,68,14,"input"],[76,17,68,19],[76,18,68,20,"i"],[76,19,68,21],[76,20,68,22],[76,22,68,24,"delimiter"],[76,31,68,33],[76,33,68,35,"skipEmpty"],[76,42,68,44],[76,44,68,46,"tokens"],[76,50,68,52],[76,51,68,53],[77,6,69,8],[77,12,69,14,"nEntries"],[77,20,69,22],[77,23,69,25,"tokens"],[77,29,69,31],[77,30,69,32,"length"],[77,36,69,38],[77,39,69,41,"prevTokensLength"],[77,55,69,57],[78,6,70,8,"numIndices"],[78,16,70,18],[78,17,70,19,"i"],[78,18,70,20],[78,19,70,21],[78,22,70,24,"nEntries"],[78,30,70,32],[79,6,71,8,"outputSize"],[79,16,71,18],[79,20,71,22,"nEntries"],[79,28,71,30],[80,6,72,8,"maxNumEntries"],[80,19,72,21],[80,22,72,24,"Math"],[80,26,72,28],[80,27,72,29,"max"],[80,30,72,32],[80,31,72,33,"maxNumEntries"],[80,44,72,46],[80,46,72,48,"nEntries"],[80,54,72,56],[80,55,72,57],[81,4,73,4],[82,4,74,4],[82,10,74,10,"indices"],[82,17,74,17],[82,20,74,20,"util"],[82,39,74,24],[82,40,74,24,"util"],[82,44,74,24],[82,45,74,25,"getArrayFromDType"],[82,62,74,42],[82,63,74,43],[82,70,74,50],[82,72,74,52,"outputSize"],[82,82,74,62],[82,85,74,65],[82,86,74,66],[82,87,74,67],[83,4,75,4],[83,10,75,10,"values"],[83,16,75,16],[83,19,75,19],[83,23,75,23,"Array"],[83,28,75,28],[83,29,75,29,"outputSize"],[83,39,75,39],[83,40,75,40],[84,4,76,4],[84,10,76,10,"shape"],[84,15,76,15],[84,18,76,18],[84,19,76,19,"batchSize"],[84,28,76,28],[84,30,76,30,"maxNumEntries"],[84,43,76,43],[84,44,76,44],[85,4,77,4],[85,8,77,8,"c"],[85,9,77,9],[85,12,77,12],[85,13,77,13],[86,4,78,4],[86,9,78,9],[86,13,78,13,"i"],[86,14,78,14],[86,17,78,17],[86,18,78,18],[86,20,78,20,"i"],[86,21,78,21],[86,24,78,24,"batchSize"],[86,33,78,33],[86,35,78,35],[86,37,78,37,"i"],[86,38,78,38],[86,40,78,40],[87,6,79,8],[87,11,79,13],[87,15,79,17,"j"],[87,16,79,18],[87,19,79,21],[87,20,79,22],[87,22,79,24,"j"],[87,23,79,25],[87,26,79,28,"numIndices"],[87,36,79,38],[87,37,79,39,"i"],[87,38,79,40],[87,39,79,41],[87,41,79,43],[87,43,79,45,"j"],[87,44,79,46],[87,46,79,48],[88,8,80,12],[89,8,81,12,"indices"],[89,15,81,19],[89,16,81,20,"c"],[89,17,81,21],[89,20,81,24],[89,21,81,25],[89,22,81,26],[89,25,81,29,"i"],[89,26,81,30],[90,8,82,12,"indices"],[90,15,82,19],[90,16,82,20,"c"],[90,17,82,21],[90,20,82,24],[90,21,82,25],[90,24,82,28],[90,25,82,29],[90,26,82,30],[90,29,82,33,"j"],[90,30,82,34],[91,8,83,12,"values"],[91,14,83,18],[91,15,83,19,"c"],[91,16,83,20],[91,17,83,21],[91,20,83,24,"tokens"],[91,26,83,30],[91,27,83,31,"c"],[91,28,83,32],[91,29,83,33],[92,8,84,12],[92,10,84,14,"c"],[92,11,84,15],[93,6,85,8],[94,4,86,4],[95,4,87,4],[95,11,87,11],[95,12,87,12,"indices"],[95,19,87,19],[95,21,87,21,"values"],[95,27,87,27],[95,29,87,29,"shape"],[95,34,87,34],[95,35,87,35],[96,2,88,0],[97,0,88,1],[97,3]],"functionMap":{"names":["<global>","split","stringSplitImpl"],"mappings":"AAA;ACiB;CDwC;OEC;CF6B"},"hasCjsExports":false},"type":"js/module"}]}