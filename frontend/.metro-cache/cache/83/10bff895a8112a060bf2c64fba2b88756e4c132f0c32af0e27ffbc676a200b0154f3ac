{"dependencies":[{"name":"../engine","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":35,"index":738}}],"key":"zbTTi8rtwr8rjl75PzEo829Yvss=","exportNames":["*"],"imports":1}},{"name":"../kernel_names","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":739},"end":{"line":18,"column":39,"index":778}}],"key":"gQVznmdGA0uoBQvR5Q4/qW+ITHg=","exportNames":["*"],"imports":1}},{"name":"../tensor_util_env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":779},"end":{"line":19,"column":53,"index":832}}],"key":"UCKDOr/oOGi3nbD26ZhyAVW61qk=","exportNames":["*"],"imports":1}},{"name":"../util_base","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":833},"end":{"line":20,"column":66,"index":899}}],"key":"1ccyuuVckWa4c5ThWdKkMdVe+ak=","exportNames":["*"],"imports":1}},{"name":"./clone","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":900},"end":{"line":21,"column":32,"index":932}}],"key":"HYFizKbCTTIoUf1gnyehqbzmGZw=","exportNames":["*"],"imports":1}},{"name":"./operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":22,"column":0,"index":933},"end":{"line":22,"column":33,"index":966}}],"key":"lmmEAb6oR3TWnrsrETceKUovfkM=","exportNames":["*"],"imports":1}},{"name":"./reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":23,"column":0,"index":967},"end":{"line":23,"column":36,"index":1003}}],"key":"dz8GCsFShMGnHX1Wj7bBySjBnSE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"broadcastTo\", {\n    enumerable: true,\n    get: function () {\n      return broadcastTo;\n    }\n  });\n  var _engine = require(_dependencyMap[0], \"../engine\");\n  var _kernel_names = require(_dependencyMap[1], \"../kernel_names\");\n  var _tensor_util_env = require(_dependencyMap[2], \"../tensor_util_env\");\n  var _util_base = require(_dependencyMap[3], \"../util_base\");\n  var _clone = require(_dependencyMap[4], \"./clone\");\n  var _operation = require(_dependencyMap[5], \"./operation\");\n  var _reshape = require(_dependencyMap[6], \"./reshape\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  /**\n   * Broadcast an array to a compatible shape NumPy-style.\n   *\n   * The tensor's shape is compared to the broadcast shape from end to beginning.\n   * Ones are prepended to the tensor's shape until it has the same length as\n   * the broadcast shape. If input.shape[i]==shape[i], the (i+1)-th axis is\n   * already broadcast-compatible. If input.shape[i]==1 and shape[i]==N, then\n   * the input tensor is tiled N times along that axis (using tf.tile).\n   *\n   * @param input The tensor that is to be broadcasted.\n   * @param shape The input is to be broadcast to this shape.\n   *\n   * @doc {heading: 'Tensors', subheading: 'Transformations'}\n   */\n  function broadcastTo_(x, shape) {\n    let input = (0, _tensor_util_env.convertToTensor)(x, 'broadcastTo', 'x');\n    const xShape = input.shape;\n    (0, _util_base.assertNonNegativeIntegerDimensions)(shape);\n    if (shape.length < input.rank) {\n      throw new Error(`broadcastTo(): shape.length=${shape.length} < input.rank=${input.rank}.`);\n    }\n    if (shape.length > input.rank) {\n      const newShape = input.shape.slice();\n      while (newShape.length < shape.length) {\n        newShape.unshift(1);\n      }\n      input = (0, _reshape.reshape)(input, newShape);\n    }\n    const inputShape = input.shape;\n    const reps = Array.from(shape);\n    for (let i = shape.length - 1; i >= 0; i--) {\n      if (inputShape[i] === shape[i]) {\n        reps[i] = 1;\n      } else if (input.shape[i] !== 1) {\n        throw new Error(`broadcastTo(): [${xShape}] cannot be broadcast to [${shape}].`);\n      }\n    }\n    const axes = reps.map((n, i) => n > 1 ? i : -1).filter(i => i >= 0);\n    if (axes.length === 0) {\n      return (0, _clone.clone)(input);\n    }\n    // TODO call broadcastTo kernel directly once backends implement broadcstTo\n    const inputs = {\n      x: input\n    };\n    const attrs = {\n      reps\n    };\n    return _engine.ENGINE.runKernel(_kernel_names.Tile, inputs, attrs);\n  }\n  const broadcastTo = /* @__PURE__ */(0, _operation.op)({\n    broadcastTo_\n  });\n});","lineCount":90,"map":[[7,2,71,0,"Object"],[7,8,71,0],[7,9,71,0,"defineProperty"],[7,23,71,0],[7,24,71,0,"exports"],[7,31,71,0],[8,4,71,0,"enumerable"],[8,14,71,0],[9,4,71,0,"get"],[9,7,71,0],[9,18,71,0,"get"],[9,19,71,0],[10,6,71,0],[10,13,71,0,"broadcastTo"],[10,24,71,0],[11,4,71,0],[12,2,71,0],[13,2,17,0],[13,6,17,0,"_engine"],[13,13,17,0],[13,16,17,0,"require"],[13,23,17,0],[13,24,17,0,"_dependencyMap"],[13,38,17,0],[14,2,18,0],[14,6,18,0,"_kernel_names"],[14,19,18,0],[14,22,18,0,"require"],[14,29,18,0],[14,30,18,0,"_dependencyMap"],[14,44,18,0],[15,2,19,0],[15,6,19,0,"_tensor_util_env"],[15,22,19,0],[15,25,19,0,"require"],[15,32,19,0],[15,33,19,0,"_dependencyMap"],[15,47,19,0],[16,2,20,0],[16,6,20,0,"_util_base"],[16,16,20,0],[16,19,20,0,"require"],[16,26,20,0],[16,27,20,0,"_dependencyMap"],[16,41,20,0],[17,2,21,0],[17,6,21,0,"_clone"],[17,12,21,0],[17,15,21,0,"require"],[17,22,21,0],[17,23,21,0,"_dependencyMap"],[17,37,21,0],[18,2,22,0],[18,6,22,0,"_operation"],[18,16,22,0],[18,19,22,0,"require"],[18,26,22,0],[18,27,22,0,"_dependencyMap"],[18,41,22,0],[19,2,23,0],[19,6,23,0,"_reshape"],[19,14,23,0],[19,17,23,0,"require"],[19,24,23,0],[19,25,23,0,"_dependencyMap"],[19,39,23,0],[20,2,1,0],[21,0,2,0],[22,0,3,0],[23,0,4,0],[24,0,5,0],[25,0,6,0],[26,0,7,0],[27,0,8,0],[28,0,9,0],[29,0,10,0],[30,0,11,0],[31,0,12,0],[32,0,13,0],[33,0,14,0],[34,0,15,0],[35,0,16,0],[37,2,24,0],[38,0,25,0],[39,0,26,0],[40,0,27,0],[41,0,28,0],[42,0,29,0],[43,0,30,0],[44,0,31,0],[45,0,32,0],[46,0,33,0],[47,0,34,0],[48,0,35,0],[49,0,36,0],[50,0,37,0],[51,2,38,0],[51,11,38,9,"broadcastTo_"],[51,23,38,21,"broadcastTo_"],[51,24,38,22,"x"],[51,25,38,23],[51,27,38,25,"shape"],[51,32,38,30],[51,34,38,32],[52,4,39,4],[52,8,39,8,"input"],[52,13,39,13],[52,16,39,16],[52,20,39,16,"convertToTensor"],[52,36,39,31],[52,37,39,31,"convertToTensor"],[52,52,39,31],[52,54,39,32,"x"],[52,55,39,33],[52,57,39,35],[52,70,39,48],[52,72,39,50],[52,75,39,53],[52,76,39,54],[53,4,40,4],[53,10,40,10,"xShape"],[53,16,40,16],[53,19,40,19,"input"],[53,24,40,24],[53,25,40,25,"shape"],[53,30,40,30],[54,4,41,4],[54,8,41,4,"assertNonNegativeIntegerDimensions"],[54,18,41,38],[54,19,41,38,"assertNonNegativeIntegerDimensions"],[54,53,41,38],[54,55,41,39,"shape"],[54,60,41,44],[54,61,41,45],[55,4,42,4],[55,8,42,8,"shape"],[55,13,42,13],[55,14,42,14,"length"],[55,20,42,20],[55,23,42,23,"input"],[55,28,42,28],[55,29,42,29,"rank"],[55,33,42,33],[55,35,42,35],[56,6,43,8],[56,12,43,14],[56,16,43,18,"Error"],[56,21,43,23],[56,22,43,24],[56,53,43,55,"shape"],[56,58,43,60],[56,59,43,61,"length"],[56,65,43,67],[56,82,43,84,"input"],[56,87,43,89],[56,88,43,90,"rank"],[56,92,43,94],[56,95,43,97],[56,96,43,98],[57,4,44,4],[58,4,45,4],[58,8,45,8,"shape"],[58,13,45,13],[58,14,45,14,"length"],[58,20,45,20],[58,23,45,23,"input"],[58,28,45,28],[58,29,45,29,"rank"],[58,33,45,33],[58,35,45,35],[59,6,46,8],[59,12,46,14,"newShape"],[59,20,46,22],[59,23,46,25,"input"],[59,28,46,30],[59,29,46,31,"shape"],[59,34,46,36],[59,35,46,37,"slice"],[59,40,46,42],[59,41,46,43],[59,42,46,44],[60,6,47,8],[60,13,47,15,"newShape"],[60,21,47,23],[60,22,47,24,"length"],[60,28,47,30],[60,31,47,33,"shape"],[60,36,47,38],[60,37,47,39,"length"],[60,43,47,45],[60,45,47,47],[61,8,48,12,"newShape"],[61,16,48,20],[61,17,48,21,"unshift"],[61,24,48,28],[61,25,48,29],[61,26,48,30],[61,27,48,31],[62,6,49,8],[63,6,50,8,"input"],[63,11,50,13],[63,14,50,16],[63,18,50,16,"reshape"],[63,26,50,23],[63,27,50,23,"reshape"],[63,34,50,23],[63,36,50,24,"input"],[63,41,50,29],[63,43,50,31,"newShape"],[63,51,50,39],[63,52,50,40],[64,4,51,4],[65,4,52,4],[65,10,52,10,"inputShape"],[65,20,52,20],[65,23,52,23,"input"],[65,28,52,28],[65,29,52,29,"shape"],[65,34,52,34],[66,4,53,4],[66,10,53,10,"reps"],[66,14,53,14],[66,17,53,17,"Array"],[66,22,53,22],[66,23,53,23,"from"],[66,27,53,27],[66,28,53,28,"shape"],[66,33,53,33],[66,34,53,34],[67,4,54,4],[67,9,54,9],[67,13,54,13,"i"],[67,14,54,14],[67,17,54,17,"shape"],[67,22,54,22],[67,23,54,23,"length"],[67,29,54,29],[67,32,54,32],[67,33,54,33],[67,35,54,35,"i"],[67,36,54,36],[67,40,54,40],[67,41,54,41],[67,43,54,43,"i"],[67,44,54,44],[67,46,54,46],[67,48,54,48],[68,6,55,8],[68,10,55,12,"inputShape"],[68,20,55,22],[68,21,55,23,"i"],[68,22,55,24],[68,23,55,25],[68,28,55,30,"shape"],[68,33,55,35],[68,34,55,36,"i"],[68,35,55,37],[68,36,55,38],[68,38,55,40],[69,8,56,12,"reps"],[69,12,56,16],[69,13,56,17,"i"],[69,14,56,18],[69,15,56,19],[69,18,56,22],[69,19,56,23],[70,6,57,8],[70,7,57,9],[70,13,58,13],[70,17,58,17,"input"],[70,22,58,22],[70,23,58,23,"shape"],[70,28,58,28],[70,29,58,29,"i"],[70,30,58,30],[70,31,58,31],[70,36,58,36],[70,37,58,37],[70,39,58,39],[71,8,59,12],[71,14,59,18],[71,18,59,22,"Error"],[71,23,59,27],[71,24,59,28],[71,43,59,47,"xShape"],[71,49,59,53],[71,78,59,82,"shape"],[71,83,59,87],[71,87,59,91],[71,88,59,92],[72,6,60,8],[73,4,61,4],[74,4,62,4],[74,10,62,10,"axes"],[74,14,62,14],[74,17,62,17,"reps"],[74,21,62,21],[74,22,62,22,"map"],[74,25,62,25],[74,26,62,26],[74,27,62,27,"n"],[74,28,62,28],[74,30,62,30,"i"],[74,31,62,31],[74,36,62,36,"n"],[74,37,62,37],[74,40,62,40],[74,41,62,41],[74,44,62,44,"i"],[74,45,62,45],[74,48,62,48],[74,49,62,49],[74,50,62,50],[74,51,62,51],[74,52,62,52,"filter"],[74,58,62,58],[74,59,62,59,"i"],[74,60,62,60],[74,64,62,64,"i"],[74,65,62,65],[74,69,62,69],[74,70,62,70],[74,71,62,71],[75,4,63,4],[75,8,63,8,"axes"],[75,12,63,12],[75,13,63,13,"length"],[75,19,63,19],[75,24,63,24],[75,25,63,25],[75,27,63,27],[76,6,64,8],[76,13,64,15],[76,17,64,15,"clone"],[76,23,64,20],[76,24,64,20,"clone"],[76,29,64,20],[76,31,64,21,"input"],[76,36,64,26],[76,37,64,27],[77,4,65,4],[78,4,66,4],[79,4,67,4],[79,10,67,10,"inputs"],[79,16,67,16],[79,19,67,19],[80,6,67,21,"x"],[80,7,67,22],[80,9,67,24,"input"],[81,4,67,30],[81,5,67,31],[82,4,68,4],[82,10,68,10,"attrs"],[82,15,68,15],[82,18,68,18],[83,6,68,20,"reps"],[84,4,68,25],[84,5,68,26],[85,4,69,4],[85,11,69,11,"ENGINE"],[85,18,69,17],[85,19,69,17,"ENGINE"],[85,25,69,17],[85,26,69,18,"runKernel"],[85,35,69,27],[85,36,69,28,"Tile"],[85,49,69,32],[85,50,69,32,"Tile"],[85,54,69,32],[85,56,69,34,"inputs"],[85,62,69,40],[85,64,69,42,"attrs"],[85,69,69,47],[85,70,69,48],[86,2,70,0],[87,2,71,7],[87,8,71,13,"broadcastTo"],[87,19,71,24],[87,22,71,27],[87,37,71,43],[87,41,71,43,"op"],[87,51,71,45],[87,52,71,45,"op"],[87,54,71,45],[87,56,71,46],[88,4,71,48,"broadcastTo_"],[89,2,71,61],[89,3,71,62],[89,4,71,63],[90,0,71,64],[90,3]],"functionMap":{"names":["<global>","broadcastTo_","reps.map$argument_0","reps.map.filter$argument_0"],"mappings":"AAA;ACqC;0BCwB,wBD,SE,WF;CDQ"},"hasCjsExports":false},"type":"js/module"}]}