{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":286},"end":{"line":10,"column":59,"index":345}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}},{"name":"../../utils/types_utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":346},"end":{"line":11,"column":62,"index":408}}],"key":"KNLCITfwnGLaGBjQ0rMvbYdxCWo=","exportNames":["*"],"imports":1}},{"name":"../../errors","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":13,"column":0,"index":461},"end":{"line":13,"column":42,"index":503}}],"key":"eT202ujluoOcHDbauyWnF/muvbc=","exportNames":["*"],"imports":1}},{"name":"../../backend/tfjs_backend","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":14,"column":0,"index":504},"end":{"line":14,"column":48,"index":552}}],"key":"xUnvOWBkNHpMyFMNlJ5A/sZLhS0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.encodeCategoricalInputs = encodeCategoricalInputs;\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  var _utilsTypes_utils = require(_dependencyMap[1], \"../../utils/types_utils\");\n  var _errors = require(_dependencyMap[2], \"../../errors\");\n  var _backendTfjs_backend = require(_dependencyMap[3], \"../../backend/tfjs_backend\");\n  var K = _interopNamespace(_backendTfjs_backend);\n  /**\n   * @license\n   * Copyright 2022 CodeSmith LLC\n   *\n   * Use of this source code is governed by an MIT-style\n   * license that can be found in the LICENSE file or at\n   * https://opensource.org/licenses/MIT.\n   * =============================================================================\n   */\n\n  function encodeCategoricalInputs(inputs, outputMode, depth, weights) {\n    let input = (0, _utilsTypes_utils.getExactlyOneTensor)(inputs);\n    if (input.dtype !== 'int32') {\n      input = K.cast(input, 'int32');\n    }\n    if (outputMode === 'int') {\n      return input;\n    }\n    const originalShape = input.shape;\n    if (input.rank === 0) {\n      input = (0, _tensorflowTfjsCore.expandDims)(input, -1);\n    }\n    if (outputMode === 'oneHot') {\n      if (input.shape[input.shape.length - 1] !== 1) {\n        input = (0, _tensorflowTfjsCore.expandDims)(input, -1);\n      }\n    }\n    if (input.rank > 2) {\n      throw new _errors.ValueError(`When outputMode is not int, maximum output rank is 2` + ` Received outputMode ${outputMode} and input shape ${originalShape}` + ` which would result in output rank ${input.rank}.`);\n    }\n    const binaryOutput = ['multiHot', 'oneHot'].includes(outputMode);\n    const denseBincountInput = input;\n    let binCounts;\n    if (typeof weights !== 'undefined' && outputMode === 'count') {\n      binCounts = (0, _tensorflowTfjsCore.denseBincount)(denseBincountInput, weights, depth, binaryOutput);\n    } else {\n      binCounts = (0, _tensorflowTfjsCore.denseBincount)(denseBincountInput, [], depth, binaryOutput);\n    }\n    if (outputMode !== 'tfIdf') {\n      return binCounts;\n    }\n    if (weights) {\n      return (0, _tensorflowTfjsCore.mul)(binCounts, weights);\n    } else {\n      throw new _errors.ValueError(`When outputMode is 'tfIdf', weights must be provided.`);\n    }\n  }\n});","lineCount":75,"map":[[22,2,15,0,"exports"],[22,9,15,0],[22,10,15,0,"encodeCategoricalInputs"],[22,33,15,0],[22,36,15,0,"encodeCategoricalInputs"],[22,59,15,0],[23,2,10,0],[23,6,10,0,"_tensorflowTfjsCore"],[23,25,10,0],[23,28,10,0,"require"],[23,35,10,0],[23,36,10,0,"_dependencyMap"],[23,50,10,0],[24,2,11,0],[24,6,11,0,"_utilsTypes_utils"],[24,23,11,0],[24,26,11,0,"require"],[24,33,11,0],[24,34,11,0,"_dependencyMap"],[24,48,11,0],[25,2,13,0],[25,6,13,0,"_errors"],[25,13,13,0],[25,16,13,0,"require"],[25,23,13,0],[25,24,13,0,"_dependencyMap"],[25,38,13,0],[26,2,14,0],[26,6,14,0,"_backendTfjs_backend"],[26,26,14,0],[26,29,14,0,"require"],[26,36,14,0],[26,37,14,0,"_dependencyMap"],[26,51,14,0],[27,2,14,0],[27,6,14,0,"K"],[27,7,14,0],[27,10,14,0,"_interopNamespace"],[27,27,14,0],[27,28,14,0,"_backendTfjs_backend"],[27,48,14,0],[28,2,1,0],[29,0,2,0],[30,0,3,0],[31,0,4,0],[32,0,5,0],[33,0,6,0],[34,0,7,0],[35,0,8,0],[36,0,9,0],[38,2,15,7],[38,11,15,16,"encodeCategoricalInputs"],[38,34,15,39,"encodeCategoricalInputs"],[38,35,15,40,"inputs"],[38,41,15,46],[38,43,15,48,"outputMode"],[38,53,15,58],[38,55,15,60,"depth"],[38,60,15,65],[38,62,15,67,"weights"],[38,69,15,74],[38,71,15,76],[39,4,16,4],[39,8,16,8,"input"],[39,13,16,13],[39,16,16,16],[39,20,16,16,"getExactlyOneTensor"],[39,37,16,35],[39,38,16,35,"getExactlyOneTensor"],[39,57,16,35],[39,59,16,36,"inputs"],[39,65,16,42],[39,66,16,43],[40,4,17,4],[40,8,17,8,"input"],[40,13,17,13],[40,14,17,14,"dtype"],[40,19,17,19],[40,24,17,24],[40,31,17,31],[40,33,17,33],[41,6,18,8,"input"],[41,11,18,13],[41,14,18,16,"K"],[41,15,18,17],[41,16,18,18,"cast"],[41,20,18,22],[41,21,18,23,"input"],[41,26,18,28],[41,28,18,30],[41,35,18,37],[41,36,18,38],[42,4,19,4],[43,4,20,4],[43,8,20,8,"outputMode"],[43,18,20,18],[43,23,20,23],[43,28,20,28],[43,30,20,30],[44,6,21,8],[44,13,21,15,"input"],[44,18,21,20],[45,4,22,4],[46,4,23,4],[46,10,23,10,"originalShape"],[46,23,23,23],[46,26,23,26,"input"],[46,31,23,31],[46,32,23,32,"shape"],[46,37,23,37],[47,4,24,4],[47,8,24,8,"input"],[47,13,24,13],[47,14,24,14,"rank"],[47,18,24,18],[47,23,24,23],[47,24,24,24],[47,26,24,26],[48,6,25,8,"input"],[48,11,25,13],[48,14,25,16],[48,18,25,16,"expandDims"],[48,37,25,26],[48,38,25,26,"expandDims"],[48,48,25,26],[48,50,25,27,"input"],[48,55,25,32],[48,57,25,34],[48,58,25,35],[48,59,25,36],[48,60,25,37],[49,4,26,4],[50,4,27,4],[50,8,27,8,"outputMode"],[50,18,27,18],[50,23,27,23],[50,31,27,31],[50,33,27,33],[51,6,28,8],[51,10,28,12,"input"],[51,15,28,17],[51,16,28,18,"shape"],[51,21,28,23],[51,22,28,24,"input"],[51,27,28,29],[51,28,28,30,"shape"],[51,33,28,35],[51,34,28,36,"length"],[51,40,28,42],[51,43,28,45],[51,44,28,46],[51,45,28,47],[51,50,28,52],[51,51,28,53],[51,53,28,55],[52,8,29,12,"input"],[52,13,29,17],[52,16,29,20],[52,20,29,20,"expandDims"],[52,39,29,30],[52,40,29,30,"expandDims"],[52,50,29,30],[52,52,29,31,"input"],[52,57,29,36],[52,59,29,38],[52,60,29,39],[52,61,29,40],[52,62,29,41],[53,6,30,8],[54,4,31,4],[55,4,32,4],[55,8,32,8,"input"],[55,13,32,13],[55,14,32,14,"rank"],[55,18,32,18],[55,21,32,21],[55,22,32,22],[55,24,32,24],[56,6,33,8],[56,12,33,14],[56,16,33,18,"ValueError"],[56,23,33,28],[56,24,33,28,"ValueError"],[56,34,33,28],[56,35,33,29],[56,89,33,83],[56,92,34,14],[56,116,34,38,"outputMode"],[56,126,34,48],[56,146,34,68,"originalShape"],[56,159,34,81],[56,161,34,83],[56,164,35,14],[56,202,35,52,"input"],[56,207,35,57],[56,208,35,58,"rank"],[56,212,35,62],[56,215,35,65],[56,216,35,66],[57,4,36,4],[58,4,37,4],[58,10,37,10,"binaryOutput"],[58,22,37,22],[58,25,37,25],[58,26,37,26],[58,36,37,36],[58,38,37,38],[58,46,37,46],[58,47,37,47],[58,48,37,48,"includes"],[58,56,37,56],[58,57,37,57,"outputMode"],[58,67,37,67],[58,68,37,68],[59,4,38,4],[59,10,38,10,"denseBincountInput"],[59,28,38,28],[59,31,38,31,"input"],[59,36,38,36],[60,4,39,4],[60,8,39,8,"binCounts"],[60,17,39,17],[61,4,40,4],[61,8,40,9],[61,15,40,16,"weights"],[61,22,40,23],[61,27,40,29],[61,38,40,40],[61,42,40,44,"outputMode"],[61,52,40,54],[61,57,40,59],[61,64,40,66],[61,66,40,68],[62,6,41,8,"binCounts"],[62,15,41,17],[62,18,41,20],[62,22,41,20,"denseBincount"],[62,41,41,33],[62,42,41,33,"denseBincount"],[62,55,41,33],[62,57,41,34,"denseBincountInput"],[62,75,41,52],[62,77,41,54,"weights"],[62,84,41,61],[62,86,41,63,"depth"],[62,91,41,68],[62,93,41,70,"binaryOutput"],[62,105,41,82],[62,106,41,83],[63,4,42,4],[63,5,42,5],[63,11,43,9],[64,6,44,8,"binCounts"],[64,15,44,17],[64,18,44,20],[64,22,44,20,"denseBincount"],[64,41,44,33],[64,42,44,33,"denseBincount"],[64,55,44,33],[64,57,44,34,"denseBincountInput"],[64,75,44,52],[64,77,44,54],[64,79,44,56],[64,81,44,58,"depth"],[64,86,44,63],[64,88,44,65,"binaryOutput"],[64,100,44,77],[64,101,44,78],[65,4,45,4],[66,4,46,4],[66,8,46,8,"outputMode"],[66,18,46,18],[66,23,46,23],[66,30,46,30],[66,32,46,32],[67,6,47,8],[67,13,47,15,"binCounts"],[67,22,47,24],[68,4,48,4],[69,4,49,4],[69,8,49,8,"weights"],[69,15,49,15],[69,17,49,17],[70,6,50,8],[70,13,50,15],[70,17,50,15,"mul"],[70,36,50,18],[70,37,50,18,"mul"],[70,40,50,18],[70,42,50,19,"binCounts"],[70,51,50,28],[70,53,50,30,"weights"],[70,60,50,37],[70,61,50,38],[71,4,51,4],[71,5,51,5],[71,11,52,9],[72,6,53,8],[72,12,53,14],[72,16,53,18,"ValueError"],[72,23,53,28],[72,24,53,28,"ValueError"],[72,34,53,28],[72,35,53,29],[72,90,53,84],[72,91,53,85],[73,4,54,4],[74,2,55,0],[75,0,55,1],[75,3]],"functionMap":{"names":["<global>","encodeCategoricalInputs"],"mappings":"AAA;OCc;CDwC"},"hasCjsExports":false},"type":"js/module"}]}