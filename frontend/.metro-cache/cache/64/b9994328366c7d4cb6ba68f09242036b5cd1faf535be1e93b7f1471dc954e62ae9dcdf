{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":73,"index":776}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}},{"name":"../kernel_utils/kernel_funcs_utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":777},"end":{"line":18,"column":82,"index":859}}],"key":"TkLShRIzGpc/AaE27S68+1rwBL4=","exportNames":["*"],"imports":1}},{"name":"../mulmat_packed_gpu","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":860},"end":{"line":19,"column":59,"index":919}}],"key":"nFvRgZM7QibVmPV5Zx2cpNyC2E8=","exportNames":["*"],"imports":1}},{"name":"./Multiply","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":920},"end":{"line":20,"column":38,"index":958}}],"key":"1n3upWdb1/4tv8y+cZP1u3RwscI=","exportNames":["*"],"imports":1}},{"name":"./Reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":959},"end":{"line":21,"column":36,"index":995}}],"key":"EUWK+oKi/AwokPOQ1jng5DYfQSc=","exportNames":["*"],"imports":1}},{"name":"./Sum","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":22,"column":0,"index":996},"end":{"line":22,"column":28,"index":1024}}],"key":"d7Y5U7PWKSyphQklNUED/rT1MrQ=","exportNames":["*"],"imports":1}},{"name":"./Transpose","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":23,"column":0,"index":1025},"end":{"line":23,"column":40,"index":1065}}],"key":"F6S1ekgW6WEHcH6rql/beO2khwY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"MATMUL_SHARED_DIM_THRESHOLD\", {\n    enumerable: true,\n    get: function () {\n      return MATMUL_SHARED_DIM_THRESHOLD;\n    }\n  });\n  exports.batchMatMulImpl = batchMatMulImpl;\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  var _kernel_utilsKernel_funcs_utils = require(_dependencyMap[1], \"../kernel_utils/kernel_funcs_utils\");\n  var _mulmat_packed_gpu = require(_dependencyMap[2], \"../mulmat_packed_gpu\");\n  var _Multiply = require(_dependencyMap[3], \"./Multiply\");\n  var _Reshape = require(_dependencyMap[4], \"./Reshape\");\n  var _Sum = require(_dependencyMap[5], \"./Sum\");\n  var _Transpose = require(_dependencyMap[6], \"./Transpose\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  // Empirically determined minimal shared dimension in matmul before we forward\n  // to a.mul(b).sum() in order to take advantage of GPU parallelism. See\n  // https://github.com/tensorflow/tfjs-core/pull/1379 for benchmarks.\n  const MATMUL_SHARED_DIM_THRESHOLD = 1000;\n  function batchMatMulImpl({\n    a,\n    b,\n    transposeA,\n    transposeB,\n    backend,\n    bias = null,\n    preluActivationWeights = null,\n    leakyreluAlpha = 0,\n    activation = null\n  }) {\n    const aRank = a.shape.length;\n    const bRank = b.shape.length;\n    const innerShapeA = transposeA ? a.shape[aRank - 2] : a.shape[aRank - 1];\n    const innerShapeB = transposeB ? b.shape[bRank - 1] : b.shape[bRank - 2];\n    const outerShapeA = transposeA ? a.shape[aRank - 1] : a.shape[aRank - 2];\n    const outerShapeB = transposeB ? b.shape[bRank - 2] : b.shape[bRank - 1];\n    const outerDimsA = a.shape.slice(0, -2);\n    const outerDimsB = b.shape.slice(0, -2);\n    const batchDimA = _tensorflowTfjsCore.util.sizeFromShape(outerDimsA);\n    const batchDimB = _tensorflowTfjsCore.util.sizeFromShape(outerDimsB);\n    const outShapeOuterDims = _tensorflowTfjsCore.broadcast_util.assertAndGetBroadcastShape(a.shape.slice(0, -2), b.shape.slice(0, -2));\n    const outShape = outShapeOuterDims.concat([outerShapeA, outerShapeB]);\n    _tensorflowTfjsCore.util.assert(innerShapeA === innerShapeB, () => `Error in matMul: inner shapes (${innerShapeA}) and (` + `${innerShapeB}) of Tensors with shapes ${a.shape} and ` + `${b.shape} and transposeA=${transposeA}` + ` and transposeB=${transposeB} must match.`);\n    const a3dShape = transposeA ? [batchDimA, innerShapeA, outerShapeA] : [batchDimA, outerShapeA, innerShapeA];\n    const b3dShape = transposeB ? [batchDimB, outerShapeB, innerShapeB] : [batchDimB, innerShapeB, outerShapeB];\n    // The rest of the implementation is designed to operate on rank-3 tensors\n    const a3d = (0, _Reshape.reshape)({\n      inputs: {\n        x: a\n      },\n      backend,\n      attrs: {\n        shape: a3dShape\n      }\n    });\n    const b3d = (0, _Reshape.reshape)({\n      inputs: {\n        x: b\n      },\n      backend,\n      attrs: {\n        shape: b3dShape\n      }\n    });\n    const intermediates = [a3d, b3d];\n    const batchDim = Math.max(batchDimA, batchDimB);\n    const sharedDim = transposeA ? a3d.shape[1] : a3d.shape[2];\n    const hasBias = bias != null;\n    const hasPreluActivationWeights = preluActivationWeights != null;\n    const hasLeakyreluAlpha = activation === 'leakyrelu';\n    const fusedActivation = activation != null ? (0, _kernel_utilsKernel_funcs_utils.mapActivationToShaderProgram)(activation, true) : null;\n    const containsFusedOps = hasBias || hasPreluActivationWeights || hasLeakyreluAlpha || fusedActivation != null;\n    let out;\n    // Since the matrices are vectors, it is faster to call mul().sum()\n    // because sum() is O(sqrt(N)) due to divide-and-conquer.\n    if ((outerShapeA === 1 || outerShapeB === 1) && sharedDim > MATMUL_SHARED_DIM_THRESHOLD && containsFusedOps === false) {\n      let aVec = a3d;\n      let bVec = b3d;\n      if (transposeA) {\n        aVec = (0, _Transpose.transpose)({\n          inputs: {\n            x: a3d\n          },\n          backend,\n          attrs: {\n            perm: [0, 2, 1]\n          }\n        });\n        intermediates.push(aVec);\n      }\n      if (transposeB) {\n        bVec = (0, _Transpose.transpose)({\n          inputs: {\n            x: b3d\n          },\n          backend,\n          attrs: {\n            perm: [0, 2, 1]\n          }\n        });\n        intermediates.push(bVec);\n      }\n      const shouldReshapeA = outerShapeB !== 1;\n      const shouldReshapeB = outerShapeB === 1;\n      let aVec3d = aVec;\n      if (shouldReshapeA) {\n        aVec3d = (0, _Reshape.reshape)({\n          inputs: {\n            x: aVec\n          },\n          backend,\n          attrs: {\n            shape: [batchDim, sharedDim, 1]\n          }\n        });\n        intermediates.push(aVec3d);\n      }\n      const axis = outerShapeB === 1 ? 2 : 1;\n      let bVec3d = bVec;\n      if (shouldReshapeB) {\n        bVec3d = (0, _Reshape.reshape)({\n          inputs: {\n            x: bVec\n          },\n          backend,\n          attrs: {\n            shape: [batchDim, 1, sharedDim]\n          }\n        });\n        intermediates.push(bVec3d);\n      }\n      const product = (0, _Multiply.multiply)({\n        inputs: {\n          a: aVec3d,\n          b: bVec3d\n        },\n        backend\n      });\n      out = (0, _Sum.sum)({\n        inputs: {\n          x: product\n        },\n        backend,\n        attrs: {\n          axis,\n          keepDims: true\n        }\n      });\n      intermediates.push(product);\n    } else {\n      const dtype = (0, _tensorflowTfjsCore.upcastType)(a.dtype, b.dtype);\n      const program = new _mulmat_packed_gpu.MatMulPackedProgram(a3dShape, b3dShape, [batchDim, outerShapeA, outerShapeB], transposeA, transposeB, hasBias, fusedActivation, hasPreluActivationWeights, hasLeakyreluAlpha);\n      const inputs = [a3d, b3d];\n      if (bias != null) {\n        inputs.push(bias);\n      }\n      if (hasPreluActivationWeights) {\n        inputs.push(preluActivationWeights);\n      }\n      if (hasLeakyreluAlpha) {\n        const $leakyreluAlpha = backend.makeTensorInfo([], 'float32', _tensorflowTfjsCore.util.createScalarValue(leakyreluAlpha, 'float32'));\n        inputs.push($leakyreluAlpha);\n        intermediates.push($leakyreluAlpha);\n      }\n      out = backend.runWebGLProgram(program, inputs, dtype);\n    }\n    const outReshaped = (0, _Reshape.reshape)({\n      inputs: {\n        x: out\n      },\n      backend,\n      attrs: {\n        shape: outShape\n      }\n    });\n    intermediates.push(out);\n    for (const i of intermediates) {\n      backend.disposeIntermediateTensorInfo(i);\n    }\n    return outReshaped;\n  }\n});","lineCount":204,"map":[[7,2,27,0,"Object"],[7,8,27,0],[7,9,27,0,"defineProperty"],[7,23,27,0],[7,24,27,0,"exports"],[7,31,27,0],[8,4,27,0,"enumerable"],[8,14,27,0],[9,4,27,0,"get"],[9,7,27,0],[9,18,27,0,"get"],[9,19,27,0],[10,6,27,0],[10,13,27,0,"MATMUL_SHARED_DIM_THRESHOLD"],[10,40,27,0],[11,4,27,0],[12,2,27,0],[13,2,28,0,"exports"],[13,9,28,0],[13,10,28,0,"batchMatMulImpl"],[13,25,28,0],[13,28,28,0,"batchMatMulImpl"],[13,43,28,0],[14,2,17,0],[14,6,17,0,"_tensorflowTfjsCore"],[14,25,17,0],[14,28,17,0,"require"],[14,35,17,0],[14,36,17,0,"_dependencyMap"],[14,50,17,0],[15,2,18,0],[15,6,18,0,"_kernel_utilsKernel_funcs_utils"],[15,37,18,0],[15,40,18,0,"require"],[15,47,18,0],[15,48,18,0,"_dependencyMap"],[15,62,18,0],[16,2,19,0],[16,6,19,0,"_mulmat_packed_gpu"],[16,24,19,0],[16,27,19,0,"require"],[16,34,19,0],[16,35,19,0,"_dependencyMap"],[16,49,19,0],[17,2,20,0],[17,6,20,0,"_Multiply"],[17,15,20,0],[17,18,20,0,"require"],[17,25,20,0],[17,26,20,0,"_dependencyMap"],[17,40,20,0],[18,2,21,0],[18,6,21,0,"_Reshape"],[18,14,21,0],[18,17,21,0,"require"],[18,24,21,0],[18,25,21,0,"_dependencyMap"],[18,39,21,0],[19,2,22,0],[19,6,22,0,"_Sum"],[19,10,22,0],[19,13,22,0,"require"],[19,20,22,0],[19,21,22,0,"_dependencyMap"],[19,35,22,0],[20,2,23,0],[20,6,23,0,"_Transpose"],[20,16,23,0],[20,19,23,0,"require"],[20,26,23,0],[20,27,23,0,"_dependencyMap"],[20,41,23,0],[21,2,1,0],[22,0,2,0],[23,0,3,0],[24,0,4,0],[25,0,5,0],[26,0,6,0],[27,0,7,0],[28,0,8,0],[29,0,9,0],[30,0,10,0],[31,0,11,0],[32,0,12,0],[33,0,13,0],[34,0,14,0],[35,0,15,0],[36,0,16,0],[38,2,24,0],[39,2,25,0],[40,2,26,0],[41,2,27,7],[41,8,27,13,"MATMUL_SHARED_DIM_THRESHOLD"],[41,35,27,40],[41,38,27,43],[41,42,27,47],[42,2,28,7],[42,11,28,16,"batchMatMulImpl"],[42,26,28,31,"batchMatMulImpl"],[42,27,28,32],[43,4,28,34,"a"],[43,5,28,35],[44,4,28,37,"b"],[44,5,28,38],[45,4,28,40,"transposeA"],[45,14,28,50],[46,4,28,52,"transposeB"],[46,14,28,62],[47,4,28,64,"backend"],[47,11,28,71],[48,4,28,73,"bias"],[48,8,28,77],[48,11,28,80],[48,15,28,84],[49,4,28,86,"preluActivationWeights"],[49,26,28,108],[49,29,28,111],[49,33,28,115],[50,4,28,117,"leakyreluAlpha"],[50,18,28,131],[50,21,28,134],[50,22,28,135],[51,4,28,137,"activation"],[51,14,28,147],[51,17,28,150],[52,2,28,155],[52,3,28,156],[52,5,28,158],[53,4,29,4],[53,10,29,10,"aRank"],[53,15,29,15],[53,18,29,18,"a"],[53,19,29,19],[53,20,29,20,"shape"],[53,25,29,25],[53,26,29,26,"length"],[53,32,29,32],[54,4,30,4],[54,10,30,10,"bRank"],[54,15,30,15],[54,18,30,18,"b"],[54,19,30,19],[54,20,30,20,"shape"],[54,25,30,25],[54,26,30,26,"length"],[54,32,30,32],[55,4,31,4],[55,10,31,10,"innerShapeA"],[55,21,31,21],[55,24,31,24,"transposeA"],[55,34,31,34],[55,37,31,37,"a"],[55,38,31,38],[55,39,31,39,"shape"],[55,44,31,44],[55,45,31,45,"aRank"],[55,50,31,50],[55,53,31,53],[55,54,31,54],[55,55,31,55],[55,58,31,58,"a"],[55,59,31,59],[55,60,31,60,"shape"],[55,65,31,65],[55,66,31,66,"aRank"],[55,71,31,71],[55,74,31,74],[55,75,31,75],[55,76,31,76],[56,4,32,4],[56,10,32,10,"innerShapeB"],[56,21,32,21],[56,24,32,24,"transposeB"],[56,34,32,34],[56,37,32,37,"b"],[56,38,32,38],[56,39,32,39,"shape"],[56,44,32,44],[56,45,32,45,"bRank"],[56,50,32,50],[56,53,32,53],[56,54,32,54],[56,55,32,55],[56,58,32,58,"b"],[56,59,32,59],[56,60,32,60,"shape"],[56,65,32,65],[56,66,32,66,"bRank"],[56,71,32,71],[56,74,32,74],[56,75,32,75],[56,76,32,76],[57,4,33,4],[57,10,33,10,"outerShapeA"],[57,21,33,21],[57,24,33,24,"transposeA"],[57,34,33,34],[57,37,33,37,"a"],[57,38,33,38],[57,39,33,39,"shape"],[57,44,33,44],[57,45,33,45,"aRank"],[57,50,33,50],[57,53,33,53],[57,54,33,54],[57,55,33,55],[57,58,33,58,"a"],[57,59,33,59],[57,60,33,60,"shape"],[57,65,33,65],[57,66,33,66,"aRank"],[57,71,33,71],[57,74,33,74],[57,75,33,75],[57,76,33,76],[58,4,34,4],[58,10,34,10,"outerShapeB"],[58,21,34,21],[58,24,34,24,"transposeB"],[58,34,34,34],[58,37,34,37,"b"],[58,38,34,38],[58,39,34,39,"shape"],[58,44,34,44],[58,45,34,45,"bRank"],[58,50,34,50],[58,53,34,53],[58,54,34,54],[58,55,34,55],[58,58,34,58,"b"],[58,59,34,59],[58,60,34,60,"shape"],[58,65,34,65],[58,66,34,66,"bRank"],[58,71,34,71],[58,74,34,74],[58,75,34,75],[58,76,34,76],[59,4,35,4],[59,10,35,10,"outerDimsA"],[59,20,35,20],[59,23,35,23,"a"],[59,24,35,24],[59,25,35,25,"shape"],[59,30,35,30],[59,31,35,31,"slice"],[59,36,35,36],[59,37,35,37],[59,38,35,38],[59,40,35,40],[59,41,35,41],[59,42,35,42],[59,43,35,43],[60,4,36,4],[60,10,36,10,"outerDimsB"],[60,20,36,20],[60,23,36,23,"b"],[60,24,36,24],[60,25,36,25,"shape"],[60,30,36,30],[60,31,36,31,"slice"],[60,36,36,36],[60,37,36,37],[60,38,36,38],[60,40,36,40],[60,41,36,41],[60,42,36,42],[60,43,36,43],[61,4,37,4],[61,10,37,10,"batchDimA"],[61,19,37,19],[61,22,37,22,"util"],[61,41,37,26],[61,42,37,26,"util"],[61,46,37,26],[61,47,37,27,"sizeFromShape"],[61,60,37,40],[61,61,37,41,"outerDimsA"],[61,71,37,51],[61,72,37,52],[62,4,38,4],[62,10,38,10,"batchDimB"],[62,19,38,19],[62,22,38,22,"util"],[62,41,38,26],[62,42,38,26,"util"],[62,46,38,26],[62,47,38,27,"sizeFromShape"],[62,60,38,40],[62,61,38,41,"outerDimsB"],[62,71,38,51],[62,72,38,52],[63,4,39,4],[63,10,39,10,"outShapeOuterDims"],[63,27,39,27],[63,30,39,30,"broadcast_util"],[63,49,39,44],[63,50,39,44,"broadcast_util"],[63,64,39,44],[63,65,39,45,"assertAndGetBroadcastShape"],[63,91,39,71],[63,92,39,72,"a"],[63,93,39,73],[63,94,39,74,"shape"],[63,99,39,79],[63,100,39,80,"slice"],[63,105,39,85],[63,106,39,86],[63,107,39,87],[63,109,39,89],[63,110,39,90],[63,111,39,91],[63,112,39,92],[63,114,39,94,"b"],[63,115,39,95],[63,116,39,96,"shape"],[63,121,39,101],[63,122,39,102,"slice"],[63,127,39,107],[63,128,39,108],[63,129,39,109],[63,131,39,111],[63,132,39,112],[63,133,39,113],[63,134,39,114],[63,135,39,115],[64,4,40,4],[64,10,40,10,"outShape"],[64,18,40,18],[64,21,40,21,"outShapeOuterDims"],[64,38,40,38],[64,39,40,39,"concat"],[64,45,40,45],[64,46,40,46],[64,47,40,47,"outerShapeA"],[64,58,40,58],[64,60,40,60,"outerShapeB"],[64,71,40,71],[64,72,40,72],[64,73,40,73],[65,4,41,4,"util"],[65,23,41,8],[65,24,41,8,"util"],[65,28,41,8],[65,29,41,9,"assert"],[65,35,41,15],[65,36,41,16,"innerShapeA"],[65,47,41,27],[65,52,41,32,"innerShapeB"],[65,63,41,43],[65,65,41,45],[65,71,41,51],[65,105,41,85,"innerShapeA"],[65,116,41,96],[65,125,41,105],[65,128,42,8],[65,131,42,11,"innerShapeB"],[65,142,42,22],[65,170,42,50,"a"],[65,171,42,51],[65,172,42,52,"shape"],[65,177,42,57],[65,184,42,64],[65,187,43,8],[65,190,43,11,"b"],[65,191,43,12],[65,192,43,13,"shape"],[65,197,43,18],[65,216,43,37,"transposeA"],[65,226,43,47],[65,228,43,49],[65,231,44,8],[65,250,44,27,"transposeB"],[65,260,44,37],[65,274,44,51],[65,275,44,52],[66,4,45,4],[66,10,45,10,"a3dShape"],[66,18,45,18],[66,21,45,21,"transposeA"],[66,31,45,31],[66,34,46,8],[66,35,46,9,"batchDimA"],[66,44,46,18],[66,46,46,20,"innerShapeA"],[66,57,46,31],[66,59,46,33,"outerShapeA"],[66,70,46,44],[66,71,46,45],[66,74,47,8],[66,75,47,9,"batchDimA"],[66,84,47,18],[66,86,47,20,"outerShapeA"],[66,97,47,31],[66,99,47,33,"innerShapeA"],[66,110,47,44],[66,111,47,45],[67,4,48,4],[67,10,48,10,"b3dShape"],[67,18,48,18],[67,21,48,21,"transposeB"],[67,31,48,31],[67,34,49,8],[67,35,49,9,"batchDimB"],[67,44,49,18],[67,46,49,20,"outerShapeB"],[67,57,49,31],[67,59,49,33,"innerShapeB"],[67,70,49,44],[67,71,49,45],[67,74,50,8],[67,75,50,9,"batchDimB"],[67,84,50,18],[67,86,50,20,"innerShapeB"],[67,97,50,31],[67,99,50,33,"outerShapeB"],[67,110,50,44],[67,111,50,45],[68,4,51,4],[69,4,52,4],[69,10,52,10,"a3d"],[69,13,52,13],[69,16,52,16],[69,20,52,16,"reshape"],[69,28,52,23],[69,29,52,23,"reshape"],[69,36,52,23],[69,38,52,24],[70,6,52,26,"inputs"],[70,12,52,32],[70,14,52,34],[71,8,52,36,"x"],[71,9,52,37],[71,11,52,39,"a"],[72,6,52,41],[72,7,52,42],[73,6,52,44,"backend"],[73,13,52,51],[74,6,52,53,"attrs"],[74,11,52,58],[74,13,52,60],[75,8,52,62,"shape"],[75,13,52,67],[75,15,52,69,"a3dShape"],[76,6,52,78],[77,4,52,80],[77,5,52,81],[77,6,52,82],[78,4,53,4],[78,10,53,10,"b3d"],[78,13,53,13],[78,16,53,16],[78,20,53,16,"reshape"],[78,28,53,23],[78,29,53,23,"reshape"],[78,36,53,23],[78,38,53,24],[79,6,53,26,"inputs"],[79,12,53,32],[79,14,53,34],[80,8,53,36,"x"],[80,9,53,37],[80,11,53,39,"b"],[81,6,53,41],[81,7,53,42],[82,6,53,44,"backend"],[82,13,53,51],[83,6,53,53,"attrs"],[83,11,53,58],[83,13,53,60],[84,8,53,62,"shape"],[84,13,53,67],[84,15,53,69,"b3dShape"],[85,6,53,78],[86,4,53,80],[86,5,53,81],[86,6,53,82],[87,4,54,4],[87,10,54,10,"intermediates"],[87,23,54,23],[87,26,54,26],[87,27,54,27,"a3d"],[87,30,54,30],[87,32,54,32,"b3d"],[87,35,54,35],[87,36,54,36],[88,4,55,4],[88,10,55,10,"batchDim"],[88,18,55,18],[88,21,55,21,"Math"],[88,25,55,25],[88,26,55,26,"max"],[88,29,55,29],[88,30,55,30,"batchDimA"],[88,39,55,39],[88,41,55,41,"batchDimB"],[88,50,55,50],[88,51,55,51],[89,4,56,4],[89,10,56,10,"sharedDim"],[89,19,56,19],[89,22,56,22,"transposeA"],[89,32,56,32],[89,35,56,35,"a3d"],[89,38,56,38],[89,39,56,39,"shape"],[89,44,56,44],[89,45,56,45],[89,46,56,46],[89,47,56,47],[89,50,56,50,"a3d"],[89,53,56,53],[89,54,56,54,"shape"],[89,59,56,59],[89,60,56,60],[89,61,56,61],[89,62,56,62],[90,4,57,4],[90,10,57,10,"hasBias"],[90,17,57,17],[90,20,57,20,"bias"],[90,24,57,24],[90,28,57,28],[90,32,57,32],[91,4,58,4],[91,10,58,10,"hasPreluActivationWeights"],[91,35,58,35],[91,38,58,38,"preluActivationWeights"],[91,60,58,60],[91,64,58,64],[91,68,58,68],[92,4,59,4],[92,10,59,10,"hasLeakyreluAlpha"],[92,27,59,27],[92,30,59,30,"activation"],[92,40,59,40],[92,45,59,45],[92,56,59,56],[93,4,60,4],[93,10,60,10,"fusedActivation"],[93,25,60,25],[93,28,60,28,"activation"],[93,38,60,38],[93,42,60,42],[93,46,60,46],[93,49,61,8],[93,53,61,8,"mapActivationToShaderProgram"],[93,84,61,36],[93,85,61,36,"mapActivationToShaderProgram"],[93,113,61,36],[93,115,61,37,"activation"],[93,125,61,47],[93,127,61,49],[93,131,61,53],[93,132,61,54],[93,135,62,8],[93,139,62,12],[94,4,63,4],[94,10,63,10,"containsFusedOps"],[94,26,63,26],[94,29,63,29,"hasBias"],[94,36,63,36],[94,40,63,40,"hasPreluActivationWeights"],[94,65,63,65],[94,69,64,8,"hasLeakyreluAlpha"],[94,86,64,25],[94,90,64,29,"fusedActivation"],[94,105,64,44],[94,109,64,48],[94,113,64,52],[95,4,65,4],[95,8,65,8,"out"],[95,11,65,11],[96,4,66,4],[97,4,67,4],[98,4,68,4],[98,8,68,8],[98,9,68,9,"outerShapeA"],[98,20,68,20],[98,25,68,25],[98,26,68,26],[98,30,68,30,"outerShapeB"],[98,41,68,41],[98,46,68,46],[98,47,68,47],[98,52,69,8,"sharedDim"],[98,61,69,17],[98,64,69,20,"MATMUL_SHARED_DIM_THRESHOLD"],[98,91,69,47],[98,95,69,51,"containsFusedOps"],[98,111,69,67],[98,116,69,72],[98,121,69,77],[98,123,69,79],[99,6,70,8],[99,10,70,12,"aVec"],[99,14,70,16],[99,17,70,19,"a3d"],[99,20,70,22],[100,6,71,8],[100,10,71,12,"bVec"],[100,14,71,16],[100,17,71,19,"b3d"],[100,20,71,22],[101,6,72,8],[101,10,72,12,"transposeA"],[101,20,72,22],[101,22,72,24],[102,8,73,12,"aVec"],[102,12,73,16],[102,15,73,19],[102,19,73,19,"transpose"],[102,29,73,28],[102,30,73,28,"transpose"],[102,39,73,28],[102,41,73,29],[103,10,73,31,"inputs"],[103,16,73,37],[103,18,73,39],[104,12,73,41,"x"],[104,13,73,42],[104,15,73,44,"a3d"],[105,10,73,48],[105,11,73,49],[106,10,73,51,"backend"],[106,17,73,58],[107,10,73,60,"attrs"],[107,15,73,65],[107,17,73,67],[108,12,73,69,"perm"],[108,16,73,73],[108,18,73,75],[108,19,73,76],[108,20,73,77],[108,22,73,79],[108,23,73,80],[108,25,73,82],[108,26,73,83],[109,10,73,85],[110,8,73,87],[110,9,73,88],[110,10,73,89],[111,8,74,12,"intermediates"],[111,21,74,25],[111,22,74,26,"push"],[111,26,74,30],[111,27,74,31,"aVec"],[111,31,74,35],[111,32,74,36],[112,6,75,8],[113,6,76,8],[113,10,76,12,"transposeB"],[113,20,76,22],[113,22,76,24],[114,8,77,12,"bVec"],[114,12,77,16],[114,15,77,19],[114,19,77,19,"transpose"],[114,29,77,28],[114,30,77,28,"transpose"],[114,39,77,28],[114,41,77,29],[115,10,77,31,"inputs"],[115,16,77,37],[115,18,77,39],[116,12,77,41,"x"],[116,13,77,42],[116,15,77,44,"b3d"],[117,10,77,48],[117,11,77,49],[118,10,77,51,"backend"],[118,17,77,58],[119,10,77,60,"attrs"],[119,15,77,65],[119,17,77,67],[120,12,77,69,"perm"],[120,16,77,73],[120,18,77,75],[120,19,77,76],[120,20,77,77],[120,22,77,79],[120,23,77,80],[120,25,77,82],[120,26,77,83],[121,10,77,85],[122,8,77,87],[122,9,77,88],[122,10,77,89],[123,8,78,12,"intermediates"],[123,21,78,25],[123,22,78,26,"push"],[123,26,78,30],[123,27,78,31,"bVec"],[123,31,78,35],[123,32,78,36],[124,6,79,8],[125,6,80,8],[125,12,80,14,"shouldReshapeA"],[125,26,80,28],[125,29,80,31,"outerShapeB"],[125,40,80,42],[125,45,80,47],[125,46,80,48],[126,6,81,8],[126,12,81,14,"shouldReshapeB"],[126,26,81,28],[126,29,81,31,"outerShapeB"],[126,40,81,42],[126,45,81,47],[126,46,81,48],[127,6,82,8],[127,10,82,12,"aVec3d"],[127,16,82,18],[127,19,82,21,"aVec"],[127,23,82,25],[128,6,83,8],[128,10,83,12,"shouldReshapeA"],[128,24,83,26],[128,26,83,28],[129,8,84,12,"aVec3d"],[129,14,84,18],[129,17,84,21],[129,21,84,21,"reshape"],[129,29,84,28],[129,30,84,28,"reshape"],[129,37,84,28],[129,39,84,29],[130,10,85,16,"inputs"],[130,16,85,22],[130,18,85,24],[131,12,85,26,"x"],[131,13,85,27],[131,15,85,29,"aVec"],[132,10,85,34],[132,11,85,35],[133,10,86,16,"backend"],[133,17,86,23],[134,10,87,16,"attrs"],[134,15,87,21],[134,17,87,23],[135,12,87,25,"shape"],[135,17,87,30],[135,19,87,32],[135,20,87,33,"batchDim"],[135,28,87,41],[135,30,87,43,"sharedDim"],[135,39,87,52],[135,41,87,54],[135,42,87,55],[136,10,87,57],[137,8,88,12],[137,9,88,13],[137,10,88,14],[138,8,89,12,"intermediates"],[138,21,89,25],[138,22,89,26,"push"],[138,26,89,30],[138,27,89,31,"aVec3d"],[138,33,89,37],[138,34,89,38],[139,6,90,8],[140,6,91,8],[140,12,91,14,"axis"],[140,16,91,18],[140,19,91,21,"outerShapeB"],[140,30,91,32],[140,35,91,37],[140,36,91,38],[140,39,91,41],[140,40,91,42],[140,43,91,45],[140,44,91,46],[141,6,92,8],[141,10,92,12,"bVec3d"],[141,16,92,18],[141,19,92,21,"bVec"],[141,23,92,25],[142,6,93,8],[142,10,93,12,"shouldReshapeB"],[142,24,93,26],[142,26,93,28],[143,8,94,12,"bVec3d"],[143,14,94,18],[143,17,94,21],[143,21,94,21,"reshape"],[143,29,94,28],[143,30,94,28,"reshape"],[143,37,94,28],[143,39,94,29],[144,10,95,16,"inputs"],[144,16,95,22],[144,18,95,24],[145,12,95,26,"x"],[145,13,95,27],[145,15,95,29,"bVec"],[146,10,95,34],[146,11,95,35],[147,10,96,16,"backend"],[147,17,96,23],[148,10,97,16,"attrs"],[148,15,97,21],[148,17,97,23],[149,12,97,25,"shape"],[149,17,97,30],[149,19,97,32],[149,20,97,33,"batchDim"],[149,28,97,41],[149,30,97,43],[149,31,97,44],[149,33,97,46,"sharedDim"],[149,42,97,55],[150,10,97,57],[151,8,98,12],[151,9,98,13],[151,10,98,14],[152,8,99,12,"intermediates"],[152,21,99,25],[152,22,99,26,"push"],[152,26,99,30],[152,27,99,31,"bVec3d"],[152,33,99,37],[152,34,99,38],[153,6,100,8],[154,6,101,8],[154,12,101,14,"product"],[154,19,101,21],[154,22,101,24],[154,26,101,24,"multiply"],[154,35,101,32],[154,36,101,32,"multiply"],[154,44,101,32],[154,46,101,33],[155,8,101,35,"inputs"],[155,14,101,41],[155,16,101,43],[156,10,101,45,"a"],[156,11,101,46],[156,13,101,48,"aVec3d"],[156,19,101,54],[157,10,101,56,"b"],[157,11,101,57],[157,13,101,59,"bVec3d"],[158,8,101,66],[158,9,101,67],[159,8,101,69,"backend"],[160,6,101,77],[160,7,101,78],[160,8,101,79],[161,6,102,8,"out"],[161,9,102,11],[161,12,102,14],[161,16,102,14,"sum"],[161,20,102,17],[161,21,102,17,"sum"],[161,24,102,17],[161,26,102,18],[162,8,102,20,"inputs"],[162,14,102,26],[162,16,102,28],[163,10,102,30,"x"],[163,11,102,31],[163,13,102,33,"product"],[164,8,102,41],[164,9,102,42],[165,8,102,44,"backend"],[165,15,102,51],[166,8,102,53,"attrs"],[166,13,102,58],[166,15,102,60],[167,10,102,62,"axis"],[167,14,102,66],[168,10,102,68,"keepDims"],[168,18,102,76],[168,20,102,78],[169,8,102,83],[170,6,102,85],[170,7,102,86],[170,8,102,87],[171,6,103,8,"intermediates"],[171,19,103,21],[171,20,103,22,"push"],[171,24,103,26],[171,25,103,27,"product"],[171,32,103,34],[171,33,103,35],[172,4,104,4],[172,5,104,5],[172,11,105,9],[173,6,106,8],[173,12,106,14,"dtype"],[173,17,106,19],[173,20,106,22],[173,24,106,22,"upcastType"],[173,43,106,32],[173,44,106,32,"upcastType"],[173,54,106,32],[173,56,106,33,"a"],[173,57,106,34],[173,58,106,35,"dtype"],[173,63,106,40],[173,65,106,42,"b"],[173,66,106,43],[173,67,106,44,"dtype"],[173,72,106,49],[173,73,106,50],[174,6,107,8],[174,12,107,14,"program"],[174,19,107,21],[174,22,107,24],[174,26,107,28,"MatMulPackedProgram"],[174,44,107,47],[174,45,107,47,"MatMulPackedProgram"],[174,64,107,47],[174,65,107,48,"a3dShape"],[174,73,107,56],[174,75,107,58,"b3dShape"],[174,83,107,66],[174,85,107,68],[174,86,107,69,"batchDim"],[174,94,107,77],[174,96,107,79,"outerShapeA"],[174,107,107,90],[174,109,107,92,"outerShapeB"],[174,120,107,103],[174,121,107,104],[174,123,107,106,"transposeA"],[174,133,107,116],[174,135,107,118,"transposeB"],[174,145,107,128],[174,147,107,130,"hasBias"],[174,154,107,137],[174,156,107,139,"fusedActivation"],[174,171,107,154],[174,173,107,156,"hasPreluActivationWeights"],[174,198,107,181],[174,200,107,183,"hasLeakyreluAlpha"],[174,217,107,200],[174,218,107,201],[175,6,108,8],[175,12,108,14,"inputs"],[175,18,108,20],[175,21,108,23],[175,22,108,24,"a3d"],[175,25,108,27],[175,27,108,29,"b3d"],[175,30,108,32],[175,31,108,33],[176,6,109,8],[176,10,109,12,"bias"],[176,14,109,16],[176,18,109,20],[176,22,109,24],[176,24,109,26],[177,8,110,12,"inputs"],[177,14,110,18],[177,15,110,19,"push"],[177,19,110,23],[177,20,110,24,"bias"],[177,24,110,28],[177,25,110,29],[178,6,111,8],[179,6,112,8],[179,10,112,12,"hasPreluActivationWeights"],[179,35,112,37],[179,37,112,39],[180,8,113,12,"inputs"],[180,14,113,18],[180,15,113,19,"push"],[180,19,113,23],[180,20,113,24,"preluActivationWeights"],[180,42,113,46],[180,43,113,47],[181,6,114,8],[182,6,115,8],[182,10,115,12,"hasLeakyreluAlpha"],[182,27,115,29],[182,29,115,31],[183,8,116,12],[183,14,116,18,"$leakyreluAlpha"],[183,29,116,33],[183,32,116,36,"backend"],[183,39,116,43],[183,40,116,44,"makeTensorInfo"],[183,54,116,58],[183,55,116,59],[183,57,116,61],[183,59,116,63],[183,68,116,72],[183,70,116,74,"util"],[183,89,116,78],[183,90,116,78,"util"],[183,94,116,78],[183,95,116,79,"createScalarValue"],[183,112,116,96],[183,113,116,97,"leakyreluAlpha"],[183,127,116,111],[183,129,116,113],[183,138,116,122],[183,139,116,123],[183,140,116,124],[184,8,117,12,"inputs"],[184,14,117,18],[184,15,117,19,"push"],[184,19,117,23],[184,20,117,24,"$leakyreluAlpha"],[184,35,117,39],[184,36,117,40],[185,8,118,12,"intermediates"],[185,21,118,25],[185,22,118,26,"push"],[185,26,118,30],[185,27,118,31,"$leakyreluAlpha"],[185,42,118,46],[185,43,118,47],[186,6,119,8],[187,6,120,8,"out"],[187,9,120,11],[187,12,120,14,"backend"],[187,19,120,21],[187,20,120,22,"runWebGLProgram"],[187,35,120,37],[187,36,120,38,"program"],[187,43,120,45],[187,45,120,47,"inputs"],[187,51,120,53],[187,53,120,55,"dtype"],[187,58,120,60],[187,59,120,61],[188,4,121,4],[189,4,122,4],[189,10,122,10,"outReshaped"],[189,21,122,21],[189,24,122,24],[189,28,122,24,"reshape"],[189,36,122,31],[189,37,122,31,"reshape"],[189,44,122,31],[189,46,122,32],[190,6,122,34,"inputs"],[190,12,122,40],[190,14,122,42],[191,8,122,44,"x"],[191,9,122,45],[191,11,122,47,"out"],[192,6,122,51],[192,7,122,52],[193,6,122,54,"backend"],[193,13,122,61],[194,6,122,63,"attrs"],[194,11,122,68],[194,13,122,70],[195,8,122,72,"shape"],[195,13,122,77],[195,15,122,79,"outShape"],[196,6,122,88],[197,4,122,90],[197,5,122,91],[197,6,122,92],[198,4,123,4,"intermediates"],[198,17,123,17],[198,18,123,18,"push"],[198,22,123,22],[198,23,123,23,"out"],[198,26,123,26],[198,27,123,27],[199,4,124,4],[199,9,124,9],[199,15,124,15,"i"],[199,16,124,16],[199,20,124,20,"intermediates"],[199,33,124,33],[199,35,124,35],[200,6,125,8,"backend"],[200,13,125,15],[200,14,125,16,"disposeIntermediateTensorInfo"],[200,43,125,45],[200,44,125,46,"i"],[200,45,125,47],[200,46,125,48],[201,4,126,4],[202,4,127,4],[202,11,127,11,"outReshaped"],[202,22,127,22],[203,2,128,0],[204,0,128,1],[204,3]],"functionMap":{"names":["<global>","batchMatMulImpl","util.assert$argument_1"],"mappings":"AAA;OC2B;6CCa;mDDG;CDoF"},"hasCjsExports":false},"type":"js/module"}]}