{"dependencies":[{"name":"./util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":32,"index":735}}],"key":"1+hZBLc/k6i18AZJ4yHV73uDZHQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"Serializable\", {\n    enumerable: true,\n    get: function () {\n      return Serializable;\n    }\n  });\n  Object.defineProperty(exports, \"SerializationMap\", {\n    enumerable: true,\n    get: function () {\n      return SerializationMap;\n    }\n  });\n  exports.registerClass = registerClass;\n  exports.getRegisteredName = getRegisteredName;\n  var _util = require(_dependencyMap[0], \"./util\");\n  /**\n   * @license\n   * Copyright 2018 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  /**\n   * Maps to mapping between the custom object and its name.\n   *\n   * After registering a custom class, these two maps will add key-value pairs\n   * for the class object and the registered name.\n   *\n   * Therefore we can get the relative registered name by calling\n   * getRegisteredName() function.\n   *\n   * For example:\n   * GLOBAL_CUSTOM_OBJECT: {key=registeredName: value=corresponding\n   * CustomObjectClass}\n   *\n   * GLOBAL_CUSTOM_NAMES: {key=CustomObjectClass: value=corresponding\n   * registeredName}\n   *\n   */\n  const GLOBAL_CUSTOM_OBJECT = new Map();\n  const GLOBAL_CUSTOM_NAMES = new Map();\n  /**\n   * Serializable defines the serialization contract.\n   *\n   * TFJS requires serializable classes to return their className when asked\n   * to avoid issues with minification.\n   */\n  class Serializable {\n    /**\n     * Return the class name for this class to use in serialization contexts.\n     *\n     * Generally speaking this will be the same thing that constructor.name\n     * would have returned.  However, the class name needs to be robust\n     * against minification for serialization/deserialization to work properly.\n     *\n     * There's also places such as initializers.VarianceScaling, where\n     * implementation details between different languages led to different\n     * class hierarchies and a non-leaf node is used for serialization purposes.\n     */\n    getClassName() {\n      return this.constructor.className;\n    }\n    /**\n     * Creates an instance of T from a ConfigDict.\n     *\n     * This works for most descendants of serializable.  A few need to\n     * provide special handling.\n     * @param cls A Constructor for the class to instantiate.\n     * @param config The Configuration for the object.\n     */\n    /** @nocollapse */\n    static fromConfig(cls, config) {\n      return new cls(config);\n    }\n  }\n  /**\n   * Maps string keys to class constructors.\n   *\n   * Used during (de)serialization from the cross-language JSON format, which\n   * requires the class name in the serialization format matches the class\n   * names as used in Python, should it exist.\n   */\n  class SerializationMap {\n    constructor() {\n      this.classNameMap = {};\n    }\n    /**\n     * Returns the singleton instance of the map.\n     */\n    static getMap() {\n      if (SerializationMap.instance == null) {\n        SerializationMap.instance = new SerializationMap();\n      }\n      return SerializationMap.instance;\n    }\n    /**\n     * Registers the class as serializable.\n     */\n    static register(cls) {\n      SerializationMap.getMap().classNameMap[cls.className] = [cls, cls.fromConfig];\n    }\n  }\n  /**\n   * Register a class with the serialization map of TensorFlow.js.\n   *\n   * This is often used for registering custom Layers, so they can be\n   * serialized and deserialized.\n   *\n   * Example 1. Register the class without package name and specified name.\n   *\n   * ```js\n   * class MyCustomLayer extends tf.layers.Layer {\n   *   static className = 'MyCustomLayer';\n   *\n   *   constructor(config) {\n   *     super(config);\n   *   }\n   * }\n   * tf.serialization.registerClass(MyCustomLayer);\n   * console.log(tf.serialization.GLOBALCUSTOMOBJECT.get(\"Custom>MyCustomLayer\"));\n   * console.log(tf.serialization.GLOBALCUSTOMNAMES.get(MyCustomLayer));\n   * ```\n   *\n   * Example 2. Register the class with package name: \"Package\" and specified\n   * name: \"MyLayer\".\n   * ```js\n   * class MyCustomLayer extends tf.layers.Layer {\n   *   static className = 'MyCustomLayer';\n   *\n   *   constructor(config) {\n   *     super(config);\n   *   }\n   * }\n   * tf.serialization.registerClass(MyCustomLayer, \"Package\", \"MyLayer\");\n   * console.log(tf.serialization.GLOBALCUSTOMOBJECT.get(\"Package>MyLayer\"));\n   * console.log(tf.serialization.GLOBALCUSTOMNAMES.get(MyCustomLayer));\n   * ```\n   *\n   * Example 3. Register the class with specified name: \"MyLayer\".\n   * ```js\n   * class MyCustomLayer extends tf.layers.Layer {\n   *   static className = 'MyCustomLayer';\n   *\n   *   constructor(config) {\n   *     super(config);\n   *   }\n   * }\n   * tf.serialization.registerClass(MyCustomLayer, undefined, \"MyLayer\");\n   * console.log(tf.serialization.GLOBALCUSTOMOBJECT.get(\"Custom>MyLayer\"));\n   * console.log(tf.serialization.GLOBALCUSTOMNAMES.get(MyCustomLayer));\n   * ```\n   *\n   * Example 4. Register the class with specified package name: \"Package\".\n   * ```js\n   * class MyCustomLayer extends tf.layers.Layer {\n   *   static className = 'MyCustomLayer';\n   *\n   *   constructor(config) {\n   *     super(config);\n   *   }\n   * }\n   * tf.serialization.registerClass(MyCustomLayer, \"Package\");\n   * console.log(tf.serialization.GLOBALCUSTOMOBJECT\n   * .get(\"Package>MyCustomLayer\"));\n   * console.log(tf.serialization.GLOBALCUSTOMNAMES\n   * .get(MyCustomLayer));\n   * ```\n   *\n   * @param cls The class to be registered. It must have a public static member\n   *   called `className` defined and the value must be a non-empty string.\n   * @param pkg The package name that this class belongs to. This used to define\n   *     the key in GlobalCustomObject. If not defined, it defaults to `Custom`.\n   * @param name The name that user specified. It defaults to the actual name of\n   *     the class as specified by its static `className` property.\n   * @doc {heading: 'Models', subheading: 'Serialization', ignoreCI: true}\n   */\n  function registerClass(cls, pkg, name) {\n    (0, _util.assert)(cls.className != null, () => `Class being registered does not have the static className ` + `property defined.`);\n    (0, _util.assert)(typeof cls.className === 'string', () => `className is required to be a string, but got type ` + typeof cls.className);\n    (0, _util.assert)(cls.className.length > 0, () => `Class being registered has an empty-string as its className, ` + `which is disallowed.`);\n    if (typeof pkg === 'undefined') {\n      pkg = 'Custom';\n    }\n    if (typeof name === 'undefined') {\n      name = cls.className;\n    }\n    const className = name;\n    const registerName = pkg + '>' + className;\n    SerializationMap.register(cls);\n    GLOBAL_CUSTOM_OBJECT.set(registerName, cls);\n    GLOBAL_CUSTOM_NAMES.set(cls, registerName);\n    return cls;\n  }\n  /**\n   * Get the registered name of a class. If the class has not been registered,\n   * return the class name.\n   *\n   * @param cls The class we want to get register name for. It must have a public\n   *     static member called `className` defined.\n   * @returns registered name or class name.\n   */\n  function getRegisteredName(cls) {\n    if (GLOBAL_CUSTOM_NAMES.has(cls)) {\n      return GLOBAL_CUSTOM_NAMES.get(cls);\n    } else {\n      return cls.className;\n    }\n  }\n});","lineCount":225,"map":[[7,2,43,0,"Object"],[7,8,43,0],[7,9,43,0,"defineProperty"],[7,23,43,0],[7,24,43,0,"exports"],[7,31,43,0],[8,4,43,0,"enumerable"],[8,14,43,0],[9,4,43,0,"get"],[9,7,43,0],[9,18,43,0,"get"],[9,19,43,0],[10,6,43,0],[10,13,43,0,"Serializable"],[10,25,43,0],[11,4,43,0],[12,2,43,0],[13,2,79,0,"Object"],[13,8,79,0],[13,9,79,0,"defineProperty"],[13,23,79,0],[13,24,79,0,"exports"],[13,31,79,0],[14,4,79,0,"enumerable"],[14,14,79,0],[15,4,79,0,"get"],[15,7,79,0],[15,18,79,0,"get"],[15,19,79,0],[16,6,79,0],[16,13,79,0,"SerializationMap"],[16,29,79,0],[17,4,79,0],[18,2,79,0],[19,2,174,0,"exports"],[19,9,174,0],[19,10,174,0,"registerClass"],[19,23,174,0],[19,26,174,0,"registerClass"],[19,39,174,0],[20,2,202,0,"exports"],[20,9,202,0],[20,10,202,0,"getRegisteredName"],[20,27,202,0],[20,30,202,0,"getRegisteredName"],[20,47,202,0],[21,2,17,0],[21,6,17,0,"_util"],[21,11,17,0],[21,14,17,0,"require"],[21,21,17,0],[21,22,17,0,"_dependencyMap"],[21,36,17,0],[22,2,1,0],[23,0,2,0],[24,0,3,0],[25,0,4,0],[26,0,5,0],[27,0,6,0],[28,0,7,0],[29,0,8,0],[30,0,9,0],[31,0,10,0],[32,0,11,0],[33,0,12,0],[34,0,13,0],[35,0,14,0],[36,0,15,0],[37,0,16,0],[39,2,18,0],[40,0,19,0],[41,0,20,0],[42,0,21,0],[43,0,22,0],[44,0,23,0],[45,0,24,0],[46,0,25,0],[47,0,26,0],[48,0,27,0],[49,0,28,0],[50,0,29,0],[51,0,30,0],[52,0,31,0],[53,0,32,0],[54,0,33,0],[55,0,34,0],[56,2,35,0],[56,8,35,6,"GLOBAL_CUSTOM_OBJECT"],[56,28,35,26],[56,31,35,29],[56,35,35,33,"Map"],[56,38,35,36],[56,39,35,37],[56,40,35,38],[57,2,36,0],[57,8,36,6,"GLOBAL_CUSTOM_NAMES"],[57,27,36,25],[57,30,36,28],[57,34,36,32,"Map"],[57,37,36,35],[57,38,36,36],[57,39,36,37],[58,2,37,0],[59,0,38,0],[60,0,39,0],[61,0,40,0],[62,0,41,0],[63,0,42,0],[64,2,43,7],[64,8,43,13,"Serializable"],[64,20,43,25],[64,21,43,26],[65,4,44,4],[66,0,45,0],[67,0,46,0],[68,0,47,0],[69,0,48,0],[70,0,49,0],[71,0,50,0],[72,0,51,0],[73,0,52,0],[74,0,53,0],[75,0,54,0],[76,4,55,4,"getClassName"],[76,16,55,16,"getClassName"],[76,17,55,16],[76,19,55,19],[77,6,56,8],[77,13,56,15],[77,17,56,19],[77,18,56,20,"constructor"],[77,29,56,31],[77,30,57,13,"className"],[77,39,57,22],[78,4,58,4],[79,4,59,4],[80,0,60,0],[81,0,61,0],[82,0,62,0],[83,0,63,0],[84,0,64,0],[85,0,65,0],[86,0,66,0],[87,4,67,4],[88,4,68,4],[88,11,68,11,"fromConfig"],[88,21,68,21,"fromConfig"],[88,22,68,22,"cls"],[88,25,68,25],[88,27,68,27,"config"],[88,33,68,33],[88,35,68,35],[89,6,69,8],[89,13,69,15],[89,17,69,19,"cls"],[89,20,69,22],[89,21,69,23,"config"],[89,27,69,29],[89,28,69,30],[90,4,70,4],[91,2,71,0],[92,2,72,0],[93,0,73,0],[94,0,74,0],[95,0,75,0],[96,0,76,0],[97,0,77,0],[98,0,78,0],[99,2,79,7],[99,8,79,13,"SerializationMap"],[99,24,79,29],[99,25,79,30],[100,4,80,4,"constructor"],[100,15,80,15,"constructor"],[100,16,80,15],[100,18,80,18],[101,6,81,8],[101,10,81,12],[101,11,81,13,"classNameMap"],[101,23,81,25],[101,26,81,28],[101,27,81,29],[101,28,81,30],[102,4,82,4],[103,4,83,4],[104,0,84,0],[105,0,85,0],[106,4,86,4],[106,11,86,11,"getMap"],[106,17,86,17,"getMap"],[106,18,86,17],[106,20,86,20],[107,6,87,8],[107,10,87,12,"SerializationMap"],[107,26,87,28],[107,27,87,29,"instance"],[107,35,87,37],[107,39,87,41],[107,43,87,45],[107,45,87,47],[108,8,88,12,"SerializationMap"],[108,24,88,28],[108,25,88,29,"instance"],[108,33,88,37],[108,36,88,40],[108,40,88,44,"SerializationMap"],[108,56,88,60],[108,57,88,61],[108,58,88,62],[109,6,89,8],[110,6,90,8],[110,13,90,15,"SerializationMap"],[110,29,90,31],[110,30,90,32,"instance"],[110,38,90,40],[111,4,91,4],[112,4,92,4],[113,0,93,0],[114,0,94,0],[115,4,95,4],[115,11,95,11,"register"],[115,19,95,19,"register"],[115,20,95,20,"cls"],[115,23,95,23],[115,25,95,25],[116,6,96,8,"SerializationMap"],[116,22,96,24],[116,23,96,25,"getMap"],[116,29,96,31],[116,30,96,32],[116,31,96,33],[116,32,96,34,"classNameMap"],[116,44,96,46],[116,45,96,47,"cls"],[116,48,96,50],[116,49,96,51,"className"],[116,58,96,60],[116,59,96,61],[116,62,97,12],[116,63,97,13,"cls"],[116,66,97,16],[116,68,97,18,"cls"],[116,71,97,21],[116,72,97,22,"fromConfig"],[116,82,97,32],[116,83,97,33],[117,4,98,4],[118,2,99,0],[119,2,100,0],[120,0,101,0],[121,0,102,0],[122,0,103,0],[123,0,104,0],[124,0,105,0],[125,0,106,0],[126,0,107,0],[127,0,108,0],[128,0,109,0],[129,0,110,0],[130,0,111,0],[131,0,112,0],[132,0,113,0],[133,0,114,0],[134,0,115,0],[135,0,116,0],[136,0,117,0],[137,0,118,0],[138,0,119,0],[139,0,120,0],[140,0,121,0],[141,0,122,0],[142,0,123,0],[143,0,124,0],[144,0,125,0],[145,0,126,0],[146,0,127,0],[147,0,128,0],[148,0,129,0],[149,0,130,0],[150,0,131,0],[151,0,132,0],[152,0,133,0],[153,0,134,0],[154,0,135,0],[155,0,136,0],[156,0,137,0],[157,0,138,0],[158,0,139,0],[159,0,140,0],[160,0,141,0],[161,0,142,0],[162,0,143,0],[163,0,144,0],[164,0,145,0],[165,0,146,0],[166,0,147,0],[167,0,148,0],[168,0,149,0],[169,0,150,0],[170,0,151,0],[171,0,152,0],[172,0,153,0],[173,0,154,0],[174,0,155,0],[175,0,156,0],[176,0,157,0],[177,0,158,0],[178,0,159,0],[179,0,160,0],[180,0,161,0],[181,0,162,0],[182,0,163,0],[183,0,164,0],[184,0,165,0],[185,0,166,0],[186,0,167,0],[187,0,168,0],[188,0,169,0],[189,0,170,0],[190,0,171,0],[191,0,172,0],[192,0,173,0],[193,2,174,7],[193,11,174,16,"registerClass"],[193,24,174,29,"registerClass"],[193,25,174,30,"cls"],[193,28,174,33],[193,30,174,35,"pkg"],[193,33,174,38],[193,35,174,40,"name"],[193,39,174,44],[193,41,174,46],[194,4,175,4],[194,8,175,4,"assert"],[194,13,175,10],[194,14,175,10,"assert"],[194,20,175,10],[194,22,175,11,"cls"],[194,25,175,14],[194,26,175,15,"className"],[194,35,175,24],[194,39,175,28],[194,43,175,32],[194,45,175,34],[194,51,175,40],[194,111,175,100],[194,114,176,8],[194,133,176,27],[194,134,176,28],[195,4,177,4],[195,8,177,4,"assert"],[195,13,177,10],[195,14,177,10,"assert"],[195,20,177,10],[195,22,177,11],[195,29,177,18,"cls"],[195,32,177,21],[195,33,177,22,"className"],[195,42,177,31],[195,47,177,36],[195,55,177,44],[195,57,177,46],[195,63,177,52],[195,116,177,105],[195,119,178,8],[195,126,178,15,"cls"],[195,129,178,18],[195,130,178,19,"className"],[195,139,178,28],[195,140,178,29],[196,4,179,4],[196,8,179,4,"assert"],[196,13,179,10],[196,14,179,10,"assert"],[196,20,179,10],[196,22,179,11,"cls"],[196,25,179,14],[196,26,179,15,"className"],[196,35,179,24],[196,36,179,25,"length"],[196,42,179,31],[196,45,179,34],[196,46,179,35],[196,48,179,37],[196,54,179,43],[196,117,179,106],[196,120,180,8],[196,142,180,30],[196,143,180,31],[197,4,181,4],[197,8,181,8],[197,15,181,15,"pkg"],[197,18,181,18],[197,23,181,23],[197,34,181,34],[197,36,181,36],[198,6,182,8,"pkg"],[198,9,182,11],[198,12,182,14],[198,20,182,22],[199,4,183,4],[200,4,184,4],[200,8,184,8],[200,15,184,15,"name"],[200,19,184,19],[200,24,184,24],[200,35,184,35],[200,37,184,37],[201,6,185,8,"name"],[201,10,185,12],[201,13,185,15,"cls"],[201,16,185,18],[201,17,185,19,"className"],[201,26,185,28],[202,4,186,4],[203,4,187,4],[203,10,187,10,"className"],[203,19,187,19],[203,22,187,22,"name"],[203,26,187,26],[204,4,188,4],[204,10,188,10,"registerName"],[204,22,188,22],[204,25,188,25,"pkg"],[204,28,188,28],[204,31,188,31],[204,34,188,34],[204,37,188,37,"className"],[204,46,188,46],[205,4,189,4,"SerializationMap"],[205,20,189,20],[205,21,189,21,"register"],[205,29,189,29],[205,30,189,30,"cls"],[205,33,189,33],[205,34,189,34],[206,4,190,4,"GLOBAL_CUSTOM_OBJECT"],[206,24,190,24],[206,25,190,25,"set"],[206,28,190,28],[206,29,190,29,"registerName"],[206,41,190,41],[206,43,190,43,"cls"],[206,46,190,46],[206,47,190,47],[207,4,191,4,"GLOBAL_CUSTOM_NAMES"],[207,23,191,23],[207,24,191,24,"set"],[207,27,191,27],[207,28,191,28,"cls"],[207,31,191,31],[207,33,191,33,"registerName"],[207,45,191,45],[207,46,191,46],[208,4,192,4],[208,11,192,11,"cls"],[208,14,192,14],[209,2,193,0],[210,2,194,0],[211,0,195,0],[212,0,196,0],[213,0,197,0],[214,0,198,0],[215,0,199,0],[216,0,200,0],[217,0,201,0],[218,2,202,7],[218,11,202,16,"getRegisteredName"],[218,28,202,33,"getRegisteredName"],[218,29,202,34,"cls"],[218,32,202,37],[218,34,202,39],[219,4,203,4],[219,8,203,8,"GLOBAL_CUSTOM_NAMES"],[219,27,203,27],[219,28,203,28,"has"],[219,31,203,31],[219,32,203,32,"cls"],[219,35,203,35],[219,36,203,36],[219,38,203,38],[220,6,204,8],[220,13,204,15,"GLOBAL_CUSTOM_NAMES"],[220,32,204,34],[220,33,204,35,"get"],[220,36,204,38],[220,37,204,39,"cls"],[220,40,204,42],[220,41,204,43],[221,4,205,4],[221,5,205,5],[221,11,206,9],[222,6,207,8],[222,13,207,15,"cls"],[222,16,207,18],[222,17,207,19,"className"],[222,26,207,28],[223,4,208,4],[224,2,209,0],[225,0,209,1],[225,3]],"functionMap":{"names":["<global>","Serializable","Serializable#getClassName","Serializable.fromConfig","SerializationMap","SerializationMap#constructor","SerializationMap.getMap","SerializationMap.register","registerClass","assert$argument_1","getRegisteredName"],"mappings":"AAA;OC0C;ICY;KDG;IEU;KFE;CDC;OIQ;ICC;KDE;IEI;KFK;IGI;KHG;CJC;OQ2E;kCCC;2BDC;8CCC;4BDC;qCCC;8BDC;CRa;OUS;CVO"},"hasCjsExports":false},"type":"js/module"}]}