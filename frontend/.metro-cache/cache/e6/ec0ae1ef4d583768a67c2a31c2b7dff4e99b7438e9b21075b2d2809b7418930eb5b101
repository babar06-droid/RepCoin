{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":61,"index":764}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.scatterImpl = scatterImpl;\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  function scatterImpl(indices, updates, shape, outputSize, sliceSize, numUpdates, sliceRank, strides, defaultValue, sumDupeIndices) {\n    const flattenShape = [outputSize / sliceSize, sliceSize];\n    const indicesData = indices.values;\n    const updatesData = updates.values;\n    if (outputSize === 0) {\n      return (0, _tensorflowTfjsCore.buffer)(shape, updates.dtype);\n    }\n    const outBuf = defaultValue instanceof _tensorflowTfjsCore.TensorBuffer ? defaultValue : (0, _tensorflowTfjsCore.buffer)(flattenShape, updates.dtype);\n    if (typeof defaultValue === 'string') {\n      outBuf.values.fill(defaultValue);\n    } else if (typeof defaultValue === 'number') {\n      outBuf.values.fill(defaultValue);\n    } else if (typeof defaultValue === 'boolean') {\n      outBuf.values.fill(+defaultValue);\n    }\n    for (let i = 0; i < numUpdates; i++) {\n      const index = [];\n      let flattenIndex = 0;\n      for (let j = 0; j < sliceRank; j++) {\n        const dim = indicesData[i * sliceRank + j];\n        index.push(dim);\n        flattenIndex += dim * strides[j];\n      }\n      if (flattenIndex < 0 || flattenIndex >= outputSize / sliceSize) {\n        throw new Error(`Invalid indices: ${index} does not index into ${shape}`);\n      }\n      for (let k = 0; k < sliceSize; k++) {\n        if (sumDupeIndices) {\n          outBuf.values[flattenIndex * sliceSize + k] += updatesData[i * sliceSize + k];\n        } else {\n          outBuf.values[flattenIndex * sliceSize + k] = updates.rank === 0 ? updatesData[0] : updatesData[i * sliceSize + k];\n        }\n      }\n    }\n    return outBuf;\n  }\n});","lineCount":62,"map":[[7,2,18,0,"exports"],[7,9,18,0],[7,10,18,0,"scatterImpl"],[7,21,18,0],[7,24,18,0,"scatterImpl"],[7,35,18,0],[8,2,17,0],[8,6,17,0,"_tensorflowTfjsCore"],[8,25,17,0],[8,28,17,0,"require"],[8,35,17,0],[8,36,17,0,"_dependencyMap"],[8,50,17,0],[9,2,1,0],[10,0,2,0],[11,0,3,0],[12,0,4,0],[13,0,5,0],[14,0,6,0],[15,0,7,0],[16,0,8,0],[17,0,9,0],[18,0,10,0],[19,0,11,0],[20,0,12,0],[21,0,13,0],[22,0,14,0],[23,0,15,0],[24,0,16,0],[26,2,18,7],[26,11,18,16,"scatterImpl"],[26,22,18,27,"scatterImpl"],[26,23,18,28,"indices"],[26,30,18,35],[26,32,18,37,"updates"],[26,39,18,44],[26,41,18,46,"shape"],[26,46,18,51],[26,48,18,53,"outputSize"],[26,58,18,63],[26,60,18,65,"sliceSize"],[26,69,18,74],[26,71,18,76,"numUpdates"],[26,81,18,86],[26,83,18,88,"sliceRank"],[26,92,18,97],[26,94,18,99,"strides"],[26,101,18,106],[26,103,18,108,"defaultValue"],[26,115,18,120],[26,117,18,122,"sumDupeIndices"],[26,131,18,136],[26,133,18,138],[27,4,19,4],[27,10,19,10,"flattenShape"],[27,22,19,22],[27,25,19,25],[27,26,19,26,"outputSize"],[27,36,19,36],[27,39,19,39,"sliceSize"],[27,48,19,48],[27,50,19,50,"sliceSize"],[27,59,19,59],[27,60,19,60],[28,4,20,4],[28,10,20,10,"indicesData"],[28,21,20,21],[28,24,20,24,"indices"],[28,31,20,31],[28,32,20,32,"values"],[28,38,20,38],[29,4,21,4],[29,10,21,10,"updatesData"],[29,21,21,21],[29,24,21,24,"updates"],[29,31,21,31],[29,32,21,32,"values"],[29,38,21,38],[30,4,22,4],[30,8,22,8,"outputSize"],[30,18,22,18],[30,23,22,23],[30,24,22,24],[30,26,22,26],[31,6,23,8],[31,13,23,15],[31,17,23,15,"buffer"],[31,36,23,21],[31,37,23,21,"buffer"],[31,43,23,21],[31,45,23,22,"shape"],[31,50,23,27],[31,52,23,29,"updates"],[31,59,23,36],[31,60,23,37,"dtype"],[31,65,23,42],[31,66,23,43],[32,4,24,4],[33,4,25,4],[33,10,25,10,"outBuf"],[33,16,25,16],[33,19,25,20,"defaultValue"],[33,31,25,32],[33,43,25,44,"TensorBuffer"],[33,62,25,56],[33,63,25,56,"TensorBuffer"],[33,75,25,56],[33,78,26,8,"defaultValue"],[33,90,26,20],[33,93,27,8],[33,97,27,8,"buffer"],[33,116,27,14],[33,117,27,14,"buffer"],[33,123,27,14],[33,125,27,15,"flattenShape"],[33,137,27,27],[33,139,27,29,"updates"],[33,146,27,36],[33,147,27,37,"dtype"],[33,152,27,42],[33,153,27,43],[34,4,28,4],[34,8,28,8],[34,15,28,15,"defaultValue"],[34,27,28,27],[34,32,28,32],[34,40,28,40],[34,42,28,42],[35,6,29,8,"outBuf"],[35,12,29,14],[35,13,29,15,"values"],[35,19,29,21],[35,20,29,22,"fill"],[35,24,29,26],[35,25,29,27,"defaultValue"],[35,37,29,39],[35,38,29,40],[36,4,30,4],[36,5,30,5],[36,11,31,9],[36,15,31,13],[36,22,31,20,"defaultValue"],[36,34,31,32],[36,39,31,37],[36,47,31,45],[36,49,31,47],[37,6,32,8,"outBuf"],[37,12,32,14],[37,13,32,15,"values"],[37,19,32,21],[37,20,32,22,"fill"],[37,24,32,26],[37,25,32,27,"defaultValue"],[37,37,32,39],[37,38,32,40],[38,4,33,4],[38,5,33,5],[38,11,34,9],[38,15,34,13],[38,22,34,20,"defaultValue"],[38,34,34,32],[38,39,34,37],[38,48,34,46],[38,50,34,48],[39,6,35,8,"outBuf"],[39,12,35,14],[39,13,35,15,"values"],[39,19,35,21],[39,20,35,22,"fill"],[39,24,35,26],[39,25,35,27],[39,26,35,28,"defaultValue"],[39,38,35,40],[39,39,35,41],[40,4,36,4],[41,4,37,4],[41,9,37,9],[41,13,37,13,"i"],[41,14,37,14],[41,17,37,17],[41,18,37,18],[41,20,37,20,"i"],[41,21,37,21],[41,24,37,24,"numUpdates"],[41,34,37,34],[41,36,37,36,"i"],[41,37,37,37],[41,39,37,39],[41,41,37,41],[42,6,38,8],[42,12,38,14,"index"],[42,17,38,19],[42,20,38,22],[42,22,38,24],[43,6,39,8],[43,10,39,12,"flattenIndex"],[43,22,39,24],[43,25,39,27],[43,26,39,28],[44,6,40,8],[44,11,40,13],[44,15,40,17,"j"],[44,16,40,18],[44,19,40,21],[44,20,40,22],[44,22,40,24,"j"],[44,23,40,25],[44,26,40,28,"sliceRank"],[44,35,40,37],[44,37,40,39,"j"],[44,38,40,40],[44,40,40,42],[44,42,40,44],[45,8,41,12],[45,14,41,18,"dim"],[45,17,41,21],[45,20,41,24,"indicesData"],[45,31,41,35],[45,32,41,36,"i"],[45,33,41,37],[45,36,41,40,"sliceRank"],[45,45,41,49],[45,48,41,52,"j"],[45,49,41,53],[45,50,41,54],[46,8,42,12,"index"],[46,13,42,17],[46,14,42,18,"push"],[46,18,42,22],[46,19,42,23,"dim"],[46,22,42,26],[46,23,42,27],[47,8,43,12,"flattenIndex"],[47,20,43,24],[47,24,43,28,"dim"],[47,27,43,31],[47,30,43,34,"strides"],[47,37,43,41],[47,38,43,42,"j"],[47,39,43,43],[47,40,43,44],[48,6,44,8],[49,6,45,8],[49,10,45,12,"flattenIndex"],[49,22,45,24],[49,25,45,27],[49,26,45,28],[49,30,45,32,"flattenIndex"],[49,42,45,44],[49,46,45,48,"outputSize"],[49,56,45,58],[49,59,45,61,"sliceSize"],[49,68,45,70],[49,70,45,72],[50,8,46,12],[50,14,46,18],[50,18,46,22,"Error"],[50,23,46,27],[50,24,46,28],[50,44,46,48,"index"],[50,49,46,53],[50,73,46,77,"shape"],[50,78,46,82],[50,80,46,84],[50,81,46,85],[51,6,47,8],[52,6,48,8],[52,11,48,13],[52,15,48,17,"k"],[52,16,48,18],[52,19,48,21],[52,20,48,22],[52,22,48,24,"k"],[52,23,48,25],[52,26,48,28,"sliceSize"],[52,35,48,37],[52,37,48,39,"k"],[52,38,48,40],[52,40,48,42],[52,42,48,44],[53,8,49,12],[53,12,49,16,"sumDupeIndices"],[53,26,49,30],[53,28,49,32],[54,10,50,16,"outBuf"],[54,16,50,22],[54,17,50,23,"values"],[54,23,50,29],[54,24,50,30,"flattenIndex"],[54,36,50,42],[54,39,50,45,"sliceSize"],[54,48,50,54],[54,51,50,57,"k"],[54,52,50,58],[54,53,50,59],[54,57,51,20,"updatesData"],[54,68,51,31],[54,69,51,32,"i"],[54,70,51,33],[54,73,51,36,"sliceSize"],[54,82,51,45],[54,85,51,48,"k"],[54,86,51,49],[54,87,51,50],[55,8,52,12],[55,9,52,13],[55,15,53,17],[56,10,54,16,"outBuf"],[56,16,54,22],[56,17,54,23,"values"],[56,23,54,29],[56,24,54,30,"flattenIndex"],[56,36,54,42],[56,39,54,45,"sliceSize"],[56,48,54,54],[56,51,54,57,"k"],[56,52,54,58],[56,53,54,59],[56,56,54,62,"updates"],[56,63,54,69],[56,64,54,70,"rank"],[56,68,54,74],[56,73,54,79],[56,74,54,80],[56,77,55,20,"updatesData"],[56,88,55,31],[56,89,55,32],[56,90,55,33],[56,91,55,34],[56,94,56,20,"updatesData"],[56,105,56,31],[56,106,56,32,"i"],[56,107,56,33],[56,110,56,36,"sliceSize"],[56,119,56,45],[56,122,56,48,"k"],[56,123,56,49],[56,124,56,50],[57,8,57,12],[58,6,58,8],[59,4,59,4],[60,4,60,4],[60,11,60,11,"outBuf"],[60,17,60,17],[61,2,61,0],[62,0,61,1],[62,3]],"functionMap":{"names":["<global>","scatterImpl"],"mappings":"AAA;OCiB;CD2C"},"hasCjsExports":false},"type":"js/module"}]}