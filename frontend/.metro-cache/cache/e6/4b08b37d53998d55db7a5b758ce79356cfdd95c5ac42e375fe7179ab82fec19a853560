{"dependencies":[{"name":"@tensorflow/tfjs-core/dist/ops/ops_for_converter","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":753},"end":{"line":18,"column":74,"index":827}}],"key":"2I6FkuhD1B37IaeqPXQAZSdUm9o=","exportNames":["*"],"imports":1}},{"name":"./utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":828},"end":{"line":19,"column":40,"index":868}}],"key":"fIqjJ6Rx8c7Khc/wm9kX7hQXC5I=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"executeOp\", {\n    enumerable: true,\n    get: function () {\n      return executeOp;\n    }\n  });\n  Object.defineProperty(exports, \"CATEGORY\", {\n    enumerable: true,\n    get: function () {\n      return CATEGORY;\n    }\n  });\n  var _tensorflowTfjsCoreDistOpsOps_for_converter = require(_dependencyMap[0], \"@tensorflow/tfjs-core/dist/ops/ops_for_converter\");\n  var tfOps = _interopNamespace(_tensorflowTfjsCoreDistOpsOps_for_converter);\n  var _utils = require(_dependencyMap[1], \"./utils\");\n  /**\n   * @license\n   * Copyright 2018 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n  // tslint:disable-next-line: no-imports-from-dist\n\n  function nmsParams(node, tensorMap, context) {\n    const boxes = (0, _utils.getParamValue)('boxes', node, tensorMap, context);\n    const scores = (0, _utils.getParamValue)('scores', node, tensorMap, context);\n    const maxOutputSize = (0, _utils.getParamValue)('maxOutputSize', node, tensorMap, context);\n    const iouThreshold = (0, _utils.getParamValue)('iouThreshold', node, tensorMap, context);\n    const scoreThreshold = (0, _utils.getParamValue)('scoreThreshold', node, tensorMap, context);\n    const softNmsSigma = (0, _utils.getParamValue)('softNmsSigma', node, tensorMap, context);\n    return {\n      boxes,\n      scores,\n      maxOutputSize,\n      iouThreshold,\n      scoreThreshold,\n      softNmsSigma\n    };\n  }\n  const executeOp = async (node, tensorMap, context, resourceManager, ops = tfOps) => {\n    switch (node.op) {\n      case 'NonMaxSuppressionV5':\n        {\n          const {\n            boxes,\n            scores,\n            maxOutputSize,\n            iouThreshold,\n            scoreThreshold,\n            softNmsSigma\n          } = nmsParams(node, tensorMap, context);\n          const result = await ops.image.nonMaxSuppressionWithScoreAsync(boxes, scores, maxOutputSize, iouThreshold, scoreThreshold, softNmsSigma);\n          return [result.selectedIndices, result.selectedScores];\n        }\n      case 'NonMaxSuppressionV4':\n        {\n          const {\n            boxes,\n            scores,\n            maxOutputSize,\n            iouThreshold,\n            scoreThreshold\n          } = nmsParams(node, tensorMap, context);\n          const padToMaxOutputSize = (0, _utils.getParamValue)('padToMaxOutputSize', node, tensorMap, context);\n          const result = await ops.image.nonMaxSuppressionPaddedAsync(boxes, scores, maxOutputSize, iouThreshold, scoreThreshold, padToMaxOutputSize);\n          return [result.selectedIndices, result.validOutputs];\n        }\n      case 'NonMaxSuppressionV3':\n      case 'NonMaxSuppressionV2':\n        {\n          const {\n            boxes,\n            scores,\n            maxOutputSize,\n            iouThreshold,\n            scoreThreshold\n          } = nmsParams(node, tensorMap, context);\n          return [await ops.image.nonMaxSuppressionAsync(boxes, scores, maxOutputSize, iouThreshold, scoreThreshold)];\n        }\n      case 'Where':\n        {\n          const condition = ops.cast((0, _utils.getParamValue)('condition', node, tensorMap, context), 'bool');\n          const result = [await ops.whereAsync(condition)];\n          condition.dispose();\n          return result;\n        }\n      case 'ListDiff':\n        {\n          return ops.setdiff1dAsync((0, _utils.getParamValue)('x', node, tensorMap, context), (0, _utils.getParamValue)('y', node, tensorMap, context));\n        }\n      default:\n        throw TypeError(`Node type ${node.op} is not implemented`);\n    }\n  };\n  const CATEGORY = 'dynamic';\n});","lineCount":127,"map":[[22,2,36,0,"Object"],[22,8,36,0],[22,9,36,0,"defineProperty"],[22,23,36,0],[22,24,36,0,"exports"],[22,31,36,0],[23,4,36,0,"enumerable"],[23,14,36,0],[24,4,36,0,"get"],[24,7,36,0],[24,18,36,0,"get"],[24,19,36,0],[25,6,36,0],[25,13,36,0,"executeOp"],[25,22,36,0],[26,4,36,0],[27,2,36,0],[28,2,67,0,"Object"],[28,8,67,0],[28,9,67,0,"defineProperty"],[28,23,67,0],[28,24,67,0,"exports"],[28,31,67,0],[29,4,67,0,"enumerable"],[29,14,67,0],[30,4,67,0,"get"],[30,7,67,0],[30,18,67,0,"get"],[30,19,67,0],[31,6,67,0],[31,13,67,0,"CATEGORY"],[31,21,67,0],[32,4,67,0],[33,2,67,0],[34,2,18,0],[34,6,18,0,"_tensorflowTfjsCoreDistOpsOps_for_converter"],[34,49,18,0],[34,52,18,0,"require"],[34,59,18,0],[34,60,18,0,"_dependencyMap"],[34,74,18,0],[35,2,18,0],[35,6,18,0,"tfOps"],[35,11,18,0],[35,14,18,0,"_interopNamespace"],[35,31,18,0],[35,32,18,0,"_tensorflowTfjsCoreDistOpsOps_for_converter"],[35,75,18,0],[36,2,19,0],[36,6,19,0,"_utils"],[36,12,19,0],[36,15,19,0,"require"],[36,22,19,0],[36,23,19,0,"_dependencyMap"],[36,37,19,0],[37,2,1,0],[38,0,2,0],[39,0,3,0],[40,0,4,0],[41,0,5,0],[42,0,6,0],[43,0,7,0],[44,0,8,0],[45,0,9,0],[46,0,10,0],[47,0,11,0],[48,0,12,0],[49,0,13,0],[50,0,14,0],[51,0,15,0],[52,0,16,0],[53,2,17,0],[55,2,20,0],[55,11,20,9,"nmsParams"],[55,20,20,18,"nmsParams"],[55,21,20,19,"node"],[55,25,20,23],[55,27,20,25,"tensorMap"],[55,36,20,34],[55,38,20,36,"context"],[55,45,20,43],[55,47,20,45],[56,4,21,4],[56,10,21,10,"boxes"],[56,15,21,15],[56,18,21,18],[56,22,21,18,"getParamValue"],[56,28,21,31],[56,29,21,31,"getParamValue"],[56,42,21,31],[56,44,21,32],[56,51,21,39],[56,53,21,41,"node"],[56,57,21,45],[56,59,21,47,"tensorMap"],[56,68,21,56],[56,70,21,58,"context"],[56,77,21,65],[56,78,21,66],[57,4,22,4],[57,10,22,10,"scores"],[57,16,22,16],[57,19,22,19],[57,23,22,19,"getParamValue"],[57,29,22,32],[57,30,22,32,"getParamValue"],[57,43,22,32],[57,45,22,33],[57,53,22,41],[57,55,22,43,"node"],[57,59,22,47],[57,61,22,49,"tensorMap"],[57,70,22,58],[57,72,22,60,"context"],[57,79,22,67],[57,80,22,68],[58,4,23,4],[58,10,23,10,"maxOutputSize"],[58,23,23,23],[58,26,23,26],[58,30,23,26,"getParamValue"],[58,36,23,39],[58,37,23,39,"getParamValue"],[58,50,23,39],[58,52,23,40],[58,67,23,55],[58,69,23,57,"node"],[58,73,23,61],[58,75,23,63,"tensorMap"],[58,84,23,72],[58,86,23,74,"context"],[58,93,23,81],[58,94,23,82],[59,4,24,4],[59,10,24,10,"iouThreshold"],[59,22,24,22],[59,25,24,25],[59,29,24,25,"getParamValue"],[59,35,24,38],[59,36,24,38,"getParamValue"],[59,49,24,38],[59,51,24,39],[59,65,24,53],[59,67,24,55,"node"],[59,71,24,59],[59,73,24,61,"tensorMap"],[59,82,24,70],[59,84,24,72,"context"],[59,91,24,79],[59,92,24,80],[60,4,25,4],[60,10,25,10,"scoreThreshold"],[60,24,25,24],[60,27,25,27],[60,31,25,27,"getParamValue"],[60,37,25,40],[60,38,25,40,"getParamValue"],[60,51,25,40],[60,53,25,41],[60,69,25,57],[60,71,25,59,"node"],[60,75,25,63],[60,77,25,65,"tensorMap"],[60,86,25,74],[60,88,25,76,"context"],[60,95,25,83],[60,96,25,84],[61,4,26,4],[61,10,26,10,"softNmsSigma"],[61,22,26,22],[61,25,26,25],[61,29,26,25,"getParamValue"],[61,35,26,38],[61,36,26,38,"getParamValue"],[61,49,26,38],[61,51,26,39],[61,65,26,53],[61,67,26,55,"node"],[61,71,26,59],[61,73,26,61,"tensorMap"],[61,82,26,70],[61,84,26,72,"context"],[61,91,26,79],[61,92,26,80],[62,4,27,4],[62,11,27,11],[63,6,28,8,"boxes"],[63,11,28,13],[64,6,29,8,"scores"],[64,12,29,14],[65,6,30,8,"maxOutputSize"],[65,19,30,21],[66,6,31,8,"iouThreshold"],[66,18,31,20],[67,6,32,8,"scoreThreshold"],[67,20,32,22],[68,6,33,8,"softNmsSigma"],[69,4,34,4],[69,5,34,5],[70,2,35,0],[71,2,36,7],[71,8,36,13,"executeOp"],[71,17,36,22],[71,20,36,25],[71,26,36,25,"executeOp"],[71,27,36,32,"node"],[71,31,36,36],[71,33,36,38,"tensorMap"],[71,42,36,47],[71,44,36,49,"context"],[71,51,36,56],[71,53,36,58,"resourceManager"],[71,68,36,73],[71,70,36,75,"ops"],[71,73,36,78],[71,76,36,81,"tfOps"],[71,81,36,86],[71,86,36,91],[72,4,37,4],[72,12,37,12,"node"],[72,16,37,16],[72,17,37,17,"op"],[72,19,37,19],[73,6,38,8],[73,11,38,13],[73,32,38,34],[74,8,38,36],[75,10,39,12],[75,16,39,18],[76,12,39,20,"boxes"],[76,17,39,25],[77,12,39,27,"scores"],[77,18,39,33],[78,12,39,35,"maxOutputSize"],[78,25,39,48],[79,12,39,50,"iouThreshold"],[79,24,39,62],[80,12,39,64,"scoreThreshold"],[80,26,39,78],[81,12,39,80,"softNmsSigma"],[82,10,39,93],[82,11,39,94],[82,14,39,97,"nmsParams"],[82,23,39,106],[82,24,39,107,"node"],[82,28,39,111],[82,30,39,113,"tensorMap"],[82,39,39,122],[82,41,39,124,"context"],[82,48,39,131],[82,49,39,132],[83,10,40,12],[83,16,40,18,"result"],[83,22,40,24],[83,25,40,27],[83,31,40,33,"ops"],[83,34,40,36],[83,35,40,37,"image"],[83,40,40,42],[83,41,40,43,"nonMaxSuppressionWithScoreAsync"],[83,72,40,74],[83,73,40,75,"boxes"],[83,78,40,80],[83,80,40,82,"scores"],[83,86,40,88],[83,88,40,90,"maxOutputSize"],[83,101,40,103],[83,103,40,105,"iouThreshold"],[83,115,40,117],[83,117,40,119,"scoreThreshold"],[83,131,40,133],[83,133,40,135,"softNmsSigma"],[83,145,40,147],[83,146,40,148],[84,10,41,12],[84,17,41,19],[84,18,41,20,"result"],[84,24,41,26],[84,25,41,27,"selectedIndices"],[84,40,41,42],[84,42,41,44,"result"],[84,48,41,50],[84,49,41,51,"selectedScores"],[84,63,41,65],[84,64,41,66],[85,8,42,8],[86,6,43,8],[86,11,43,13],[86,32,43,34],[87,8,43,36],[88,10,44,12],[88,16,44,18],[89,12,44,20,"boxes"],[89,17,44,25],[90,12,44,27,"scores"],[90,18,44,33],[91,12,44,35,"maxOutputSize"],[91,25,44,48],[92,12,44,50,"iouThreshold"],[92,24,44,62],[93,12,44,64,"scoreThreshold"],[94,10,44,79],[94,11,44,80],[94,14,44,83,"nmsParams"],[94,23,44,92],[94,24,44,93,"node"],[94,28,44,97],[94,30,44,99,"tensorMap"],[94,39,44,108],[94,41,44,110,"context"],[94,48,44,117],[94,49,44,118],[95,10,45,12],[95,16,45,18,"padToMaxOutputSize"],[95,34,45,36],[95,37,45,39],[95,41,45,39,"getParamValue"],[95,47,45,52],[95,48,45,52,"getParamValue"],[95,61,45,52],[95,63,45,53],[95,83,45,73],[95,85,45,75,"node"],[95,89,45,79],[95,91,45,81,"tensorMap"],[95,100,45,90],[95,102,45,92,"context"],[95,109,45,99],[95,110,45,100],[96,10,46,12],[96,16,46,18,"result"],[96,22,46,24],[96,25,46,27],[96,31,46,33,"ops"],[96,34,46,36],[96,35,46,37,"image"],[96,40,46,42],[96,41,46,43,"nonMaxSuppressionPaddedAsync"],[96,69,46,71],[96,70,46,72,"boxes"],[96,75,46,77],[96,77,46,79,"scores"],[96,83,46,85],[96,85,46,87,"maxOutputSize"],[96,98,46,100],[96,100,46,102,"iouThreshold"],[96,112,46,114],[96,114,46,116,"scoreThreshold"],[96,128,46,130],[96,130,46,132,"padToMaxOutputSize"],[96,148,46,150],[96,149,46,151],[97,10,47,12],[97,17,47,19],[97,18,47,20,"result"],[97,24,47,26],[97,25,47,27,"selectedIndices"],[97,40,47,42],[97,42,47,44,"result"],[97,48,47,50],[97,49,47,51,"validOutputs"],[97,61,47,63],[97,62,47,64],[98,8,48,8],[99,6,49,8],[99,11,49,13],[99,32,49,34],[100,6,50,8],[100,11,50,13],[100,32,50,34],[101,8,50,36],[102,10,51,12],[102,16,51,18],[103,12,51,20,"boxes"],[103,17,51,25],[104,12,51,27,"scores"],[104,18,51,33],[105,12,51,35,"maxOutputSize"],[105,25,51,48],[106,12,51,50,"iouThreshold"],[106,24,51,62],[107,12,51,64,"scoreThreshold"],[108,10,51,79],[108,11,51,80],[108,14,51,83,"nmsParams"],[108,23,51,92],[108,24,51,93,"node"],[108,28,51,97],[108,30,51,99,"tensorMap"],[108,39,51,108],[108,41,51,110,"context"],[108,48,51,117],[108,49,51,118],[109,10,52,12],[109,17,52,19],[109,18,52,20],[109,24,52,26,"ops"],[109,27,52,29],[109,28,52,30,"image"],[109,33,52,35],[109,34,52,36,"nonMaxSuppressionAsync"],[109,56,52,58],[109,57,52,59,"boxes"],[109,62,52,64],[109,64,52,66,"scores"],[109,70,52,72],[109,72,52,74,"maxOutputSize"],[109,85,52,87],[109,87,52,89,"iouThreshold"],[109,99,52,101],[109,101,52,103,"scoreThreshold"],[109,115,52,117],[109,116,52,118],[109,117,52,119],[110,8,53,8],[111,6,54,8],[111,11,54,13],[111,18,54,20],[112,8,54,22],[113,10,55,12],[113,16,55,18,"condition"],[113,25,55,27],[113,28,55,30,"ops"],[113,31,55,33],[113,32,55,34,"cast"],[113,36,55,38],[113,37,55,39],[113,41,55,39,"getParamValue"],[113,47,55,52],[113,48,55,52,"getParamValue"],[113,61,55,52],[113,63,55,53],[113,74,55,64],[113,76,55,66,"node"],[113,80,55,70],[113,82,55,72,"tensorMap"],[113,91,55,81],[113,93,55,83,"context"],[113,100,55,90],[113,101,55,91],[113,103,55,93],[113,109,55,99],[113,110,55,100],[114,10,56,12],[114,16,56,18,"result"],[114,22,56,24],[114,25,56,27],[114,26,56,28],[114,32,56,34,"ops"],[114,35,56,37],[114,36,56,38,"whereAsync"],[114,46,56,48],[114,47,56,49,"condition"],[114,56,56,58],[114,57,56,59],[114,58,56,60],[115,10,57,12,"condition"],[115,19,57,21],[115,20,57,22,"dispose"],[115,27,57,29],[115,28,57,30],[115,29,57,31],[116,10,58,12],[116,17,58,19,"result"],[116,23,58,25],[117,8,59,8],[118,6,60,8],[118,11,60,13],[118,21,60,23],[119,8,60,25],[120,10,61,12],[120,17,61,19,"ops"],[120,20,61,22],[120,21,61,23,"setdiff1dAsync"],[120,35,61,37],[120,36,61,38],[120,40,61,38,"getParamValue"],[120,46,61,51],[120,47,61,51,"getParamValue"],[120,60,61,51],[120,62,61,52],[120,65,61,55],[120,67,61,57,"node"],[120,71,61,61],[120,73,61,63,"tensorMap"],[120,82,61,72],[120,84,61,74,"context"],[120,91,61,81],[120,92,61,82],[120,94,61,84],[120,98,61,84,"getParamValue"],[120,104,61,97],[120,105,61,97,"getParamValue"],[120,118,61,97],[120,120,61,98],[120,123,61,101],[120,125,61,103,"node"],[120,129,61,107],[120,131,61,109,"tensorMap"],[120,140,61,118],[120,142,61,120,"context"],[120,149,61,127],[120,150,61,128],[120,151,61,129],[121,8,62,8],[122,6,63,8],[123,8,64,12],[123,14,64,18,"TypeError"],[123,23,64,27],[123,24,64,28],[123,37,64,41,"node"],[123,41,64,45],[123,42,64,46,"op"],[123,44,64,48],[123,65,64,69],[123,66,64,70],[124,4,65,4],[125,2,66,0],[125,3,66,1],[126,2,67,7],[126,8,67,13,"CATEGORY"],[126,16,67,21],[126,19,67,24],[126,28,67,33],[127,0,67,34],[127,3]],"functionMap":{"names":["<global>","nmsParams","executeOp"],"mappings":"AAA;ACmB;CDe;yBEC;CF8B"},"hasCjsExports":false},"type":"js/module"}]}