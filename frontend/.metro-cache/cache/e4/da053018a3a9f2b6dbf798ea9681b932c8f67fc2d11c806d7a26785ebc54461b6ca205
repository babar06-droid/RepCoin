{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":47,"index":750}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.gatherNdImpl = gatherNdImpl;\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  /**\n   * @license\n   * Copyright 2021 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  function gatherNdImpl(indicesData, paramsBuf, dtype, numSlices, sliceRank, sliceSize, strides, paramsShape, paramsSize) {\n    const outBuf = (0, _tensorflowTfjsCore.buffer)([numSlices, sliceSize], dtype);\n    for (let i = 0; i < numSlices; i++) {\n      const index = [];\n      let flattenIndex = 0;\n      for (let j = 0; j < sliceRank; j++) {\n        const dim = indicesData[i * sliceRank + j];\n        flattenIndex += dim * strides[j];\n        index.push(dim);\n      }\n      if (flattenIndex < 0 || flattenIndex >= paramsSize / sliceSize) {\n        throw new Error(`Invalid indices: ${index} does not index into ${paramsShape}`);\n      }\n      for (let k = 0; k < sliceSize; k++) {\n        outBuf.values[i * sliceSize + k] = paramsBuf.get(...paramsBuf.indexToLoc(flattenIndex * sliceSize + k));\n      }\n    }\n    return outBuf;\n  }\n});","lineCount":45,"map":[[7,2,18,0,"exports"],[7,9,18,0],[7,10,18,0,"gatherNdImpl"],[7,22,18,0],[7,25,18,0,"gatherNdImpl"],[7,37,18,0],[8,2,17,0],[8,6,17,0,"_tensorflowTfjsCore"],[8,25,17,0],[8,28,17,0,"require"],[8,35,17,0],[8,36,17,0,"_dependencyMap"],[8,50,17,0],[9,2,1,0],[10,0,2,0],[11,0,3,0],[12,0,4,0],[13,0,5,0],[14,0,6,0],[15,0,7,0],[16,0,8,0],[17,0,9,0],[18,0,10,0],[19,0,11,0],[20,0,12,0],[21,0,13,0],[22,0,14,0],[23,0,15,0],[24,0,16,0],[26,2,18,7],[26,11,18,16,"gatherNdImpl"],[26,23,18,28,"gatherNdImpl"],[26,24,18,29,"indicesData"],[26,35,18,40],[26,37,18,42,"paramsBuf"],[26,46,18,51],[26,48,18,53,"dtype"],[26,53,18,58],[26,55,18,60,"numSlices"],[26,64,18,69],[26,66,18,71,"sliceRank"],[26,75,18,80],[26,77,18,82,"sliceSize"],[26,86,18,91],[26,88,18,93,"strides"],[26,95,18,100],[26,97,18,102,"paramsShape"],[26,108,18,113],[26,110,18,115,"paramsSize"],[26,120,18,125],[26,122,18,127],[27,4,19,4],[27,10,19,10,"outBuf"],[27,16,19,16],[27,19,19,19],[27,23,19,19,"buffer"],[27,42,19,25],[27,43,19,25,"buffer"],[27,49,19,25],[27,51,19,26],[27,52,19,27,"numSlices"],[27,61,19,36],[27,63,19,38,"sliceSize"],[27,72,19,47],[27,73,19,48],[27,75,19,50,"dtype"],[27,80,19,55],[27,81,19,56],[28,4,20,4],[28,9,20,9],[28,13,20,13,"i"],[28,14,20,14],[28,17,20,17],[28,18,20,18],[28,20,20,20,"i"],[28,21,20,21],[28,24,20,24,"numSlices"],[28,33,20,33],[28,35,20,35,"i"],[28,36,20,36],[28,38,20,38],[28,40,20,40],[29,6,21,8],[29,12,21,14,"index"],[29,17,21,19],[29,20,21,22],[29,22,21,24],[30,6,22,8],[30,10,22,12,"flattenIndex"],[30,22,22,24],[30,25,22,27],[30,26,22,28],[31,6,23,8],[31,11,23,13],[31,15,23,17,"j"],[31,16,23,18],[31,19,23,21],[31,20,23,22],[31,22,23,24,"j"],[31,23,23,25],[31,26,23,28,"sliceRank"],[31,35,23,37],[31,37,23,39,"j"],[31,38,23,40],[31,40,23,42],[31,42,23,44],[32,8,24,12],[32,14,24,18,"dim"],[32,17,24,21],[32,20,24,24,"indicesData"],[32,31,24,35],[32,32,24,36,"i"],[32,33,24,37],[32,36,24,40,"sliceRank"],[32,45,24,49],[32,48,24,52,"j"],[32,49,24,53],[32,50,24,54],[33,8,25,12,"flattenIndex"],[33,20,25,24],[33,24,25,28,"dim"],[33,27,25,31],[33,30,25,34,"strides"],[33,37,25,41],[33,38,25,42,"j"],[33,39,25,43],[33,40,25,44],[34,8,26,12,"index"],[34,13,26,17],[34,14,26,18,"push"],[34,18,26,22],[34,19,26,23,"dim"],[34,22,26,26],[34,23,26,27],[35,6,27,8],[36,6,28,8],[36,10,28,12,"flattenIndex"],[36,22,28,24],[36,25,28,27],[36,26,28,28],[36,30,28,32,"flattenIndex"],[36,42,28,44],[36,46,28,48,"paramsSize"],[36,56,28,58],[36,59,28,61,"sliceSize"],[36,68,28,70],[36,70,28,72],[37,8,29,12],[37,14,29,18],[37,18,29,22,"Error"],[37,23,29,27],[37,24,29,28],[37,44,29,48,"index"],[37,49,29,53],[37,73,29,77,"paramsShape"],[37,84,29,88],[37,86,29,90],[37,87,29,91],[38,6,30,8],[39,6,31,8],[39,11,31,13],[39,15,31,17,"k"],[39,16,31,18],[39,19,31,21],[39,20,31,22],[39,22,31,24,"k"],[39,23,31,25],[39,26,31,28,"sliceSize"],[39,35,31,37],[39,37,31,39,"k"],[39,38,31,40],[39,40,31,42],[39,42,31,44],[40,8,32,12,"outBuf"],[40,14,32,18],[40,15,32,19,"values"],[40,21,32,25],[40,22,32,26,"i"],[40,23,32,27],[40,26,32,30,"sliceSize"],[40,35,32,39],[40,38,32,42,"k"],[40,39,32,43],[40,40,32,44],[40,43,33,16,"paramsBuf"],[40,52,33,25],[40,53,33,26,"get"],[40,56,33,29],[40,57,33,30],[40,60,33,33,"paramsBuf"],[40,69,33,42],[40,70,33,43,"indexToLoc"],[40,80,33,53],[40,81,33,54,"flattenIndex"],[40,93,33,66],[40,96,33,69,"sliceSize"],[40,105,33,78],[40,108,33,81,"k"],[40,109,33,82],[40,110,33,83],[40,111,33,84],[41,6,34,8],[42,4,35,4],[43,4,36,4],[43,11,36,11,"outBuf"],[43,17,36,17],[44,2,37,0],[45,0,37,1],[45,3]],"functionMap":{"names":["<global>","gatherNdImpl"],"mappings":"AAA;OCiB;CDmB"},"hasCjsExports":false},"type":"js/module"}]}