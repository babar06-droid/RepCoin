{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"RingBuffer\", {\n    enumerable: true,\n    get: function () {\n      return RingBuffer;\n    }\n  });\n  /**\n   * @license\n   * Copyright 2018 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   *\n   * =============================================================================\n   */\n  /**\n   * A ring buffer, providing O(1) FIFO, LIFO, and related operations.\n   */\n  class RingBuffer {\n    /**\n     * Constructs a `RingBuffer`.\n     * @param capacity The number of items that the buffer can accomodate.\n     */\n    constructor(capacity) {\n      this.capacity = capacity;\n      // Note we store the indices in the range 0 <= index < 2*capacity.\n      // This allows us to distinguish the full from the empty case.\n      // See https://www.snellman.net/blog/archive/2016-12-13-ring-buffers/\n      this.begin = 0; // inclusive\n      this.end = 0; // exclusive\n      if (capacity == null) {\n        throw new RangeError('Can\\'t create a ring buffer of unknown capacity.');\n      }\n      if (capacity < 1) {\n        throw new RangeError('Can\\'t create ring buffer of capacity < 1.');\n      }\n      this.data = new Array(capacity);\n      this.doubledCapacity = 2 * capacity;\n    }\n    /**\n     * Map any index into the range 0 <= index < 2*capacity.\n     */\n    wrap(index) {\n      // don't trust % on negative numbers\n      while (index < 0) {\n        index += this.doubledCapacity;\n      }\n      return index % this.doubledCapacity;\n    }\n    get(index) {\n      if (index < 0) {\n        throw new RangeError('Can\\'t get item at a negative index.');\n      }\n      return this.data[index % this.capacity];\n    }\n    set(index, value) {\n      if (index < 0) {\n        throw new RangeError('Can\\'t set item at a negative index.');\n      }\n      this.data[index % this.capacity] = value;\n    }\n    /**\n     * Returns the current number of items in the buffer.\n     */\n    length() {\n      let length = this.end - this.begin;\n      if (length < 0) {\n        length = this.doubledCapacity + length;\n      }\n      return length;\n    }\n    /**\n     * Reports whether the buffer is full.\n     * @returns true if the number of items in the buffer equals its capacity, and\n     *   false otherwise.\n     */\n    isFull() {\n      return this.length() === this.capacity;\n    }\n    /**\n     * Reports whether the buffer is empty.\n     * @returns true if the number of items in the buffer equals zero, and\n     *   false otherwise.\n     */\n    isEmpty() {\n      return this.length() === 0;\n    }\n    /**\n     * Adds an item to the end of the buffer.\n     */\n    push(value) {\n      if (this.isFull()) {\n        throw new RangeError('Ring buffer is full.');\n      }\n      this.set(this.end, value);\n      this.end = this.wrap(this.end + 1);\n    }\n    /**\n     * Adds many items to the end of the buffer, in order.\n     */\n    pushAll(values) {\n      for (const value of values) {\n        this.push(value);\n      }\n    }\n    /**\n     * Removes and returns the last item in the buffer.\n     */\n    pop() {\n      if (this.isEmpty()) {\n        throw new RangeError('Ring buffer is empty.');\n      }\n      this.end = this.wrap(this.end - 1);\n      const result = this.get(this.end);\n      this.set(this.end, undefined);\n      return result;\n    }\n    /**\n     * Adds an item to the beginning of the buffer.\n     */\n    unshift(value) {\n      if (this.isFull()) {\n        throw new RangeError('Ring buffer is full.');\n      }\n      this.begin = this.wrap(this.begin - 1);\n      this.set(this.begin, value);\n    }\n    /**\n     * Removes and returns the first item in the buffer.\n     */\n    shift() {\n      if (this.isEmpty()) {\n        throw new RangeError('Ring buffer is empty.');\n      }\n      const result = this.get(this.begin);\n      this.set(this.begin, undefined);\n      this.begin = this.wrap(this.begin + 1);\n      return result;\n    }\n    /**\n     * Removes and returns a specific item in the buffer, and moves the last item\n     * to the vacated slot.  This is useful for implementing a shuffling stream.\n     * Note that this operation necessarily scrambles the original order.\n     *\n     * @param relativeIndex: the index of the item to remove, relative to the\n     *   first item in the buffer (e.g., hiding the ring nature of the underlying\n     *   storage).\n     */\n    shuffleExcise(relativeIndex) {\n      if (this.isEmpty()) {\n        throw new RangeError('Ring buffer is empty.');\n      }\n      const index = this.wrap(this.begin + relativeIndex);\n      const result = this.get(index);\n      this.set(index, this.pop());\n      return result;\n    }\n  }\n});","lineCount":173,"map":[[7,2,21,0,"Object"],[7,8,21,0],[7,9,21,0,"defineProperty"],[7,23,21,0],[7,24,21,0,"exports"],[7,31,21,0],[8,4,21,0,"enumerable"],[8,14,21,0],[9,4,21,0,"get"],[9,7,21,0],[9,18,21,0,"get"],[9,19,21,0],[10,6,21,0],[10,13,21,0,"RingBuffer"],[10,23,21,0],[11,4,21,0],[12,2,21,0],[13,2,1,0],[14,0,2,0],[15,0,3,0],[16,0,4,0],[17,0,5,0],[18,0,6,0],[19,0,7,0],[20,0,8,0],[21,0,9,0],[22,0,10,0],[23,0,11,0],[24,0,12,0],[25,0,13,0],[26,0,14,0],[27,0,15,0],[28,0,16,0],[29,0,17,0],[30,2,18,0],[31,0,19,0],[32,0,20,0],[33,2,21,7],[33,8,21,13,"RingBuffer"],[33,18,21,23],[33,19,21,24],[34,4,22,4],[35,0,23,0],[36,0,24,0],[37,0,25,0],[38,4,26,4,"constructor"],[38,15,26,15,"constructor"],[38,16,26,16,"capacity"],[38,24,26,24],[38,26,26,26],[39,6,27,8],[39,10,27,12],[39,11,27,13,"capacity"],[39,19,27,21],[39,22,27,24,"capacity"],[39,30,27,32],[40,6,28,8],[41,6,29,8],[42,6,30,8],[43,6,31,8],[43,10,31,12],[43,11,31,13,"begin"],[43,16,31,18],[43,19,31,21],[43,20,31,22],[43,21,31,23],[43,22,31,24],[44,6,32,8],[44,10,32,12],[44,11,32,13,"end"],[44,14,32,16],[44,17,32,19],[44,18,32,20],[44,19,32,21],[44,20,32,22],[45,6,33,8],[45,10,33,12,"capacity"],[45,18,33,20],[45,22,33,24],[45,26,33,28],[45,28,33,30],[46,8,34,12],[46,14,34,18],[46,18,34,22,"RangeError"],[46,28,34,32],[46,29,34,33],[46,79,34,83],[46,80,34,84],[47,6,35,8],[48,6,36,8],[48,10,36,12,"capacity"],[48,18,36,20],[48,21,36,23],[48,22,36,24],[48,24,36,26],[49,8,37,12],[49,14,37,18],[49,18,37,22,"RangeError"],[49,28,37,32],[49,29,37,33],[49,73,37,77],[49,74,37,78],[50,6,38,8],[51,6,39,8],[51,10,39,12],[51,11,39,13,"data"],[51,15,39,17],[51,18,39,20],[51,22,39,24,"Array"],[51,27,39,29],[51,28,39,30,"capacity"],[51,36,39,38],[51,37,39,39],[52,6,40,8],[52,10,40,12],[52,11,40,13,"doubledCapacity"],[52,26,40,28],[52,29,40,31],[52,30,40,32],[52,33,40,35,"capacity"],[52,41,40,43],[53,4,41,4],[54,4,42,4],[55,0,43,0],[56,0,44,0],[57,4,45,4,"wrap"],[57,8,45,8,"wrap"],[57,9,45,9,"index"],[57,14,45,14],[57,16,45,16],[58,6,46,8],[59,6,47,8],[59,13,47,15,"index"],[59,18,47,20],[59,21,47,23],[59,22,47,24],[59,24,47,26],[60,8,48,12,"index"],[60,13,48,17],[60,17,48,21],[60,21,48,25],[60,22,48,26,"doubledCapacity"],[60,37,48,41],[61,6,49,8],[62,6,50,8],[62,13,50,15,"index"],[62,18,50,20],[62,21,50,23],[62,25,50,27],[62,26,50,28,"doubledCapacity"],[62,41,50,43],[63,4,51,4],[64,4,52,4,"get"],[64,7,52,7,"get"],[64,8,52,8,"index"],[64,13,52,13],[64,15,52,15],[65,6,53,8],[65,10,53,12,"index"],[65,15,53,17],[65,18,53,20],[65,19,53,21],[65,21,53,23],[66,8,54,12],[66,14,54,18],[66,18,54,22,"RangeError"],[66,28,54,32],[66,29,54,33],[66,67,54,71],[66,68,54,72],[67,6,55,8],[68,6,56,8],[68,13,56,15],[68,17,56,19],[68,18,56,20,"data"],[68,22,56,24],[68,23,56,25,"index"],[68,28,56,30],[68,31,56,33],[68,35,56,37],[68,36,56,38,"capacity"],[68,44,56,46],[68,45,56,47],[69,4,57,4],[70,4,58,4,"set"],[70,7,58,7,"set"],[70,8,58,8,"index"],[70,13,58,13],[70,15,58,15,"value"],[70,20,58,20],[70,22,58,22],[71,6,59,8],[71,10,59,12,"index"],[71,15,59,17],[71,18,59,20],[71,19,59,21],[71,21,59,23],[72,8,60,12],[72,14,60,18],[72,18,60,22,"RangeError"],[72,28,60,32],[72,29,60,33],[72,67,60,71],[72,68,60,72],[73,6,61,8],[74,6,62,8],[74,10,62,12],[74,11,62,13,"data"],[74,15,62,17],[74,16,62,18,"index"],[74,21,62,23],[74,24,62,26],[74,28,62,30],[74,29,62,31,"capacity"],[74,37,62,39],[74,38,62,40],[74,41,62,43,"value"],[74,46,62,48],[75,4,63,4],[76,4,64,4],[77,0,65,0],[78,0,66,0],[79,4,67,4,"length"],[79,10,67,10,"length"],[79,11,67,10],[79,13,67,13],[80,6,68,8],[80,10,68,12,"length"],[80,16,68,18],[80,19,68,21],[80,23,68,25],[80,24,68,26,"end"],[80,27,68,29],[80,30,68,32],[80,34,68,36],[80,35,68,37,"begin"],[80,40,68,42],[81,6,69,8],[81,10,69,12,"length"],[81,16,69,18],[81,19,69,21],[81,20,69,22],[81,22,69,24],[82,8,70,12,"length"],[82,14,70,18],[82,17,70,21],[82,21,70,25],[82,22,70,26,"doubledCapacity"],[82,37,70,41],[82,40,70,44,"length"],[82,46,70,50],[83,6,71,8],[84,6,72,8],[84,13,72,15,"length"],[84,19,72,21],[85,4,73,4],[86,4,74,4],[87,0,75,0],[88,0,76,0],[89,0,77,0],[90,0,78,0],[91,4,79,4,"isFull"],[91,10,79,10,"isFull"],[91,11,79,10],[91,13,79,13],[92,6,80,8],[92,13,80,15],[92,17,80,19],[92,18,80,20,"length"],[92,24,80,26],[92,25,80,27],[92,26,80,28],[92,31,80,33],[92,35,80,37],[92,36,80,38,"capacity"],[92,44,80,46],[93,4,81,4],[94,4,82,4],[95,0,83,0],[96,0,84,0],[97,0,85,0],[98,0,86,0],[99,4,87,4,"isEmpty"],[99,11,87,11,"isEmpty"],[99,12,87,11],[99,14,87,14],[100,6,88,8],[100,13,88,15],[100,17,88,19],[100,18,88,20,"length"],[100,24,88,26],[100,25,88,27],[100,26,88,28],[100,31,88,33],[100,32,88,34],[101,4,89,4],[102,4,90,4],[103,0,91,0],[104,0,92,0],[105,4,93,4,"push"],[105,8,93,8,"push"],[105,9,93,9,"value"],[105,14,93,14],[105,16,93,16],[106,6,94,8],[106,10,94,12],[106,14,94,16],[106,15,94,17,"isFull"],[106,21,94,23],[106,22,94,24],[106,23,94,25],[106,25,94,27],[107,8,95,12],[107,14,95,18],[107,18,95,22,"RangeError"],[107,28,95,32],[107,29,95,33],[107,51,95,55],[107,52,95,56],[108,6,96,8],[109,6,97,8],[109,10,97,12],[109,11,97,13,"set"],[109,14,97,16],[109,15,97,17],[109,19,97,21],[109,20,97,22,"end"],[109,23,97,25],[109,25,97,27,"value"],[109,30,97,32],[109,31,97,33],[110,6,98,8],[110,10,98,12],[110,11,98,13,"end"],[110,14,98,16],[110,17,98,19],[110,21,98,23],[110,22,98,24,"wrap"],[110,26,98,28],[110,27,98,29],[110,31,98,33],[110,32,98,34,"end"],[110,35,98,37],[110,38,98,40],[110,39,98,41],[110,40,98,42],[111,4,99,4],[112,4,100,4],[113,0,101,0],[114,0,102,0],[115,4,103,4,"pushAll"],[115,11,103,11,"pushAll"],[115,12,103,12,"values"],[115,18,103,18],[115,20,103,20],[116,6,104,8],[116,11,104,13],[116,17,104,19,"value"],[116,22,104,24],[116,26,104,28,"values"],[116,32,104,34],[116,34,104,36],[117,8,105,12],[117,12,105,16],[117,13,105,17,"push"],[117,17,105,21],[117,18,105,22,"value"],[117,23,105,27],[117,24,105,28],[118,6,106,8],[119,4,107,4],[120,4,108,4],[121,0,109,0],[122,0,110,0],[123,4,111,4,"pop"],[123,7,111,7,"pop"],[123,8,111,7],[123,10,111,10],[124,6,112,8],[124,10,112,12],[124,14,112,16],[124,15,112,17,"isEmpty"],[124,22,112,24],[124,23,112,25],[124,24,112,26],[124,26,112,28],[125,8,113,12],[125,14,113,18],[125,18,113,22,"RangeError"],[125,28,113,32],[125,29,113,33],[125,52,113,56],[125,53,113,57],[126,6,114,8],[127,6,115,8],[127,10,115,12],[127,11,115,13,"end"],[127,14,115,16],[127,17,115,19],[127,21,115,23],[127,22,115,24,"wrap"],[127,26,115,28],[127,27,115,29],[127,31,115,33],[127,32,115,34,"end"],[127,35,115,37],[127,38,115,40],[127,39,115,41],[127,40,115,42],[128,6,116,8],[128,12,116,14,"result"],[128,18,116,20],[128,21,116,23],[128,25,116,27],[128,26,116,28,"get"],[128,29,116,31],[128,30,116,32],[128,34,116,36],[128,35,116,37,"end"],[128,38,116,40],[128,39,116,41],[129,6,117,8],[129,10,117,12],[129,11,117,13,"set"],[129,14,117,16],[129,15,117,17],[129,19,117,21],[129,20,117,22,"end"],[129,23,117,25],[129,25,117,27,"undefined"],[129,34,117,36],[129,35,117,37],[130,6,118,8],[130,13,118,15,"result"],[130,19,118,21],[131,4,119,4],[132,4,120,4],[133,0,121,0],[134,0,122,0],[135,4,123,4,"unshift"],[135,11,123,11,"unshift"],[135,12,123,12,"value"],[135,17,123,17],[135,19,123,19],[136,6,124,8],[136,10,124,12],[136,14,124,16],[136,15,124,17,"isFull"],[136,21,124,23],[136,22,124,24],[136,23,124,25],[136,25,124,27],[137,8,125,12],[137,14,125,18],[137,18,125,22,"RangeError"],[137,28,125,32],[137,29,125,33],[137,51,125,55],[137,52,125,56],[138,6,126,8],[139,6,127,8],[139,10,127,12],[139,11,127,13,"begin"],[139,16,127,18],[139,19,127,21],[139,23,127,25],[139,24,127,26,"wrap"],[139,28,127,30],[139,29,127,31],[139,33,127,35],[139,34,127,36,"begin"],[139,39,127,41],[139,42,127,44],[139,43,127,45],[139,44,127,46],[140,6,128,8],[140,10,128,12],[140,11,128,13,"set"],[140,14,128,16],[140,15,128,17],[140,19,128,21],[140,20,128,22,"begin"],[140,25,128,27],[140,27,128,29,"value"],[140,32,128,34],[140,33,128,35],[141,4,129,4],[142,4,130,4],[143,0,131,0],[144,0,132,0],[145,4,133,4,"shift"],[145,9,133,9,"shift"],[145,10,133,9],[145,12,133,12],[146,6,134,8],[146,10,134,12],[146,14,134,16],[146,15,134,17,"isEmpty"],[146,22,134,24],[146,23,134,25],[146,24,134,26],[146,26,134,28],[147,8,135,12],[147,14,135,18],[147,18,135,22,"RangeError"],[147,28,135,32],[147,29,135,33],[147,52,135,56],[147,53,135,57],[148,6,136,8],[149,6,137,8],[149,12,137,14,"result"],[149,18,137,20],[149,21,137,23],[149,25,137,27],[149,26,137,28,"get"],[149,29,137,31],[149,30,137,32],[149,34,137,36],[149,35,137,37,"begin"],[149,40,137,42],[149,41,137,43],[150,6,138,8],[150,10,138,12],[150,11,138,13,"set"],[150,14,138,16],[150,15,138,17],[150,19,138,21],[150,20,138,22,"begin"],[150,25,138,27],[150,27,138,29,"undefined"],[150,36,138,38],[150,37,138,39],[151,6,139,8],[151,10,139,12],[151,11,139,13,"begin"],[151,16,139,18],[151,19,139,21],[151,23,139,25],[151,24,139,26,"wrap"],[151,28,139,30],[151,29,139,31],[151,33,139,35],[151,34,139,36,"begin"],[151,39,139,41],[151,42,139,44],[151,43,139,45],[151,44,139,46],[152,6,140,8],[152,13,140,15,"result"],[152,19,140,21],[153,4,141,4],[154,4,142,4],[155,0,143,0],[156,0,144,0],[157,0,145,0],[158,0,146,0],[159,0,147,0],[160,0,148,0],[161,0,149,0],[162,0,150,0],[163,4,151,4,"shuffleExcise"],[163,17,151,17,"shuffleExcise"],[163,18,151,18,"relativeIndex"],[163,31,151,31],[163,33,151,33],[164,6,152,8],[164,10,152,12],[164,14,152,16],[164,15,152,17,"isEmpty"],[164,22,152,24],[164,23,152,25],[164,24,152,26],[164,26,152,28],[165,8,153,12],[165,14,153,18],[165,18,153,22,"RangeError"],[165,28,153,32],[165,29,153,33],[165,52,153,56],[165,53,153,57],[166,6,154,8],[167,6,155,8],[167,12,155,14,"index"],[167,17,155,19],[167,20,155,22],[167,24,155,26],[167,25,155,27,"wrap"],[167,29,155,31],[167,30,155,32],[167,34,155,36],[167,35,155,37,"begin"],[167,40,155,42],[167,43,155,45,"relativeIndex"],[167,56,155,58],[167,57,155,59],[168,6,156,8],[168,12,156,14,"result"],[168,18,156,20],[168,21,156,23],[168,25,156,27],[168,26,156,28,"get"],[168,29,156,31],[168,30,156,32,"index"],[168,35,156,37],[168,36,156,38],[169,6,157,8],[169,10,157,12],[169,11,157,13,"set"],[169,14,157,16],[169,15,157,17,"index"],[169,20,157,22],[169,22,157,24],[169,26,157,28],[169,27,157,29,"pop"],[169,30,157,32],[169,31,157,33],[169,32,157,34],[169,33,157,35],[170,6,158,8],[170,13,158,15,"result"],[170,19,158,21],[171,4,159,4],[172,2,160,0],[173,0,160,1],[173,3]],"functionMap":{"names":["<global>","RingBuffer","RingBuffer#constructor","RingBuffer#wrap","RingBuffer#get","RingBuffer#set","RingBuffer#length","RingBuffer#isFull","RingBuffer#isEmpty","RingBuffer#push","RingBuffer#pushAll","RingBuffer#pop","RingBuffer#unshift","RingBuffer#shift","RingBuffer#shuffleExcise"],"mappings":"AAA;OCoB;ICK;KDe;IEI;KFM;IGC;KHK;IIC;KJK;IKI;KLM;IMM;KNE;IOM;KPE;IQI;KRM;ISI;KTI;IUI;KVQ;IWI;KXM;IYI;KZQ;IaU;KbQ;CDC"},"hasCjsExports":false},"type":"js/module"}]}