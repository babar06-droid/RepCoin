{"dependencies":[{"name":"../util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"DTmef1GE5grNQfsvpIzpBlINy9c=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.prepareSplitSize = prepareSplitSize;\n  var _util = require(_dependencyMap[0], \"../util\");\n  /**\n   * Prepare the split size array. When the input is a number, the axis is evenly\n   * divided among the split size. When the input contains the negative value, the\n   * rest of the axis is allocated toward that.\n   */\n  function prepareSplitSize(x, numOrSizeSplits, axis = 0) {\n    let splitSizes = [];\n    if (typeof numOrSizeSplits === 'number') {\n      (0, _util.assert)(x.shape[axis] % numOrSizeSplits === 0, () => 'Number of splits must evenly divide the axis.');\n      splitSizes = new Array(numOrSizeSplits).fill(x.shape[axis] / numOrSizeSplits);\n    } else {\n      const numOfNegs = numOrSizeSplits.reduce((count, value) => {\n        if (value === -1) {\n          count += 1;\n        }\n        return count;\n      }, 0);\n      (0, _util.assert)(numOfNegs <= 1, () => 'There should be only one negative value in split array.');\n      const negIndex = numOrSizeSplits.indexOf(-1);\n      // Allow the number of split array to be -1, which indicates the rest\n      // of dimension is allocated to that split.\n      if (negIndex !== -1) {\n        const total = numOrSizeSplits.reduce((a, b) => b > 0 ? a + b : a);\n        numOrSizeSplits[negIndex] = x.shape[axis] - total;\n      }\n      (0, _util.assert)(x.shape[axis] === numOrSizeSplits.reduce((a, b) => a + b), () => 'The sum of sizes must match the size of the axis dimension.');\n      splitSizes = numOrSizeSplits;\n    }\n    return splitSizes;\n  }\n});","lineCount":39,"map":[[7,2,7,0,"exports"],[7,9,7,0],[7,10,7,0,"prepareSplitSize"],[7,26,7,0],[7,29,7,0,"prepareSplitSize"],[7,45,7,0],[8,2,1,0],[8,6,1,0,"_util"],[8,11,1,0],[8,14,1,0,"require"],[8,21,1,0],[8,22,1,0,"_dependencyMap"],[8,36,1,0],[9,2,2,0],[10,0,3,0],[11,0,4,0],[12,0,5,0],[13,0,6,0],[14,2,7,7],[14,11,7,16,"prepareSplitSize"],[14,27,7,32,"prepareSplitSize"],[14,28,7,33,"x"],[14,29,7,34],[14,31,7,36,"numOrSizeSplits"],[14,46,7,51],[14,48,7,53,"axis"],[14,52,7,57],[14,55,7,60],[14,56,7,61],[14,58,7,63],[15,4,8,4],[15,8,8,8,"splitSizes"],[15,18,8,18],[15,21,8,21],[15,23,8,23],[16,4,9,4],[16,8,9,8],[16,15,9,16,"numOrSizeSplits"],[16,30,9,32],[16,35,9,37],[16,43,9,45],[16,45,9,47],[17,6,10,8],[17,10,10,8,"assert"],[17,15,10,14],[17,16,10,14,"assert"],[17,22,10,14],[17,24,10,15,"x"],[17,25,10,16],[17,26,10,17,"shape"],[17,31,10,22],[17,32,10,23,"axis"],[17,36,10,27],[17,37,10,28],[17,40,10,31,"numOrSizeSplits"],[17,55,10,46],[17,60,10,51],[17,61,10,52],[17,63,10,54],[17,69,10,60],[17,116,10,107],[17,117,10,108],[18,6,11,8,"splitSizes"],[18,16,11,18],[18,19,12,12],[18,23,12,16,"Array"],[18,28,12,21],[18,29,12,22,"numOrSizeSplits"],[18,44,12,37],[18,45,12,38],[18,46,12,39,"fill"],[18,50,12,43],[18,51,12,44,"x"],[18,52,12,45],[18,53,12,46,"shape"],[18,58,12,51],[18,59,12,52,"axis"],[18,63,12,56],[18,64,12,57],[18,67,12,60,"numOrSizeSplits"],[18,82,12,75],[18,83,12,76],[19,4,13,4],[19,5,13,5],[19,11,14,9],[20,6,15,8],[20,12,15,14,"numOfNegs"],[20,21,15,23],[20,24,15,26,"numOrSizeSplits"],[20,39,15,41],[20,40,15,42,"reduce"],[20,46,15,48],[20,47,15,49],[20,48,15,50,"count"],[20,53,15,55],[20,55,15,57,"value"],[20,60,15,62],[20,65,15,67],[21,8,16,12],[21,12,16,16,"value"],[21,17,16,21],[21,22,16,26],[21,23,16,27],[21,24,16,28],[21,26,16,30],[22,10,17,16,"count"],[22,15,17,21],[22,19,17,25],[22,20,17,26],[23,8,18,12],[24,8,19,12],[24,15,19,19,"count"],[24,20,19,24],[25,6,20,8],[25,7,20,9],[25,9,20,11],[25,10,20,12],[25,11,20,13],[26,6,21,8],[26,10,21,8,"assert"],[26,15,21,14],[26,16,21,14,"assert"],[26,22,21,14],[26,24,21,15,"numOfNegs"],[26,33,21,24],[26,37,21,28],[26,38,21,29],[26,40,21,31],[26,46,21,37],[26,103,21,94],[26,104,21,95],[27,6,22,8],[27,12,22,14,"negIndex"],[27,20,22,22],[27,23,22,25,"numOrSizeSplits"],[27,38,22,40],[27,39,22,41,"indexOf"],[27,46,22,48],[27,47,22,49],[27,48,22,50],[27,49,22,51],[27,50,22,52],[28,6,23,8],[29,6,24,8],[30,6,25,8],[30,10,25,12,"negIndex"],[30,18,25,20],[30,23,25,25],[30,24,25,26],[30,25,25,27],[30,27,25,29],[31,8,26,12],[31,14,26,18,"total"],[31,19,26,23],[31,22,26,26,"numOrSizeSplits"],[31,37,26,41],[31,38,26,42,"reduce"],[31,44,26,48],[31,45,26,49],[31,46,26,50,"a"],[31,47,26,51],[31,49,26,53,"b"],[31,50,26,54],[31,55,26,59,"b"],[31,56,26,60],[31,59,26,63],[31,60,26,64],[31,63,26,67,"a"],[31,64,26,68],[31,67,26,71,"b"],[31,68,26,72],[31,71,26,75,"a"],[31,72,26,76],[31,73,26,77],[32,8,27,12,"numOrSizeSplits"],[32,23,27,27],[32,24,27,28,"negIndex"],[32,32,27,36],[32,33,27,37],[32,36,27,40,"x"],[32,37,27,41],[32,38,27,42,"shape"],[32,43,27,47],[32,44,27,48,"axis"],[32,48,27,52],[32,49,27,53],[32,52,27,56,"total"],[32,57,27,61],[33,6,28,8],[34,6,29,8],[34,10,29,8,"assert"],[34,15,29,14],[34,16,29,14,"assert"],[34,22,29,14],[34,24,29,15,"x"],[34,25,29,16],[34,26,29,17,"shape"],[34,31,29,22],[34,32,29,23,"axis"],[34,36,29,27],[34,37,29,28],[34,42,29,33,"numOrSizeSplits"],[34,57,29,48],[34,58,29,49,"reduce"],[34,64,29,55],[34,65,29,56],[34,66,29,57,"a"],[34,67,29,58],[34,69,29,60,"b"],[34,70,29,61],[34,75,29,66,"a"],[34,76,29,67],[34,79,29,70,"b"],[34,80,29,71],[34,81,29,72],[34,83,29,74],[34,89,29,80],[34,150,29,141],[34,151,29,142],[35,6,30,8,"splitSizes"],[35,16,30,18],[35,19,30,21,"numOrSizeSplits"],[35,34,30,36],[36,4,31,4],[37,4,32,4],[37,11,32,11,"splitSizes"],[37,21,32,21],[38,2,33,0],[39,0,33,1],[39,3]],"functionMap":{"names":["<global>","prepareSplitSize","assert$argument_1","numOrSizeSplits.reduce$argument_0"],"mappings":"AAA;OCM;sDCG,qDD;iDEK;SFK;+BCC,+DD;iDEK,2BF;wDEG,eF,GC,mED;CDI"},"hasCjsExports":false},"type":"js/module"}]}