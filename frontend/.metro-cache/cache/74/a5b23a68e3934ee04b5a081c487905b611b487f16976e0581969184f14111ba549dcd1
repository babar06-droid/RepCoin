{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":75,"index":778}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}},{"name":"./PadV2","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":779},"end":{"line":18,"column":32,"index":811}}],"key":"SjQusUgV5Bu8lbBrAjFG2aqDM6Q=","exportNames":["*"],"imports":1}},{"name":"./Reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":812},"end":{"line":19,"column":36,"index":848}}],"key":"EUWK+oKi/AwokPOQ1jng5DYfQSc=","exportNames":["*"],"imports":1}},{"name":"./Transpose","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":849},"end":{"line":20,"column":40,"index":889}}],"key":"F6S1ekgW6WEHcH6rql/beO2khwY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"spaceToBatchND\", {\n    enumerable: true,\n    get: function () {\n      return spaceToBatchND;\n    }\n  });\n  Object.defineProperty(exports, \"spaceToBatchNDConfig\", {\n    enumerable: true,\n    get: function () {\n      return spaceToBatchNDConfig;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  var _PadV = require(_dependencyMap[1], \"./PadV2\");\n  var _Reshape = require(_dependencyMap[2], \"./Reshape\");\n  var _Transpose = require(_dependencyMap[3], \"./Transpose\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  const spaceToBatchND = args => {\n    const {\n      inputs,\n      backend,\n      attrs\n    } = args;\n    const {\n      x\n    } = inputs;\n    const {\n      blockShape,\n      paddings\n    } = attrs;\n    _tensorflowTfjsCore.util.assert(x.shape.length <= 4, () => 'spaceToBatchND for rank > 4 with a WebGL backend not ' + 'implemented yet');\n    const prod = blockShape.reduce((a, b) => a * b);\n    const completePaddings = [[0, 0]];\n    completePaddings.push(...paddings);\n    for (let i = 1 + blockShape.length; i < x.shape.length; ++i) {\n      completePaddings.push([0, 0]);\n    }\n    const toDispose = [];\n    const paddedX = (0, _PadV.padV2)({\n      inputs: {\n        x\n      },\n      backend,\n      attrs: {\n        paddings: completePaddings,\n        constantValue: 0\n      }\n    });\n    const reshapedPaddedShape = _tensorflowTfjsCore.backend_util.getReshaped(paddedX.shape, blockShape, prod, false);\n    const permutedReshapedPaddedPermutation = _tensorflowTfjsCore.backend_util.getPermuted(reshapedPaddedShape.length, blockShape.length, false);\n    const flattenShape = _tensorflowTfjsCore.backend_util.getReshapedPermuted(paddedX.shape, blockShape, prod, false);\n    const reshapedPaddedX = (0, _Reshape.reshape)({\n      inputs: {\n        x: paddedX\n      },\n      backend,\n      attrs: {\n        shape: reshapedPaddedShape\n      }\n    });\n    const paddedXT = (0, _Transpose.transpose)({\n      inputs: {\n        x: reshapedPaddedX\n      },\n      backend,\n      attrs: {\n        perm: permutedReshapedPaddedPermutation\n      }\n    });\n    const result = (0, _Reshape.reshape)({\n      inputs: {\n        x: paddedXT\n      },\n      backend,\n      attrs: {\n        shape: flattenShape\n      }\n    });\n    toDispose.push(paddedX);\n    toDispose.push(reshapedPaddedX);\n    toDispose.push(paddedXT);\n    toDispose.forEach(t => backend.disposeIntermediateTensorInfo(t));\n    return result;\n  };\n  const spaceToBatchNDConfig = {\n    kernelName: _tensorflowTfjsCore.SpaceToBatchND,\n    backendName: 'webgl',\n    kernelFunc: spaceToBatchND\n  };\n});","lineCount":112,"map":[[7,2,21,0,"Object"],[7,8,21,0],[7,9,21,0,"defineProperty"],[7,23,21,0],[7,24,21,0,"exports"],[7,31,21,0],[8,4,21,0,"enumerable"],[8,14,21,0],[9,4,21,0,"get"],[9,7,21,0],[9,18,21,0,"get"],[9,19,21,0],[10,6,21,0],[10,13,21,0,"spaceToBatchND"],[10,27,21,0],[11,4,21,0],[12,2,21,0],[13,2,55,0,"Object"],[13,8,55,0],[13,9,55,0,"defineProperty"],[13,23,55,0],[13,24,55,0,"exports"],[13,31,55,0],[14,4,55,0,"enumerable"],[14,14,55,0],[15,4,55,0,"get"],[15,7,55,0],[15,18,55,0,"get"],[15,19,55,0],[16,6,55,0],[16,13,55,0,"spaceToBatchNDConfig"],[16,33,55,0],[17,4,55,0],[18,2,55,0],[19,2,17,0],[19,6,17,0,"_tensorflowTfjsCore"],[19,25,17,0],[19,28,17,0,"require"],[19,35,17,0],[19,36,17,0,"_dependencyMap"],[19,50,17,0],[20,2,18,0],[20,6,18,0,"_PadV"],[20,11,18,0],[20,14,18,0,"require"],[20,21,18,0],[20,22,18,0,"_dependencyMap"],[20,36,18,0],[21,2,19,0],[21,6,19,0,"_Reshape"],[21,14,19,0],[21,17,19,0,"require"],[21,24,19,0],[21,25,19,0,"_dependencyMap"],[21,39,19,0],[22,2,20,0],[22,6,20,0,"_Transpose"],[22,16,20,0],[22,19,20,0,"require"],[22,26,20,0],[22,27,20,0,"_dependencyMap"],[22,41,20,0],[23,2,1,0],[24,0,2,0],[25,0,3,0],[26,0,4,0],[27,0,5,0],[28,0,6,0],[29,0,7,0],[30,0,8,0],[31,0,9,0],[32,0,10,0],[33,0,11,0],[34,0,12,0],[35,0,13,0],[36,0,14,0],[37,0,15,0],[38,0,16,0],[40,2,21,7],[40,8,21,13,"spaceToBatchND"],[40,22,21,27],[40,25,21,31,"args"],[40,29,21,35],[40,33,21,40],[41,4,22,4],[41,10,22,10],[42,6,22,12,"inputs"],[42,12,22,18],[43,6,22,20,"backend"],[43,13,22,27],[44,6,22,29,"attrs"],[45,4,22,35],[45,5,22,36],[45,8,22,39,"args"],[45,12,22,43],[46,4,23,4],[46,10,23,10],[47,6,23,12,"x"],[48,4,23,14],[48,5,23,15],[48,8,23,18,"inputs"],[48,14,23,24],[49,4,24,4],[49,10,24,10],[50,6,24,12,"blockShape"],[50,16,24,22],[51,6,24,24,"paddings"],[52,4,24,33],[52,5,24,34],[52,8,24,37,"attrs"],[52,13,24,42],[53,4,25,4,"util"],[53,23,25,8],[53,24,25,8,"util"],[53,28,25,8],[53,29,25,9,"assert"],[53,35,25,15],[53,36,25,16,"x"],[53,37,25,17],[53,38,25,18,"shape"],[53,43,25,23],[53,44,25,24,"length"],[53,50,25,30],[53,54,25,34],[53,55,25,35],[53,57,25,37],[53,63,25,43],[53,118,25,98],[53,121,26,8],[53,138,26,25],[53,139,26,26],[54,4,27,4],[54,10,27,10,"prod"],[54,14,27,14],[54,17,27,17,"blockShape"],[54,27,27,27],[54,28,27,28,"reduce"],[54,34,27,34],[54,35,27,35],[54,36,27,36,"a"],[54,37,27,37],[54,39,27,39,"b"],[54,40,27,40],[54,45,27,45,"a"],[54,46,27,46],[54,49,27,49,"b"],[54,50,27,50],[54,51,27,51],[55,4,28,4],[55,10,28,10,"completePaddings"],[55,26,28,26],[55,29,28,29],[55,30,28,30],[55,31,28,31],[55,32,28,32],[55,34,28,34],[55,35,28,35],[55,36,28,36],[55,37,28,37],[56,4,29,4,"completePaddings"],[56,20,29,20],[56,21,29,21,"push"],[56,25,29,25],[56,26,29,26],[56,29,29,29,"paddings"],[56,37,29,37],[56,38,29,38],[57,4,30,4],[57,9,30,9],[57,13,30,13,"i"],[57,14,30,14],[57,17,30,17],[57,18,30,18],[57,21,30,21,"blockShape"],[57,31,30,31],[57,32,30,32,"length"],[57,38,30,38],[57,40,30,40,"i"],[57,41,30,41],[57,44,30,44,"x"],[57,45,30,45],[57,46,30,46,"shape"],[57,51,30,51],[57,52,30,52,"length"],[57,58,30,58],[57,60,30,60],[57,62,30,62,"i"],[57,63,30,63],[57,65,30,65],[58,6,31,8,"completePaddings"],[58,22,31,24],[58,23,31,25,"push"],[58,27,31,29],[58,28,31,30],[58,29,31,31],[58,30,31,32],[58,32,31,34],[58,33,31,35],[58,34,31,36],[58,35,31,37],[59,4,32,4],[60,4,33,4],[60,10,33,10,"toDispose"],[60,19,33,19],[60,22,33,22],[60,24,33,24],[61,4,34,4],[61,10,34,10,"paddedX"],[61,17,34,17],[61,20,34,20],[61,24,34,20,"padV2"],[61,29,34,25],[61,30,34,25,"padV2"],[61,35,34,25],[61,37,34,26],[62,6,35,8,"inputs"],[62,12,35,14],[62,14,35,16],[63,8,35,18,"x"],[64,6,35,20],[64,7,35,21],[65,6,36,8,"backend"],[65,13,36,15],[66,6,37,8,"attrs"],[66,11,37,13],[66,13,37,15],[67,8,37,17,"paddings"],[67,16,37,25],[67,18,37,27,"completePaddings"],[67,34,37,43],[68,8,37,45,"constantValue"],[68,21,37,58],[68,23,37,60],[69,6,37,62],[70,4,38,4],[70,5,38,5],[70,6,38,6],[71,4,39,4],[71,10,39,10,"reshapedPaddedShape"],[71,29,39,29],[71,32,39,32,"backend_util"],[71,51,39,44],[71,52,39,44,"backend_util"],[71,64,39,44],[71,65,39,45,"getReshaped"],[71,76,39,56],[71,77,39,57,"paddedX"],[71,84,39,64],[71,85,39,65,"shape"],[71,90,39,70],[71,92,39,72,"blockShape"],[71,102,39,82],[71,104,39,84,"prod"],[71,108,39,88],[71,110,39,90],[71,115,39,95],[71,116,39,96],[72,4,40,4],[72,10,40,10,"permutedReshapedPaddedPermutation"],[72,43,40,43],[72,46,40,46,"backend_util"],[72,65,40,58],[72,66,40,58,"backend_util"],[72,78,40,58],[72,79,40,59,"getPermuted"],[72,90,40,70],[72,91,40,71,"reshapedPaddedShape"],[72,110,40,90],[72,111,40,91,"length"],[72,117,40,97],[72,119,40,99,"blockShape"],[72,129,40,109],[72,130,40,110,"length"],[72,136,40,116],[72,138,40,118],[72,143,40,123],[72,144,40,124],[73,4,41,4],[73,10,41,10,"flattenShape"],[73,22,41,22],[73,25,41,25,"backend_util"],[73,44,41,37],[73,45,41,37,"backend_util"],[73,57,41,37],[73,58,41,38,"getReshapedPermuted"],[73,77,41,57],[73,78,41,58,"paddedX"],[73,85,41,65],[73,86,41,66,"shape"],[73,91,41,71],[73,93,41,73,"blockShape"],[73,103,41,83],[73,105,41,85,"prod"],[73,109,41,89],[73,111,41,91],[73,116,41,96],[73,117,41,97],[74,4,42,4],[74,10,42,10,"reshapedPaddedX"],[74,25,42,25],[74,28,42,28],[74,32,42,28,"reshape"],[74,40,42,35],[74,41,42,35,"reshape"],[74,48,42,35],[74,50,42,36],[75,6,42,38,"inputs"],[75,12,42,44],[75,14,42,46],[76,8,42,48,"x"],[76,9,42,49],[76,11,42,51,"paddedX"],[77,6,42,59],[77,7,42,60],[78,6,42,62,"backend"],[78,13,42,69],[79,6,42,71,"attrs"],[79,11,42,76],[79,13,42,78],[80,8,42,80,"shape"],[80,13,42,85],[80,15,42,87,"reshapedPaddedShape"],[81,6,42,107],[82,4,42,109],[82,5,42,110],[82,6,42,111],[83,4,43,4],[83,10,43,10,"paddedXT"],[83,18,43,18],[83,21,43,21],[83,25,43,21,"transpose"],[83,35,43,30],[83,36,43,30,"transpose"],[83,45,43,30],[83,47,43,31],[84,6,44,8,"inputs"],[84,12,44,14],[84,14,44,16],[85,8,44,18,"x"],[85,9,44,19],[85,11,44,21,"reshapedPaddedX"],[86,6,44,37],[86,7,44,38],[87,6,45,8,"backend"],[87,13,45,15],[88,6,46,8,"attrs"],[88,11,46,13],[88,13,46,15],[89,8,46,17,"perm"],[89,12,46,21],[89,14,46,23,"permutedReshapedPaddedPermutation"],[90,6,46,57],[91,4,47,4],[91,5,47,5],[91,6,47,6],[92,4,48,4],[92,10,48,10,"result"],[92,16,48,16],[92,19,48,19],[92,23,48,19,"reshape"],[92,31,48,26],[92,32,48,26,"reshape"],[92,39,48,26],[92,41,48,27],[93,6,48,29,"inputs"],[93,12,48,35],[93,14,48,37],[94,8,48,39,"x"],[94,9,48,40],[94,11,48,42,"paddedXT"],[95,6,48,51],[95,7,48,52],[96,6,48,54,"backend"],[96,13,48,61],[97,6,48,63,"attrs"],[97,11,48,68],[97,13,48,70],[98,8,48,72,"shape"],[98,13,48,77],[98,15,48,79,"flattenShape"],[99,6,48,92],[100,4,48,94],[100,5,48,95],[100,6,48,96],[101,4,49,4,"toDispose"],[101,13,49,13],[101,14,49,14,"push"],[101,18,49,18],[101,19,49,19,"paddedX"],[101,26,49,26],[101,27,49,27],[102,4,50,4,"toDispose"],[102,13,50,13],[102,14,50,14,"push"],[102,18,50,18],[102,19,50,19,"reshapedPaddedX"],[102,34,50,34],[102,35,50,35],[103,4,51,4,"toDispose"],[103,13,51,13],[103,14,51,14,"push"],[103,18,51,18],[103,19,51,19,"paddedXT"],[103,27,51,27],[103,28,51,28],[104,4,52,4,"toDispose"],[104,13,52,13],[104,14,52,14,"forEach"],[104,21,52,21],[104,22,52,22,"t"],[104,23,52,23],[104,27,52,27,"backend"],[104,34,52,34],[104,35,52,35,"disposeIntermediateTensorInfo"],[104,64,52,64],[104,65,52,65,"t"],[104,66,52,66],[104,67,52,67],[104,68,52,68],[105,4,53,4],[105,11,53,11,"result"],[105,17,53,17],[106,2,54,0],[106,3,54,1],[107,2,55,7],[107,8,55,13,"spaceToBatchNDConfig"],[107,28,55,33],[107,31,55,36],[108,4,56,4,"kernelName"],[108,14,56,14],[108,16,56,16,"SpaceToBatchND"],[108,35,56,30],[108,36,56,30,"SpaceToBatchND"],[108,50,56,30],[109,4,57,4,"backendName"],[109,15,57,15],[109,17,57,17],[109,24,57,24],[110,4,58,4,"kernelFunc"],[110,14,58,14],[110,16,58,16,"spaceToBatchND"],[111,2,59,0],[111,3,59,1],[112,0,59,2],[112,3]],"functionMap":{"names":["<global>","spaceToBatchND","util.assert$argument_1","blockShape.reduce$argument_0","toDispose.forEach$argument_0"],"mappings":"AAA;8BCoB;qCCI;yBDC;mCEC,eF;sBGyB,6CH;CDE"},"hasCjsExports":false},"type":"js/module"}]}