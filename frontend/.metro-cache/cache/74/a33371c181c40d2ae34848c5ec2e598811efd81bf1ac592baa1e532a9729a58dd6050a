{"dependencies":[{"name":"../tensor_util_env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":53,"index":756}}],"key":"UCKDOr/oOGi3nbD26ZhyAVW61qk=","exportNames":["*"],"imports":1}},{"name":"../util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":757},"end":{"line":18,"column":32,"index":789}}],"key":"DTmef1GE5grNQfsvpIzpBlINy9c=","exportNames":["*"],"imports":1}},{"name":"./cast","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":790},"end":{"line":19,"column":30,"index":820}}],"key":"zLuFDMcy9OTJI8veTtIwJ7mqKPc=","exportNames":["*"],"imports":1}},{"name":"./mat_mul","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":821},"end":{"line":20,"column":35,"index":856}}],"key":"wdukLONs1EZSLKt1nm4/GD4OfGk=","exportNames":["*"],"imports":1}},{"name":"./one_hot","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":857},"end":{"line":21,"column":35,"index":892}}],"key":"UeYBWsoZWpGGjWOME9gO42L9klk=","exportNames":["*"],"imports":1}},{"name":"./operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":22,"column":0,"index":893},"end":{"line":22,"column":33,"index":926}}],"key":"lmmEAb6oR3TWnrsrETceKUovfkM=","exportNames":["*"],"imports":1}},{"name":"./transpose","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":23,"column":0,"index":927},"end":{"line":23,"column":40,"index":967}}],"key":"1oHttzBiAALJXCo4GeR3c4vz0Zs=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.confusionMatrix_ = confusionMatrix_;\n  Object.defineProperty(exports, \"confusionMatrix\", {\n    enumerable: true,\n    get: function () {\n      return confusionMatrix;\n    }\n  });\n  var _tensor_util_env = require(_dependencyMap[0], \"../tensor_util_env\");\n  var _util = require(_dependencyMap[1], \"../util\");\n  var util = _interopNamespace(_util);\n  var _cast = require(_dependencyMap[2], \"./cast\");\n  var _mat_mul = require(_dependencyMap[3], \"./mat_mul\");\n  var _one_hot = require(_dependencyMap[4], \"./one_hot\");\n  var _operation = require(_dependencyMap[5], \"./operation\");\n  var _transpose = require(_dependencyMap[6], \"./transpose\");\n  /**\n   * @license\n   * Copyright 2018 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  /**\n   * Computes the confusion matrix from true labels and predicted labels.\n   *\n   * ```js\n   * const labels = tf.tensor1d([0, 1, 2, 1, 0], 'int32');\n   * const predictions = tf.tensor1d([0, 2, 2, 1, 0], 'int32');\n   * const numClasses = 3;\n   * const out = tf.math.confusionMatrix(labels, predictions, numClasses);\n   * out.print();\n   * // Expected output matrix:\n   * // [[2, 0, 0],\n   * //  [0, 1, 1],\n   * //  [0, 0, 1]]\n   * ```\n   *\n   * @param labels The target labels, assumed to be 0-based integers\n   *   for the classes. The shape is `[numExamples]`, where\n   *   `numExamples` is the number of examples included.\n   * @param predictions The predicted classes, assumed to be\n   *   0-based integers for the classes. Must have the same shape as `labels`.\n   * @param numClasses Number of all classes, as an integer.\n   *   Its value must be larger than the largest element in `labels` and\n   *   `predictions`.\n   * @returns The confusion matrix as a int32-type 2D tensor. The value at\n   *   row `r` and column `c` is the number of times examples of actual class\n   *   `r` were predicted as class `c`.\n   *\n   * @doc {heading: 'Operations', subheading: 'Evaluation'}\n   */\n  function confusionMatrix_(labels, predictions, numClasses) {\n    const $labels = (0, _tensor_util_env.convertToTensor)(labels, 'labels', 'confusionMatrix');\n    const $predictions = (0, _tensor_util_env.convertToTensor)(predictions, 'predictions', 'confusionMatrix');\n    util.assert(numClasses == null || numClasses > 0 && Number.isInteger(numClasses), () => `If provided, numClasses must be a positive integer, ` + `but got ${numClasses}`);\n    util.assert($labels.rank === 1, () => `Expected the rank of labels to be 1, but got ${$labels.rank}`);\n    util.assert($predictions.rank === 1, () => `Expected the rank of predictions to be 1, ` + `but got ${$predictions.rank}`);\n    util.assert($labels.shape[0] === $predictions.shape[0], () => `Mismatch in the number of examples: ` + `${$labels.shape[0]} vs. ${$predictions.shape[0]}. ` + `Labels and predictions should have the same number of elements.`);\n    util.assert(numClasses > 0 && Number.isInteger(numClasses), () => `numClasses is required to be a positive integer, but got ` + `${numClasses}`);\n    // TODO(cais): In the future, if oneHot supports tensors inputs for\n    //   `numClasses`, `confusionMatrix` can make `numClasses` optional.\n    const oneHotLabels = (0, _one_hot.oneHot)((0, _cast.cast)($labels, 'int32'), numClasses);\n    const oneHotPredictions = (0, _one_hot.oneHot)((0, _cast.cast)($predictions, 'int32'), numClasses);\n    const oneHotLabelsT = (0, _transpose.transpose)(oneHotLabels);\n    const product = (0, _mat_mul.matMul)(oneHotLabelsT, oneHotPredictions);\n    return (0, _cast.cast)(product, 'int32');\n  }\n  const confusionMatrix = /* @__PURE__ */(0, _operation.op)({\n    confusionMatrix_\n  });\n});","lineCount":102,"map":[[22,2,53,0,"exports"],[22,9,53,0],[22,10,53,0,"confusionMatrix_"],[22,26,53,0],[22,29,53,0,"confusionMatrix_"],[22,45,53,0],[23,2,74,0,"Object"],[23,8,74,0],[23,9,74,0,"defineProperty"],[23,23,74,0],[23,24,74,0,"exports"],[23,31,74,0],[24,4,74,0,"enumerable"],[24,14,74,0],[25,4,74,0,"get"],[25,7,74,0],[25,18,74,0,"get"],[25,19,74,0],[26,6,74,0],[26,13,74,0,"confusionMatrix"],[26,28,74,0],[27,4,74,0],[28,2,74,0],[29,2,17,0],[29,6,17,0,"_tensor_util_env"],[29,22,17,0],[29,25,17,0,"require"],[29,32,17,0],[29,33,17,0,"_dependencyMap"],[29,47,17,0],[30,2,18,0],[30,6,18,0,"_util"],[30,11,18,0],[30,14,18,0,"require"],[30,21,18,0],[30,22,18,0,"_dependencyMap"],[30,36,18,0],[31,2,18,0],[31,6,18,0,"util"],[31,10,18,0],[31,13,18,0,"_interopNamespace"],[31,30,18,0],[31,31,18,0,"_util"],[31,36,18,0],[32,2,19,0],[32,6,19,0,"_cast"],[32,11,19,0],[32,14,19,0,"require"],[32,21,19,0],[32,22,19,0,"_dependencyMap"],[32,36,19,0],[33,2,20,0],[33,6,20,0,"_mat_mul"],[33,14,20,0],[33,17,20,0,"require"],[33,24,20,0],[33,25,20,0,"_dependencyMap"],[33,39,20,0],[34,2,21,0],[34,6,21,0,"_one_hot"],[34,14,21,0],[34,17,21,0,"require"],[34,24,21,0],[34,25,21,0,"_dependencyMap"],[34,39,21,0],[35,2,22,0],[35,6,22,0,"_operation"],[35,16,22,0],[35,19,22,0,"require"],[35,26,22,0],[35,27,22,0,"_dependencyMap"],[35,41,22,0],[36,2,23,0],[36,6,23,0,"_transpose"],[36,16,23,0],[36,19,23,0,"require"],[36,26,23,0],[36,27,23,0,"_dependencyMap"],[36,41,23,0],[37,2,1,0],[38,0,2,0],[39,0,3,0],[40,0,4,0],[41,0,5,0],[42,0,6,0],[43,0,7,0],[44,0,8,0],[45,0,9,0],[46,0,10,0],[47,0,11,0],[48,0,12,0],[49,0,13,0],[50,0,14,0],[51,0,15,0],[52,0,16,0],[54,2,24,0],[55,0,25,0],[56,0,26,0],[57,0,27,0],[58,0,28,0],[59,0,29,0],[60,0,30,0],[61,0,31,0],[62,0,32,0],[63,0,33,0],[64,0,34,0],[65,0,35,0],[66,0,36,0],[67,0,37,0],[68,0,38,0],[69,0,39,0],[70,0,40,0],[71,0,41,0],[72,0,42,0],[73,0,43,0],[74,0,44,0],[75,0,45,0],[76,0,46,0],[77,0,47,0],[78,0,48,0],[79,0,49,0],[80,0,50,0],[81,0,51,0],[82,0,52,0],[83,2,53,7],[83,11,53,16,"confusionMatrix_"],[83,27,53,32,"confusionMatrix_"],[83,28,53,33,"labels"],[83,34,53,39],[83,36,53,41,"predictions"],[83,47,53,52],[83,49,53,54,"numClasses"],[83,59,53,64],[83,61,53,66],[84,4,54,4],[84,10,54,10,"$labels"],[84,17,54,17],[84,20,54,20],[84,24,54,20,"convertToTensor"],[84,40,54,35],[84,41,54,35,"convertToTensor"],[84,56,54,35],[84,58,54,36,"labels"],[84,64,54,42],[84,66,54,44],[84,74,54,52],[84,76,54,54],[84,93,54,71],[84,94,54,72],[85,4,55,4],[85,10,55,10,"$predictions"],[85,22,55,22],[85,25,55,25],[85,29,55,25,"convertToTensor"],[85,45,55,40],[85,46,55,40,"convertToTensor"],[85,61,55,40],[85,63,55,41,"predictions"],[85,74,55,52],[85,76,55,54],[85,89,55,67],[85,91,55,69],[85,108,55,86],[85,109,55,87],[86,4,56,4,"util"],[86,8,56,8],[86,9,56,9,"assert"],[86,15,56,15],[86,16,56,16,"numClasses"],[86,26,56,26],[86,30,56,30],[86,34,56,34],[86,38,56,38,"numClasses"],[86,48,56,48],[86,51,56,51],[86,52,56,52],[86,56,56,56,"Number"],[86,62,56,62],[86,63,56,63,"isInteger"],[86,72,56,72],[86,73,56,73,"numClasses"],[86,83,56,83],[86,84,56,84],[86,86,56,86],[86,92,56,92],[86,146,56,146],[86,149,57,8],[86,160,57,19,"numClasses"],[86,170,57,29],[86,172,57,31],[86,173,57,32],[87,4,58,4,"util"],[87,8,58,8],[87,9,58,9,"assert"],[87,15,58,15],[87,16,58,16,"$labels"],[87,23,58,23],[87,24,58,24,"rank"],[87,28,58,28],[87,33,58,33],[87,34,58,34],[87,36,58,36],[87,42,58,42],[87,90,58,90,"$labels"],[87,97,58,97],[87,98,58,98,"rank"],[87,102,58,102],[87,104,58,104],[87,105,58,105],[88,4,59,4,"util"],[88,8,59,8],[88,9,59,9,"assert"],[88,15,59,15],[88,16,59,16,"$predictions"],[88,28,59,28],[88,29,59,29,"rank"],[88,33,59,33],[88,38,59,38],[88,39,59,39],[88,41,59,41],[88,47,59,47],[88,91,59,91],[88,94,60,8],[88,105,60,19,"$predictions"],[88,117,60,31],[88,118,60,32,"rank"],[88,122,60,36],[88,124,60,38],[88,125,60,39],[89,4,61,4,"util"],[89,8,61,8],[89,9,61,9,"assert"],[89,15,61,15],[89,16,61,16,"$labels"],[89,23,61,23],[89,24,61,24,"shape"],[89,29,61,29],[89,30,61,30],[89,31,61,31],[89,32,61,32],[89,37,61,37,"$predictions"],[89,49,61,49],[89,50,61,50,"shape"],[89,55,61,55],[89,56,61,56],[89,57,61,57],[89,58,61,58],[89,60,61,60],[89,66,61,66],[89,104,61,104],[89,107,62,8],[89,110,62,11,"$labels"],[89,117,62,18],[89,118,62,19,"shape"],[89,123,62,24],[89,124,62,25],[89,125,62,26],[89,126,62,27],[89,134,62,35,"$predictions"],[89,146,62,47],[89,147,62,48,"shape"],[89,152,62,53],[89,153,62,54],[89,154,62,55],[89,155,62,56],[89,159,62,60],[89,162,63,8],[89,227,63,73],[89,228,63,74],[90,4,64,4,"util"],[90,8,64,8],[90,9,64,9,"assert"],[90,15,64,15],[90,16,64,16,"numClasses"],[90,26,64,26],[90,29,64,29],[90,30,64,30],[90,34,64,34,"Number"],[90,40,64,40],[90,41,64,41,"isInteger"],[90,50,64,50],[90,51,64,51,"numClasses"],[90,61,64,61],[90,62,64,62],[90,64,64,64],[90,70,64,70],[90,129,64,129],[90,132,65,8],[90,135,65,11,"numClasses"],[90,145,65,21],[90,147,65,23],[90,148,65,24],[91,4,66,4],[92,4,67,4],[93,4,68,4],[93,10,68,10,"oneHotLabels"],[93,22,68,22],[93,25,68,25],[93,29,68,25,"oneHot"],[93,37,68,31],[93,38,68,31,"oneHot"],[93,44,68,31],[93,46,68,32],[93,50,68,32,"cast"],[93,55,68,36],[93,56,68,36,"cast"],[93,60,68,36],[93,62,68,37,"$labels"],[93,69,68,44],[93,71,68,46],[93,78,68,53],[93,79,68,54],[93,81,68,56,"numClasses"],[93,91,68,66],[93,92,68,67],[94,4,69,4],[94,10,69,10,"oneHotPredictions"],[94,27,69,27],[94,30,69,30],[94,34,69,30,"oneHot"],[94,42,69,36],[94,43,69,36,"oneHot"],[94,49,69,36],[94,51,69,37],[94,55,69,37,"cast"],[94,60,69,41],[94,61,69,41,"cast"],[94,65,69,41],[94,67,69,42,"$predictions"],[94,79,69,54],[94,81,69,56],[94,88,69,63],[94,89,69,64],[94,91,69,66,"numClasses"],[94,101,69,76],[94,102,69,77],[95,4,70,4],[95,10,70,10,"oneHotLabelsT"],[95,23,70,23],[95,26,70,26],[95,30,70,26,"transpose"],[95,40,70,35],[95,41,70,35,"transpose"],[95,50,70,35],[95,52,70,36,"oneHotLabels"],[95,64,70,48],[95,65,70,49],[96,4,71,4],[96,10,71,10,"product"],[96,17,71,17],[96,20,71,20],[96,24,71,20,"matMul"],[96,32,71,26],[96,33,71,26,"matMul"],[96,39,71,26],[96,41,71,27,"oneHotLabelsT"],[96,54,71,40],[96,56,71,42,"oneHotPredictions"],[96,73,71,59],[96,74,71,60],[97,4,72,4],[97,11,72,11],[97,15,72,11,"cast"],[97,20,72,15],[97,21,72,15,"cast"],[97,25,72,15],[97,27,72,16,"product"],[97,34,72,23],[97,36,72,25],[97,43,72,32],[97,44,72,33],[98,2,73,0],[99,2,74,7],[99,8,74,13,"confusionMatrix"],[99,23,74,28],[99,26,74,31],[99,41,74,47],[99,45,74,47,"op"],[99,55,74,49],[99,56,74,49,"op"],[99,58,74,49],[99,60,74,50],[100,4,74,52,"confusionMatrix_"],[101,2,74,69],[101,3,74,70],[101,4,74,71],[102,0,74,72],[102,3]],"functionMap":{"names":["<global>","confusionMatrix_","util.assert$argument_1"],"mappings":"AAA;OCoD;sFCG;+BDC;oCCC,oED;yCCC;sCDC;4DCC;yEDE;gECC;uBDC;CDQ"},"hasCjsExports":false},"type":"js/module"}]}