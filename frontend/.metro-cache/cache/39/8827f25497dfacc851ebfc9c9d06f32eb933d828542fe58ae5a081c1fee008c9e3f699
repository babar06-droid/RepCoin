{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":62,"index":765}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}},{"name":"../addn_gpu","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":766},"end":{"line":18,"column":42,"index":808}}],"key":"911TvY1wT629xfPMIqXax5YuKbE=","exportNames":["*"],"imports":1}},{"name":"../addn_packed_gpu","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":809},"end":{"line":19,"column":55,"index":864}}],"key":"KjTcZsNOUhdHDD1g48S1TieUFMk=","exportNames":["*"],"imports":1}},{"name":"./Identity","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":865},"end":{"line":20,"column":38,"index":903}}],"key":"fmoGkMbvl3R/HMlCKK1PD8/q2lc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.addN = addN;\n  Object.defineProperty(exports, \"addNConfig\", {\n    enumerable: true,\n    get: function () {\n      return addNConfig;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  var _addn_gpu = require(_dependencyMap[1], \"../addn_gpu\");\n  var _addn_packed_gpu = require(_dependencyMap[2], \"../addn_packed_gpu\");\n  var _Identity = require(_dependencyMap[3], \"./Identity\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  function addN(args) {\n    const {\n      inputs,\n      backend\n    } = args;\n    const tensors = inputs;\n    if (tensors.length === 1) {\n      return (0, _Identity.identity)({\n        inputs: {\n          x: tensors[0]\n        },\n        backend\n      });\n    }\n    // Limit the number of uploaded textures for optimization.\n    if (tensors.length > (0, _tensorflowTfjsCore.env)().getNumber('WEBGL_MAX_TEXTURES_IN_SHADER')) {\n      const midIndex = Math.floor(tensors.length / 2);\n      const leftSide = addN({\n        inputs: tensors.slice(0, midIndex),\n        backend\n      });\n      const rightSide = addN({\n        inputs: tensors.slice(midIndex),\n        backend\n      });\n      return addN({\n        inputs: [leftSide, rightSide],\n        backend\n      });\n    }\n    const dtype = tensors.map(t => t.dtype).reduce((d1, d2) => (0, _tensorflowTfjsCore.upcastType)(d1, d2));\n    const shapes = tensors.map(t => t.shape);\n    // We can make sure shapes are identical in op level.\n    const usePackedOp = (0, _tensorflowTfjsCore.env)().getBool('WEBGL_PACK');\n    const program = usePackedOp ? new _addn_packed_gpu.AddNPackedProgram(tensors[0].shape, shapes) : new _addn_gpu.AddNProgram(tensors[0].shape, shapes);\n    return backend.runWebGLProgram(program, tensors, dtype);\n  }\n  const addNConfig = {\n    kernelName: _tensorflowTfjsCore.AddN,\n    backendName: 'webgl',\n    kernelFunc: addN\n  };\n});","lineCount":77,"map":[[7,2,21,0,"exports"],[7,9,21,0],[7,10,21,0,"addN"],[7,14,21,0],[7,17,21,0,"addN"],[7,21,21,0],[8,2,43,0,"Object"],[8,8,43,0],[8,9,43,0,"defineProperty"],[8,23,43,0],[8,24,43,0,"exports"],[8,31,43,0],[9,4,43,0,"enumerable"],[9,14,43,0],[10,4,43,0,"get"],[10,7,43,0],[10,18,43,0,"get"],[10,19,43,0],[11,6,43,0],[11,13,43,0,"addNConfig"],[11,23,43,0],[12,4,43,0],[13,2,43,0],[14,2,17,0],[14,6,17,0,"_tensorflowTfjsCore"],[14,25,17,0],[14,28,17,0,"require"],[14,35,17,0],[14,36,17,0,"_dependencyMap"],[14,50,17,0],[15,2,18,0],[15,6,18,0,"_addn_gpu"],[15,15,18,0],[15,18,18,0,"require"],[15,25,18,0],[15,26,18,0,"_dependencyMap"],[15,40,18,0],[16,2,19,0],[16,6,19,0,"_addn_packed_gpu"],[16,22,19,0],[16,25,19,0,"require"],[16,32,19,0],[16,33,19,0,"_dependencyMap"],[16,47,19,0],[17,2,20,0],[17,6,20,0,"_Identity"],[17,15,20,0],[17,18,20,0,"require"],[17,25,20,0],[17,26,20,0,"_dependencyMap"],[17,40,20,0],[18,2,1,0],[19,0,2,0],[20,0,3,0],[21,0,4,0],[22,0,5,0],[23,0,6,0],[24,0,7,0],[25,0,8,0],[26,0,9,0],[27,0,10,0],[28,0,11,0],[29,0,12,0],[30,0,13,0],[31,0,14,0],[32,0,15,0],[33,0,16,0],[35,2,21,7],[35,11,21,16,"addN"],[35,15,21,20,"addN"],[35,16,21,21,"args"],[35,20,21,25],[35,22,21,27],[36,4,22,4],[36,10,22,10],[37,6,22,12,"inputs"],[37,12,22,18],[38,6,22,20,"backend"],[39,4,22,28],[39,5,22,29],[39,8,22,32,"args"],[39,12,22,36],[40,4,23,4],[40,10,23,10,"tensors"],[40,17,23,17],[40,20,23,20,"inputs"],[40,26,23,26],[41,4,24,4],[41,8,24,8,"tensors"],[41,15,24,15],[41,16,24,16,"length"],[41,22,24,22],[41,27,24,27],[41,28,24,28],[41,30,24,30],[42,6,25,8],[42,13,25,15],[42,17,25,15,"identity"],[42,26,25,23],[42,27,25,23,"identity"],[42,35,25,23],[42,37,25,24],[43,8,25,26,"inputs"],[43,14,25,32],[43,16,25,34],[44,10,25,36,"x"],[44,11,25,37],[44,13,25,39,"tensors"],[44,20,25,46],[44,21,25,47],[44,22,25,48],[45,8,25,50],[45,9,25,51],[46,8,25,53,"backend"],[47,6,25,61],[47,7,25,62],[47,8,25,63],[48,4,26,4],[49,4,27,4],[50,4,28,4],[50,8,28,8,"tensors"],[50,15,28,15],[50,16,28,16,"length"],[50,22,28,22],[50,25,28,25],[50,29,28,25,"env"],[50,48,28,28],[50,49,28,28,"env"],[50,52,28,28],[50,54,28,29],[50,55,28,30],[50,56,28,31,"getNumber"],[50,65,28,40],[50,66,28,41],[50,96,28,71],[50,97,28,72],[50,99,28,74],[51,6,29,8],[51,12,29,14,"midIndex"],[51,20,29,22],[51,23,29,25,"Math"],[51,27,29,29],[51,28,29,30,"floor"],[51,33,29,35],[51,34,29,36,"tensors"],[51,41,29,43],[51,42,29,44,"length"],[51,48,29,50],[51,51,29,53],[51,52,29,54],[51,53,29,55],[52,6,30,8],[52,12,30,14,"leftSide"],[52,20,30,22],[52,23,30,25,"addN"],[52,27,30,29],[52,28,30,30],[53,8,30,32,"inputs"],[53,14,30,38],[53,16,30,40,"tensors"],[53,23,30,47],[53,24,30,48,"slice"],[53,29,30,53],[53,30,30,54],[53,31,30,55],[53,33,30,57,"midIndex"],[53,41,30,65],[53,42,30,66],[54,8,30,68,"backend"],[55,6,30,76],[55,7,30,77],[55,8,30,78],[56,6,31,8],[56,12,31,14,"rightSide"],[56,21,31,23],[56,24,31,26,"addN"],[56,28,31,30],[56,29,31,31],[57,8,31,33,"inputs"],[57,14,31,39],[57,16,31,41,"tensors"],[57,23,31,48],[57,24,31,49,"slice"],[57,29,31,54],[57,30,31,55,"midIndex"],[57,38,31,63],[57,39,31,64],[58,8,31,66,"backend"],[59,6,31,74],[59,7,31,75],[59,8,31,76],[60,6,32,8],[60,13,32,15,"addN"],[60,17,32,19],[60,18,32,20],[61,8,32,22,"inputs"],[61,14,32,28],[61,16,32,30],[61,17,32,31,"leftSide"],[61,25,32,39],[61,27,32,41,"rightSide"],[61,36,32,50],[61,37,32,51],[62,8,32,53,"backend"],[63,6,32,61],[63,7,32,62],[63,8,32,63],[64,4,33,4],[65,4,34,4],[65,10,34,10,"dtype"],[65,15,34,15],[65,18,34,18,"tensors"],[65,25,34,25],[65,26,34,26,"map"],[65,29,34,29],[65,30,34,30,"t"],[65,31,34,31],[65,35,34,35,"t"],[65,36,34,36],[65,37,34,37,"dtype"],[65,42,34,42],[65,43,34,43],[65,44,34,44,"reduce"],[65,50,34,50],[65,51,34,51],[65,52,34,52,"d1"],[65,54,34,54],[65,56,34,56,"d2"],[65,58,34,58],[65,63,34,63],[65,67,34,63,"upcastType"],[65,86,34,73],[65,87,34,73,"upcastType"],[65,97,34,73],[65,99,34,74,"d1"],[65,101,34,76],[65,103,34,78,"d2"],[65,105,34,80],[65,106,34,81],[65,107,34,82],[66,4,35,4],[66,10,35,10,"shapes"],[66,16,35,16],[66,19,35,19,"tensors"],[66,26,35,26],[66,27,35,27,"map"],[66,30,35,30],[66,31,35,31,"t"],[66,32,35,32],[66,36,35,36,"t"],[66,37,35,37],[66,38,35,38,"shape"],[66,43,35,43],[66,44,35,44],[67,4,36,4],[68,4,37,4],[68,10,37,10,"usePackedOp"],[68,21,37,21],[68,24,37,24],[68,28,37,24,"env"],[68,47,37,27],[68,48,37,27,"env"],[68,51,37,27],[68,53,37,28],[68,54,37,29],[68,55,37,30,"getBool"],[68,62,37,37],[68,63,37,38],[68,75,37,50],[68,76,37,51],[69,4,38,4],[69,10,38,10,"program"],[69,17,38,17],[69,20,38,20,"usePackedOp"],[69,31,38,31],[69,34,39,8],[69,38,39,12,"AddNPackedProgram"],[69,54,39,29],[69,55,39,29,"AddNPackedProgram"],[69,72,39,29],[69,73,39,30,"tensors"],[69,80,39,37],[69,81,39,38],[69,82,39,39],[69,83,39,40],[69,84,39,41,"shape"],[69,89,39,46],[69,91,39,48,"shapes"],[69,97,39,54],[69,98,39,55],[69,101,40,8],[69,105,40,12,"AddNProgram"],[69,114,40,23],[69,115,40,23,"AddNProgram"],[69,126,40,23],[69,127,40,24,"tensors"],[69,134,40,31],[69,135,40,32],[69,136,40,33],[69,137,40,34],[69,138,40,35,"shape"],[69,143,40,40],[69,145,40,42,"shapes"],[69,151,40,48],[69,152,40,49],[70,4,41,4],[70,11,41,11,"backend"],[70,18,41,18],[70,19,41,19,"runWebGLProgram"],[70,34,41,34],[70,35,41,35,"program"],[70,42,41,42],[70,44,41,44,"tensors"],[70,51,41,51],[70,53,41,53,"dtype"],[70,58,41,58],[70,59,41,59],[71,2,42,0],[72,2,43,7],[72,8,43,13,"addNConfig"],[72,18,43,23],[72,21,43,26],[73,4,44,4,"kernelName"],[73,14,44,14],[73,16,44,16,"AddN"],[73,35,44,20],[73,36,44,20,"AddN"],[73,40,44,20],[74,4,45,4,"backendName"],[74,15,45,15],[74,17,45,17],[74,24,45,24],[75,4,46,4,"kernelFunc"],[75,14,46,14],[75,16,46,16,"addN"],[76,2,47,0],[76,3,47,1],[77,0,47,2],[77,3]],"functionMap":{"names":["<global>","addN","tensors.map$argument_0","tensors.map.reduce$argument_0"],"mappings":"AAA;OCoB;8BCa,YD,SE,8BF;+BCC,YD;CDO"},"hasCjsExports":false},"type":"js/module"}]}