{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"ArgMinMaxProgram\", {\n    enumerable: true,\n    get: function () {\n      return ArgMinMaxProgram;\n    }\n  });\n  /**\n   * @license\n   * Copyright 2017 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n  class ArgMinMaxProgram {\n    constructor(reduceInfo, op, firstPass) {\n      this.variableNames = ['A'];\n      const {\n        windowSize,\n        batchSize,\n        outSize\n      } = reduceInfo;\n      if (!firstPass) {\n        this.variableNames.push('bestIndicesA');\n      }\n      this.outputShape = [batchSize, outSize];\n      const compOp = op === 'max' ? '>' : '<';\n      const indexSnippet = firstPass ? 'inOffset + i;' : 'round(getBestIndicesA(batch, inOffset + i));';\n      this.userCode = `\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${windowSize};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${windowSize}; i++) {\n          int inIdx = ${indexSnippet};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${compOp} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `;\n    }\n  }\n});","lineCount":66,"map":[[7,2,17,0,"Object"],[7,8,17,0],[7,9,17,0,"defineProperty"],[7,23,17,0],[7,24,17,0,"exports"],[7,31,17,0],[8,4,17,0,"enumerable"],[8,14,17,0],[9,4,17,0,"get"],[9,7,17,0],[9,18,17,0,"get"],[9,19,17,0],[10,6,17,0],[10,13,17,0,"ArgMinMaxProgram"],[10,29,17,0],[11,4,17,0],[12,2,17,0],[13,2,1,0],[14,0,2,0],[15,0,3,0],[16,0,4,0],[17,0,5,0],[18,0,6,0],[19,0,7,0],[20,0,8,0],[21,0,9,0],[22,0,10,0],[23,0,11,0],[24,0,12,0],[25,0,13,0],[26,0,14,0],[27,0,15,0],[28,0,16,0],[29,2,17,7],[29,8,17,13,"ArgMinMaxProgram"],[29,24,17,29],[29,25,17,30],[30,4,18,4,"constructor"],[30,15,18,15,"constructor"],[30,16,18,16,"reduceInfo"],[30,26,18,26],[30,28,18,28,"op"],[30,30,18,30],[30,32,18,32,"firstPass"],[30,41,18,41],[30,43,18,43],[31,6,19,8],[31,10,19,12],[31,11,19,13,"variableNames"],[31,24,19,26],[31,27,19,29],[31,28,19,30],[31,31,19,33],[31,32,19,34],[32,6,20,8],[32,12,20,14],[33,8,20,16,"windowSize"],[33,18,20,26],[34,8,20,28,"batchSize"],[34,17,20,37],[35,8,20,39,"outSize"],[36,6,20,47],[36,7,20,48],[36,10,20,51,"reduceInfo"],[36,20,20,61],[37,6,21,8],[37,10,21,12],[37,11,21,13,"firstPass"],[37,20,21,22],[37,22,21,24],[38,8,22,12],[38,12,22,16],[38,13,22,17,"variableNames"],[38,26,22,30],[38,27,22,31,"push"],[38,31,22,35],[38,32,22,36],[38,46,22,50],[38,47,22,51],[39,6,23,8],[40,6,24,8],[40,10,24,12],[40,11,24,13,"outputShape"],[40,22,24,24],[40,25,24,27],[40,26,24,28,"batchSize"],[40,35,24,37],[40,37,24,39,"outSize"],[40,44,24,46],[40,45,24,47],[41,6,25,8],[41,12,25,14,"compOp"],[41,18,25,20],[41,21,25,24,"op"],[41,23,25,26],[41,28,25,31],[41,33,25,36],[41,36,25,40],[41,39,25,43],[41,42,25,46],[41,45,25,49],[42,6,26,8],[42,12,26,14,"indexSnippet"],[42,24,26,26],[42,27,26,29,"firstPass"],[42,36,26,38],[42,39,27,12],[42,54,27,27],[42,57,28,12],[42,103,28,58],[43,6,29,8],[43,10,29,12],[43,11,29,13,"userCode"],[43,19,29,21],[43,22,29,24],[44,0,30,0],[45,0,31,0],[46,0,32,0],[47,0,33,0],[48,0,34,0],[48,34,34,34,"windowSize"],[48,44,34,44],[49,0,35,0],[50,0,36,0],[51,0,37,0],[52,0,38,0],[53,0,39,0],[53,30,39,30,"windowSize"],[53,40,39,40],[54,0,40,0],[54,24,40,24,"indexSnippet"],[54,36,40,36],[55,0,41,0],[56,0,42,0],[56,26,42,26,"compOp"],[56,32,42,32],[57,0,43,0],[58,0,44,0],[59,0,45,0],[60,0,46,0],[61,0,47,0],[62,0,48,0],[63,0,49,0],[63,5,49,5],[64,4,50,4],[65,2,51,0],[66,0,51,1],[66,3]],"functionMap":{"names":["<global>","ArgMinMaxProgram","ArgMinMaxProgram#constructor"],"mappings":"AAA;OCgB;ICC;KDgC;CDC"},"hasCjsExports":false},"type":"js/module"}]}