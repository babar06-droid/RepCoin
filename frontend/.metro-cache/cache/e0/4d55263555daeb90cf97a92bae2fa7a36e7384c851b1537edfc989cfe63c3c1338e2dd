{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":96,"index":799}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}},{"name":"../cpu_util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":800},"end":{"line":18,"column":47,"index":847}}],"key":"5L5S4GXlh/uJh1MrXQbkPSVOWm4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.depthwiseConv2dNative = depthwiseConv2dNative;\n  Object.defineProperty(exports, \"depthwiseConv2dNativeConfig\", {\n    enumerable: true,\n    get: function () {\n      return depthwiseConv2dNativeConfig;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  var _cpu_util = require(_dependencyMap[1], \"../cpu_util\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  function depthwiseConv2dNative(args) {\n    const {\n      inputs,\n      backend,\n      attrs\n    } = args;\n    const {\n      x,\n      filter\n    } = inputs;\n    const {\n      strides,\n      pad,\n      dilations,\n      dimRoundingMode\n    } = attrs;\n    (0, _cpu_util.assertNotComplex)([x, filter], 'depthwiseConv2DNative');\n    const xStrides = _tensorflowTfjsCore.util.computeStrides(x.shape);\n    const filterStrides = _tensorflowTfjsCore.util.computeStrides(filter.shape);\n    let $dilations = dilations;\n    if ($dilations == null) {\n      $dilations = [1, 1];\n    }\n    _tensorflowTfjsCore.util.assert(_tensorflowTfjsCore.backend_util.eitherStridesOrDilationsAreOne(strides, $dilations), () => 'Error in depthwiseConv2d: Either strides or dilations must be ' + `1. Got strides ${strides} and dilations '${$dilations}'`);\n    const convInfo = _tensorflowTfjsCore.backend_util.computeConv2DInfo(x.shape, filter.shape, strides, $dilations, pad, dimRoundingMode, true /* depthwise */);\n    const {\n      filterHeight,\n      filterWidth,\n      dilationHeight,\n      dilationWidth,\n      padInfo\n    } = convInfo;\n    const padLeft = padInfo.left;\n    const padTop = padInfo.top;\n    const chMul = convInfo.outChannels / convInfo.inChannels;\n    const y = new _tensorflowTfjsCore.TensorBuffer(convInfo.outShape, x.dtype);\n    const xVals = backend.data.get(x.dataId).values;\n    const wVals = backend.data.get(filter.dataId).values;\n    const yVals = y.values;\n    for (let b = 0; b < convInfo.batchSize; ++b) {\n      const xOffset1 = b * xStrides[0];\n      const yOffset1 = b * y.strides[0];\n      for (let yR = 0; yR < convInfo.outHeight; ++yR) {\n        const yOffset2 = yOffset1 + yR * y.strides[1];\n        const xRCorner = yR * convInfo.strideHeight - padTop;\n        for (let wR = 0; wR < filterHeight; ++wR) {\n          const xR = xRCorner + wR * dilationHeight;\n          if (xR < 0 || xR >= convInfo.inHeight) {\n            continue;\n          }\n          const wOffset1 = wR * filterStrides[0];\n          const xOffset2 = xOffset1 + xR * xStrides[1];\n          for (let yC = 0; yC < convInfo.outWidth; ++yC) {\n            const yOffset3 = yOffset2 + yC * y.strides[2];\n            const xCCorner = yC * convInfo.strideWidth - padLeft;\n            for (let wC = 0; wC < filterWidth; ++wC) {\n              const xC = xCCorner + wC * dilationWidth;\n              if (xC < 0 || xC >= convInfo.inWidth) {\n                continue;\n              }\n              const wOffset2 = wOffset1 + wC * filterStrides[1];\n              const xOffset3 = xOffset2 + xC * convInfo.inChannels;\n              let yOffset4 = yOffset3;\n              let wOffset3 = wOffset2;\n              for (let d1 = 0; d1 < convInfo.inChannels; ++d1) {\n                const xVal = xVals[xOffset3 + d1];\n                for (let q = 0; q < chMul; ++q) {\n                  yVals[yOffset4 + q] += xVal * wVals[wOffset3 + q];\n                }\n                yOffset4 += chMul;\n                wOffset3 += chMul;\n              }\n            }\n          }\n        }\n      }\n    }\n    return backend.makeTensorInfo(y.shape, y.dtype, y.values);\n  }\n  const depthwiseConv2dNativeConfig = {\n    kernelName: _tensorflowTfjsCore.DepthwiseConv2dNative,\n    backendName: 'cpu',\n    kernelFunc: depthwiseConv2dNative\n  };\n});","lineCount":117,"map":[[7,2,19,0,"exports"],[7,9,19,0],[7,10,19,0,"depthwiseConv2dNative"],[7,31,19,0],[7,34,19,0,"depthwiseConv2dNative"],[7,55,19,0],[8,2,81,0,"Object"],[8,8,81,0],[8,9,81,0,"defineProperty"],[8,23,81,0],[8,24,81,0,"exports"],[8,31,81,0],[9,4,81,0,"enumerable"],[9,14,81,0],[10,4,81,0,"get"],[10,7,81,0],[10,18,81,0,"get"],[10,19,81,0],[11,6,81,0],[11,13,81,0,"depthwiseConv2dNativeConfig"],[11,40,81,0],[12,4,81,0],[13,2,81,0],[14,2,17,0],[14,6,17,0,"_tensorflowTfjsCore"],[14,25,17,0],[14,28,17,0,"require"],[14,35,17,0],[14,36,17,0,"_dependencyMap"],[14,50,17,0],[15,2,18,0],[15,6,18,0,"_cpu_util"],[15,15,18,0],[15,18,18,0,"require"],[15,25,18,0],[15,26,18,0,"_dependencyMap"],[15,40,18,0],[16,2,1,0],[17,0,2,0],[18,0,3,0],[19,0,4,0],[20,0,5,0],[21,0,6,0],[22,0,7,0],[23,0,8,0],[24,0,9,0],[25,0,10,0],[26,0,11,0],[27,0,12,0],[28,0,13,0],[29,0,14,0],[30,0,15,0],[31,0,16,0],[33,2,19,7],[33,11,19,16,"depthwiseConv2dNative"],[33,32,19,37,"depthwiseConv2dNative"],[33,33,19,38,"args"],[33,37,19,42],[33,39,19,44],[34,4,20,4],[34,10,20,10],[35,6,20,12,"inputs"],[35,12,20,18],[36,6,20,20,"backend"],[36,13,20,27],[37,6,20,29,"attrs"],[38,4,20,35],[38,5,20,36],[38,8,20,39,"args"],[38,12,20,43],[39,4,21,4],[39,10,21,10],[40,6,21,12,"x"],[40,7,21,13],[41,6,21,15,"filter"],[42,4,21,22],[42,5,21,23],[42,8,21,26,"inputs"],[42,14,21,32],[43,4,22,4],[43,10,22,10],[44,6,22,12,"strides"],[44,13,22,19],[45,6,22,21,"pad"],[45,9,22,24],[46,6,22,26,"dilations"],[46,15,22,35],[47,6,22,37,"dimRoundingMode"],[48,4,22,53],[48,5,22,54],[48,8,22,57,"attrs"],[48,13,22,62],[49,4,23,4],[49,8,23,4,"assertNotComplex"],[49,17,23,20],[49,18,23,20,"assertNotComplex"],[49,34,23,20],[49,36,23,21],[49,37,23,22,"x"],[49,38,23,23],[49,40,23,25,"filter"],[49,46,23,31],[49,47,23,32],[49,49,23,34],[49,72,23,57],[49,73,23,58],[50,4,24,4],[50,10,24,10,"xStrides"],[50,18,24,18],[50,21,24,21,"util"],[50,40,24,25],[50,41,24,25,"util"],[50,45,24,25],[50,46,24,26,"computeStrides"],[50,60,24,40],[50,61,24,41,"x"],[50,62,24,42],[50,63,24,43,"shape"],[50,68,24,48],[50,69,24,49],[51,4,25,4],[51,10,25,10,"filterStrides"],[51,23,25,23],[51,26,25,26,"util"],[51,45,25,30],[51,46,25,30,"util"],[51,50,25,30],[51,51,25,31,"computeStrides"],[51,65,25,45],[51,66,25,46,"filter"],[51,72,25,52],[51,73,25,53,"shape"],[51,78,25,58],[51,79,25,59],[52,4,26,4],[52,8,26,8,"$dilations"],[52,18,26,18],[52,21,26,21,"dilations"],[52,30,26,30],[53,4,27,4],[53,8,27,8,"$dilations"],[53,18,27,18],[53,22,27,22],[53,26,27,26],[53,28,27,28],[54,6,28,8,"$dilations"],[54,16,28,18],[54,19,28,21],[54,20,28,22],[54,21,28,23],[54,23,28,25],[54,24,28,26],[54,25,28,27],[55,4,29,4],[56,4,30,4,"util"],[56,23,30,8],[56,24,30,8,"util"],[56,28,30,8],[56,29,30,9,"assert"],[56,35,30,15],[56,36,30,16,"backend_util"],[56,55,30,28],[56,56,30,28,"backend_util"],[56,68,30,28],[56,69,30,29,"eitherStridesOrDilationsAreOne"],[56,99,30,59],[56,100,30,60,"strides"],[56,107,30,67],[56,109,30,69,"$dilations"],[56,119,30,79],[56,120,30,80],[56,122,30,82],[56,128,30,88],[56,192,30,152],[56,195,31,8],[56,213,31,26,"strides"],[56,220,31,33],[56,239,31,52,"$dilations"],[56,249,31,62],[56,252,31,65],[56,253,31,66],[57,4,32,4],[57,10,32,10,"convInfo"],[57,18,32,18],[57,21,32,21,"backend_util"],[57,40,32,33],[57,41,32,33,"backend_util"],[57,53,32,33],[57,54,32,34,"computeConv2DInfo"],[57,71,32,51],[57,72,32,52,"x"],[57,73,32,53],[57,74,32,54,"shape"],[57,79,32,59],[57,81,32,61,"filter"],[57,87,32,67],[57,88,32,68,"shape"],[57,93,32,73],[57,95,32,75,"strides"],[57,102,32,82],[57,104,32,84,"$dilations"],[57,114,32,94],[57,116,32,96,"pad"],[57,119,32,99],[57,121,32,101,"dimRoundingMode"],[57,136,32,116],[57,138,32,118],[57,142,32,122],[57,143,32,123],[57,158,32,138],[57,159,32,139],[58,4,33,4],[58,10,33,10],[59,6,33,12,"filterHeight"],[59,18,33,24],[60,6,33,26,"filterWidth"],[60,17,33,37],[61,6,33,39,"dilationHeight"],[61,20,33,53],[62,6,33,55,"dilationWidth"],[62,19,33,68],[63,6,33,70,"padInfo"],[64,4,33,78],[64,5,33,79],[64,8,33,82,"convInfo"],[64,16,33,90],[65,4,34,4],[65,10,34,10,"padLeft"],[65,17,34,17],[65,20,34,20,"padInfo"],[65,27,34,27],[65,28,34,28,"left"],[65,32,34,32],[66,4,35,4],[66,10,35,10,"padTop"],[66,16,35,16],[66,19,35,19,"padInfo"],[66,26,35,26],[66,27,35,27,"top"],[66,30,35,30],[67,4,36,4],[67,10,36,10,"chMul"],[67,15,36,15],[67,18,36,18,"convInfo"],[67,26,36,26],[67,27,36,27,"outChannels"],[67,38,36,38],[67,41,36,41,"convInfo"],[67,49,36,49],[67,50,36,50,"inChannels"],[67,60,36,60],[68,4,37,4],[68,10,37,10,"y"],[68,11,37,11],[68,14,37,14],[68,18,37,18,"TensorBuffer"],[68,37,37,30],[68,38,37,30,"TensorBuffer"],[68,50,37,30],[68,51,37,31,"convInfo"],[68,59,37,39],[68,60,37,40,"outShape"],[68,68,37,48],[68,70,37,50,"x"],[68,71,37,51],[68,72,37,52,"dtype"],[68,77,37,57],[68,78,37,58],[69,4,38,4],[69,10,38,10,"xVals"],[69,15,38,15],[69,18,38,18,"backend"],[69,25,38,25],[69,26,38,26,"data"],[69,30,38,30],[69,31,38,31,"get"],[69,34,38,34],[69,35,38,35,"x"],[69,36,38,36],[69,37,38,37,"dataId"],[69,43,38,43],[69,44,38,44],[69,45,38,45,"values"],[69,51,38,51],[70,4,39,4],[70,10,39,10,"wVals"],[70,15,39,15],[70,18,39,18,"backend"],[70,25,39,25],[70,26,39,26,"data"],[70,30,39,30],[70,31,39,31,"get"],[70,34,39,34],[70,35,39,35,"filter"],[70,41,39,41],[70,42,39,42,"dataId"],[70,48,39,48],[70,49,39,49],[70,50,39,50,"values"],[70,56,39,56],[71,4,40,4],[71,10,40,10,"yVals"],[71,15,40,15],[71,18,40,18,"y"],[71,19,40,19],[71,20,40,20,"values"],[71,26,40,26],[72,4,41,4],[72,9,41,9],[72,13,41,13,"b"],[72,14,41,14],[72,17,41,17],[72,18,41,18],[72,20,41,20,"b"],[72,21,41,21],[72,24,41,24,"convInfo"],[72,32,41,32],[72,33,41,33,"batchSize"],[72,42,41,42],[72,44,41,44],[72,46,41,46,"b"],[72,47,41,47],[72,49,41,49],[73,6,42,8],[73,12,42,14,"xOffset1"],[73,20,42,22],[73,23,42,25,"b"],[73,24,42,26],[73,27,42,29,"xStrides"],[73,35,42,37],[73,36,42,38],[73,37,42,39],[73,38,42,40],[74,6,43,8],[74,12,43,14,"yOffset1"],[74,20,43,22],[74,23,43,25,"b"],[74,24,43,26],[74,27,43,29,"y"],[74,28,43,30],[74,29,43,31,"strides"],[74,36,43,38],[74,37,43,39],[74,38,43,40],[74,39,43,41],[75,6,44,8],[75,11,44,13],[75,15,44,17,"yR"],[75,17,44,19],[75,20,44,22],[75,21,44,23],[75,23,44,25,"yR"],[75,25,44,27],[75,28,44,30,"convInfo"],[75,36,44,38],[75,37,44,39,"outHeight"],[75,46,44,48],[75,48,44,50],[75,50,44,52,"yR"],[75,52,44,54],[75,54,44,56],[76,8,45,12],[76,14,45,18,"yOffset2"],[76,22,45,26],[76,25,45,29,"yOffset1"],[76,33,45,37],[76,36,45,40,"yR"],[76,38,45,42],[76,41,45,45,"y"],[76,42,45,46],[76,43,45,47,"strides"],[76,50,45,54],[76,51,45,55],[76,52,45,56],[76,53,45,57],[77,8,46,12],[77,14,46,18,"xRCorner"],[77,22,46,26],[77,25,46,29,"yR"],[77,27,46,31],[77,30,46,34,"convInfo"],[77,38,46,42],[77,39,46,43,"strideHeight"],[77,51,46,55],[77,54,46,58,"padTop"],[77,60,46,64],[78,8,47,12],[78,13,47,17],[78,17,47,21,"wR"],[78,19,47,23],[78,22,47,26],[78,23,47,27],[78,25,47,29,"wR"],[78,27,47,31],[78,30,47,34,"filterHeight"],[78,42,47,46],[78,44,47,48],[78,46,47,50,"wR"],[78,48,47,52],[78,50,47,54],[79,10,48,16],[79,16,48,22,"xR"],[79,18,48,24],[79,21,48,27,"xRCorner"],[79,29,48,35],[79,32,48,38,"wR"],[79,34,48,40],[79,37,48,43,"dilationHeight"],[79,51,48,57],[80,10,49,16],[80,14,49,20,"xR"],[80,16,49,22],[80,19,49,25],[80,20,49,26],[80,24,49,30,"xR"],[80,26,49,32],[80,30,49,36,"convInfo"],[80,38,49,44],[80,39,49,45,"inHeight"],[80,47,49,53],[80,49,49,55],[81,12,50,20],[82,10,51,16],[83,10,52,16],[83,16,52,22,"wOffset1"],[83,24,52,30],[83,27,52,33,"wR"],[83,29,52,35],[83,32,52,38,"filterStrides"],[83,45,52,51],[83,46,52,52],[83,47,52,53],[83,48,52,54],[84,10,53,16],[84,16,53,22,"xOffset2"],[84,24,53,30],[84,27,53,33,"xOffset1"],[84,35,53,41],[84,38,53,44,"xR"],[84,40,53,46],[84,43,53,49,"xStrides"],[84,51,53,57],[84,52,53,58],[84,53,53,59],[84,54,53,60],[85,10,54,16],[85,15,54,21],[85,19,54,25,"yC"],[85,21,54,27],[85,24,54,30],[85,25,54,31],[85,27,54,33,"yC"],[85,29,54,35],[85,32,54,38,"convInfo"],[85,40,54,46],[85,41,54,47,"outWidth"],[85,49,54,55],[85,51,54,57],[85,53,54,59,"yC"],[85,55,54,61],[85,57,54,63],[86,12,55,20],[86,18,55,26,"yOffset3"],[86,26,55,34],[86,29,55,37,"yOffset2"],[86,37,55,45],[86,40,55,48,"yC"],[86,42,55,50],[86,45,55,53,"y"],[86,46,55,54],[86,47,55,55,"strides"],[86,54,55,62],[86,55,55,63],[86,56,55,64],[86,57,55,65],[87,12,56,20],[87,18,56,26,"xCCorner"],[87,26,56,34],[87,29,56,37,"yC"],[87,31,56,39],[87,34,56,42,"convInfo"],[87,42,56,50],[87,43,56,51,"strideWidth"],[87,54,56,62],[87,57,56,65,"padLeft"],[87,64,56,72],[88,12,57,20],[88,17,57,25],[88,21,57,29,"wC"],[88,23,57,31],[88,26,57,34],[88,27,57,35],[88,29,57,37,"wC"],[88,31,57,39],[88,34,57,42,"filterWidth"],[88,45,57,53],[88,47,57,55],[88,49,57,57,"wC"],[88,51,57,59],[88,53,57,61],[89,14,58,24],[89,20,58,30,"xC"],[89,22,58,32],[89,25,58,35,"xCCorner"],[89,33,58,43],[89,36,58,46,"wC"],[89,38,58,48],[89,41,58,51,"dilationWidth"],[89,54,58,64],[90,14,59,24],[90,18,59,28,"xC"],[90,20,59,30],[90,23,59,33],[90,24,59,34],[90,28,59,38,"xC"],[90,30,59,40],[90,34,59,44,"convInfo"],[90,42,59,52],[90,43,59,53,"inWidth"],[90,50,59,60],[90,52,59,62],[91,16,60,28],[92,14,61,24],[93,14,62,24],[93,20,62,30,"wOffset2"],[93,28,62,38],[93,31,62,41,"wOffset1"],[93,39,62,49],[93,42,62,52,"wC"],[93,44,62,54],[93,47,62,57,"filterStrides"],[93,60,62,70],[93,61,62,71],[93,62,62,72],[93,63,62,73],[94,14,63,24],[94,20,63,30,"xOffset3"],[94,28,63,38],[94,31,63,41,"xOffset2"],[94,39,63,49],[94,42,63,52,"xC"],[94,44,63,54],[94,47,63,57,"convInfo"],[94,55,63,65],[94,56,63,66,"inChannels"],[94,66,63,76],[95,14,64,24],[95,18,64,28,"yOffset4"],[95,26,64,36],[95,29,64,39,"yOffset3"],[95,37,64,47],[96,14,65,24],[96,18,65,28,"wOffset3"],[96,26,65,36],[96,29,65,39,"wOffset2"],[96,37,65,47],[97,14,66,24],[97,19,66,29],[97,23,66,33,"d1"],[97,25,66,35],[97,28,66,38],[97,29,66,39],[97,31,66,41,"d1"],[97,33,66,43],[97,36,66,46,"convInfo"],[97,44,66,54],[97,45,66,55,"inChannels"],[97,55,66,65],[97,57,66,67],[97,59,66,69,"d1"],[97,61,66,71],[97,63,66,73],[98,16,67,28],[98,22,67,34,"xVal"],[98,26,67,38],[98,29,67,41,"xVals"],[98,34,67,46],[98,35,67,47,"xOffset3"],[98,43,67,55],[98,46,67,58,"d1"],[98,48,67,60],[98,49,67,61],[99,16,68,28],[99,21,68,33],[99,25,68,37,"q"],[99,26,68,38],[99,29,68,41],[99,30,68,42],[99,32,68,44,"q"],[99,33,68,45],[99,36,68,48,"chMul"],[99,41,68,53],[99,43,68,55],[99,45,68,57,"q"],[99,46,68,58],[99,48,68,60],[100,18,69,32,"yVals"],[100,23,69,37],[100,24,69,38,"yOffset4"],[100,32,69,46],[100,35,69,49,"q"],[100,36,69,50],[100,37,69,51],[100,41,69,55,"xVal"],[100,45,69,59],[100,48,69,62,"wVals"],[100,53,69,67],[100,54,69,68,"wOffset3"],[100,62,69,76],[100,65,69,79,"q"],[100,66,69,80],[100,67,69,81],[101,16,70,28],[102,16,71,28,"yOffset4"],[102,24,71,36],[102,28,71,40,"chMul"],[102,33,71,45],[103,16,72,28,"wOffset3"],[103,24,72,36],[103,28,72,40,"chMul"],[103,33,72,45],[104,14,73,24],[105,12,74,20],[106,10,75,16],[107,8,76,12],[108,6,77,8],[109,4,78,4],[110,4,79,4],[110,11,79,11,"backend"],[110,18,79,18],[110,19,79,19,"makeTensorInfo"],[110,33,79,33],[110,34,79,34,"y"],[110,35,79,35],[110,36,79,36,"shape"],[110,41,79,41],[110,43,79,43,"y"],[110,44,79,44],[110,45,79,45,"dtype"],[110,50,79,50],[110,52,79,52,"y"],[110,53,79,53],[110,54,79,54,"values"],[110,60,79,60],[110,61,79,61],[111,2,80,0],[112,2,81,7],[112,8,81,13,"depthwiseConv2dNativeConfig"],[112,35,81,40],[112,38,81,43],[113,4,82,4,"kernelName"],[113,14,82,14],[113,16,82,16,"DepthwiseConv2dNative"],[113,35,82,37],[113,36,82,37,"DepthwiseConv2dNative"],[113,57,82,37],[114,4,83,4,"backendName"],[114,15,83,15],[114,17,83,17],[114,22,83,22],[115,4,84,4,"kernelFunc"],[115,14,84,14],[115,16,84,16,"depthwiseConv2dNative"],[116,2,85,0],[116,3,85,1],[117,0,85,2],[117,3]],"functionMap":{"names":["<global>","depthwiseConv2dNative","util.assert$argument_1"],"mappings":"AAA;OCkB;kFCW;iEDC;CDiD"},"hasCjsExports":false},"type":"js/module"}]}