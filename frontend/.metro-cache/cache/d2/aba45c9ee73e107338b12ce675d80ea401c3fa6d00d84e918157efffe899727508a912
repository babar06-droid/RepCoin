{"dependencies":[{"name":"../kernel_names","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":38,"index":741}}],"key":"gQVznmdGA0uoBQvR5Q4/qW+ITHg=","exportNames":["*"],"imports":1}},{"name":"../ops/broadcast_util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":742},"end":{"line":18,"column":56,"index":798}}],"key":"Qvkkzd+OEKB4AewZTACLHdeSCuY=","exportNames":["*"],"imports":1}},{"name":"../ops/reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":799},"end":{"line":19,"column":41,"index":840}}],"key":"y6qCHUFGUly5Bq9K/sbHhy1R7kE=","exportNames":["*"],"imports":1}},{"name":"../ops/sum","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":841},"end":{"line":20,"column":33,"index":874}}],"key":"QFu1HORitJ22mTBAu0XhrnhYCVg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"addGradConfig\", {\n    enumerable: true,\n    get: function () {\n      return addGradConfig;\n    }\n  });\n  var _kernel_names = require(_dependencyMap[0], \"../kernel_names\");\n  var _opsBroadcast_util = require(_dependencyMap[1], \"../ops/broadcast_util\");\n  var broadcast_util = _interopNamespace(_opsBroadcast_util);\n  var _opsReshape = require(_dependencyMap[2], \"../ops/reshape\");\n  var _opsSum = require(_dependencyMap[3], \"../ops/sum\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  const addGradConfig = {\n    kernelName: _kernel_names.Add,\n    inputsToSave: ['a', 'b'],\n    gradFunc: (dy, saved) => {\n      const [a, b] = saved;\n      const outShape = broadcast_util.assertAndGetBroadcastShape(a.shape, b.shape);\n      const derA = () => {\n        let res = dy;\n        const reduceAxes = broadcast_util.getReductionAxes(a.shape, outShape);\n        if (reduceAxes.length > 0) {\n          res = (0, _opsSum.sum)(res, reduceAxes);\n        }\n        return (0, _opsReshape.reshape)(res, a.shape);\n      };\n      const derB = () => {\n        let res = dy;\n        const reduceAxes = broadcast_util.getReductionAxes(b.shape, outShape);\n        if (reduceAxes.length > 0) {\n          res = (0, _opsSum.sum)(res, reduceAxes);\n        }\n        return (0, _opsReshape.reshape)(res, b.shape);\n      };\n      return {\n        a: derA,\n        b: derB\n      };\n    }\n  };\n});","lineCount":78,"map":[[22,2,21,0,"Object"],[22,8,21,0],[22,9,21,0,"defineProperty"],[22,23,21,0],[22,24,21,0,"exports"],[22,31,21,0],[23,4,21,0,"enumerable"],[23,14,21,0],[24,4,21,0,"get"],[24,7,21,0],[24,18,21,0,"get"],[24,19,21,0],[25,6,21,0],[25,13,21,0,"addGradConfig"],[25,26,21,0],[26,4,21,0],[27,2,21,0],[28,2,17,0],[28,6,17,0,"_kernel_names"],[28,19,17,0],[28,22,17,0,"require"],[28,29,17,0],[28,30,17,0,"_dependencyMap"],[28,44,17,0],[29,2,18,0],[29,6,18,0,"_opsBroadcast_util"],[29,24,18,0],[29,27,18,0,"require"],[29,34,18,0],[29,35,18,0,"_dependencyMap"],[29,49,18,0],[30,2,18,0],[30,6,18,0,"broadcast_util"],[30,20,18,0],[30,23,18,0,"_interopNamespace"],[30,40,18,0],[30,41,18,0,"_opsBroadcast_util"],[30,59,18,0],[31,2,19,0],[31,6,19,0,"_opsReshape"],[31,17,19,0],[31,20,19,0,"require"],[31,27,19,0],[31,28,19,0,"_dependencyMap"],[31,42,19,0],[32,2,20,0],[32,6,20,0,"_opsSum"],[32,13,20,0],[32,16,20,0,"require"],[32,23,20,0],[32,24,20,0,"_dependencyMap"],[32,38,20,0],[33,2,1,0],[34,0,2,0],[35,0,3,0],[36,0,4,0],[37,0,5,0],[38,0,6,0],[39,0,7,0],[40,0,8,0],[41,0,9,0],[42,0,10,0],[43,0,11,0],[44,0,12,0],[45,0,13,0],[46,0,14,0],[47,0,15,0],[48,0,16,0],[50,2,21,7],[50,8,21,13,"addGradConfig"],[50,21,21,26],[50,24,21,29],[51,4,22,4,"kernelName"],[51,14,22,14],[51,16,22,16,"Add"],[51,29,22,19],[51,30,22,19,"Add"],[51,33,22,19],[52,4,23,4,"inputsToSave"],[52,16,23,16],[52,18,23,18],[52,19,23,19],[52,22,23,22],[52,24,23,24],[52,27,23,27],[52,28,23,28],[53,4,24,4,"gradFunc"],[53,12,24,12],[53,14,24,14,"gradFunc"],[53,15,24,15,"dy"],[53,17,24,17],[53,19,24,19,"saved"],[53,24,24,24],[53,29,24,29],[54,6,25,8],[54,12,25,14],[54,13,25,15,"a"],[54,14,25,16],[54,16,25,18,"b"],[54,17,25,19],[54,18,25,20],[54,21,25,23,"saved"],[54,26,25,28],[55,6,26,8],[55,12,26,14,"outShape"],[55,20,26,22],[55,23,26,25,"broadcast_util"],[55,37,26,39],[55,38,26,40,"assertAndGetBroadcastShape"],[55,64,26,66],[55,65,26,67,"a"],[55,66,26,68],[55,67,26,69,"shape"],[55,72,26,74],[55,74,26,76,"b"],[55,75,26,77],[55,76,26,78,"shape"],[55,81,26,83],[55,82,26,84],[56,6,27,8],[56,12,27,14,"derA"],[56,16,27,18],[56,19,27,21,"derA"],[56,20,27,21],[56,25,27,27],[57,8,28,12],[57,12,28,16,"res"],[57,15,28,19],[57,18,28,22,"dy"],[57,20,28,24],[58,8,29,12],[58,14,29,18,"reduceAxes"],[58,24,29,28],[58,27,29,31,"broadcast_util"],[58,41,29,45],[58,42,29,46,"getReductionAxes"],[58,58,29,62],[58,59,29,63,"a"],[58,60,29,64],[58,61,29,65,"shape"],[58,66,29,70],[58,68,29,72,"outShape"],[58,76,29,80],[58,77,29,81],[59,8,30,12],[59,12,30,16,"reduceAxes"],[59,22,30,26],[59,23,30,27,"length"],[59,29,30,33],[59,32,30,36],[59,33,30,37],[59,35,30,39],[60,10,31,16,"res"],[60,13,31,19],[60,16,31,22],[60,20,31,22,"sum"],[60,27,31,25],[60,28,31,25,"sum"],[60,31,31,25],[60,33,31,26,"res"],[60,36,31,29],[60,38,31,31,"reduceAxes"],[60,48,31,41],[60,49,31,42],[61,8,32,12],[62,8,33,12],[62,15,33,19],[62,19,33,19,"reshape"],[62,30,33,26],[62,31,33,26,"reshape"],[62,38,33,26],[62,40,33,27,"res"],[62,43,33,30],[62,45,33,32,"a"],[62,46,33,33],[62,47,33,34,"shape"],[62,52,33,39],[62,53,33,40],[63,6,34,8],[63,7,34,9],[64,6,35,8],[64,12,35,14,"derB"],[64,16,35,18],[64,19,35,21,"derB"],[64,20,35,21],[64,25,35,27],[65,8,36,12],[65,12,36,16,"res"],[65,15,36,19],[65,18,36,22,"dy"],[65,20,36,24],[66,8,37,12],[66,14,37,18,"reduceAxes"],[66,24,37,28],[66,27,37,31,"broadcast_util"],[66,41,37,45],[66,42,37,46,"getReductionAxes"],[66,58,37,62],[66,59,37,63,"b"],[66,60,37,64],[66,61,37,65,"shape"],[66,66,37,70],[66,68,37,72,"outShape"],[66,76,37,80],[66,77,37,81],[67,8,38,12],[67,12,38,16,"reduceAxes"],[67,22,38,26],[67,23,38,27,"length"],[67,29,38,33],[67,32,38,36],[67,33,38,37],[67,35,38,39],[68,10,39,16,"res"],[68,13,39,19],[68,16,39,22],[68,20,39,22,"sum"],[68,27,39,25],[68,28,39,25,"sum"],[68,31,39,25],[68,33,39,26,"res"],[68,36,39,29],[68,38,39,31,"reduceAxes"],[68,48,39,41],[68,49,39,42],[69,8,40,12],[70,8,41,12],[70,15,41,19],[70,19,41,19,"reshape"],[70,30,41,26],[70,31,41,26,"reshape"],[70,38,41,26],[70,40,41,27,"res"],[70,43,41,30],[70,45,41,32,"b"],[70,46,41,33],[70,47,41,34,"shape"],[70,52,41,39],[70,53,41,40],[71,6,42,8],[71,7,42,9],[72,6,43,8],[72,13,43,15],[73,8,43,17,"a"],[73,9,43,18],[73,11,43,20,"derA"],[73,15,43,24],[74,8,43,26,"b"],[74,9,43,27],[74,11,43,29,"derB"],[75,6,43,34],[75,7,43,35],[76,4,44,4],[77,2,45,0],[77,3,45,1],[78,0,45,2],[78,3]],"functionMap":{"names":["<global>","addGradConfig.gradFunc","derA","derB"],"mappings":"AAA;cCuB;qBCG;SDO;qBEC;SFO;KDE"},"hasCjsExports":false},"type":"js/module"}]}