{"dependencies":[{"name":"./shader_compiler","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":54,"index":757}}],"key":"yVSKlvZSxQn3Ck2puzGVWEYPzq8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"TransposeProgram\", {\n    enumerable: true,\n    get: function () {\n      return TransposeProgram;\n    }\n  });\n  var _shader_compiler = require(_dependencyMap[0], \"./shader_compiler\");\n  /**\n   * @license\n   * Copyright 2017 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  class TransposeProgram {\n    constructor(aShape, newDim) {\n      this.variableNames = ['A'];\n      const outputShape = new Array(aShape.length);\n      for (let i = 0; i < outputShape.length; i++) {\n        outputShape[i] = aShape[newDim[i]];\n      }\n      this.outputShape = outputShape;\n      this.rank = outputShape.length;\n      const dtype = (0, _shader_compiler.getCoordsDataType)(this.rank);\n      const switched = getSwitchedCoords(newDim);\n      this.userCode = `\n    void main() {\n      ${dtype} resRC = getOutputCoords();\n      setOutput(getA(${switched}));\n    }\n    `;\n    }\n  }\n  function getSwitchedCoords(newDim) {\n    const rank = newDim.length;\n    if (rank > 6) {\n      throw Error(`Transpose for rank ${rank} is not yet supported`);\n    }\n    const originalOrder = ['resRC.x', 'resRC.y', 'resRC.z', 'resRC.w', 'resRC.u', 'resRC.v'];\n    const switchedCoords = new Array(rank);\n    for (let i = 0; i < newDim.length; i++) {\n      switchedCoords[newDim[i]] = originalOrder[i];\n    }\n    return switchedCoords.join();\n  }\n});","lineCount":62,"map":[[7,2,18,0,"Object"],[7,8,18,0],[7,9,18,0,"defineProperty"],[7,23,18,0],[7,24,18,0,"exports"],[7,31,18,0],[8,4,18,0,"enumerable"],[8,14,18,0],[9,4,18,0,"get"],[9,7,18,0],[9,18,18,0,"get"],[9,19,18,0],[10,6,18,0],[10,13,18,0,"TransposeProgram"],[10,29,18,0],[11,4,18,0],[12,2,18,0],[13,2,17,0],[13,6,17,0,"_shader_compiler"],[13,22,17,0],[13,25,17,0,"require"],[13,32,17,0],[13,33,17,0,"_dependencyMap"],[13,47,17,0],[14,2,1,0],[15,0,2,0],[16,0,3,0],[17,0,4,0],[18,0,5,0],[19,0,6,0],[20,0,7,0],[21,0,8,0],[22,0,9,0],[23,0,10,0],[24,0,11,0],[25,0,12,0],[26,0,13,0],[27,0,14,0],[28,0,15,0],[29,0,16,0],[31,2,18,7],[31,8,18,13,"TransposeProgram"],[31,24,18,29],[31,25,18,30],[32,4,19,4,"constructor"],[32,15,19,15,"constructor"],[32,16,19,16,"aShape"],[32,22,19,22],[32,24,19,24,"newDim"],[32,30,19,30],[32,32,19,32],[33,6,20,8],[33,10,20,12],[33,11,20,13,"variableNames"],[33,24,20,26],[33,27,20,29],[33,28,20,30],[33,31,20,33],[33,32,20,34],[34,6,21,8],[34,12,21,14,"outputShape"],[34,23,21,25],[34,26,21,28],[34,30,21,32,"Array"],[34,35,21,37],[34,36,21,38,"aShape"],[34,42,21,44],[34,43,21,45,"length"],[34,49,21,51],[34,50,21,52],[35,6,22,8],[35,11,22,13],[35,15,22,17,"i"],[35,16,22,18],[35,19,22,21],[35,20,22,22],[35,22,22,24,"i"],[35,23,22,25],[35,26,22,28,"outputShape"],[35,37,22,39],[35,38,22,40,"length"],[35,44,22,46],[35,46,22,48,"i"],[35,47,22,49],[35,49,22,51],[35,51,22,53],[36,8,23,12,"outputShape"],[36,19,23,23],[36,20,23,24,"i"],[36,21,23,25],[36,22,23,26],[36,25,23,29,"aShape"],[36,31,23,35],[36,32,23,36,"newDim"],[36,38,23,42],[36,39,23,43,"i"],[36,40,23,44],[36,41,23,45],[36,42,23,46],[37,6,24,8],[38,6,25,8],[38,10,25,12],[38,11,25,13,"outputShape"],[38,22,25,24],[38,25,25,27,"outputShape"],[38,36,25,38],[39,6,26,8],[39,10,26,12],[39,11,26,13,"rank"],[39,15,26,17],[39,18,26,20,"outputShape"],[39,29,26,31],[39,30,26,32,"length"],[39,36,26,38],[40,6,27,8],[40,12,27,14,"dtype"],[40,17,27,19],[40,20,27,22],[40,24,27,22,"getCoordsDataType"],[40,40,27,39],[40,41,27,39,"getCoordsDataType"],[40,58,27,39],[40,60,27,40],[40,64,27,44],[40,65,27,45,"rank"],[40,69,27,49],[40,70,27,50],[41,6,28,8],[41,12,28,14,"switched"],[41,20,28,22],[41,23,28,25,"getSwitchedCoords"],[41,40,28,42],[41,41,28,43,"newDim"],[41,47,28,49],[41,48,28,50],[42,6,29,8],[42,10,29,12],[42,11,29,13,"userCode"],[42,19,29,21],[42,22,29,24],[43,0,30,0],[44,0,31,0],[44,8,31,8,"dtype"],[44,13,31,13],[45,0,32,0],[45,23,32,23,"switched"],[45,31,32,31],[46,0,33,0],[47,0,34,0],[47,5,34,5],[48,4,35,4],[49,2,36,0],[50,2,37,0],[50,11,37,9,"getSwitchedCoords"],[50,28,37,26,"getSwitchedCoords"],[50,29,37,27,"newDim"],[50,35,37,33],[50,37,37,35],[51,4,38,4],[51,10,38,10,"rank"],[51,14,38,14],[51,17,38,17,"newDim"],[51,23,38,23],[51,24,38,24,"length"],[51,30,38,30],[52,4,39,4],[52,8,39,8,"rank"],[52,12,39,12],[52,15,39,15],[52,16,39,16],[52,18,39,18],[53,6,40,8],[53,12,40,14,"Error"],[53,17,40,19],[53,18,40,20],[53,40,40,42,"rank"],[53,44,40,46],[53,67,40,69],[53,68,40,70],[54,4,41,4],[55,4,42,4],[55,10,42,10,"originalOrder"],[55,23,42,23],[55,26,42,26],[55,27,42,27],[55,36,42,36],[55,38,42,38],[55,47,42,47],[55,49,42,49],[55,58,42,58],[55,60,42,60],[55,69,42,69],[55,71,42,71],[55,80,42,80],[55,82,42,82],[55,91,42,91],[55,92,42,92],[56,4,43,4],[56,10,43,10,"switchedCoords"],[56,24,43,24],[56,27,43,27],[56,31,43,31,"Array"],[56,36,43,36],[56,37,43,37,"rank"],[56,41,43,41],[56,42,43,42],[57,4,44,4],[57,9,44,9],[57,13,44,13,"i"],[57,14,44,14],[57,17,44,17],[57,18,44,18],[57,20,44,20,"i"],[57,21,44,21],[57,24,44,24,"newDim"],[57,30,44,30],[57,31,44,31,"length"],[57,37,44,37],[57,39,44,39,"i"],[57,40,44,40],[57,42,44,42],[57,44,44,44],[58,6,45,8,"switchedCoords"],[58,20,45,22],[58,21,45,23,"newDim"],[58,27,45,29],[58,28,45,30,"i"],[58,29,45,31],[58,30,45,32],[58,31,45,33],[58,34,45,36,"originalOrder"],[58,47,45,49],[58,48,45,50,"i"],[58,49,45,51],[58,50,45,52],[59,4,46,4],[60,4,47,4],[60,11,47,11,"switchedCoords"],[60,25,47,25],[60,26,47,26,"join"],[60,30,47,30],[60,31,47,31],[60,32,47,32],[61,2,48,0],[62,0,48,1],[62,3]],"functionMap":{"names":["<global>","TransposeProgram","TransposeProgram#constructor","getSwitchedCoords"],"mappings":"AAA;OCiB;ICC;KDgB;CDC;AGC;CHW"},"hasCjsExports":false},"type":"js/module"}]}