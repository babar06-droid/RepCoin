{"dependencies":[{"name":"../tensor_util_env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":53,"index":756}}],"key":"UCKDOr/oOGi3nbD26ZhyAVW61qk=","exportNames":["*"],"imports":1}},{"name":"../util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":757},"end":{"line":18,"column":41,"index":798}}],"key":"DTmef1GE5grNQfsvpIzpBlINy9c=","exportNames":["*"],"imports":1}},{"name":"./add","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":799},"end":{"line":19,"column":28,"index":827}}],"key":"YzBaFStBt+uixjzrdu0NxJdBO+o=","exportNames":["*"],"imports":1}},{"name":"./axis_util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":828},"end":{"line":20,"column":51,"index":879}}],"key":"4goIhVnwcQ24SxuvwnoXdjHGuWs=","exportNames":["*"],"imports":1}},{"name":"./exp","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":880},"end":{"line":21,"column":28,"index":908}}],"key":"jtMdSIwu+u1bXGmrC5ls/G2TS5Q=","exportNames":["*"],"imports":1}},{"name":"./log","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":22,"column":0,"index":909},"end":{"line":22,"column":28,"index":937}}],"key":"zf+SD6oa8OIE8y54WLpxZOp3BAY=","exportNames":["*"],"imports":1}},{"name":"./max","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":23,"column":0,"index":938},"end":{"line":23,"column":28,"index":966}}],"key":"hxjdRchNojNlQP8qA8o5UfwpUy4=","exportNames":["*"],"imports":1}},{"name":"./operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":24,"column":0,"index":967},"end":{"line":24,"column":33,"index":1000}}],"key":"lmmEAb6oR3TWnrsrETceKUovfkM=","exportNames":["*"],"imports":1}},{"name":"./reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":25,"column":0,"index":1001},"end":{"line":25,"column":36,"index":1037}}],"key":"dz8GCsFShMGnHX1Wj7bBySjBnSE=","exportNames":["*"],"imports":1}},{"name":"./sub","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":26,"column":0,"index":1038},"end":{"line":26,"column":28,"index":1066}}],"key":"17GB/TfX+vYDBMGz0tnC+fKFzbE=","exportNames":["*"],"imports":1}},{"name":"./sum","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":27,"column":0,"index":1067},"end":{"line":27,"column":28,"index":1095}}],"key":"z5+UEKYm7EPFOvDayPGqJL+s3oY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"logSumExp\", {\n    enumerable: true,\n    get: function () {\n      return logSumExp;\n    }\n  });\n  var _tensor_util_env = require(_dependencyMap[0], \"../tensor_util_env\");\n  var _util = require(_dependencyMap[1], \"../util\");\n  var _add = require(_dependencyMap[2], \"./add\");\n  var _axis_util = require(_dependencyMap[3], \"./axis_util\");\n  var _exp = require(_dependencyMap[4], \"./exp\");\n  var _log = require(_dependencyMap[5], \"./log\");\n  var _max = require(_dependencyMap[6], \"./max\");\n  var _operation = require(_dependencyMap[7], \"./operation\");\n  var _reshape = require(_dependencyMap[8], \"./reshape\");\n  var _sub = require(_dependencyMap[9], \"./sub\");\n  var _sum = require(_dependencyMap[10], \"./sum\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  /**\n   * Computes the log(sum(exp(elements across the reduction dimensions))).\n   *\n   * Reduces the input along the dimensions given in `axis`. Unless `keepDims`\n   * is true, the rank of the array is reduced by 1 for each entry in `axis`.\n   * If `keepDims` is true, the reduced dimensions are retained with length 1.\n   * If `axis` has no entries, all dimensions are reduced, and an array with a\n   * single element is returned.\n   *\n   * ```js\n   * const x = tf.tensor1d([1, 2, 3]);\n   *\n   * x.logSumExp().print();  // or tf.logSumExp(x)\n   * ```\n   *\n   * ```js\n   * const x = tf.tensor2d([1, 2, 3, 4], [2, 2]);\n   *\n   * const axis = 1;\n   * x.logSumExp(axis).print();  // or tf.logSumExp(a, axis)\n   * ```\n   * @param x The input tensor.\n   * @param axis The dimension(s) to reduce. If null (the default),\n   *     reduces all dimensions.\n   * @param keepDims If true, retains reduced dimensions with length\n   *     of 1. Defaults to false.\n   *\n   * @doc {heading: 'Operations', subheading: 'Reduction'}\n   */\n  function logSumExp_(x, axis = null, keepDims = false) {\n    const $x = (0, _tensor_util_env.convertToTensor)(x, 'x', 'logSumExp');\n    const axes = (0, _util.parseAxisParam)(axis, $x.shape);\n    const xMax = (0, _max.max)($x, axes, true /* keepDims */);\n    const a = (0, _sub.sub)($x, xMax);\n    const b = (0, _exp.exp)(a);\n    const c = (0, _sum.sum)(b, axes);\n    const d = (0, _log.log)(c);\n    const res = (0, _add.add)((0, _reshape.reshape)(xMax, d.shape), d);\n    if (keepDims) {\n      const newShape = (0, _axis_util.expandShapeToKeepDim)(res.shape, axes);\n      return (0, _reshape.reshape)(res, newShape);\n    }\n    return res;\n  }\n  const logSumExp = /* @__PURE__ */(0, _operation.op)({\n    logSumExp_\n  });\n});","lineCount":88,"map":[[7,2,72,0,"Object"],[7,8,72,0],[7,9,72,0,"defineProperty"],[7,23,72,0],[7,24,72,0,"exports"],[7,31,72,0],[8,4,72,0,"enumerable"],[8,14,72,0],[9,4,72,0,"get"],[9,7,72,0],[9,18,72,0,"get"],[9,19,72,0],[10,6,72,0],[10,13,72,0,"logSumExp"],[10,22,72,0],[11,4,72,0],[12,2,72,0],[13,2,17,0],[13,6,17,0,"_tensor_util_env"],[13,22,17,0],[13,25,17,0,"require"],[13,32,17,0],[13,33,17,0,"_dependencyMap"],[13,47,17,0],[14,2,18,0],[14,6,18,0,"_util"],[14,11,18,0],[14,14,18,0,"require"],[14,21,18,0],[14,22,18,0,"_dependencyMap"],[14,36,18,0],[15,2,19,0],[15,6,19,0,"_add"],[15,10,19,0],[15,13,19,0,"require"],[15,20,19,0],[15,21,19,0,"_dependencyMap"],[15,35,19,0],[16,2,20,0],[16,6,20,0,"_axis_util"],[16,16,20,0],[16,19,20,0,"require"],[16,26,20,0],[16,27,20,0,"_dependencyMap"],[16,41,20,0],[17,2,21,0],[17,6,21,0,"_exp"],[17,10,21,0],[17,13,21,0,"require"],[17,20,21,0],[17,21,21,0,"_dependencyMap"],[17,35,21,0],[18,2,22,0],[18,6,22,0,"_log"],[18,10,22,0],[18,13,22,0,"require"],[18,20,22,0],[18,21,22,0,"_dependencyMap"],[18,35,22,0],[19,2,23,0],[19,6,23,0,"_max"],[19,10,23,0],[19,13,23,0,"require"],[19,20,23,0],[19,21,23,0,"_dependencyMap"],[19,35,23,0],[20,2,24,0],[20,6,24,0,"_operation"],[20,16,24,0],[20,19,24,0,"require"],[20,26,24,0],[20,27,24,0,"_dependencyMap"],[20,41,24,0],[21,2,25,0],[21,6,25,0,"_reshape"],[21,14,25,0],[21,17,25,0,"require"],[21,24,25,0],[21,25,25,0,"_dependencyMap"],[21,39,25,0],[22,2,26,0],[22,6,26,0,"_sub"],[22,10,26,0],[22,13,26,0,"require"],[22,20,26,0],[22,21,26,0,"_dependencyMap"],[22,35,26,0],[23,2,27,0],[23,6,27,0,"_sum"],[23,10,27,0],[23,13,27,0,"require"],[23,20,27,0],[23,21,27,0,"_dependencyMap"],[23,35,27,0],[24,2,1,0],[25,0,2,0],[26,0,3,0],[27,0,4,0],[28,0,5,0],[29,0,6,0],[30,0,7,0],[31,0,8,0],[32,0,9,0],[33,0,10,0],[34,0,11,0],[35,0,12,0],[36,0,13,0],[37,0,14,0],[38,0,15,0],[39,0,16,0],[41,2,28,0],[42,0,29,0],[43,0,30,0],[44,0,31,0],[45,0,32,0],[46,0,33,0],[47,0,34,0],[48,0,35,0],[49,0,36,0],[50,0,37,0],[51,0,38,0],[52,0,39,0],[53,0,40,0],[54,0,41,0],[55,0,42,0],[56,0,43,0],[57,0,44,0],[58,0,45,0],[59,0,46,0],[60,0,47,0],[61,0,48,0],[62,0,49,0],[63,0,50,0],[64,0,51,0],[65,0,52,0],[66,0,53,0],[67,0,54,0],[68,0,55,0],[69,0,56,0],[70,2,57,0],[70,11,57,9,"logSumExp_"],[70,21,57,19,"logSumExp_"],[70,22,57,20,"x"],[70,23,57,21],[70,25,57,23,"axis"],[70,29,57,27],[70,32,57,30],[70,36,57,34],[70,38,57,36,"keepDims"],[70,46,57,44],[70,49,57,47],[70,54,57,52],[70,56,57,54],[71,4,58,4],[71,10,58,10,"$x"],[71,12,58,12],[71,15,58,15],[71,19,58,15,"convertToTensor"],[71,35,58,30],[71,36,58,30,"convertToTensor"],[71,51,58,30],[71,53,58,31,"x"],[71,54,58,32],[71,56,58,34],[71,59,58,37],[71,61,58,39],[71,72,58,50],[71,73,58,51],[72,4,59,4],[72,10,59,10,"axes"],[72,14,59,14],[72,17,59,17],[72,21,59,17,"parseAxisParam"],[72,26,59,31],[72,27,59,31,"parseAxisParam"],[72,41,59,31],[72,43,59,32,"axis"],[72,47,59,36],[72,49,59,38,"$x"],[72,51,59,40],[72,52,59,41,"shape"],[72,57,59,46],[72,58,59,47],[73,4,60,4],[73,10,60,10,"xMax"],[73,14,60,14],[73,17,60,17],[73,21,60,17,"max"],[73,25,60,20],[73,26,60,20,"max"],[73,29,60,20],[73,31,60,21,"$x"],[73,33,60,23],[73,35,60,25,"axes"],[73,39,60,29],[73,41,60,31],[73,45,60,35],[73,46,60,36],[73,60,60,50],[73,61,60,51],[74,4,61,4],[74,10,61,10,"a"],[74,11,61,11],[74,14,61,14],[74,18,61,14,"sub"],[74,22,61,17],[74,23,61,17,"sub"],[74,26,61,17],[74,28,61,18,"$x"],[74,30,61,20],[74,32,61,22,"xMax"],[74,36,61,26],[74,37,61,27],[75,4,62,4],[75,10,62,10,"b"],[75,11,62,11],[75,14,62,14],[75,18,62,14,"exp"],[75,22,62,17],[75,23,62,17,"exp"],[75,26,62,17],[75,28,62,18,"a"],[75,29,62,19],[75,30,62,20],[76,4,63,4],[76,10,63,10,"c"],[76,11,63,11],[76,14,63,14],[76,18,63,14,"sum"],[76,22,63,17],[76,23,63,17,"sum"],[76,26,63,17],[76,28,63,18,"b"],[76,29,63,19],[76,31,63,21,"axes"],[76,35,63,25],[76,36,63,26],[77,4,64,4],[77,10,64,10,"d"],[77,11,64,11],[77,14,64,14],[77,18,64,14,"log"],[77,22,64,17],[77,23,64,17,"log"],[77,26,64,17],[77,28,64,18,"c"],[77,29,64,19],[77,30,64,20],[78,4,65,4],[78,10,65,10,"res"],[78,13,65,13],[78,16,65,16],[78,20,65,16,"add"],[78,24,65,19],[78,25,65,19,"add"],[78,28,65,19],[78,30,65,20],[78,34,65,20,"reshape"],[78,42,65,27],[78,43,65,27,"reshape"],[78,50,65,27],[78,52,65,28,"xMax"],[78,56,65,32],[78,58,65,34,"d"],[78,59,65,35],[78,60,65,36,"shape"],[78,65,65,41],[78,66,65,42],[78,68,65,44,"d"],[78,69,65,45],[78,70,65,46],[79,4,66,4],[79,8,66,8,"keepDims"],[79,16,66,16],[79,18,66,18],[80,6,67,8],[80,12,67,14,"newShape"],[80,20,67,22],[80,23,67,25],[80,27,67,25,"expandShapeToKeepDim"],[80,37,67,45],[80,38,67,45,"expandShapeToKeepDim"],[80,58,67,45],[80,60,67,46,"res"],[80,63,67,49],[80,64,67,50,"shape"],[80,69,67,55],[80,71,67,57,"axes"],[80,75,67,61],[80,76,67,62],[81,6,68,8],[81,13,68,15],[81,17,68,15,"reshape"],[81,25,68,22],[81,26,68,22,"reshape"],[81,33,68,22],[81,35,68,23,"res"],[81,38,68,26],[81,40,68,28,"newShape"],[81,48,68,36],[81,49,68,37],[82,4,69,4],[83,4,70,4],[83,11,70,11,"res"],[83,14,70,14],[84,2,71,0],[85,2,72,7],[85,8,72,13,"logSumExp"],[85,17,72,22],[85,20,72,25],[85,35,72,41],[85,39,72,41,"op"],[85,49,72,43],[85,50,72,43,"op"],[85,52,72,43],[85,54,72,44],[86,4,72,46,"logSumExp_"],[87,2,72,57],[87,3,72,58],[87,4,72,59],[88,0,72,60],[88,3]],"functionMap":{"names":["<global>","logSumExp_"],"mappings":"AAA;ACwD;CDc"},"hasCjsExports":false},"type":"js/module"}]}