{"dependencies":[{"name":"../engine","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":35,"index":738}}],"key":"zbTTi8rtwr8rjl75PzEo829Yvss=","exportNames":["*"],"imports":1}},{"name":"../kernel_names","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":739},"end":{"line":18,"column":48,"index":787}}],"key":"gQVznmdGA0uoBQvR5Q4/qW+ITHg=","exportNames":["*"],"imports":1}},{"name":"../tensor_util_env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":788},"end":{"line":19,"column":53,"index":841}}],"key":"UCKDOr/oOGi3nbD26ZhyAVW61qk=","exportNames":["*"],"imports":1}},{"name":"../util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":842},"end":{"line":20,"column":32,"index":874}}],"key":"DTmef1GE5grNQfsvpIzpBlINy9c=","exportNames":["*"],"imports":1}},{"name":"./conv_util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":875},"end":{"line":21,"column":56,"index":931}}],"key":"INQe0zbIADI7uIipkS0WmYFlLZ8=","exportNames":["*"],"imports":1}},{"name":"./operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":22,"column":0,"index":932},"end":{"line":22,"column":33,"index":965}}],"key":"lmmEAb6oR3TWnrsrETceKUovfkM=","exportNames":["*"],"imports":1}},{"name":"./reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":23,"column":0,"index":966},"end":{"line":23,"column":36,"index":1002}}],"key":"dz8GCsFShMGnHX1Wj7bBySjBnSE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"avgPool3dGrad\", {\n    enumerable: true,\n    get: function () {\n      return avgPool3dGrad;\n    }\n  });\n  var _engine = require(_dependencyMap[0], \"../engine\");\n  var _kernel_names = require(_dependencyMap[1], \"../kernel_names\");\n  var _tensor_util_env = require(_dependencyMap[2], \"../tensor_util_env\");\n  var _util = require(_dependencyMap[3], \"../util\");\n  var util = _interopNamespace(_util);\n  var _conv_util = require(_dependencyMap[4], \"./conv_util\");\n  var _operation = require(_dependencyMap[5], \"./operation\");\n  var _reshape = require(_dependencyMap[6], \"./reshape\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  /**\n   * Computes the backprop of a 3d avg pool.\n   *\n   * @param dy The dy error, of rank 5 of shape\n   *     [batchSize, depth, height, width, channels].\n   * assumed.\n   * @param input The original input image, of rank 5 or rank4 of shape\n   *     [batchSize, depth, height, width, channels].\n   * @param filterSize The filter size:\n   *     `[filterDepth, filterHeight, filterWidth]`.\n   *     `filterSize` is a single number,\n   *     then `filterDepth == filterHeight == filterWidth`.\n   * @param strides The strides of the pooling:\n   *     `[strideDepth, strideHeight, strideWidth]`. If\n   *     `strides` is a single number, then `strideHeight == strideWidth`.\n   * @param pad A string from: 'same', 'valid'. The type of padding algorithm\n   *     used in the forward prop of the op.\n   * @param dimRoundingMode A string from: 'ceil', 'round', 'floor'. If none is\n   *     provided, it will default to truncate.\n   */\n  function avgPool3dGrad_(dy, input, filterSize, strides, pad, dimRoundingMode) {\n    const $dy = (0, _tensor_util_env.convertToTensor)(dy, 'dy', 'avgPool3dGrad');\n    const $input = (0, _tensor_util_env.convertToTensor)(input, 'input', 'avgPool3dGrad');\n    let dy5D = $dy;\n    let input5D = $input;\n    let reshapedTo5D = false;\n    if ($input.rank === 4) {\n      reshapedTo5D = true;\n      dy5D = (0, _reshape.reshape)($dy, [1, $dy.shape[0], $dy.shape[1], $dy.shape[2], $dy.shape[3]]);\n      input5D = (0, _reshape.reshape)($input, [1, $input.shape[0], $input.shape[1], $input.shape[2], $input.shape[3]]);\n    }\n    util.assert(dy5D.rank === 5, () => `Error in avgPool3dGrad: dy must be rank 5 but got rank ` + `${dy5D.rank}.`);\n    util.assert(input5D.rank === 5, () => `Error in avgPool3dGrad: input must be rank 5 but got rank ` + `${input5D.rank}.`);\n    (0, _conv_util.checkPadOnDimRoundingMode)('avgPool3dGrad', pad, dimRoundingMode);\n    const inputs = {\n      dy: dy5D,\n      input: input5D\n    };\n    const attrs = {\n      filterSize,\n      strides,\n      pad,\n      dimRoundingMode\n    };\n    // tslint:disable-next-line: no-unnecessary-type-assertion\n    const res = _engine.ENGINE.runKernel(_kernel_names.AvgPool3DGrad, inputs, attrs);\n    if (reshapedTo5D) {\n      return (0, _reshape.reshape)(res, [res.shape[1], res.shape[2], res.shape[3], res.shape[4]]);\n    }\n    return res;\n  }\n  const avgPool3dGrad = /* @__PURE__ */(0, _operation.op)({\n    avgPool3dGrad_\n  });\n});","lineCount":107,"map":[[22,2,71,0,"Object"],[22,8,71,0],[22,9,71,0,"defineProperty"],[22,23,71,0],[22,24,71,0,"exports"],[22,31,71,0],[23,4,71,0,"enumerable"],[23,14,71,0],[24,4,71,0,"get"],[24,7,71,0],[24,18,71,0,"get"],[24,19,71,0],[25,6,71,0],[25,13,71,0,"avgPool3dGrad"],[25,26,71,0],[26,4,71,0],[27,2,71,0],[28,2,17,0],[28,6,17,0,"_engine"],[28,13,17,0],[28,16,17,0,"require"],[28,23,17,0],[28,24,17,0,"_dependencyMap"],[28,38,17,0],[29,2,18,0],[29,6,18,0,"_kernel_names"],[29,19,18,0],[29,22,18,0,"require"],[29,29,18,0],[29,30,18,0,"_dependencyMap"],[29,44,18,0],[30,2,19,0],[30,6,19,0,"_tensor_util_env"],[30,22,19,0],[30,25,19,0,"require"],[30,32,19,0],[30,33,19,0,"_dependencyMap"],[30,47,19,0],[31,2,20,0],[31,6,20,0,"_util"],[31,11,20,0],[31,14,20,0,"require"],[31,21,20,0],[31,22,20,0,"_dependencyMap"],[31,36,20,0],[32,2,20,0],[32,6,20,0,"util"],[32,10,20,0],[32,13,20,0,"_interopNamespace"],[32,30,20,0],[32,31,20,0,"_util"],[32,36,20,0],[33,2,21,0],[33,6,21,0,"_conv_util"],[33,16,21,0],[33,19,21,0,"require"],[33,26,21,0],[33,27,21,0,"_dependencyMap"],[33,41,21,0],[34,2,22,0],[34,6,22,0,"_operation"],[34,16,22,0],[34,19,22,0,"require"],[34,26,22,0],[34,27,22,0,"_dependencyMap"],[34,41,22,0],[35,2,23,0],[35,6,23,0,"_reshape"],[35,14,23,0],[35,17,23,0,"require"],[35,24,23,0],[35,25,23,0,"_dependencyMap"],[35,39,23,0],[36,2,1,0],[37,0,2,0],[38,0,3,0],[39,0,4,0],[40,0,5,0],[41,0,6,0],[42,0,7,0],[43,0,8,0],[44,0,9,0],[45,0,10,0],[46,0,11,0],[47,0,12,0],[48,0,13,0],[49,0,14,0],[50,0,15,0],[51,0,16,0],[53,2,24,0],[54,0,25,0],[55,0,26,0],[56,0,27,0],[57,0,28,0],[58,0,29,0],[59,0,30,0],[60,0,31,0],[61,0,32,0],[62,0,33,0],[63,0,34,0],[64,0,35,0],[65,0,36,0],[66,0,37,0],[67,0,38,0],[68,0,39,0],[69,0,40,0],[70,0,41,0],[71,0,42,0],[72,0,43,0],[73,2,44,0],[73,11,44,9,"avgPool3dGrad_"],[73,25,44,23,"avgPool3dGrad_"],[73,26,44,24,"dy"],[73,28,44,26],[73,30,44,28,"input"],[73,35,44,33],[73,37,44,35,"filterSize"],[73,47,44,45],[73,49,44,47,"strides"],[73,56,44,54],[73,58,44,56,"pad"],[73,61,44,59],[73,63,44,61,"dimRoundingMode"],[73,78,44,76],[73,80,44,78],[74,4,45,4],[74,10,45,10,"$dy"],[74,13,45,13],[74,16,45,16],[74,20,45,16,"convertToTensor"],[74,36,45,31],[74,37,45,31,"convertToTensor"],[74,52,45,31],[74,54,45,32,"dy"],[74,56,45,34],[74,58,45,36],[74,62,45,40],[74,64,45,42],[74,79,45,57],[74,80,45,58],[75,4,46,4],[75,10,46,10,"$input"],[75,16,46,16],[75,19,46,19],[75,23,46,19,"convertToTensor"],[75,39,46,34],[75,40,46,34,"convertToTensor"],[75,55,46,34],[75,57,46,35,"input"],[75,62,46,40],[75,64,46,42],[75,71,46,49],[75,73,46,51],[75,88,46,66],[75,89,46,67],[76,4,47,4],[76,8,47,8,"dy5D"],[76,12,47,12],[76,15,47,15,"$dy"],[76,18,47,18],[77,4,48,4],[77,8,48,8,"input5D"],[77,15,48,15],[77,18,48,18,"$input"],[77,24,48,24],[78,4,49,4],[78,8,49,8,"reshapedTo5D"],[78,20,49,20],[78,23,49,23],[78,28,49,28],[79,4,50,4],[79,8,50,8,"$input"],[79,14,50,14],[79,15,50,15,"rank"],[79,19,50,19],[79,24,50,24],[79,25,50,25],[79,27,50,27],[80,6,51,8,"reshapedTo5D"],[80,18,51,20],[80,21,51,23],[80,25,51,27],[81,6,52,8,"dy5D"],[81,10,52,12],[81,13,52,15],[81,17,52,15,"reshape"],[81,25,52,22],[81,26,52,22,"reshape"],[81,33,52,22],[81,35,52,23,"$dy"],[81,38,52,26],[81,40,52,28],[81,41,52,29],[81,42,52,30],[81,44,52,32,"$dy"],[81,47,52,35],[81,48,52,36,"shape"],[81,53,52,41],[81,54,52,42],[81,55,52,43],[81,56,52,44],[81,58,52,46,"$dy"],[81,61,52,49],[81,62,52,50,"shape"],[81,67,52,55],[81,68,52,56],[81,69,52,57],[81,70,52,58],[81,72,52,60,"$dy"],[81,75,52,63],[81,76,52,64,"shape"],[81,81,52,69],[81,82,52,70],[81,83,52,71],[81,84,52,72],[81,86,52,74,"$dy"],[81,89,52,77],[81,90,52,78,"shape"],[81,95,52,83],[81,96,52,84],[81,97,52,85],[81,98,52,86],[81,99,52,87],[81,100,52,88],[82,6,53,8,"input5D"],[82,13,53,15],[82,16,53,18],[82,20,53,18,"reshape"],[82,28,53,25],[82,29,53,25,"reshape"],[82,36,53,25],[82,38,53,26,"$input"],[82,44,53,32],[82,46,53,34],[82,47,54,12],[82,48,54,13],[82,50,54,15,"$input"],[82,56,54,21],[82,57,54,22,"shape"],[82,62,54,27],[82,63,54,28],[82,64,54,29],[82,65,54,30],[82,67,54,32,"$input"],[82,73,54,38],[82,74,54,39,"shape"],[82,79,54,44],[82,80,54,45],[82,81,54,46],[82,82,54,47],[82,84,54,49,"$input"],[82,90,54,55],[82,91,54,56,"shape"],[82,96,54,61],[82,97,54,62],[82,98,54,63],[82,99,54,64],[82,101,54,66,"$input"],[82,107,54,72],[82,108,54,73,"shape"],[82,113,54,78],[82,114,54,79],[82,115,54,80],[82,116,54,81],[82,117,55,9],[82,118,55,10],[83,4,56,4],[84,4,57,4,"util"],[84,8,57,8],[84,9,57,9,"assert"],[84,15,57,15],[84,16,57,16,"dy5D"],[84,20,57,20],[84,21,57,21,"rank"],[84,25,57,25],[84,30,57,30],[84,31,57,31],[84,33,57,33],[84,39,57,39],[84,96,57,96],[84,99,58,8],[84,102,58,11,"dy5D"],[84,106,58,15],[84,107,58,16,"rank"],[84,111,58,20],[84,114,58,23],[84,115,58,24],[85,4,59,4,"util"],[85,8,59,8],[85,9,59,9,"assert"],[85,15,59,15],[85,16,59,16,"input5D"],[85,23,59,23],[85,24,59,24,"rank"],[85,28,59,28],[85,33,59,33],[85,34,59,34],[85,36,59,36],[85,42,59,42],[85,102,59,102],[85,105,60,8],[85,108,60,11,"input5D"],[85,115,60,18],[85,116,60,19,"rank"],[85,120,60,23],[85,123,60,26],[85,124,60,27],[86,4,61,4],[86,8,61,4,"checkPadOnDimRoundingMode"],[86,18,61,29],[86,19,61,29,"checkPadOnDimRoundingMode"],[86,44,61,29],[86,46,61,30],[86,61,61,45],[86,63,61,47,"pad"],[86,66,61,50],[86,68,61,52,"dimRoundingMode"],[86,83,61,67],[86,84,61,68],[87,4,62,4],[87,10,62,10,"inputs"],[87,16,62,16],[87,19,62,19],[88,6,62,21,"dy"],[88,8,62,23],[88,10,62,25,"dy5D"],[88,14,62,29],[89,6,62,31,"input"],[89,11,62,36],[89,13,62,38,"input5D"],[90,4,62,46],[90,5,62,47],[91,4,63,4],[91,10,63,10,"attrs"],[91,15,63,15],[91,18,63,18],[92,6,63,20,"filterSize"],[92,16,63,30],[93,6,63,32,"strides"],[93,13,63,39],[94,6,63,41,"pad"],[94,9,63,44],[95,6,63,46,"dimRoundingMode"],[96,4,63,62],[96,5,63,63],[97,4,64,4],[98,4,65,4],[98,10,65,10,"res"],[98,13,65,13],[98,16,65,16,"ENGINE"],[98,23,65,22],[98,24,65,22,"ENGINE"],[98,30,65,22],[98,31,65,23,"runKernel"],[98,40,65,32],[98,41,65,33,"AvgPool3DGrad"],[98,54,65,46],[98,55,65,46,"AvgPool3DGrad"],[98,68,65,46],[98,70,65,48,"inputs"],[98,76,65,54],[98,78,65,56,"attrs"],[98,83,65,61],[98,84,65,62],[99,4,66,4],[99,8,66,8,"reshapedTo5D"],[99,20,66,20],[99,22,66,22],[100,6,67,8],[100,13,67,15],[100,17,67,15,"reshape"],[100,25,67,22],[100,26,67,22,"reshape"],[100,33,67,22],[100,35,67,23,"res"],[100,38,67,26],[100,40,67,28],[100,41,67,29,"res"],[100,44,67,32],[100,45,67,33,"shape"],[100,50,67,38],[100,51,67,39],[100,52,67,40],[100,53,67,41],[100,55,67,43,"res"],[100,58,67,46],[100,59,67,47,"shape"],[100,64,67,52],[100,65,67,53],[100,66,67,54],[100,67,67,55],[100,69,67,57,"res"],[100,72,67,60],[100,73,67,61,"shape"],[100,78,67,66],[100,79,67,67],[100,80,67,68],[100,81,67,69],[100,83,67,71,"res"],[100,86,67,74],[100,87,67,75,"shape"],[100,92,67,80],[100,93,67,81],[100,94,67,82],[100,95,67,83],[100,96,67,84],[100,97,67,85],[101,4,68,4],[102,4,69,4],[102,11,69,11,"res"],[102,14,69,14],[103,2,70,0],[104,2,71,7],[104,8,71,13,"avgPool3dGrad"],[104,21,71,26],[104,24,71,29],[104,39,71,45],[104,43,71,45,"op"],[104,53,71,47],[104,54,71,47,"op"],[104,56,71,47],[104,58,71,48],[105,4,71,50,"avgPool3dGrad_"],[106,2,71,65],[106,3,71,66],[106,4,71,67],[107,0,71,68],[107,3]],"functionMap":{"names":["<global>","avgPool3dGrad_","util.assert$argument_1"],"mappings":"AAA;AC2C;iCCa;uBDC;oCCC;0BDC;CDU"},"hasCjsExports":false},"type":"js/module"}]}