{"dependencies":[{"name":"../engine","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":35,"index":738}}],"key":"zbTTi8rtwr8rjl75PzEo829Yvss=","exportNames":["*"],"imports":1}},{"name":"../kernel_names","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":739},"end":{"line":18,"column":41,"index":780}}],"key":"gQVznmdGA0uoBQvR5Q4/qW+ITHg=","exportNames":["*"],"imports":1}},{"name":"../tensor_util_env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":781},"end":{"line":19,"column":53,"index":834}}],"key":"UCKDOr/oOGi3nbD26ZhyAVW61qk=","exportNames":["*"],"imports":1}},{"name":"./operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":835},"end":{"line":20,"column":33,"index":868}}],"key":"lmmEAb6oR3TWnrsrETceKUovfkM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.einsum_ = einsum_;\n  Object.defineProperty(exports, \"einsum\", {\n    enumerable: true,\n    get: function () {\n      return einsum;\n    }\n  });\n  var _engine = require(_dependencyMap[0], \"../engine\");\n  var _kernel_names = require(_dependencyMap[1], \"../kernel_names\");\n  var _tensor_util_env = require(_dependencyMap[2], \"../tensor_util_env\");\n  var _operation = require(_dependencyMap[3], \"./operation\");\n  /**\n   * @license\n   * Copyright 2021 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  /**\n   * Tensor contraction over specified indices and outer product.\n   *\n   * `einsum` allows defining Tensors by defining their element-wise computation.\n   * This computation is based on\n   * [Einstein summation](https://en.wikipedia.org/wiki/Einstein_notation).\n   *\n   * Some special cases include:\n   *\n   * Matrix multiplication:\n   * ```js\n   * const x = tf.tensor2d([[1, 2, 3], [4, 5, 6]]);\n   * const y = tf.tensor2d([[0, 1], [2, 3], [4, 5]]);\n   * x.print();\n   * y.print();\n   * tf.einsum('ij,jk->ik', x, y).print();\n   * ```\n   *\n   * Dot product:\n   * ```js\n   * const x = tf.tensor1d([1, 2, 3]);\n   * const y = tf.tensor1d([0, 1, 2]);\n   * x.print();\n   * y.print();\n   * tf.einsum('i,i->', x, y).print();\n   * ```\n   *\n   * Batch dot product:\n   * ```js\n   * const x = tf.tensor2d([[1, 2, 3], [4, 5, 6]]);\n   * const y = tf.tensor2d([[0, 1, 2], [3, 4, 5]]);\n   * x.print();\n   * y.print();\n   * tf.einsum('bi,bi->b', x, y).print();\n   * ```\n   *\n   * Outer prouduct:\n   * ```js\n   * const x = tf.tensor1d([1, 3, 5]);\n   * const y = tf.tensor1d([2, 4, 6]);\n   * x.print();\n   * y.print();\n   * tf.einsum('i,j->ij', x, y).print();\n   * ```\n   *\n   * Matrix transpose:\n   * ```js\n   * const x = tf.tensor2d([[1, 2], [3, 4]]);\n   * x.print();\n   * tf.einsum('ij->ji', x).print();\n   * ```\n   *\n   * Batch matrix transpose:\n   * ```js\n   * const x = tf.tensor3d([[[1, 2], [3, 4]], [[-1, -2], [-3, -4]]]);\n   * x.print();\n   * tf.einsum('bij->bji', x).print();\n   * ```\n   *\n   * Limitations:\n   *\n   * This implementation of einsum has the following limitations:\n   *\n   * - Does not support >2 input tensors.\n   * - Does not support duplicate axes for any given input tensor. E.g., equation\n   *   'ii->' is not supported.\n   * - The `...` notation is not supported.\n   *\n   * @param equation a string describing the contraction, in the same format as\n   * [numpy.einsum](https://numpy.org/doc/stable/reference/generated/numpy.einsum.html).\n   * @param tensors the input(s) to contract (each one a Tensor), whose shapes\n   *     should be consistent with equation.\n   * @returns The output tensor.\n   *\n   * @doc {heading: 'Tensors', subheading: 'Matrices'}\n   */\n  function einsum_(equation, ...tensors) {\n    const $tensors = tensors.map((t, i) => (0, _tensor_util_env.convertToTensor)(t, `tensors${i}`, 'einsum'));\n    const attrs = {\n      equation\n    };\n    return _engine.ENGINE.runKernel(_kernel_names.Einsum, $tensors, attrs);\n  }\n  const einsum = /* @__PURE__ */(0, _operation.op)({\n    einsum_\n  });\n});","lineCount":121,"map":[[7,2,97,0,"exports"],[7,9,97,0],[7,10,97,0,"einsum_"],[7,17,97,0],[7,20,97,0,"einsum_"],[7,27,97,0],[8,2,102,0,"Object"],[8,8,102,0],[8,9,102,0,"defineProperty"],[8,23,102,0],[8,24,102,0,"exports"],[8,31,102,0],[9,4,102,0,"enumerable"],[9,14,102,0],[10,4,102,0,"get"],[10,7,102,0],[10,18,102,0,"get"],[10,19,102,0],[11,6,102,0],[11,13,102,0,"einsum"],[11,19,102,0],[12,4,102,0],[13,2,102,0],[14,2,17,0],[14,6,17,0,"_engine"],[14,13,17,0],[14,16,17,0,"require"],[14,23,17,0],[14,24,17,0,"_dependencyMap"],[14,38,17,0],[15,2,18,0],[15,6,18,0,"_kernel_names"],[15,19,18,0],[15,22,18,0,"require"],[15,29,18,0],[15,30,18,0,"_dependencyMap"],[15,44,18,0],[16,2,19,0],[16,6,19,0,"_tensor_util_env"],[16,22,19,0],[16,25,19,0,"require"],[16,32,19,0],[16,33,19,0,"_dependencyMap"],[16,47,19,0],[17,2,20,0],[17,6,20,0,"_operation"],[17,16,20,0],[17,19,20,0,"require"],[17,26,20,0],[17,27,20,0,"_dependencyMap"],[17,41,20,0],[18,2,1,0],[19,0,2,0],[20,0,3,0],[21,0,4,0],[22,0,5,0],[23,0,6,0],[24,0,7,0],[25,0,8,0],[26,0,9,0],[27,0,10,0],[28,0,11,0],[29,0,12,0],[30,0,13,0],[31,0,14,0],[32,0,15,0],[33,0,16,0],[35,2,21,0],[36,0,22,0],[37,0,23,0],[38,0,24,0],[39,0,25,0],[40,0,26,0],[41,0,27,0],[42,0,28,0],[43,0,29,0],[44,0,30,0],[45,0,31,0],[46,0,32,0],[47,0,33,0],[48,0,34,0],[49,0,35,0],[50,0,36,0],[51,0,37,0],[52,0,38,0],[53,0,39,0],[54,0,40,0],[55,0,41,0],[56,0,42,0],[57,0,43,0],[58,0,44,0],[59,0,45,0],[60,0,46,0],[61,0,47,0],[62,0,48,0],[63,0,49,0],[64,0,50,0],[65,0,51,0],[66,0,52,0],[67,0,53,0],[68,0,54,0],[69,0,55,0],[70,0,56,0],[71,0,57,0],[72,0,58,0],[73,0,59,0],[74,0,60,0],[75,0,61,0],[76,0,62,0],[77,0,63,0],[78,0,64,0],[79,0,65,0],[80,0,66,0],[81,0,67,0],[82,0,68,0],[83,0,69,0],[84,0,70,0],[85,0,71,0],[86,0,72,0],[87,0,73,0],[88,0,74,0],[89,0,75,0],[90,0,76,0],[91,0,77,0],[92,0,78,0],[93,0,79,0],[94,0,80,0],[95,0,81,0],[96,0,82,0],[97,0,83,0],[98,0,84,0],[99,0,85,0],[100,0,86,0],[101,0,87,0],[102,0,88,0],[103,0,89,0],[104,0,90,0],[105,0,91,0],[106,0,92,0],[107,0,93,0],[108,0,94,0],[109,0,95,0],[110,0,96,0],[111,2,97,7],[111,11,97,16,"einsum_"],[111,18,97,23,"einsum_"],[111,19,97,24,"equation"],[111,27,97,32],[111,29,97,34],[111,32,97,37,"tensors"],[111,39,97,44],[111,41,97,46],[112,4,98,4],[112,10,98,10,"$tensors"],[112,18,98,18],[112,21,98,21,"tensors"],[112,28,98,28],[112,29,98,29,"map"],[112,32,98,32],[112,33,98,33],[112,34,98,34,"t"],[112,35,98,35],[112,37,98,37,"i"],[112,38,98,38],[112,43,98,43],[112,47,98,43,"convertToTensor"],[112,63,98,58],[112,64,98,58,"convertToTensor"],[112,79,98,58],[112,81,98,59,"t"],[112,82,98,60],[112,84,98,62],[112,94,98,72,"i"],[112,95,98,73],[112,97,98,75],[112,99,98,77],[112,107,98,85],[112,108,98,86],[112,109,98,87],[113,4,99,4],[113,10,99,10,"attrs"],[113,15,99,15],[113,18,99,18],[114,6,99,20,"equation"],[115,4,99,29],[115,5,99,30],[116,4,100,4],[116,11,100,11,"ENGINE"],[116,18,100,17],[116,19,100,17,"ENGINE"],[116,25,100,17],[116,26,100,18,"runKernel"],[116,35,100,27],[116,36,100,28,"Einsum"],[116,49,100,34],[116,50,100,34,"Einsum"],[116,56,100,34],[116,58,100,36,"$tensors"],[116,66,100,44],[116,68,100,46,"attrs"],[116,73,100,51],[116,74,100,52],[117,2,101,0],[118,2,102,7],[118,8,102,13,"einsum"],[118,14,102,19],[118,17,102,22],[118,32,102,38],[118,36,102,38,"op"],[118,46,102,40],[118,47,102,40,"op"],[118,49,102,40],[118,51,102,41],[119,4,102,43,"einsum_"],[120,2,102,51],[120,3,102,52],[120,4,102,53],[121,0,102,54],[121,3]],"functionMap":{"names":["<global>","einsum_","tensors.map$argument_0"],"mappings":"AAA;OCgG;iCCC,qDD;CDG"},"hasCjsExports":false},"type":"js/module"}]}