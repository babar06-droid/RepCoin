{"dependencies":[{"name":"../engine","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":35,"index":738}}],"key":"zbTTi8rtwr8rjl75PzEo829Yvss=","exportNames":["*"],"imports":1}},{"name":"../kernel_names","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":739},"end":{"line":18,"column":55,"index":794}}],"key":"gQVznmdGA0uoBQvR5Q4/qW+ITHg=","exportNames":["*"],"imports":1}},{"name":"../util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":795},"end":{"line":19,"column":32,"index":827}}],"key":"DTmef1GE5grNQfsvpIzpBlINy9c=","exportNames":["*"],"imports":1}},{"name":"./conv_util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":828},"end":{"line":20,"column":41,"index":869}}],"key":"INQe0zbIADI7uIipkS0WmYFlLZ8=","exportNames":["*"],"imports":1}},{"name":"./operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":870},"end":{"line":21,"column":33,"index":903}}],"key":"lmmEAb6oR3TWnrsrETceKUovfkM=","exportNames":["*"],"imports":1}},{"name":"./reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":22,"column":0,"index":904},"end":{"line":22,"column":36,"index":940}}],"key":"dz8GCsFShMGnHX1Wj7bBySjBnSE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"conv2DBackpropFilter\", {\n    enumerable: true,\n    get: function () {\n      return conv2DBackpropFilter;\n    }\n  });\n  var _engine = require(_dependencyMap[0], \"../engine\");\n  var _kernel_names = require(_dependencyMap[1], \"../kernel_names\");\n  var _util = require(_dependencyMap[2], \"../util\");\n  var util = _interopNamespace(_util);\n  var _conv_util = require(_dependencyMap[3], \"./conv_util\");\n  var conv_util = _interopNamespace(_conv_util);\n  var _operation = require(_dependencyMap[4], \"./operation\");\n  var _reshape = require(_dependencyMap[5], \"./reshape\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  /**\n   * Computes the derivative of the filter of a 2D convolution.\n   *\n   * @param x The input tensor, of rank 4 or rank 3 of shape\n   *     [batch, height, width, inChannels]. If rank 3, batch of 1 is assumed.\n   * @param dy The dy image, of rank 4 or rank 3, of shape\n   *     [batch, height, width, outDepth]. If rank 3, batch of 1 is assumed.\n   * @param filterShape The shape of the filter, length 4,\n   *     [filterHeight, filterWidth, inDepth, outDepth].\n   * @param strides The strides of the convolution: [strideHeight,\n   * strideWidth].\n   * @param pad A string from: 'same', 'valid'. The type of padding algorithm\n   *     used in the forward prop of the op.\n   * @param dataFormat: An optional string from: \"NHWC\", \"NCHW\". Defaults to\n   *     \"NHWC\". Specify the data format of the input and output data. With the\n   *     default format \"NHWC\", the data is stored in the order of: [batch,\n   *     height, width, channels].\n   * @param dimRoundingMode A string from: 'ceil', 'round', 'floor'. If none is\n   *     provided, it will default to truncate.\n   */\n  function conv2DBackpropFilter_(x, dy, filterShape, strides, pad, dataFormat = 'NHWC', dimRoundingMode) {\n    let x4D = x;\n    if (x.rank === 3) {\n      x4D = (0, _reshape.reshape)(x, [1, x.shape[0], x.shape[1], x.shape[2]]);\n    }\n    let dy4D = dy;\n    if (dy4D.rank === 3) {\n      dy4D = (0, _reshape.reshape)(dy, [1, dy.shape[0], dy.shape[1], dy.shape[2]]);\n    }\n    util.assert(x4D.rank === 4, () => `Error in conv2dDerFilter: input must be rank 4, but got shape ` + `${x4D.shape}.`);\n    util.assert(dy4D.rank === 4, () => `Error in conv2dDerFilter: dy must be rank 4, but got shape ` + `${dy4D.shape}.`);\n    util.assert(filterShape.length === 4, () => `Error in conv2dDerFilter: filterShape must be length 4, but got ` + `${filterShape}.`);\n    const inDepth = dataFormat === 'NHWC' ? x4D.shape[3] : x4D.shape[1];\n    const outDepth = dataFormat === 'NHWC' ? dy4D.shape[3] : dy4D.shape[1];\n    util.assert(inDepth === filterShape[2], () => `Error in conv2dDerFilter: depth of input ${inDepth}) must ` + `match input depth in filter (${filterShape[2]}.`);\n    util.assert(outDepth === filterShape[3], () => `Error in conv2dDerFilter: depth of dy (${outDepth}) must ` + `match output depth for filter (${filterShape[3]}).`);\n    conv_util.checkPadOnDimRoundingMode('conv2dDerFilter', pad, dimRoundingMode);\n    const inputs = {\n      x: x4D,\n      dy: dy4D\n    };\n    const attrs = {\n      strides,\n      pad,\n      dataFormat,\n      dimRoundingMode,\n      filterShape\n    };\n    // tslint:disable-next-line: no-unnecessary-type-assertion\n    return _engine.ENGINE.runKernel(_kernel_names.Conv2DBackpropFilter, inputs, attrs);\n  }\n  const conv2DBackpropFilter = /* @__PURE__ */(0, _operation.op)({\n    conv2DBackpropFilter_\n  });\n});","lineCount":107,"map":[[22,2,70,0,"Object"],[22,8,70,0],[22,9,70,0,"defineProperty"],[22,23,70,0],[22,24,70,0,"exports"],[22,31,70,0],[23,4,70,0,"enumerable"],[23,14,70,0],[24,4,70,0,"get"],[24,7,70,0],[24,18,70,0,"get"],[24,19,70,0],[25,6,70,0],[25,13,70,0,"conv2DBackpropFilter"],[25,33,70,0],[26,4,70,0],[27,2,70,0],[28,2,17,0],[28,6,17,0,"_engine"],[28,13,17,0],[28,16,17,0,"require"],[28,23,17,0],[28,24,17,0,"_dependencyMap"],[28,38,17,0],[29,2,18,0],[29,6,18,0,"_kernel_names"],[29,19,18,0],[29,22,18,0,"require"],[29,29,18,0],[29,30,18,0,"_dependencyMap"],[29,44,18,0],[30,2,19,0],[30,6,19,0,"_util"],[30,11,19,0],[30,14,19,0,"require"],[30,21,19,0],[30,22,19,0,"_dependencyMap"],[30,36,19,0],[31,2,19,0],[31,6,19,0,"util"],[31,10,19,0],[31,13,19,0,"_interopNamespace"],[31,30,19,0],[31,31,19,0,"_util"],[31,36,19,0],[32,2,20,0],[32,6,20,0,"_conv_util"],[32,16,20,0],[32,19,20,0,"require"],[32,26,20,0],[32,27,20,0,"_dependencyMap"],[32,41,20,0],[33,2,20,0],[33,6,20,0,"conv_util"],[33,15,20,0],[33,18,20,0,"_interopNamespace"],[33,35,20,0],[33,36,20,0,"_conv_util"],[33,46,20,0],[34,2,21,0],[34,6,21,0,"_operation"],[34,16,21,0],[34,19,21,0,"require"],[34,26,21,0],[34,27,21,0,"_dependencyMap"],[34,41,21,0],[35,2,22,0],[35,6,22,0,"_reshape"],[35,14,22,0],[35,17,22,0,"require"],[35,24,22,0],[35,25,22,0,"_dependencyMap"],[35,39,22,0],[36,2,1,0],[37,0,2,0],[38,0,3,0],[39,0,4,0],[40,0,5,0],[41,0,6,0],[42,0,7,0],[43,0,8,0],[44,0,9,0],[45,0,10,0],[46,0,11,0],[47,0,12,0],[48,0,13,0],[49,0,14,0],[50,0,15,0],[51,0,16,0],[53,2,23,0],[54,0,24,0],[55,0,25,0],[56,0,26,0],[57,0,27,0],[58,0,28,0],[59,0,29,0],[60,0,30,0],[61,0,31,0],[62,0,32,0],[63,0,33,0],[64,0,34,0],[65,0,35,0],[66,0,36,0],[67,0,37,0],[68,0,38,0],[69,0,39,0],[70,0,40,0],[71,0,41,0],[72,0,42,0],[73,2,43,0],[73,11,43,9,"conv2DBackpropFilter_"],[73,32,43,30,"conv2DBackpropFilter_"],[73,33,43,31,"x"],[73,34,43,32],[73,36,43,34,"dy"],[73,38,43,36],[73,40,43,38,"filterShape"],[73,51,43,49],[73,53,43,51,"strides"],[73,60,43,58],[73,62,43,60,"pad"],[73,65,43,63],[73,67,43,65,"dataFormat"],[73,77,43,75],[73,80,43,78],[73,86,43,84],[73,88,43,86,"dimRoundingMode"],[73,103,43,101],[73,105,43,103],[74,4,44,4],[74,8,44,8,"x4D"],[74,11,44,11],[74,14,44,14,"x"],[74,15,44,15],[75,4,45,4],[75,8,45,8,"x"],[75,9,45,9],[75,10,45,10,"rank"],[75,14,45,14],[75,19,45,19],[75,20,45,20],[75,22,45,22],[76,6,46,8,"x4D"],[76,9,46,11],[76,12,46,14],[76,16,46,14,"reshape"],[76,24,46,21],[76,25,46,21,"reshape"],[76,32,46,21],[76,34,46,22,"x"],[76,35,46,23],[76,37,46,25],[76,38,46,26],[76,39,46,27],[76,41,46,29,"x"],[76,42,46,30],[76,43,46,31,"shape"],[76,48,46,36],[76,49,46,37],[76,50,46,38],[76,51,46,39],[76,53,46,41,"x"],[76,54,46,42],[76,55,46,43,"shape"],[76,60,46,48],[76,61,46,49],[76,62,46,50],[76,63,46,51],[76,65,46,53,"x"],[76,66,46,54],[76,67,46,55,"shape"],[76,72,46,60],[76,73,46,61],[76,74,46,62],[76,75,46,63],[76,76,46,64],[76,77,46,65],[77,4,47,4],[78,4,48,4],[78,8,48,8,"dy4D"],[78,12,48,12],[78,15,48,15,"dy"],[78,17,48,17],[79,4,49,4],[79,8,49,8,"dy4D"],[79,12,49,12],[79,13,49,13,"rank"],[79,17,49,17],[79,22,49,22],[79,23,49,23],[79,25,49,25],[80,6,50,8,"dy4D"],[80,10,50,12],[80,13,50,15],[80,17,50,15,"reshape"],[80,25,50,22],[80,26,50,22,"reshape"],[80,33,50,22],[80,35,50,23,"dy"],[80,37,50,25],[80,39,50,27],[80,40,50,28],[80,41,50,29],[80,43,50,31,"dy"],[80,45,50,33],[80,46,50,34,"shape"],[80,51,50,39],[80,52,50,40],[80,53,50,41],[80,54,50,42],[80,56,50,44,"dy"],[80,58,50,46],[80,59,50,47,"shape"],[80,64,50,52],[80,65,50,53],[80,66,50,54],[80,67,50,55],[80,69,50,57,"dy"],[80,71,50,59],[80,72,50,60,"shape"],[80,77,50,65],[80,78,50,66],[80,79,50,67],[80,80,50,68],[80,81,50,69],[80,82,50,70],[81,4,51,4],[82,4,52,4,"util"],[82,8,52,8],[82,9,52,9,"assert"],[82,15,52,15],[82,16,52,16,"x4D"],[82,19,52,19],[82,20,52,20,"rank"],[82,24,52,24],[82,29,52,29],[82,30,52,30],[82,32,52,32],[82,38,52,38],[82,102,52,102],[82,105,53,8],[82,108,53,11,"x4D"],[82,111,53,14],[82,112,53,15,"shape"],[82,117,53,20],[82,120,53,23],[82,121,53,24],[83,4,54,4,"util"],[83,8,54,8],[83,9,54,9,"assert"],[83,15,54,15],[83,16,54,16,"dy4D"],[83,20,54,20],[83,21,54,21,"rank"],[83,25,54,25],[83,30,54,30],[83,31,54,31],[83,33,54,33],[83,39,54,39],[83,100,54,100],[83,103,55,8],[83,106,55,11,"dy4D"],[83,110,55,15],[83,111,55,16,"shape"],[83,116,55,21],[83,119,55,24],[83,120,55,25],[84,4,56,4,"util"],[84,8,56,8],[84,9,56,9,"assert"],[84,15,56,15],[84,16,56,16,"filterShape"],[84,27,56,27],[84,28,56,28,"length"],[84,34,56,34],[84,39,56,39],[84,40,56,40],[84,42,56,42],[84,48,56,48],[84,114,56,114],[84,117,57,8],[84,120,57,11,"filterShape"],[84,131,57,22],[84,134,57,25],[84,135,57,26],[85,4,58,4],[85,10,58,10,"inDepth"],[85,17,58,17],[85,20,58,20,"dataFormat"],[85,30,58,30],[85,35,58,35],[85,41,58,41],[85,44,58,44,"x4D"],[85,47,58,47],[85,48,58,48,"shape"],[85,53,58,53],[85,54,58,54],[85,55,58,55],[85,56,58,56],[85,59,58,59,"x4D"],[85,62,58,62],[85,63,58,63,"shape"],[85,68,58,68],[85,69,58,69],[85,70,58,70],[85,71,58,71],[86,4,59,4],[86,10,59,10,"outDepth"],[86,18,59,18],[86,21,59,21,"dataFormat"],[86,31,59,31],[86,36,59,36],[86,42,59,42],[86,45,59,45,"dy4D"],[86,49,59,49],[86,50,59,50,"shape"],[86,55,59,55],[86,56,59,56],[86,57,59,57],[86,58,59,58],[86,61,59,61,"dy4D"],[86,65,59,65],[86,66,59,66,"shape"],[86,71,59,71],[86,72,59,72],[86,73,59,73],[86,74,59,74],[87,4,60,4,"util"],[87,8,60,8],[87,9,60,9,"assert"],[87,15,60,15],[87,16,60,16,"inDepth"],[87,23,60,23],[87,28,60,28,"filterShape"],[87,39,60,39],[87,40,60,40],[87,41,60,41],[87,42,60,42],[87,44,60,44],[87,50,60,50],[87,94,60,94,"inDepth"],[87,101,60,101],[87,110,60,110],[87,113,61,8],[87,145,61,40,"filterShape"],[87,156,61,51],[87,157,61,52],[87,158,61,53],[87,159,61,54],[87,162,61,57],[87,163,61,58],[88,4,62,4,"util"],[88,8,62,8],[88,9,62,9,"assert"],[88,15,62,15],[88,16,62,16,"outDepth"],[88,24,62,24],[88,29,62,29,"filterShape"],[88,40,62,40],[88,41,62,41],[88,42,62,42],[88,43,62,43],[88,45,62,45],[88,51,62,51],[88,93,62,93,"outDepth"],[88,101,62,101],[88,110,62,110],[88,113,63,8],[88,147,63,42,"filterShape"],[88,158,63,53],[88,159,63,54],[88,160,63,55],[88,161,63,56],[88,165,63,60],[88,166,63,61],[89,4,64,4,"conv_util"],[89,13,64,13],[89,14,64,14,"checkPadOnDimRoundingMode"],[89,39,64,39],[89,40,64,40],[89,57,64,57],[89,59,64,59,"pad"],[89,62,64,62],[89,64,64,64,"dimRoundingMode"],[89,79,64,79],[89,80,64,80],[90,4,65,4],[90,10,65,10,"inputs"],[90,16,65,16],[90,19,65,19],[91,6,65,21,"x"],[91,7,65,22],[91,9,65,24,"x4D"],[91,12,65,27],[92,6,65,29,"dy"],[92,8,65,31],[92,10,65,33,"dy4D"],[93,4,65,38],[93,5,65,39],[94,4,66,4],[94,10,66,10,"attrs"],[94,15,66,15],[94,18,66,18],[95,6,66,20,"strides"],[95,13,66,27],[96,6,66,29,"pad"],[96,9,66,32],[97,6,66,34,"dataFormat"],[97,16,66,44],[98,6,66,46,"dimRoundingMode"],[98,21,66,61],[99,6,66,63,"filterShape"],[100,4,66,75],[100,5,66,76],[101,4,67,4],[102,4,68,4],[102,11,68,11,"ENGINE"],[102,18,68,17],[102,19,68,17,"ENGINE"],[102,25,68,17],[102,26,68,18,"runKernel"],[102,35,68,27],[102,36,68,28,"Conv2DBackpropFilter"],[102,49,68,48],[102,50,68,48,"Conv2DBackpropFilter"],[102,70,68,48],[102,72,68,50,"inputs"],[102,78,68,56],[102,80,68,58,"attrs"],[102,85,68,63],[102,86,68,64],[103,2,69,0],[104,2,70,7],[104,8,70,13,"conv2DBackpropFilter"],[104,28,70,33],[104,31,70,36],[104,46,70,52],[104,50,70,52,"op"],[104,60,70,54],[104,61,70,54,"op"],[104,63,70,54],[104,65,70,55],[105,4,70,57,"conv2DBackpropFilter_"],[106,2,70,79],[106,3,70,80],[106,4,70,81],[107,0,70,82],[107,3]],"functionMap":{"names":["<global>","conv2DBackpropFilter_","util.assert$argument_1"],"mappings":"AAA;AC0C;gCCS;uBDC;iCCC;wBDC;0CCC;yBDC;4CCG;yDDC;6CCC;4DDC;CDM"},"hasCjsExports":false},"type":"js/module"}]}