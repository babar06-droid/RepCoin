{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":71,"index":774}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"dilation2DConfig\", {\n    enumerable: true,\n    get: function () {\n      return dilation2DConfig;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  const dilation2DConfig = {\n    kernelName: _tensorflowTfjsCore.Dilation2D,\n    backendName: 'cpu',\n    kernelFunc: ({\n      inputs,\n      backend,\n      attrs\n    }) => {\n      const {\n        x,\n        filter\n      } = inputs;\n      const {\n        strides,\n        pad,\n        dilations\n      } = attrs;\n      const cpuBackend = backend;\n      const xVals = cpuBackend.data.get(x.dataId).values;\n      const xRank = x.shape.length;\n      const filterVals = cpuBackend.data.get(filter.dataId).values;\n      const filterRank = filter.shape.length;\n      const {\n        batchSize,\n        inHeight,\n        inWidth,\n        inChannels,\n        outHeight,\n        outWidth,\n        padInfo,\n        strideHeight,\n        strideWidth,\n        filterHeight,\n        filterWidth,\n        dilationHeight,\n        dilationWidth,\n        outShape\n      } = _tensorflowTfjsCore.backend_util.computeDilation2DInfo(x.shape, filter.shape, strides, pad, 'NHWC' /* dataFormat */, dilations);\n      const outSize = _tensorflowTfjsCore.util.sizeFromShape(outShape);\n      const outRank = outShape.length;\n      const outputVals = _tensorflowTfjsCore.util.getArrayFromDType(x.dtype, outSize);\n      // Upsampling the input by fill in `dilation size - 1` values between each\n      // input value.\n      // This implementation follows the TF c++ implementation:\n      // https://github.com/tensorflow/tensorflow/blob/d9a3a849edc198e90172bc58eb293de457f9d986/tensorflow/core/kernels/dilation_ops.cc\n      for (let b = 0; b < batchSize; ++b) {\n        for (let hOut = 0; hOut < outHeight; ++hOut) {\n          const hBeg = hOut * strideHeight - padInfo.top;\n          for (let wOut = 0; wOut < outWidth; ++wOut) {\n            const wBeg = wOut * strideWidth - padInfo.left;\n            for (let d = 0; d < inChannels; ++d) {\n              let curVal = Number.MIN_SAFE_INTEGER;\n              for (let h = 0; h < filterHeight; ++h) {\n                const hIn = hBeg + h * dilationHeight;\n                if (hIn >= 0 && hIn < inHeight) {\n                  for (let w = 0; w < filterWidth; ++w) {\n                    const wIn = wBeg + w * dilationWidth;\n                    if (wIn >= 0 && wIn < inWidth) {\n                      const xIndex = _tensorflowTfjsCore.util.locToIndex([b, hIn, wIn, d], xRank, _tensorflowTfjsCore.util.computeStrides(x.shape));\n                      const filterIndex = _tensorflowTfjsCore.util.locToIndex([h, w, d], filterRank, _tensorflowTfjsCore.util.computeStrides(filter.shape));\n                      const val = xVals[xIndex] + filterVals[filterIndex];\n                      if (val > curVal) {\n                        curVal = val;\n                      }\n                    }\n                  }\n                }\n              }\n              const outputIndex = _tensorflowTfjsCore.util.locToIndex([b, hOut, wOut, d], outRank, _tensorflowTfjsCore.util.computeStrides(outShape));\n              outputVals[outputIndex] = curVal;\n            }\n          }\n        }\n      }\n      const dataId = cpuBackend.write(_tensorflowTfjsCore.util.toTypedArray(outputVals, x.dtype), outShape, x.dtype);\n      return {\n        dataId,\n        shape: outShape,\n        dtype: x.dtype\n      };\n    }\n  };\n});","lineCount":113,"map":[[7,2,18,0,"Object"],[7,8,18,0],[7,9,18,0,"defineProperty"],[7,23,18,0],[7,24,18,0,"exports"],[7,31,18,0],[8,4,18,0,"enumerable"],[8,14,18,0],[9,4,18,0,"get"],[9,7,18,0],[9,18,18,0,"get"],[9,19,18,0],[10,6,18,0],[10,13,18,0,"dilation2DConfig"],[10,29,18,0],[11,4,18,0],[12,2,18,0],[13,2,17,0],[13,6,17,0,"_tensorflowTfjsCore"],[13,25,17,0],[13,28,17,0,"require"],[13,35,17,0],[13,36,17,0,"_dependencyMap"],[13,50,17,0],[14,2,1,0],[15,0,2,0],[16,0,3,0],[17,0,4,0],[18,0,5,0],[19,0,6,0],[20,0,7,0],[21,0,8,0],[22,0,9,0],[23,0,10,0],[24,0,11,0],[25,0,12,0],[26,0,13,0],[27,0,14,0],[28,0,15,0],[29,0,16,0],[31,2,18,7],[31,8,18,13,"dilation2DConfig"],[31,24,18,29],[31,27,18,32],[32,4,19,4,"kernelName"],[32,14,19,14],[32,16,19,16,"Dilation2D"],[32,35,19,26],[32,36,19,26,"Dilation2D"],[32,46,19,26],[33,4,20,4,"backendName"],[33,15,20,15],[33,17,20,17],[33,22,20,22],[34,4,21,4,"kernelFunc"],[34,14,21,14],[34,16,21,16,"kernelFunc"],[34,17,21,17],[35,6,21,19,"inputs"],[35,12,21,25],[36,6,21,27,"backend"],[36,13,21,34],[37,6,21,36,"attrs"],[38,4,21,42],[38,5,21,43],[38,10,21,48],[39,6,22,8],[39,12,22,14],[40,8,22,16,"x"],[40,9,22,17],[41,8,22,19,"filter"],[42,6,22,26],[42,7,22,27],[42,10,22,30,"inputs"],[42,16,22,36],[43,6,23,8],[43,12,23,14],[44,8,23,16,"strides"],[44,15,23,23],[45,8,23,25,"pad"],[45,11,23,28],[46,8,23,30,"dilations"],[47,6,23,40],[47,7,23,41],[47,10,23,44,"attrs"],[47,15,23,49],[48,6,24,8],[48,12,24,14,"cpuBackend"],[48,22,24,24],[48,25,24,27,"backend"],[48,32,24,34],[49,6,25,8],[49,12,25,14,"xVals"],[49,17,25,19],[49,20,25,22,"cpuBackend"],[49,30,25,32],[49,31,25,33,"data"],[49,35,25,37],[49,36,25,38,"get"],[49,39,25,41],[49,40,25,42,"x"],[49,41,25,43],[49,42,25,44,"dataId"],[49,48,25,50],[49,49,25,51],[49,50,25,52,"values"],[49,56,25,58],[50,6,26,8],[50,12,26,14,"xRank"],[50,17,26,19],[50,20,26,22,"x"],[50,21,26,23],[50,22,26,24,"shape"],[50,27,26,29],[50,28,26,30,"length"],[50,34,26,36],[51,6,27,8],[51,12,27,14,"filterVals"],[51,22,27,24],[51,25,27,27,"cpuBackend"],[51,35,27,37],[51,36,27,38,"data"],[51,40,27,42],[51,41,27,43,"get"],[51,44,27,46],[51,45,27,47,"filter"],[51,51,27,53],[51,52,27,54,"dataId"],[51,58,27,60],[51,59,27,61],[51,60,27,62,"values"],[51,66,27,68],[52,6,28,8],[52,12,28,14,"filterRank"],[52,22,28,24],[52,25,28,27,"filter"],[52,31,28,33],[52,32,28,34,"shape"],[52,37,28,39],[52,38,28,40,"length"],[52,44,28,46],[53,6,29,8],[53,12,29,14],[54,8,29,16,"batchSize"],[54,17,29,25],[55,8,29,27,"inHeight"],[55,16,29,35],[56,8,29,37,"inWidth"],[56,15,29,44],[57,8,29,46,"inChannels"],[57,18,29,56],[58,8,29,58,"outHeight"],[58,17,29,67],[59,8,29,69,"outWidth"],[59,16,29,77],[60,8,29,79,"padInfo"],[60,15,29,86],[61,8,29,88,"strideHeight"],[61,20,29,100],[62,8,29,102,"strideWidth"],[62,19,29,113],[63,8,29,115,"filterHeight"],[63,20,29,127],[64,8,29,129,"filterWidth"],[64,19,29,140],[65,8,29,142,"dilationHeight"],[65,22,29,156],[66,8,29,158,"dilationWidth"],[66,21,29,171],[67,8,29,173,"outShape"],[68,6,29,182],[68,7,29,183],[68,10,29,186,"backend_util"],[68,29,29,198],[68,30,29,198,"backend_util"],[68,42,29,198],[68,43,29,199,"computeDilation2DInfo"],[68,64,29,220],[68,65,29,221,"x"],[68,66,29,222],[68,67,29,223,"shape"],[68,72,29,228],[68,74,29,230,"filter"],[68,80,29,236],[68,81,29,237,"shape"],[68,86,29,242],[68,88,29,244,"strides"],[68,95,29,251],[68,97,29,253,"pad"],[68,100,29,256],[68,102,29,258],[68,108,29,264],[68,109,29,265],[68,127,29,283,"dilations"],[68,136,29,292],[68,137,29,293],[69,6,30,8],[69,12,30,14,"outSize"],[69,19,30,21],[69,22,30,24,"util"],[69,41,30,28],[69,42,30,28,"util"],[69,46,30,28],[69,47,30,29,"sizeFromShape"],[69,60,30,42],[69,61,30,43,"outShape"],[69,69,30,51],[69,70,30,52],[70,6,31,8],[70,12,31,14,"outRank"],[70,19,31,21],[70,22,31,24,"outShape"],[70,30,31,32],[70,31,31,33,"length"],[70,37,31,39],[71,6,32,8],[71,12,32,14,"outputVals"],[71,22,32,24],[71,25,32,27,"util"],[71,44,32,31],[71,45,32,31,"util"],[71,49,32,31],[71,50,32,32,"getArrayFromDType"],[71,67,32,49],[71,68,32,50,"x"],[71,69,32,51],[71,70,32,52,"dtype"],[71,75,32,57],[71,77,32,59,"outSize"],[71,84,32,66],[71,85,32,67],[72,6,33,8],[73,6,34,8],[74,6,35,8],[75,6,36,8],[76,6,37,8],[76,11,37,13],[76,15,37,17,"b"],[76,16,37,18],[76,19,37,21],[76,20,37,22],[76,22,37,24,"b"],[76,23,37,25],[76,26,37,28,"batchSize"],[76,35,37,37],[76,37,37,39],[76,39,37,41,"b"],[76,40,37,42],[76,42,37,44],[77,8,38,12],[77,13,38,17],[77,17,38,21,"hOut"],[77,21,38,25],[77,24,38,28],[77,25,38,29],[77,27,38,31,"hOut"],[77,31,38,35],[77,34,38,38,"outHeight"],[77,43,38,47],[77,45,38,49],[77,47,38,51,"hOut"],[77,51,38,55],[77,53,38,57],[78,10,39,16],[78,16,39,22,"hBeg"],[78,20,39,26],[78,23,39,29,"hOut"],[78,27,39,33],[78,30,39,36,"strideHeight"],[78,42,39,48],[78,45,39,51,"padInfo"],[78,52,39,58],[78,53,39,59,"top"],[78,56,39,62],[79,10,40,16],[79,15,40,21],[79,19,40,25,"wOut"],[79,23,40,29],[79,26,40,32],[79,27,40,33],[79,29,40,35,"wOut"],[79,33,40,39],[79,36,40,42,"outWidth"],[79,44,40,50],[79,46,40,52],[79,48,40,54,"wOut"],[79,52,40,58],[79,54,40,60],[80,12,41,20],[80,18,41,26,"wBeg"],[80,22,41,30],[80,25,41,33,"wOut"],[80,29,41,37],[80,32,41,40,"strideWidth"],[80,43,41,51],[80,46,41,54,"padInfo"],[80,53,41,61],[80,54,41,62,"left"],[80,58,41,66],[81,12,42,20],[81,17,42,25],[81,21,42,29,"d"],[81,22,42,30],[81,25,42,33],[81,26,42,34],[81,28,42,36,"d"],[81,29,42,37],[81,32,42,40,"inChannels"],[81,42,42,50],[81,44,42,52],[81,46,42,54,"d"],[81,47,42,55],[81,49,42,57],[82,14,43,24],[82,18,43,28,"curVal"],[82,24,43,34],[82,27,43,37,"Number"],[82,33,43,43],[82,34,43,44,"MIN_SAFE_INTEGER"],[82,50,43,60],[83,14,44,24],[83,19,44,29],[83,23,44,33,"h"],[83,24,44,34],[83,27,44,37],[83,28,44,38],[83,30,44,40,"h"],[83,31,44,41],[83,34,44,44,"filterHeight"],[83,46,44,56],[83,48,44,58],[83,50,44,60,"h"],[83,51,44,61],[83,53,44,63],[84,16,45,28],[84,22,45,34,"hIn"],[84,25,45,37],[84,28,45,40,"hBeg"],[84,32,45,44],[84,35,45,47,"h"],[84,36,45,48],[84,39,45,51,"dilationHeight"],[84,53,45,65],[85,16,46,28],[85,20,46,32,"hIn"],[85,23,46,35],[85,27,46,39],[85,28,46,40],[85,32,46,44,"hIn"],[85,35,46,47],[85,38,46,50,"inHeight"],[85,46,46,58],[85,48,46,60],[86,18,47,32],[86,23,47,37],[86,27,47,41,"w"],[86,28,47,42],[86,31,47,45],[86,32,47,46],[86,34,47,48,"w"],[86,35,47,49],[86,38,47,52,"filterWidth"],[86,49,47,63],[86,51,47,65],[86,53,47,67,"w"],[86,54,47,68],[86,56,47,70],[87,20,48,36],[87,26,48,42,"wIn"],[87,29,48,45],[87,32,48,48,"wBeg"],[87,36,48,52],[87,39,48,55,"w"],[87,40,48,56],[87,43,48,59,"dilationWidth"],[87,56,48,72],[88,20,49,36],[88,24,49,40,"wIn"],[88,27,49,43],[88,31,49,47],[88,32,49,48],[88,36,49,52,"wIn"],[88,39,49,55],[88,42,49,58,"inWidth"],[88,49,49,65],[88,51,49,67],[89,22,50,40],[89,28,50,46,"xIndex"],[89,34,50,52],[89,37,50,55,"util"],[89,56,50,59],[89,57,50,59,"util"],[89,61,50,59],[89,62,50,60,"locToIndex"],[89,72,50,70],[89,73,50,71],[89,74,50,72,"b"],[89,75,50,73],[89,77,50,75,"hIn"],[89,80,50,78],[89,82,50,80,"wIn"],[89,85,50,83],[89,87,50,85,"d"],[89,88,50,86],[89,89,50,87],[89,91,50,89,"xRank"],[89,96,50,94],[89,98,50,96,"util"],[89,117,50,100],[89,118,50,100,"util"],[89,122,50,100],[89,123,50,101,"computeStrides"],[89,137,50,115],[89,138,50,116,"x"],[89,139,50,117],[89,140,50,118,"shape"],[89,145,50,123],[89,146,50,124],[89,147,50,125],[90,22,51,40],[90,28,51,46,"filterIndex"],[90,39,51,57],[90,42,51,60,"util"],[90,61,51,64],[90,62,51,64,"util"],[90,66,51,64],[90,67,51,65,"locToIndex"],[90,77,51,75],[90,78,51,76],[90,79,51,77,"h"],[90,80,51,78],[90,82,51,80,"w"],[90,83,51,81],[90,85,51,83,"d"],[90,86,51,84],[90,87,51,85],[90,89,51,87,"filterRank"],[90,99,51,97],[90,101,51,99,"util"],[90,120,51,103],[90,121,51,103,"util"],[90,125,51,103],[90,126,51,104,"computeStrides"],[90,140,51,118],[90,141,51,119,"filter"],[90,147,51,125],[90,148,51,126,"shape"],[90,153,51,131],[90,154,51,132],[90,155,51,133],[91,22,52,40],[91,28,52,46,"val"],[91,31,52,49],[91,34,52,52,"xVals"],[91,39,52,57],[91,40,52,58,"xIndex"],[91,46,52,64],[91,47,52,65],[91,50,52,68,"filterVals"],[91,60,52,78],[91,61,52,79,"filterIndex"],[91,72,52,90],[91,73,52,91],[92,22,53,40],[92,26,53,44,"val"],[92,29,53,47],[92,32,53,50,"curVal"],[92,38,53,56],[92,40,53,58],[93,24,54,44,"curVal"],[93,30,54,50],[93,33,54,53,"val"],[93,36,54,56],[94,22,55,40],[95,20,56,36],[96,18,57,32],[97,16,58,28],[98,14,59,24],[99,14,60,24],[99,20,60,30,"outputIndex"],[99,31,60,41],[99,34,60,44,"util"],[99,53,60,48],[99,54,60,48,"util"],[99,58,60,48],[99,59,60,49,"locToIndex"],[99,69,60,59],[99,70,60,60],[99,71,60,61,"b"],[99,72,60,62],[99,74,60,64,"hOut"],[99,78,60,68],[99,80,60,70,"wOut"],[99,84,60,74],[99,86,60,76,"d"],[99,87,60,77],[99,88,60,78],[99,90,60,80,"outRank"],[99,97,60,87],[99,99,60,89,"util"],[99,118,60,93],[99,119,60,93,"util"],[99,123,60,93],[99,124,60,94,"computeStrides"],[99,138,60,108],[99,139,60,109,"outShape"],[99,147,60,117],[99,148,60,118],[99,149,60,119],[100,14,61,24,"outputVals"],[100,24,61,34],[100,25,61,35,"outputIndex"],[100,36,61,46],[100,37,61,47],[100,40,61,50,"curVal"],[100,46,61,56],[101,12,62,20],[102,10,63,16],[103,8,64,12],[104,6,65,8],[105,6,66,8],[105,12,66,14,"dataId"],[105,18,66,20],[105,21,66,23,"cpuBackend"],[105,31,66,33],[105,32,66,34,"write"],[105,37,66,39],[105,38,66,40,"util"],[105,57,66,44],[105,58,66,44,"util"],[105,62,66,44],[105,63,66,45,"toTypedArray"],[105,75,66,57],[105,76,66,58,"outputVals"],[105,86,66,68],[105,88,66,70,"x"],[105,89,66,71],[105,90,66,72,"dtype"],[105,95,66,77],[105,96,66,78],[105,98,66,80,"outShape"],[105,106,66,88],[105,108,66,90,"x"],[105,109,66,91],[105,110,66,92,"dtype"],[105,115,66,97],[105,116,66,98],[106,6,67,8],[106,13,67,15],[107,8,67,17,"dataId"],[107,14,67,23],[108,8,67,25,"shape"],[108,13,67,30],[108,15,67,32,"outShape"],[108,23,67,40],[109,8,67,42,"dtype"],[109,13,67,47],[109,15,67,49,"x"],[109,16,67,50],[109,17,67,51,"dtype"],[110,6,67,57],[110,7,67,58],[111,4,68,4],[112,2,69,0],[112,3,69,1],[113,0,69,2],[113,3]],"functionMap":{"names":["<global>","dilation2DConfig.kernelFunc"],"mappings":"AAA;gBCoB;KD+C"},"hasCjsExports":false},"type":"js/module"}]}