{"dependencies":[{"name":"../../engine","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":38,"index":741}}],"key":"v39fFCcPTN6kCKPiVEOA5hKbvfQ=","exportNames":["*"],"imports":1}},{"name":"../../kernel_names","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":742},"end":{"line":18,"column":57,"index":799}}],"key":"rL3QmnnDJzxi3tNgrJ9K3IiMDQ8=","exportNames":["*"],"imports":1}},{"name":"../../tensor_util_env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":800},"end":{"line":19,"column":56,"index":856}}],"key":"xfSGNGkCJdZhfQ673y/6d+no2yU=","exportNames":["*"],"imports":1}},{"name":"../operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":857},"end":{"line":20,"column":34,"index":891}}],"key":"fQilPqfSvhAHjyfKT0P4wel7jE4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"sparseFillEmptyRows\", {\n    enumerable: true,\n    get: function () {\n      return sparseFillEmptyRows;\n    }\n  });\n  var _engine = require(_dependencyMap[0], \"../../engine\");\n  var _kernel_names = require(_dependencyMap[1], \"../../kernel_names\");\n  var _tensor_util_env = require(_dependencyMap[2], \"../../tensor_util_env\");\n  var _operation = require(_dependencyMap[3], \"../operation\");\n  /**\n   * @license\n   * Copyright 2021 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  /**\n   * The input SparseTensor is represented via the map of inputs {`indices`,\n   * `values`, `denseShape`}. The output SparseTensor has the same `denseShape`\n   * but with indices `outputIndices` and values `outputValues`. This op inserts a\n   * single entry for every row that doesn't have any values. The index is created\n   * as `[row, 0, ..., 0]` and the inserted value is `defaultValue`.\n   *\n   * For example, suppose `spInput` has shape [5, 6] and non-empty values:\n   * [0, 1]: a\n   * [0, 3]: b\n   * [2, 0]: c\n   * [3, 1]: d\n   *\n   * Rows 1 and 4 are empty, so the output will be of shape [5, 6] with values:\n   * [0, 1]: a\n   * [0, 3]: b\n   * [1, 0]: `defaultValue`\n   * [2, 0]: c\n   * [3, 1]: d\n   * [4, 0]: `defaultValue`\n   *\n   * The output SparseTensor will be in row-major order and will have the same\n   * shape as the input.\n   *\n   * This op also returns an indicator vector shaped [dense_shape[0]] such that\n   * emptyRowIndicator[i] = True iff row i was an empty row.\n   *\n   * And a reverse index map vector shaped [indices.shape[0]] that is used during\n   * backpropagation, reverseIndexMap[i] = outi s.t. indices[i, j] ==\n   * outputIndices[outi, j] for all j\n   *\n   * ```js\n   * const result = tf.sparse.sparseFillEmptyRows(\n   *   [[0, 0], [1, 0], [1, 3], [1, 4], [3, 2], [3, 3]],\n   *   [0, 10, 13, 14, 32, 33], [5, 6], -1);\n   * console.log(result);\n   * result['outputIndices'].print(); // [[0, 0], [1, 0], [1, 3], [1, 4],\n   *                                  //  [2, 0], [3, 2], [3, 3], [4, 0]]\n   * result['outputValues'].print(); // [0, 10, 13, 14,-1, 32, 33, -1]\n   * result['emptyRowIndicator'].print(); // [false, false, true, false, true]\n   * result['reverseIndexMap'].print(); // [0, 1, 2, 3, 5, 6]\n   * ```\n   * @param indices: 2-D. The indices of the sparse tensor.\n   * @param values: 1-D. The values of the sparse tensor.\n   * @param denseShape: 1-D. The shape of the sparse tensor.\n   * @param defaultValue: 0-D. Default value to insert into location [row, 0, ...,\n   *     0] for rows missing from the input sparse tensor.\n   * @return A map with the following properties:\n   *     - outputIndices\n   *     - outputValues: 1-D. The values of the filled sparse tensor.\n   *     - emptyRowIndicator: 1-D. Whether the dense row was missing in the input\n   * sparse tensor.\n   *     - reverseIndexMap: 1-D. A map from the input indices to the output\n   * indices.\n   * @doc {heading: 'Operations', subheading: 'Sparse'}\n   */\n  function sparseFillEmptyRows_(indices, values, denseShape, defaultValue) {\n    const $indices = (0, _tensor_util_env.convertToTensor)(indices, 'indices', 'sparseFillEmptyRows', 'int32');\n    const $values = (0, _tensor_util_env.convertToTensor)(values, 'values', 'sparseFillEmptyRows');\n    const $denseShape = (0, _tensor_util_env.convertToTensor)(denseShape, 'denseShape', 'sparseFillEmptyRows', 'int32');\n    const $defaultValue = (0, _tensor_util_env.convertToTensor)(defaultValue, 'defaultValue', 'sparseFillEmptyRows', $values.dtype);\n    if ($indices.rank !== 2) {\n      throw new Error(`Indices should be Tensor2D but received shape\n        ${$indices.shape}`);\n    }\n    if ($values.rank !== 1) {\n      throw new Error(`Values should be Tensor1D but received shape ${$values.shape}`);\n    }\n    if ($denseShape.rank !== 1) {\n      throw new Error(`Dense shape should be Tensor1D but received shape ${$denseShape.shape}`);\n    }\n    if ($defaultValue.rank !== 0) {\n      throw new Error(`Default value should be a scalar but received shape ${$defaultValue.shape}`);\n    }\n    const inputs = {\n      indices: $indices,\n      values: $values,\n      denseShape: $denseShape,\n      defaultValue: $defaultValue\n    };\n    const result = _engine.ENGINE.runKernel(_kernel_names.SparseFillEmptyRows, inputs);\n    return {\n      outputIndices: result[0],\n      outputValues: result[1],\n      emptyRowIndicator: result[2],\n      reverseIndexMap: result[3]\n    };\n  }\n  const sparseFillEmptyRows = /* @__PURE__ */(0, _operation.op)({\n    sparseFillEmptyRows_\n  });\n});","lineCount":125,"map":[[7,2,109,0,"Object"],[7,8,109,0],[7,9,109,0,"defineProperty"],[7,23,109,0],[7,24,109,0,"exports"],[7,31,109,0],[8,4,109,0,"enumerable"],[8,14,109,0],[9,4,109,0,"get"],[9,7,109,0],[9,18,109,0,"get"],[9,19,109,0],[10,6,109,0],[10,13,109,0,"sparseFillEmptyRows"],[10,32,109,0],[11,4,109,0],[12,2,109,0],[13,2,17,0],[13,6,17,0,"_engine"],[13,13,17,0],[13,16,17,0,"require"],[13,23,17,0],[13,24,17,0,"_dependencyMap"],[13,38,17,0],[14,2,18,0],[14,6,18,0,"_kernel_names"],[14,19,18,0],[14,22,18,0,"require"],[14,29,18,0],[14,30,18,0,"_dependencyMap"],[14,44,18,0],[15,2,19,0],[15,6,19,0,"_tensor_util_env"],[15,22,19,0],[15,25,19,0,"require"],[15,32,19,0],[15,33,19,0,"_dependencyMap"],[15,47,19,0],[16,2,20,0],[16,6,20,0,"_operation"],[16,16,20,0],[16,19,20,0,"require"],[16,26,20,0],[16,27,20,0,"_dependencyMap"],[16,41,20,0],[17,2,1,0],[18,0,2,0],[19,0,3,0],[20,0,4,0],[21,0,5,0],[22,0,6,0],[23,0,7,0],[24,0,8,0],[25,0,9,0],[26,0,10,0],[27,0,11,0],[28,0,12,0],[29,0,13,0],[30,0,14,0],[31,0,15,0],[32,0,16,0],[34,2,21,0],[35,0,22,0],[36,0,23,0],[37,0,24,0],[38,0,25,0],[39,0,26,0],[40,0,27,0],[41,0,28,0],[42,0,29,0],[43,0,30,0],[44,0,31,0],[45,0,32,0],[46,0,33,0],[47,0,34,0],[48,0,35,0],[49,0,36,0],[50,0,37,0],[51,0,38,0],[52,0,39,0],[53,0,40,0],[54,0,41,0],[55,0,42,0],[56,0,43,0],[57,0,44,0],[58,0,45,0],[59,0,46,0],[60,0,47,0],[61,0,48,0],[62,0,49,0],[63,0,50,0],[64,0,51,0],[65,0,52,0],[66,0,53,0],[67,0,54,0],[68,0,55,0],[69,0,56,0],[70,0,57,0],[71,0,58,0],[72,0,59,0],[73,0,60,0],[74,0,61,0],[75,0,62,0],[76,0,63,0],[77,0,64,0],[78,0,65,0],[79,0,66,0],[80,0,67,0],[81,0,68,0],[82,0,69,0],[83,0,70,0],[84,0,71,0],[85,0,72,0],[86,0,73,0],[87,0,74,0],[88,0,75,0],[89,0,76,0],[90,2,77,0],[90,11,77,9,"sparseFillEmptyRows_"],[90,31,77,29,"sparseFillEmptyRows_"],[90,32,77,30,"indices"],[90,39,77,37],[90,41,77,39,"values"],[90,47,77,45],[90,49,77,47,"denseShape"],[90,59,77,57],[90,61,77,59,"defaultValue"],[90,73,77,71],[90,75,77,73],[91,4,78,4],[91,10,78,10,"$indices"],[91,18,78,18],[91,21,78,21],[91,25,78,21,"convertToTensor"],[91,41,78,36],[91,42,78,36,"convertToTensor"],[91,57,78,36],[91,59,78,37,"indices"],[91,66,78,44],[91,68,78,46],[91,77,78,55],[91,79,78,57],[91,100,78,78],[91,102,78,80],[91,109,78,87],[91,110,78,88],[92,4,79,4],[92,10,79,10,"$values"],[92,17,79,17],[92,20,79,20],[92,24,79,20,"convertToTensor"],[92,40,79,35],[92,41,79,35,"convertToTensor"],[92,56,79,35],[92,58,79,36,"values"],[92,64,79,42],[92,66,79,44],[92,74,79,52],[92,76,79,54],[92,97,79,75],[92,98,79,76],[93,4,80,4],[93,10,80,10,"$denseShape"],[93,21,80,21],[93,24,80,24],[93,28,80,24,"convertToTensor"],[93,44,80,39],[93,45,80,39,"convertToTensor"],[93,60,80,39],[93,62,80,40,"denseShape"],[93,72,80,50],[93,74,80,52],[93,86,80,64],[93,88,80,66],[93,109,80,87],[93,111,80,89],[93,118,80,96],[93,119,80,97],[94,4,81,4],[94,10,81,10,"$defaultValue"],[94,23,81,23],[94,26,81,26],[94,30,81,26,"convertToTensor"],[94,46,81,41],[94,47,81,41,"convertToTensor"],[94,62,81,41],[94,64,81,42,"defaultValue"],[94,76,81,54],[94,78,81,56],[94,92,81,70],[94,94,81,72],[94,115,81,93],[94,117,81,95,"$values"],[94,124,81,102],[94,125,81,103,"dtype"],[94,130,81,108],[94,131,81,109],[95,4,82,4],[95,8,82,8,"$indices"],[95,16,82,16],[95,17,82,17,"rank"],[95,21,82,21],[95,26,82,26],[95,27,82,27],[95,29,82,29],[96,6,83,8],[96,12,83,14],[96,16,83,18,"Error"],[96,21,83,23],[96,22,83,24],[97,0,84,0],[97,10,84,10,"$indices"],[97,18,84,18],[97,19,84,19,"shape"],[97,24,84,24],[97,26,84,26],[97,27,84,27],[98,4,85,4],[99,4,86,4],[99,8,86,8,"$values"],[99,15,86,15],[99,16,86,16,"rank"],[99,20,86,20],[99,25,86,25],[99,26,86,26],[99,28,86,28],[100,6,87,8],[100,12,87,14],[100,16,87,18,"Error"],[100,21,87,23],[100,22,87,24],[100,70,87,72,"$values"],[100,77,87,79],[100,78,87,80,"shape"],[100,83,87,85],[100,85,87,87],[100,86,87,88],[101,4,88,4],[102,4,89,4],[102,8,89,8,"$denseShape"],[102,19,89,19],[102,20,89,20,"rank"],[102,24,89,24],[102,29,89,29],[102,30,89,30],[102,32,89,32],[103,6,90,8],[103,12,90,14],[103,16,90,18,"Error"],[103,21,90,23],[103,22,90,24],[103,75,90,77,"$denseShape"],[103,86,90,88],[103,87,90,89,"shape"],[103,92,90,94],[103,94,90,96],[103,95,90,97],[104,4,91,4],[105,4,92,4],[105,8,92,8,"$defaultValue"],[105,21,92,21],[105,22,92,22,"rank"],[105,26,92,26],[105,31,92,31],[105,32,92,32],[105,34,92,34],[106,6,93,8],[106,12,93,14],[106,16,93,18,"Error"],[106,21,93,23],[106,22,93,24],[106,77,93,79,"$defaultValue"],[106,90,93,92],[106,91,93,93,"shape"],[106,96,93,98],[106,98,93,100],[106,99,93,101],[107,4,94,4],[108,4,95,4],[108,10,95,10,"inputs"],[108,16,95,16],[108,19,95,19],[109,6,96,8,"indices"],[109,13,96,15],[109,15,96,17,"$indices"],[109,23,96,25],[110,6,97,8,"values"],[110,12,97,14],[110,14,97,16,"$values"],[110,21,97,23],[111,6,98,8,"denseShape"],[111,16,98,18],[111,18,98,20,"$denseShape"],[111,29,98,31],[112,6,99,8,"defaultValue"],[112,18,99,20],[112,20,99,22,"$defaultValue"],[113,4,100,4],[113,5,100,5],[114,4,101,4],[114,10,101,10,"result"],[114,16,101,16],[114,19,101,19,"ENGINE"],[114,26,101,25],[114,27,101,25,"ENGINE"],[114,33,101,25],[114,34,101,26,"runKernel"],[114,43,101,35],[114,44,101,36,"SparseFillEmptyRows"],[114,57,101,55],[114,58,101,55,"SparseFillEmptyRows"],[114,77,101,55],[114,79,101,57,"inputs"],[114,85,101,63],[114,86,101,64],[115,4,102,4],[115,11,102,11],[116,6,103,8,"outputIndices"],[116,19,103,21],[116,21,103,23,"result"],[116,27,103,29],[116,28,103,30],[116,29,103,31],[116,30,103,32],[117,6,104,8,"outputValues"],[117,18,104,20],[117,20,104,22,"result"],[117,26,104,28],[117,27,104,29],[117,28,104,30],[117,29,104,31],[118,6,105,8,"emptyRowIndicator"],[118,23,105,25],[118,25,105,27,"result"],[118,31,105,33],[118,32,105,34],[118,33,105,35],[118,34,105,36],[119,6,106,8,"reverseIndexMap"],[119,21,106,23],[119,23,106,25,"result"],[119,29,106,31],[119,30,106,32],[119,31,106,33],[120,4,107,4],[120,5,107,5],[121,2,108,0],[122,2,109,7],[122,8,109,13,"sparseFillEmptyRows"],[122,27,109,32],[122,30,109,35],[122,45,109,51],[122,49,109,51,"op"],[122,59,109,53],[122,60,109,53,"op"],[122,62,109,53],[122,64,109,54],[123,4,109,56,"sparseFillEmptyRows_"],[124,2,109,77],[124,3,109,78],[124,4,109,79],[125,0,109,80],[125,3]],"functionMap":{"names":["<global>","sparseFillEmptyRows_"],"mappings":"AAA;AC4E;CD+B"},"hasCjsExports":false},"type":"js/module"}]}