{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":56,"index":759}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}},{"name":"../cpu_util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":760},"end":{"line":18,"column":47,"index":807}}],"key":"5L5S4GXlh/uJh1MrXQbkPSVOWm4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.mirrorPad = mirrorPad;\n  Object.defineProperty(exports, \"mirrorPadConfig\", {\n    enumerable: true,\n    get: function () {\n      return mirrorPadConfig;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  var _cpu_util = require(_dependencyMap[1], \"../cpu_util\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  function mirrorPad(args) {\n    const {\n      inputs,\n      backend,\n      attrs\n    } = args;\n    const {\n      x\n    } = inputs;\n    const {\n      paddings,\n      mode\n    } = attrs;\n    (0, _cpu_util.assertNotComplex)(x, 'mirrorPad');\n    const outShape = paddings.map((p, i) => p[0] /* beforePad */ + x.shape[i] + p[1] /* afterPad */);\n    const start = paddings.map(p => p[0]);\n    const end = paddings.map((p, i) => p[0] + x.shape[i]);\n    const offset = mode === 'reflect' ? 0 : 1;\n    const xVals = backend.data.get(x.dataId).values;\n    const xRank = x.shape.length;\n    const xStrides = _tensorflowTfjsCore.util.computeStrides(x.shape);\n    const resultSize = _tensorflowTfjsCore.util.sizeFromShape(outShape);\n    const resultRank = outShape.length;\n    const resultStrides = _tensorflowTfjsCore.util.computeStrides(outShape);\n    const resVals = _tensorflowTfjsCore.util.getTypedArrayFromDType(x.dtype, resultSize);\n    for (let i = 0; i < resultSize; i++) {\n      let coords = _tensorflowTfjsCore.util.indexToLoc(i, resultRank, resultStrides);\n      for (let i = 0; i < resultRank; i++) {\n        if (coords[i] < start[i]) {\n          coords[i] = start[i] * 2 - coords[i] - offset;\n        } else if (coords[i] >= end[i]) {\n          coords[i] = (end[i] - 1) * 2 - coords[i] + offset;\n        }\n      }\n      coords = coords.map((c, i) => c - start[i]);\n      const inIndex = _tensorflowTfjsCore.util.locToIndex(coords, xRank, xStrides);\n      resVals[i] = xVals[inIndex];\n    }\n    const outId = backend.write(resVals, outShape, x.dtype);\n    return {\n      dataId: outId,\n      shape: outShape,\n      dtype: x.dtype\n    };\n  }\n  const mirrorPadConfig = {\n    kernelName: _tensorflowTfjsCore.MirrorPad,\n    backendName: 'cpu',\n    kernelFunc: mirrorPad\n  };\n});","lineCount":83,"map":[[7,2,19,0,"exports"],[7,9,19,0],[7,10,19,0,"mirrorPad"],[7,19,19,0],[7,22,19,0,"mirrorPad"],[7,31,19,0],[8,2,52,0,"Object"],[8,8,52,0],[8,9,52,0,"defineProperty"],[8,23,52,0],[8,24,52,0,"exports"],[8,31,52,0],[9,4,52,0,"enumerable"],[9,14,52,0],[10,4,52,0,"get"],[10,7,52,0],[10,18,52,0,"get"],[10,19,52,0],[11,6,52,0],[11,13,52,0,"mirrorPadConfig"],[11,28,52,0],[12,4,52,0],[13,2,52,0],[14,2,17,0],[14,6,17,0,"_tensorflowTfjsCore"],[14,25,17,0],[14,28,17,0,"require"],[14,35,17,0],[14,36,17,0,"_dependencyMap"],[14,50,17,0],[15,2,18,0],[15,6,18,0,"_cpu_util"],[15,15,18,0],[15,18,18,0,"require"],[15,25,18,0],[15,26,18,0,"_dependencyMap"],[15,40,18,0],[16,2,1,0],[17,0,2,0],[18,0,3,0],[19,0,4,0],[20,0,5,0],[21,0,6,0],[22,0,7,0],[23,0,8,0],[24,0,9,0],[25,0,10,0],[26,0,11,0],[27,0,12,0],[28,0,13,0],[29,0,14,0],[30,0,15,0],[31,0,16,0],[33,2,19,7],[33,11,19,16,"mirrorPad"],[33,20,19,25,"mirrorPad"],[33,21,19,26,"args"],[33,25,19,30],[33,27,19,32],[34,4,20,4],[34,10,20,10],[35,6,20,12,"inputs"],[35,12,20,18],[36,6,20,20,"backend"],[36,13,20,27],[37,6,20,29,"attrs"],[38,4,20,35],[38,5,20,36],[38,8,20,39,"args"],[38,12,20,43],[39,4,21,4],[39,10,21,10],[40,6,21,12,"x"],[41,4,21,14],[41,5,21,15],[41,8,21,18,"inputs"],[41,14,21,24],[42,4,22,4],[42,10,22,10],[43,6,22,12,"paddings"],[43,14,22,20],[44,6,22,22,"mode"],[45,4,22,27],[45,5,22,28],[45,8,22,31,"attrs"],[45,13,22,36],[46,4,23,4],[46,8,23,4,"assertNotComplex"],[46,17,23,20],[46,18,23,20,"assertNotComplex"],[46,34,23,20],[46,36,23,21,"x"],[46,37,23,22],[46,39,23,24],[46,50,23,35],[46,51,23,36],[47,4,24,4],[47,10,24,10,"outShape"],[47,18,24,18],[47,21,24,21,"paddings"],[47,29,24,29],[47,30,24,30,"map"],[47,33,24,33],[47,34,24,34],[47,35,24,35,"p"],[47,36,24,36],[47,38,24,38,"i"],[47,39,24,39],[47,44,24,44,"p"],[47,45,24,45],[47,46,24,46],[47,47,24,47],[47,48,24,48],[47,49,24,49],[47,67,24,67,"x"],[47,68,24,68],[47,69,24,69,"shape"],[47,74,24,74],[47,75,24,75,"i"],[47,76,24,76],[47,77,24,77],[47,80,24,80,"p"],[47,81,24,81],[47,82,24,82],[47,83,24,83],[47,84,24,84],[47,85,24,85],[47,99,24,99],[47,100,24,100],[48,4,25,4],[48,10,25,10,"start"],[48,15,25,15],[48,18,25,18,"paddings"],[48,26,25,26],[48,27,25,27,"map"],[48,30,25,30],[48,31,25,31,"p"],[48,32,25,32],[48,36,25,36,"p"],[48,37,25,37],[48,38,25,38],[48,39,25,39],[48,40,25,40],[48,41,25,41],[49,4,26,4],[49,10,26,10,"end"],[49,13,26,13],[49,16,26,16,"paddings"],[49,24,26,24],[49,25,26,25,"map"],[49,28,26,28],[49,29,26,29],[49,30,26,30,"p"],[49,31,26,31],[49,33,26,33,"i"],[49,34,26,34],[49,39,26,39,"p"],[49,40,26,40],[49,41,26,41],[49,42,26,42],[49,43,26,43],[49,46,26,46,"x"],[49,47,26,47],[49,48,26,48,"shape"],[49,53,26,53],[49,54,26,54,"i"],[49,55,26,55],[49,56,26,56],[49,57,26,57],[50,4,27,4],[50,10,27,10,"offset"],[50,16,27,16],[50,19,27,19,"mode"],[50,23,27,23],[50,28,27,28],[50,37,27,37],[50,40,27,40],[50,41,27,41],[50,44,27,44],[50,45,27,45],[51,4,28,4],[51,10,28,10,"xVals"],[51,15,28,15],[51,18,28,18,"backend"],[51,25,28,25],[51,26,28,26,"data"],[51,30,28,30],[51,31,28,31,"get"],[51,34,28,34],[51,35,28,35,"x"],[51,36,28,36],[51,37,28,37,"dataId"],[51,43,28,43],[51,44,28,44],[51,45,28,45,"values"],[51,51,28,51],[52,4,29,4],[52,10,29,10,"xRank"],[52,15,29,15],[52,18,29,18,"x"],[52,19,29,19],[52,20,29,20,"shape"],[52,25,29,25],[52,26,29,26,"length"],[52,32,29,32],[53,4,30,4],[53,10,30,10,"xStrides"],[53,18,30,18],[53,21,30,21,"util"],[53,40,30,25],[53,41,30,25,"util"],[53,45,30,25],[53,46,30,26,"computeStrides"],[53,60,30,40],[53,61,30,41,"x"],[53,62,30,42],[53,63,30,43,"shape"],[53,68,30,48],[53,69,30,49],[54,4,31,4],[54,10,31,10,"resultSize"],[54,20,31,20],[54,23,31,23,"util"],[54,42,31,27],[54,43,31,27,"util"],[54,47,31,27],[54,48,31,28,"sizeFromShape"],[54,61,31,41],[54,62,31,42,"outShape"],[54,70,31,50],[54,71,31,51],[55,4,32,4],[55,10,32,10,"resultRank"],[55,20,32,20],[55,23,32,23,"outShape"],[55,31,32,31],[55,32,32,32,"length"],[55,38,32,38],[56,4,33,4],[56,10,33,10,"resultStrides"],[56,23,33,23],[56,26,33,26,"util"],[56,45,33,30],[56,46,33,30,"util"],[56,50,33,30],[56,51,33,31,"computeStrides"],[56,65,33,45],[56,66,33,46,"outShape"],[56,74,33,54],[56,75,33,55],[57,4,34,4],[57,10,34,10,"resVals"],[57,17,34,17],[57,20,34,20,"util"],[57,39,34,24],[57,40,34,24,"util"],[57,44,34,24],[57,45,34,25,"getTypedArrayFromDType"],[57,67,34,47],[57,68,34,48,"x"],[57,69,34,49],[57,70,34,50,"dtype"],[57,75,34,55],[57,77,34,57,"resultSize"],[57,87,34,67],[57,88,34,68],[58,4,35,4],[58,9,35,9],[58,13,35,13,"i"],[58,14,35,14],[58,17,35,17],[58,18,35,18],[58,20,35,20,"i"],[58,21,35,21],[58,24,35,24,"resultSize"],[58,34,35,34],[58,36,35,36,"i"],[58,37,35,37],[58,39,35,39],[58,41,35,41],[59,6,36,8],[59,10,36,12,"coords"],[59,16,36,18],[59,19,36,21,"util"],[59,38,36,25],[59,39,36,25,"util"],[59,43,36,25],[59,44,36,26,"indexToLoc"],[59,54,36,36],[59,55,36,37,"i"],[59,56,36,38],[59,58,36,40,"resultRank"],[59,68,36,50],[59,70,36,52,"resultStrides"],[59,83,36,65],[59,84,36,66],[60,6,37,8],[60,11,37,13],[60,15,37,17,"i"],[60,16,37,18],[60,19,37,21],[60,20,37,22],[60,22,37,24,"i"],[60,23,37,25],[60,26,37,28,"resultRank"],[60,36,37,38],[60,38,37,40,"i"],[60,39,37,41],[60,41,37,43],[60,43,37,45],[61,8,38,12],[61,12,38,16,"coords"],[61,18,38,22],[61,19,38,23,"i"],[61,20,38,24],[61,21,38,25],[61,24,38,28,"start"],[61,29,38,33],[61,30,38,34,"i"],[61,31,38,35],[61,32,38,36],[61,34,38,38],[62,10,39,16,"coords"],[62,16,39,22],[62,17,39,23,"i"],[62,18,39,24],[62,19,39,25],[62,22,39,28,"start"],[62,27,39,33],[62,28,39,34,"i"],[62,29,39,35],[62,30,39,36],[62,33,39,39],[62,34,39,40],[62,37,39,43,"coords"],[62,43,39,49],[62,44,39,50,"i"],[62,45,39,51],[62,46,39,52],[62,49,39,55,"offset"],[62,55,39,61],[63,8,40,12],[63,9,40,13],[63,15,41,17],[63,19,41,21,"coords"],[63,25,41,27],[63,26,41,28,"i"],[63,27,41,29],[63,28,41,30],[63,32,41,34,"end"],[63,35,41,37],[63,36,41,38,"i"],[63,37,41,39],[63,38,41,40],[63,40,41,42],[64,10,42,16,"coords"],[64,16,42,22],[64,17,42,23,"i"],[64,18,42,24],[64,19,42,25],[64,22,42,28],[64,23,42,29,"end"],[64,26,42,32],[64,27,42,33,"i"],[64,28,42,34],[64,29,42,35],[64,32,42,38],[64,33,42,39],[64,37,42,43],[64,38,42,44],[64,41,42,47,"coords"],[64,47,42,53],[64,48,42,54,"i"],[64,49,42,55],[64,50,42,56],[64,53,42,59,"offset"],[64,59,42,65],[65,8,43,12],[66,6,44,8],[67,6,45,8,"coords"],[67,12,45,14],[67,15,45,17,"coords"],[67,21,45,23],[67,22,45,24,"map"],[67,25,45,27],[67,26,45,28],[67,27,45,29,"c"],[67,28,45,30],[67,30,45,32,"i"],[67,31,45,33],[67,36,45,38,"c"],[67,37,45,39],[67,40,45,42,"start"],[67,45,45,47],[67,46,45,48,"i"],[67,47,45,49],[67,48,45,50],[67,49,45,51],[68,6,46,8],[68,12,46,14,"inIndex"],[68,19,46,21],[68,22,46,24,"util"],[68,41,46,28],[68,42,46,28,"util"],[68,46,46,28],[68,47,46,29,"locToIndex"],[68,57,46,39],[68,58,46,40,"coords"],[68,64,46,46],[68,66,46,48,"xRank"],[68,71,46,53],[68,73,46,55,"xStrides"],[68,81,46,63],[68,82,46,64],[69,6,47,8,"resVals"],[69,13,47,15],[69,14,47,16,"i"],[69,15,47,17],[69,16,47,18],[69,19,47,21,"xVals"],[69,24,47,26],[69,25,47,27,"inIndex"],[69,32,47,34],[69,33,47,35],[70,4,48,4],[71,4,49,4],[71,10,49,10,"outId"],[71,15,49,15],[71,18,49,18,"backend"],[71,25,49,25],[71,26,49,26,"write"],[71,31,49,31],[71,32,49,32,"resVals"],[71,39,49,39],[71,41,49,41,"outShape"],[71,49,49,49],[71,51,49,51,"x"],[71,52,49,52],[71,53,49,53,"dtype"],[71,58,49,58],[71,59,49,59],[72,4,50,4],[72,11,50,11],[73,6,50,13,"dataId"],[73,12,50,19],[73,14,50,21,"outId"],[73,19,50,26],[74,6,50,28,"shape"],[74,11,50,33],[74,13,50,35,"outShape"],[74,21,50,43],[75,6,50,45,"dtype"],[75,11,50,50],[75,13,50,52,"x"],[75,14,50,53],[75,15,50,54,"dtype"],[76,4,50,60],[76,5,50,61],[77,2,51,0],[78,2,52,7],[78,8,52,13,"mirrorPadConfig"],[78,23,52,28],[78,26,52,31],[79,4,53,4,"kernelName"],[79,14,53,14],[79,16,53,16,"MirrorPad"],[79,35,53,25],[79,36,53,25,"MirrorPad"],[79,45,53,25],[80,4,54,4,"backendName"],[80,15,54,15],[80,17,54,17],[80,22,54,22],[81,4,55,4,"kernelFunc"],[81,14,55,14],[81,16,55,16,"mirrorPad"],[82,2,56,0],[82,3,56,1],[83,0,56,2],[83,3]],"functionMap":{"names":["<global>","mirrorPad","paddings.map$argument_0","coords.map$argument_0"],"mappings":"AAA;OCkB;kCCK,kDD;+BCC,SD;6BCC,2BD;4BEmB,sBF;CDM"},"hasCjsExports":false},"type":"js/module"}]}