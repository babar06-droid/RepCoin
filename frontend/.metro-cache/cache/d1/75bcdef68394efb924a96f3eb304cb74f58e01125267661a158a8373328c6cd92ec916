{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":77,"index":780}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}},{"name":"../kernel_utils/reduce","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":781},"end":{"line":18,"column":48,"index":829}}],"key":"jfnNBpzwIopyFjddGB5/poFfoDQ=","exportNames":["*"],"imports":1}},{"name":"../kernel_utils/shared","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":830},"end":{"line":19,"column":53,"index":883}}],"key":"JzS9qfQGP0NvwhobUV8d6bPV3h4=","exportNames":["*"],"imports":1}},{"name":"./Reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":884},"end":{"line":20,"column":36,"index":920}}],"key":"EUWK+oKi/AwokPOQ1jng5DYfQSc=","exportNames":["*"],"imports":1}},{"name":"./Transpose","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":921},"end":{"line":21,"column":40,"index":961}}],"key":"F6S1ekgW6WEHcH6rql/beO2khwY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.prod = prod;\n  Object.defineProperty(exports, \"prodConfig\", {\n    enumerable: true,\n    get: function () {\n      return prodConfig;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  var _kernel_utilsReduce = require(_dependencyMap[1], \"../kernel_utils/reduce\");\n  var _kernel_utilsShared = require(_dependencyMap[2], \"../kernel_utils/shared\");\n  var _Reshape = require(_dependencyMap[3], \"./Reshape\");\n  var _Transpose = require(_dependencyMap[4], \"./Transpose\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  function prod(args) {\n    const {\n      inputs,\n      backend,\n      attrs\n    } = args;\n    const {\n      x\n    } = inputs;\n    const {\n      axis,\n      keepDims\n    } = attrs;\n    const xRank = x.shape.length;\n    const toDispose = [];\n    const origAxes = _tensorflowTfjsCore.util.parseAxisParam(axis, x.shape);\n    let axes = origAxes;\n    const permutedAxes = _tensorflowTfjsCore.backend_util.getAxesPermutation(axes, xRank);\n    let permutedX = x;\n    if (permutedAxes != null) {\n      permutedX = (0, _Transpose.transpose)({\n        inputs: {\n          x\n        },\n        backend,\n        attrs: {\n          perm: permutedAxes\n        }\n      });\n      axes = _tensorflowTfjsCore.backend_util.getInnerMostAxes(axes.length, xRank);\n      toDispose.push(permutedX);\n    }\n    _tensorflowTfjsCore.backend_util.assertAxesAreInnerMostDims('prod', axes, xRank);\n    let res;\n    if (backend.shouldExecuteOnCPU([permutedX])) {\n      const xVals = backend.texData.get(permutedX.dataId).values;\n      const {\n        outVals,\n        outShape,\n        outDtype\n      } = (0, _kernel_utilsShared.prodImplCPU)(permutedX.shape, permutedX.dtype, xVals, axes);\n      res = backend.makeTensorInfo(outShape, outDtype, outVals);\n    } else {\n      const [outShape, reduceShape] = _tensorflowTfjsCore.backend_util.computeOutAndReduceShapes(permutedX.shape, axes);\n      const inSize = _tensorflowTfjsCore.util.sizeFromShape(reduceShape);\n      const a2D = (0, _Reshape.reshape)({\n        inputs: {\n          x: permutedX\n        },\n        backend,\n        attrs: {\n          shape: [-1, inSize]\n        }\n      });\n      const outputDType = (0, _tensorflowTfjsCore.sumOutType)(x.dtype);\n      const reduced = (0, _kernel_utilsReduce.reduce)(a2D, outputDType, 'prod', backend);\n      res = (0, _Reshape.reshape)({\n        inputs: {\n          x: reduced\n        },\n        backend,\n        attrs: {\n          shape: outShape\n        }\n      });\n      toDispose.push(a2D);\n      toDispose.push(reduced);\n    }\n    if (keepDims) {\n      toDispose.push(res);\n      const newShape = _tensorflowTfjsCore.backend_util.expandShapeToKeepDim(res.shape, origAxes);\n      res = (0, _Reshape.reshape)({\n        inputs: {\n          x: res\n        },\n        backend,\n        attrs: {\n          shape: newShape\n        }\n      });\n    }\n    toDispose.forEach(t => backend.disposeIntermediateTensorInfo(t));\n    return res;\n  }\n  const prodConfig = {\n    kernelName: _tensorflowTfjsCore.Prod,\n    backendName: 'webgl',\n    kernelFunc: prod\n  };\n});","lineCount":125,"map":[[7,2,22,0,"exports"],[7,9,22,0],[7,10,22,0,"prod"],[7,14,22,0],[7,17,22,0,"prod"],[7,21,22,0],[8,2,62,0,"Object"],[8,8,62,0],[8,9,62,0,"defineProperty"],[8,23,62,0],[8,24,62,0,"exports"],[8,31,62,0],[9,4,62,0,"enumerable"],[9,14,62,0],[10,4,62,0,"get"],[10,7,62,0],[10,18,62,0,"get"],[10,19,62,0],[11,6,62,0],[11,13,62,0,"prodConfig"],[11,23,62,0],[12,4,62,0],[13,2,62,0],[14,2,17,0],[14,6,17,0,"_tensorflowTfjsCore"],[14,25,17,0],[14,28,17,0,"require"],[14,35,17,0],[14,36,17,0,"_dependencyMap"],[14,50,17,0],[15,2,18,0],[15,6,18,0,"_kernel_utilsReduce"],[15,25,18,0],[15,28,18,0,"require"],[15,35,18,0],[15,36,18,0,"_dependencyMap"],[15,50,18,0],[16,2,19,0],[16,6,19,0,"_kernel_utilsShared"],[16,25,19,0],[16,28,19,0,"require"],[16,35,19,0],[16,36,19,0,"_dependencyMap"],[16,50,19,0],[17,2,20,0],[17,6,20,0,"_Reshape"],[17,14,20,0],[17,17,20,0,"require"],[17,24,20,0],[17,25,20,0,"_dependencyMap"],[17,39,20,0],[18,2,21,0],[18,6,21,0,"_Transpose"],[18,16,21,0],[18,19,21,0,"require"],[18,26,21,0],[18,27,21,0,"_dependencyMap"],[18,41,21,0],[19,2,1,0],[20,0,2,0],[21,0,3,0],[22,0,4,0],[23,0,5,0],[24,0,6,0],[25,0,7,0],[26,0,8,0],[27,0,9,0],[28,0,10,0],[29,0,11,0],[30,0,12,0],[31,0,13,0],[32,0,14,0],[33,0,15,0],[34,0,16,0],[36,2,22,7],[36,11,22,16,"prod"],[36,15,22,20,"prod"],[36,16,22,21,"args"],[36,20,22,25],[36,22,22,27],[37,4,23,4],[37,10,23,10],[38,6,23,12,"inputs"],[38,12,23,18],[39,6,23,20,"backend"],[39,13,23,27],[40,6,23,29,"attrs"],[41,4,23,35],[41,5,23,36],[41,8,23,39,"args"],[41,12,23,43],[42,4,24,4],[42,10,24,10],[43,6,24,12,"x"],[44,4,24,14],[44,5,24,15],[44,8,24,18,"inputs"],[44,14,24,24],[45,4,25,4],[45,10,25,10],[46,6,25,12,"axis"],[46,10,25,16],[47,6,25,18,"keepDims"],[48,4,25,27],[48,5,25,28],[48,8,25,31,"attrs"],[48,13,25,36],[49,4,26,4],[49,10,26,10,"xRank"],[49,15,26,15],[49,18,26,18,"x"],[49,19,26,19],[49,20,26,20,"shape"],[49,25,26,25],[49,26,26,26,"length"],[49,32,26,32],[50,4,27,4],[50,10,27,10,"toDispose"],[50,19,27,19],[50,22,27,22],[50,24,27,24],[51,4,28,4],[51,10,28,10,"origAxes"],[51,18,28,18],[51,21,28,21,"util"],[51,40,28,25],[51,41,28,25,"util"],[51,45,28,25],[51,46,28,26,"parseAxisParam"],[51,60,28,40],[51,61,28,41,"axis"],[51,65,28,45],[51,67,28,47,"x"],[51,68,28,48],[51,69,28,49,"shape"],[51,74,28,54],[51,75,28,55],[52,4,29,4],[52,8,29,8,"axes"],[52,12,29,12],[52,15,29,15,"origAxes"],[52,23,29,23],[53,4,30,4],[53,10,30,10,"permutedAxes"],[53,22,30,22],[53,25,30,25,"backend_util"],[53,44,30,37],[53,45,30,37,"backend_util"],[53,57,30,37],[53,58,30,38,"getAxesPermutation"],[53,76,30,56],[53,77,30,57,"axes"],[53,81,30,61],[53,83,30,63,"xRank"],[53,88,30,68],[53,89,30,69],[54,4,31,4],[54,8,31,8,"permutedX"],[54,17,31,17],[54,20,31,20,"x"],[54,21,31,21],[55,4,32,4],[55,8,32,8,"permutedAxes"],[55,20,32,20],[55,24,32,24],[55,28,32,28],[55,30,32,30],[56,6,33,8,"permutedX"],[56,15,33,17],[56,18,33,20],[56,22,33,20,"transpose"],[56,32,33,29],[56,33,33,29,"transpose"],[56,42,33,29],[56,44,33,30],[57,8,33,32,"inputs"],[57,14,33,38],[57,16,33,40],[58,10,33,42,"x"],[59,8,33,44],[59,9,33,45],[60,8,33,47,"backend"],[60,15,33,54],[61,8,33,56,"attrs"],[61,13,33,61],[61,15,33,63],[62,10,33,65,"perm"],[62,14,33,69],[62,16,33,71,"permutedAxes"],[63,8,33,84],[64,6,33,86],[64,7,33,87],[64,8,33,88],[65,6,34,8,"axes"],[65,10,34,12],[65,13,34,15,"backend_util"],[65,32,34,27],[65,33,34,27,"backend_util"],[65,45,34,27],[65,46,34,28,"getInnerMostAxes"],[65,62,34,44],[65,63,34,45,"axes"],[65,67,34,49],[65,68,34,50,"length"],[65,74,34,56],[65,76,34,58,"xRank"],[65,81,34,63],[65,82,34,64],[66,6,35,8,"toDispose"],[66,15,35,17],[66,16,35,18,"push"],[66,20,35,22],[66,21,35,23,"permutedX"],[66,30,35,32],[66,31,35,33],[67,4,36,4],[68,4,37,4,"backend_util"],[68,23,37,16],[68,24,37,16,"backend_util"],[68,36,37,16],[68,37,37,17,"assertAxesAreInnerMostDims"],[68,63,37,43],[68,64,37,44],[68,70,37,50],[68,72,37,52,"axes"],[68,76,37,56],[68,78,37,58,"xRank"],[68,83,37,63],[68,84,37,64],[69,4,38,4],[69,8,38,8,"res"],[69,11,38,11],[70,4,39,4],[70,8,39,8,"backend"],[70,15,39,15],[70,16,39,16,"shouldExecuteOnCPU"],[70,34,39,34],[70,35,39,35],[70,36,39,36,"permutedX"],[70,45,39,45],[70,46,39,46],[70,47,39,47],[70,49,39,49],[71,6,40,8],[71,12,40,14,"xVals"],[71,17,40,19],[71,20,40,22,"backend"],[71,27,40,29],[71,28,40,30,"texData"],[71,35,40,37],[71,36,40,38,"get"],[71,39,40,41],[71,40,40,42,"permutedX"],[71,49,40,51],[71,50,40,52,"dataId"],[71,56,40,58],[71,57,40,59],[71,58,40,60,"values"],[71,64,40,66],[72,6,41,8],[72,12,41,14],[73,8,41,16,"outVals"],[73,15,41,23],[74,8,41,25,"outShape"],[74,16,41,33],[75,8,41,35,"outDtype"],[76,6,41,44],[76,7,41,45],[76,10,41,48],[76,14,41,48,"prodImplCPU"],[76,33,41,59],[76,34,41,59,"prodImplCPU"],[76,45,41,59],[76,47,41,60,"permutedX"],[76,56,41,69],[76,57,41,70,"shape"],[76,62,41,75],[76,64,41,77,"permutedX"],[76,73,41,86],[76,74,41,87,"dtype"],[76,79,41,92],[76,81,41,94,"xVals"],[76,86,41,99],[76,88,41,101,"axes"],[76,92,41,105],[76,93,41,106],[77,6,42,8,"res"],[77,9,42,11],[77,12,42,14,"backend"],[77,19,42,21],[77,20,42,22,"makeTensorInfo"],[77,34,42,36],[77,35,42,37,"outShape"],[77,43,42,45],[77,45,42,47,"outDtype"],[77,53,42,55],[77,55,42,57,"outVals"],[77,62,42,64],[77,63,42,65],[78,4,43,4],[78,5,43,5],[78,11,44,9],[79,6,45,8],[79,12,45,14],[79,13,45,15,"outShape"],[79,21,45,23],[79,23,45,25,"reduceShape"],[79,34,45,36],[79,35,45,37],[79,38,45,40,"backend_util"],[79,57,45,52],[79,58,45,52,"backend_util"],[79,70,45,52],[79,71,45,53,"computeOutAndReduceShapes"],[79,96,45,78],[79,97,45,79,"permutedX"],[79,106,45,88],[79,107,45,89,"shape"],[79,112,45,94],[79,114,45,96,"axes"],[79,118,45,100],[79,119,45,101],[80,6,46,8],[80,12,46,14,"inSize"],[80,18,46,20],[80,21,46,23,"util"],[80,40,46,27],[80,41,46,27,"util"],[80,45,46,27],[80,46,46,28,"sizeFromShape"],[80,59,46,41],[80,60,46,42,"reduceShape"],[80,71,46,53],[80,72,46,54],[81,6,47,8],[81,12,47,14,"a2D"],[81,15,47,17],[81,18,47,20],[81,22,47,20,"reshape"],[81,30,47,27],[81,31,47,27,"reshape"],[81,38,47,27],[81,40,47,28],[82,8,47,30,"inputs"],[82,14,47,36],[82,16,47,38],[83,10,47,40,"x"],[83,11,47,41],[83,13,47,43,"permutedX"],[84,8,47,53],[84,9,47,54],[85,8,47,56,"backend"],[85,15,47,63],[86,8,47,65,"attrs"],[86,13,47,70],[86,15,47,72],[87,10,47,74,"shape"],[87,15,47,79],[87,17,47,81],[87,18,47,82],[87,19,47,83],[87,20,47,84],[87,22,47,86,"inSize"],[87,28,47,92],[88,8,47,94],[89,6,47,96],[89,7,47,97],[89,8,47,98],[90,6,48,8],[90,12,48,14,"outputDType"],[90,23,48,25],[90,26,48,28],[90,30,48,28,"sumOutType"],[90,49,48,38],[90,50,48,38,"sumOutType"],[90,60,48,38],[90,62,48,39,"x"],[90,63,48,40],[90,64,48,41,"dtype"],[90,69,48,46],[90,70,48,47],[91,6,49,8],[91,12,49,14,"reduced"],[91,19,49,21],[91,22,49,24],[91,26,49,24,"reduce"],[91,45,49,30],[91,46,49,30,"reduce"],[91,52,49,30],[91,54,49,31,"a2D"],[91,57,49,34],[91,59,49,36,"outputDType"],[91,70,49,47],[91,72,49,49],[91,78,49,55],[91,80,49,57,"backend"],[91,87,49,64],[91,88,49,65],[92,6,50,8,"res"],[92,9,50,11],[92,12,50,14],[92,16,50,14,"reshape"],[92,24,50,21],[92,25,50,21,"reshape"],[92,32,50,21],[92,34,50,22],[93,8,50,24,"inputs"],[93,14,50,30],[93,16,50,32],[94,10,50,34,"x"],[94,11,50,35],[94,13,50,37,"reduced"],[95,8,50,45],[95,9,50,46],[96,8,50,48,"backend"],[96,15,50,55],[97,8,50,57,"attrs"],[97,13,50,62],[97,15,50,64],[98,10,50,66,"shape"],[98,15,50,71],[98,17,50,73,"outShape"],[99,8,50,82],[100,6,50,84],[100,7,50,85],[100,8,50,86],[101,6,51,8,"toDispose"],[101,15,51,17],[101,16,51,18,"push"],[101,20,51,22],[101,21,51,23,"a2D"],[101,24,51,26],[101,25,51,27],[102,6,52,8,"toDispose"],[102,15,52,17],[102,16,52,18,"push"],[102,20,52,22],[102,21,52,23,"reduced"],[102,28,52,30],[102,29,52,31],[103,4,53,4],[104,4,54,4],[104,8,54,8,"keepDims"],[104,16,54,16],[104,18,54,18],[105,6,55,8,"toDispose"],[105,15,55,17],[105,16,55,18,"push"],[105,20,55,22],[105,21,55,23,"res"],[105,24,55,26],[105,25,55,27],[106,6,56,8],[106,12,56,14,"newShape"],[106,20,56,22],[106,23,56,25,"backend_util"],[106,42,56,37],[106,43,56,37,"backend_util"],[106,55,56,37],[106,56,56,38,"expandShapeToKeepDim"],[106,76,56,58],[106,77,56,59,"res"],[106,80,56,62],[106,81,56,63,"shape"],[106,86,56,68],[106,88,56,70,"origAxes"],[106,96,56,78],[106,97,56,79],[107,6,57,8,"res"],[107,9,57,11],[107,12,57,14],[107,16,57,14,"reshape"],[107,24,57,21],[107,25,57,21,"reshape"],[107,32,57,21],[107,34,57,22],[108,8,57,24,"inputs"],[108,14,57,30],[108,16,57,32],[109,10,57,34,"x"],[109,11,57,35],[109,13,57,37,"res"],[110,8,57,41],[110,9,57,42],[111,8,57,44,"backend"],[111,15,57,51],[112,8,57,53,"attrs"],[112,13,57,58],[112,15,57,60],[113,10,57,62,"shape"],[113,15,57,67],[113,17,57,69,"newShape"],[114,8,57,78],[115,6,57,80],[115,7,57,81],[115,8,57,82],[116,4,58,4],[117,4,59,4,"toDispose"],[117,13,59,13],[117,14,59,14,"forEach"],[117,21,59,21],[117,22,59,22,"t"],[117,23,59,23],[117,27,59,27,"backend"],[117,34,59,34],[117,35,59,35,"disposeIntermediateTensorInfo"],[117,64,59,64],[117,65,59,65,"t"],[117,66,59,66],[117,67,59,67],[117,68,59,68],[118,4,60,4],[118,11,60,11,"res"],[118,14,60,14],[119,2,61,0],[120,2,62,7],[120,8,62,13,"prodConfig"],[120,18,62,23],[120,21,62,26],[121,4,63,4,"kernelName"],[121,14,63,14],[121,16,63,16,"Prod"],[121,35,63,20],[121,36,63,20,"Prod"],[121,40,63,20],[122,4,64,4,"backendName"],[122,15,64,15],[122,17,64,17],[122,24,64,24],[123,4,65,4,"kernelFunc"],[123,14,65,14],[123,16,65,16,"prod"],[124,2,66,0],[124,3,66,1],[125,0,66,2],[125,3]],"functionMap":{"names":["<global>","prod","toDispose.forEach$argument_0"],"mappings":"AAA;OCqB;sBCqC,6CD;CDE"},"hasCjsExports":false},"type":"js/module"}]}