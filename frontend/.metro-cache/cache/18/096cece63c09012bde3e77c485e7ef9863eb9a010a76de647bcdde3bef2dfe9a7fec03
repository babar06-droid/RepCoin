{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":66,"index":769}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}},{"name":"../conv_gpu","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":770},"end":{"line":18,"column":44,"index":814}}],"key":"ZueZ5Obic+blTezJdvRFLNHEIGU=","exportNames":["*"],"imports":1}},{"name":"../conv_packed_gpu","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":815},"end":{"line":19,"column":57,"index":872}}],"key":"kt8mL1fpvPum+P2nePiNrzWUTb4=","exportNames":["*"],"imports":1}},{"name":"./Conv2D_impl","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":873},"end":{"line":20,"column":65,"index":938}}],"key":"AGtOXpj/hx0wwq5QVUO0yixbiTs=","exportNames":["*"],"imports":1}},{"name":"./Reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":939},"end":{"line":21,"column":36,"index":975}}],"key":"EUWK+oKi/AwokPOQ1jng5DYfQSc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.conv2d = conv2d;\n  Object.defineProperty(exports, \"conv2DConfig\", {\n    enumerable: true,\n    get: function () {\n      return conv2DConfig;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  var _conv_gpu = require(_dependencyMap[1], \"../conv_gpu\");\n  var _conv_packed_gpu = require(_dependencyMap[2], \"../conv_packed_gpu\");\n  var _Conv2D_impl = require(_dependencyMap[3], \"./Conv2D_impl\");\n  var _Reshape = require(_dependencyMap[4], \"./Reshape\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  function conv2d(args) {\n    const {\n      inputs,\n      backend,\n      attrs\n    } = args;\n    const {\n      x,\n      filter\n    } = inputs;\n    const {\n      strides,\n      pad,\n      dataFormat,\n      dilations,\n      dimRoundingMode\n    } = attrs;\n    const $dataFormat = _tensorflowTfjsCore.backend_util.convertConv2DDataFormat(dataFormat);\n    const convInfo = _tensorflowTfjsCore.backend_util.computeConv2DInfo(x.shape, filter.shape, strides, dilations, pad, dimRoundingMode, false /* depthwise */, $dataFormat);\n    let out;\n    if (convInfo.filterHeight === 1 && convInfo.filterWidth === 1 && convInfo.dilationHeight === 1 && convInfo.dilationWidth === 1 && convInfo.strideHeight === 1 && convInfo.strideWidth === 1 && (convInfo.padInfo.type === 'SAME' || convInfo.padInfo.type === 'VALID')) {\n      out = (0, _Conv2D_impl.conv2dByMatMul)({\n        x,\n        filter,\n        convInfo,\n        backend\n      });\n    } else if (convInfo.strideWidth <= 2 && $dataFormat === 'channelsLast' && (0, _tensorflowTfjsCore.env)().getBool('WEBGL_EXP_CONV')) {\n      const program = new _conv_packed_gpu.Conv2DPackedProgram(convInfo);\n      const customValues = [[convInfo.padInfo.top, convInfo.padInfo.left], [convInfo.strideHeight, convInfo.strideWidth], [convInfo.dilationHeight, convInfo.dilationWidth], [convInfo.inHeight, convInfo.inWidth]];\n      out = backend.runWebGLProgram(program, [x, filter], 'float32', customValues);\n    } else if ((0, _tensorflowTfjsCore.env)().getBool('WEBGL_CONV_IM2COL')) {\n      out = (0, _Conv2D_impl.conv2dWithIm2Row)({\n        x,\n        filter,\n        convInfo,\n        backend\n      });\n    } else {\n      const program = new _conv_gpu.Conv2DProgram(convInfo);\n      out = backend.runWebGLProgram(program, [x, filter], 'float32');\n    }\n    const outReshaped = (0, _Reshape.reshape)({\n      inputs: {\n        x: out\n      },\n      backend,\n      attrs: {\n        shape: convInfo.outShape\n      }\n    });\n    backend.disposeIntermediateTensorInfo(out);\n    return outReshaped;\n  }\n  const conv2DConfig = {\n    kernelName: _tensorflowTfjsCore.Conv2D,\n    backendName: 'webgl',\n    kernelFunc: conv2d\n  };\n});","lineCount":95,"map":[[7,2,22,0,"exports"],[7,9,22,0],[7,10,22,0,"conv2d"],[7,16,22,0],[7,19,22,0,"conv2d"],[7,25,22,0],[8,2,58,0,"Object"],[8,8,58,0],[8,9,58,0,"defineProperty"],[8,23,58,0],[8,24,58,0,"exports"],[8,31,58,0],[9,4,58,0,"enumerable"],[9,14,58,0],[10,4,58,0,"get"],[10,7,58,0],[10,18,58,0,"get"],[10,19,58,0],[11,6,58,0],[11,13,58,0,"conv2DConfig"],[11,25,58,0],[12,4,58,0],[13,2,58,0],[14,2,17,0],[14,6,17,0,"_tensorflowTfjsCore"],[14,25,17,0],[14,28,17,0,"require"],[14,35,17,0],[14,36,17,0,"_dependencyMap"],[14,50,17,0],[15,2,18,0],[15,6,18,0,"_conv_gpu"],[15,15,18,0],[15,18,18,0,"require"],[15,25,18,0],[15,26,18,0,"_dependencyMap"],[15,40,18,0],[16,2,19,0],[16,6,19,0,"_conv_packed_gpu"],[16,22,19,0],[16,25,19,0,"require"],[16,32,19,0],[16,33,19,0,"_dependencyMap"],[16,47,19,0],[17,2,20,0],[17,6,20,0,"_Conv2D_impl"],[17,18,20,0],[17,21,20,0,"require"],[17,28,20,0],[17,29,20,0,"_dependencyMap"],[17,43,20,0],[18,2,21,0],[18,6,21,0,"_Reshape"],[18,14,21,0],[18,17,21,0,"require"],[18,24,21,0],[18,25,21,0,"_dependencyMap"],[18,39,21,0],[19,2,1,0],[20,0,2,0],[21,0,3,0],[22,0,4,0],[23,0,5,0],[24,0,6,0],[25,0,7,0],[26,0,8,0],[27,0,9,0],[28,0,10,0],[29,0,11,0],[30,0,12,0],[31,0,13,0],[32,0,14,0],[33,0,15,0],[34,0,16,0],[36,2,22,7],[36,11,22,16,"conv2d"],[36,17,22,22,"conv2d"],[36,18,22,23,"args"],[36,22,22,27],[36,24,22,29],[37,4,23,4],[37,10,23,10],[38,6,23,12,"inputs"],[38,12,23,18],[39,6,23,20,"backend"],[39,13,23,27],[40,6,23,29,"attrs"],[41,4,23,35],[41,5,23,36],[41,8,23,39,"args"],[41,12,23,43],[42,4,24,4],[42,10,24,10],[43,6,24,12,"x"],[43,7,24,13],[44,6,24,15,"filter"],[45,4,24,22],[45,5,24,23],[45,8,24,26,"inputs"],[45,14,24,32],[46,4,25,4],[46,10,25,10],[47,6,25,12,"strides"],[47,13,25,19],[48,6,25,21,"pad"],[48,9,25,24],[49,6,25,26,"dataFormat"],[49,16,25,36],[50,6,25,38,"dilations"],[50,15,25,47],[51,6,25,49,"dimRoundingMode"],[52,4,25,65],[52,5,25,66],[52,8,25,69,"attrs"],[52,13,25,74],[53,4,26,4],[53,10,26,10,"$dataFormat"],[53,21,26,21],[53,24,26,24,"backend_util"],[53,43,26,36],[53,44,26,36,"backend_util"],[53,56,26,36],[53,57,26,37,"convertConv2DDataFormat"],[53,80,26,60],[53,81,26,61,"dataFormat"],[53,91,26,71],[53,92,26,72],[54,4,27,4],[54,10,27,10,"convInfo"],[54,18,27,18],[54,21,27,21,"backend_util"],[54,40,27,33],[54,41,27,33,"backend_util"],[54,53,27,33],[54,54,27,34,"computeConv2DInfo"],[54,71,27,51],[54,72,27,52,"x"],[54,73,27,53],[54,74,27,54,"shape"],[54,79,27,59],[54,81,27,61,"filter"],[54,87,27,67],[54,88,27,68,"shape"],[54,93,27,73],[54,95,27,75,"strides"],[54,102,27,82],[54,104,27,84,"dilations"],[54,113,27,93],[54,115,27,95,"pad"],[54,118,27,98],[54,120,27,100,"dimRoundingMode"],[54,135,27,115],[54,137,27,117],[54,142,27,122],[54,143,27,123],[54,160,27,140,"$dataFormat"],[54,171,27,151],[54,172,27,152],[55,4,28,4],[55,8,28,8,"out"],[55,11,28,11],[56,4,29,4],[56,8,29,8,"convInfo"],[56,16,29,16],[56,17,29,17,"filterHeight"],[56,29,29,29],[56,34,29,34],[56,35,29,35],[56,39,29,39,"convInfo"],[56,47,29,47],[56,48,29,48,"filterWidth"],[56,59,29,59],[56,64,29,64],[56,65,29,65],[56,69,30,8,"convInfo"],[56,77,30,16],[56,78,30,17,"dilationHeight"],[56,92,30,31],[56,97,30,36],[56,98,30,37],[56,102,30,41,"convInfo"],[56,110,30,49],[56,111,30,50,"dilationWidth"],[56,124,30,63],[56,129,30,68],[56,130,30,69],[56,134,31,8,"convInfo"],[56,142,31,16],[56,143,31,17,"strideHeight"],[56,155,31,29],[56,160,31,34],[56,161,31,35],[56,165,31,39,"convInfo"],[56,173,31,47],[56,174,31,48,"strideWidth"],[56,185,31,59],[56,190,31,64],[56,191,31,65],[56,196,32,9,"convInfo"],[56,204,32,17],[56,205,32,18,"padInfo"],[56,212,32,25],[56,213,32,26,"type"],[56,217,32,30],[56,222,32,35],[56,228,32,41],[56,232,32,45,"convInfo"],[56,240,32,53],[56,241,32,54,"padInfo"],[56,248,32,61],[56,249,32,62,"type"],[56,253,32,66],[56,258,32,71],[56,265,32,78],[56,266,32,79],[56,268,32,81],[57,6,33,8,"out"],[57,9,33,11],[57,12,33,14],[57,16,33,14,"conv2dByMatMul"],[57,28,33,28],[57,29,33,28,"conv2dByMatMul"],[57,43,33,28],[57,45,33,29],[58,8,33,31,"x"],[58,9,33,32],[59,8,33,34,"filter"],[59,14,33,40],[60,8,33,42,"convInfo"],[60,16,33,50],[61,8,33,52,"backend"],[62,6,33,60],[62,7,33,61],[62,8,33,62],[63,4,34,4],[63,5,34,5],[63,11,35,9],[63,15,35,13,"convInfo"],[63,23,35,21],[63,24,35,22,"strideWidth"],[63,35,35,33],[63,39,35,37],[63,40,35,38],[63,44,35,42,"$dataFormat"],[63,55,35,53],[63,60,35,58],[63,74,35,72],[63,78,36,11],[63,82,36,11,"env"],[63,101,36,14],[63,102,36,14,"env"],[63,105,36,14],[63,107,36,15],[63,108,36,16],[63,109,36,17,"getBool"],[63,116,36,24],[63,117,36,25],[63,133,36,41],[63,134,36,42],[63,136,36,44],[64,6,37,8],[64,12,37,14,"program"],[64,19,37,21],[64,22,37,24],[64,26,37,28,"Conv2DPackedProgram"],[64,42,37,47],[64,43,37,47,"Conv2DPackedProgram"],[64,62,37,47],[64,63,37,48,"convInfo"],[64,71,37,56],[64,72,37,57],[65,6,38,8],[65,12,38,14,"customValues"],[65,24,38,26],[65,27,38,29],[65,28,39,12],[65,29,39,13,"convInfo"],[65,37,39,21],[65,38,39,22,"padInfo"],[65,45,39,29],[65,46,39,30,"top"],[65,49,39,33],[65,51,39,35,"convInfo"],[65,59,39,43],[65,60,39,44,"padInfo"],[65,67,39,51],[65,68,39,52,"left"],[65,72,39,56],[65,73,39,57],[65,75,40,12],[65,76,40,13,"convInfo"],[65,84,40,21],[65,85,40,22,"strideHeight"],[65,97,40,34],[65,99,40,36,"convInfo"],[65,107,40,44],[65,108,40,45,"strideWidth"],[65,119,40,56],[65,120,40,57],[65,122,41,12],[65,123,41,13,"convInfo"],[65,131,41,21],[65,132,41,22,"dilationHeight"],[65,146,41,36],[65,148,41,38,"convInfo"],[65,156,41,46],[65,157,41,47,"dilationWidth"],[65,170,41,60],[65,171,41,61],[65,173,42,12],[65,174,42,13,"convInfo"],[65,182,42,21],[65,183,42,22,"inHeight"],[65,191,42,30],[65,193,42,32,"convInfo"],[65,201,42,40],[65,202,42,41,"inWidth"],[65,209,42,48],[65,210,42,49],[65,211,43,9],[66,6,44,8,"out"],[66,9,44,11],[66,12,45,12,"backend"],[66,19,45,19],[66,20,45,20,"runWebGLProgram"],[66,35,45,35],[66,36,45,36,"program"],[66,43,45,43],[66,45,45,45],[66,46,45,46,"x"],[66,47,45,47],[66,49,45,49,"filter"],[66,55,45,55],[66,56,45,56],[66,58,45,58],[66,67,45,67],[66,69,45,69,"customValues"],[66,81,45,81],[66,82,45,82],[67,4,46,4],[67,5,46,5],[67,11,47,9],[67,15,47,13],[67,19,47,13,"env"],[67,38,47,16],[67,39,47,16,"env"],[67,42,47,16],[67,44,47,17],[67,45,47,18],[67,46,47,19,"getBool"],[67,53,47,26],[67,54,47,27],[67,73,47,46],[67,74,47,47],[67,76,47,49],[68,6,48,8,"out"],[68,9,48,11],[68,12,48,14],[68,16,48,14,"conv2dWithIm2Row"],[68,28,48,30],[68,29,48,30,"conv2dWithIm2Row"],[68,45,48,30],[68,47,48,31],[69,8,48,33,"x"],[69,9,48,34],[70,8,48,36,"filter"],[70,14,48,42],[71,8,48,44,"convInfo"],[71,16,48,52],[72,8,48,54,"backend"],[73,6,48,62],[73,7,48,63],[73,8,48,64],[74,4,49,4],[74,5,49,5],[74,11,50,9],[75,6,51,8],[75,12,51,14,"program"],[75,19,51,21],[75,22,51,24],[75,26,51,28,"Conv2DProgram"],[75,35,51,41],[75,36,51,41,"Conv2DProgram"],[75,49,51,41],[75,50,51,42,"convInfo"],[75,58,51,50],[75,59,51,51],[76,6,52,8,"out"],[76,9,52,11],[76,12,52,14,"backend"],[76,19,52,21],[76,20,52,22,"runWebGLProgram"],[76,35,52,37],[76,36,52,38,"program"],[76,43,52,45],[76,45,52,47],[76,46,52,48,"x"],[76,47,52,49],[76,49,52,51,"filter"],[76,55,52,57],[76,56,52,58],[76,58,52,60],[76,67,52,69],[76,68,52,70],[77,4,53,4],[78,4,54,4],[78,10,54,10,"outReshaped"],[78,21,54,21],[78,24,54,24],[78,28,54,24,"reshape"],[78,36,54,31],[78,37,54,31,"reshape"],[78,44,54,31],[78,46,54,32],[79,6,54,34,"inputs"],[79,12,54,40],[79,14,54,42],[80,8,54,44,"x"],[80,9,54,45],[80,11,54,47,"out"],[81,6,54,51],[81,7,54,52],[82,6,54,54,"backend"],[82,13,54,61],[83,6,54,63,"attrs"],[83,11,54,68],[83,13,54,70],[84,8,54,72,"shape"],[84,13,54,77],[84,15,54,79,"convInfo"],[84,23,54,87],[84,24,54,88,"outShape"],[85,6,54,97],[86,4,54,99],[86,5,54,100],[86,6,54,101],[87,4,55,4,"backend"],[87,11,55,11],[87,12,55,12,"disposeIntermediateTensorInfo"],[87,41,55,41],[87,42,55,42,"out"],[87,45,55,45],[87,46,55,46],[88,4,56,4],[88,11,56,11,"outReshaped"],[88,22,56,22],[89,2,57,0],[90,2,58,7],[90,8,58,13,"conv2DConfig"],[90,20,58,25],[90,23,58,28],[91,4,59,4,"kernelName"],[91,14,59,14],[91,16,59,16,"Conv2D"],[91,35,59,22],[91,36,59,22,"Conv2D"],[91,42,59,22],[92,4,60,4,"backendName"],[92,15,60,15],[92,17,60,17],[92,24,60,24],[93,4,61,4,"kernelFunc"],[93,14,61,14],[93,16,61,16,"conv2d"],[94,2,62,0],[94,3,62,1],[95,0,62,2],[95,3]],"functionMap":{"names":["<global>","conv2d"],"mappings":"AAA;OCqB;CDmC"},"hasCjsExports":false},"type":"js/module"}]}