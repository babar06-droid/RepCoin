{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":71,"index":774}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}},{"name":"../cpu_util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":775},"end":{"line":18,"column":47,"index":822}}],"key":"5L5S4GXlh/uJh1MrXQbkPSVOWm4=","exportNames":["*"],"imports":1}},{"name":"./Reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":823},"end":{"line":19,"column":36,"index":859}}],"key":"EUWK+oKi/AwokPOQ1jng5DYfQSc=","exportNames":["*"],"imports":1}},{"name":"./Slice","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":860},"end":{"line":20,"column":32,"index":892}}],"key":"vT5DoMUDLMOWA6T5MsUbbgr2jdc=","exportNames":["*"],"imports":1}},{"name":"./StridedSlice_impl","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":893},"end":{"line":21,"column":55,"index":948}}],"key":"xl2YRzgVShbxPDKw+rFveJPh2TU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.stridedSlice = stridedSlice;\n  Object.defineProperty(exports, \"stridedSliceConfig\", {\n    enumerable: true,\n    get: function () {\n      return stridedSliceConfig;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  var _cpu_util = require(_dependencyMap[1], \"../cpu_util\");\n  var _Reshape = require(_dependencyMap[2], \"./Reshape\");\n  var _Slice = require(_dependencyMap[3], \"./Slice\");\n  var _StridedSlice_impl = require(_dependencyMap[4], \"./StridedSlice_impl\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  function stridedSlice(args) {\n    const {\n      inputs,\n      backend,\n      attrs\n    } = args;\n    const {\n      x\n    } = inputs;\n    const {\n      begin,\n      end,\n      strides,\n      beginMask,\n      endMask,\n      ellipsisMask,\n      newAxisMask,\n      shrinkAxisMask\n    } = attrs;\n    (0, _cpu_util.assertNotComplex)(x, 'stridedSlice');\n    const {\n      finalShapeSparse,\n      finalShape,\n      isIdentity,\n      sliceDim0,\n      isSimpleSlice,\n      begin: $begin,\n      end: $end,\n      strides: $strides\n    } = _tensorflowTfjsCore.slice_util.sliceInfo(x.shape, begin, end, strides, beginMask, endMask, ellipsisMask, newAxisMask, shrinkAxisMask);\n    let result;\n    // ref:\n    // https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/strided_slice_op.cc\n    if (isIdentity) {\n      // Optimization #1, slice is a no-op plus reshape\n      result = (0, _Reshape.reshape)({\n        inputs: {\n          x\n        },\n        backend,\n        attrs: {\n          shape: finalShape\n        }\n      });\n    } else if (sliceDim0 || isSimpleSlice) {\n      // Optimization #2, slice is memory contiguous (only occurs in dim 0)\n      _tensorflowTfjsCore.util.assert(x.shape.length >= 1, () => `Input must have rank at least 1, got: ${x.shape.length}`);\n      const size = _tensorflowTfjsCore.slice_util.computeOutShape($begin, $end, $strides);\n      // To tolerate begin[0] > end[0] (a 0-output slice), we min(begin, end).\n      const sliced = (0, _Slice.slice)({\n        inputs: {\n          x\n        },\n        backend,\n        attrs: {\n          begin: $begin,\n          size\n        }\n      });\n      result = (0, _Reshape.reshape)({\n        inputs: {\n          x: sliced\n        },\n        backend,\n        attrs: {\n          shape: finalShape\n        }\n      });\n      backend.disposeIntermediateTensorInfo(sliced);\n    } else {\n      const xBuf = backend.bufferSync(x);\n      const outBuf = (0, _StridedSlice_impl.stridedSliceImpl)(finalShapeSparse, xBuf, $strides, $begin);\n      result = backend.makeTensorInfo(finalShape, outBuf.dtype, outBuf.values);\n    }\n    return result;\n  }\n  const stridedSliceConfig = {\n    kernelName: _tensorflowTfjsCore.StridedSlice,\n    backendName: 'cpu',\n    kernelFunc: stridedSlice\n  };\n});","lineCount":117,"map":[[7,2,22,0,"exports"],[7,9,22,0],[7,10,22,0,"stridedSlice"],[7,22,22,0],[7,25,22,0,"stridedSlice"],[7,37,22,0],[8,2,52,0,"Object"],[8,8,52,0],[8,9,52,0,"defineProperty"],[8,23,52,0],[8,24,52,0,"exports"],[8,31,52,0],[9,4,52,0,"enumerable"],[9,14,52,0],[10,4,52,0,"get"],[10,7,52,0],[10,18,52,0,"get"],[10,19,52,0],[11,6,52,0],[11,13,52,0,"stridedSliceConfig"],[11,31,52,0],[12,4,52,0],[13,2,52,0],[14,2,17,0],[14,6,17,0,"_tensorflowTfjsCore"],[14,25,17,0],[14,28,17,0,"require"],[14,35,17,0],[14,36,17,0,"_dependencyMap"],[14,50,17,0],[15,2,18,0],[15,6,18,0,"_cpu_util"],[15,15,18,0],[15,18,18,0,"require"],[15,25,18,0],[15,26,18,0,"_dependencyMap"],[15,40,18,0],[16,2,19,0],[16,6,19,0,"_Reshape"],[16,14,19,0],[16,17,19,0,"require"],[16,24,19,0],[16,25,19,0,"_dependencyMap"],[16,39,19,0],[17,2,20,0],[17,6,20,0,"_Slice"],[17,12,20,0],[17,15,20,0,"require"],[17,22,20,0],[17,23,20,0,"_dependencyMap"],[17,37,20,0],[18,2,21,0],[18,6,21,0,"_StridedSlice_impl"],[18,24,21,0],[18,27,21,0,"require"],[18,34,21,0],[18,35,21,0,"_dependencyMap"],[18,49,21,0],[19,2,1,0],[20,0,2,0],[21,0,3,0],[22,0,4,0],[23,0,5,0],[24,0,6,0],[25,0,7,0],[26,0,8,0],[27,0,9,0],[28,0,10,0],[29,0,11,0],[30,0,12,0],[31,0,13,0],[32,0,14,0],[33,0,15,0],[34,0,16,0],[36,2,22,7],[36,11,22,16,"stridedSlice"],[36,23,22,28,"stridedSlice"],[36,24,22,29,"args"],[36,28,22,33],[36,30,22,35],[37,4,23,4],[37,10,23,10],[38,6,23,12,"inputs"],[38,12,23,18],[39,6,23,20,"backend"],[39,13,23,27],[40,6,23,29,"attrs"],[41,4,23,35],[41,5,23,36],[41,8,23,39,"args"],[41,12,23,43],[42,4,24,4],[42,10,24,10],[43,6,24,12,"x"],[44,4,24,14],[44,5,24,15],[44,8,24,18,"inputs"],[44,14,24,24],[45,4,25,4],[45,10,25,10],[46,6,25,12,"begin"],[46,11,25,17],[47,6,25,19,"end"],[47,9,25,22],[48,6,25,24,"strides"],[48,13,25,31],[49,6,25,33,"beginMask"],[49,15,25,42],[50,6,25,44,"endMask"],[50,13,25,51],[51,6,25,53,"ellipsisMask"],[51,18,25,65],[52,6,25,67,"newAxisMask"],[52,17,25,78],[53,6,25,80,"shrinkAxisMask"],[54,4,25,95],[54,5,25,96],[54,8,25,99,"attrs"],[54,13,25,104],[55,4,26,4],[55,8,26,4,"assertNotComplex"],[55,17,26,20],[55,18,26,20,"assertNotComplex"],[55,34,26,20],[55,36,26,21,"x"],[55,37,26,22],[55,39,26,24],[55,53,26,38],[55,54,26,39],[56,4,27,4],[56,10,27,10],[57,6,27,12,"finalShapeSparse"],[57,22,27,28],[58,6,27,30,"finalShape"],[58,16,27,40],[59,6,27,42,"isIdentity"],[59,16,27,52],[60,6,27,54,"sliceDim0"],[60,15,27,63],[61,6,27,65,"isSimpleSlice"],[61,19,27,78],[62,6,27,80,"begin"],[62,11,27,85],[62,13,27,87,"$begin"],[62,19,27,93],[63,6,27,95,"end"],[63,9,27,98],[63,11,27,100,"$end"],[63,15,27,104],[64,6,27,106,"strides"],[64,13,27,113],[64,15,27,115,"$strides"],[65,4,27,124],[65,5,27,125],[65,8,27,128,"slice_util"],[65,27,27,138],[65,28,27,138,"slice_util"],[65,38,27,138],[65,39,27,139,"sliceInfo"],[65,48,27,148],[65,49,27,149,"x"],[65,50,27,150],[65,51,27,151,"shape"],[65,56,27,156],[65,58,27,158,"begin"],[65,63,27,163],[65,65,27,165,"end"],[65,68,27,168],[65,70,27,170,"strides"],[65,77,27,177],[65,79,27,179,"beginMask"],[65,88,27,188],[65,90,27,190,"endMask"],[65,97,27,197],[65,99,27,199,"ellipsisMask"],[65,111,27,211],[65,113,27,213,"newAxisMask"],[65,124,27,224],[65,126,27,226,"shrinkAxisMask"],[65,140,27,240],[65,141,27,241],[66,4,28,4],[66,8,28,8,"result"],[66,14,28,14],[67,4,29,4],[68,4,30,4],[69,4,31,4],[69,8,31,8,"isIdentity"],[69,18,31,18],[69,20,31,20],[70,6,32,8],[71,6,33,8,"result"],[71,12,33,14],[71,15,33,17],[71,19,33,17,"reshape"],[71,27,33,24],[71,28,33,24,"reshape"],[71,35,33,24],[71,37,33,25],[72,8,33,27,"inputs"],[72,14,33,33],[72,16,33,35],[73,10,33,37,"x"],[74,8,33,39],[74,9,33,40],[75,8,33,42,"backend"],[75,15,33,49],[76,8,33,51,"attrs"],[76,13,33,56],[76,15,33,58],[77,10,33,60,"shape"],[77,15,33,65],[77,17,33,67,"finalShape"],[78,8,33,78],[79,6,33,80],[79,7,33,81],[79,8,33,82],[80,4,34,4],[80,5,34,5],[80,11,35,9],[80,15,35,13,"sliceDim0"],[80,24,35,22],[80,28,35,26,"isSimpleSlice"],[80,41,35,39],[80,43,35,41],[81,6,36,8],[82,6,37,8,"util"],[82,25,37,12],[82,26,37,12,"util"],[82,30,37,12],[82,31,37,13,"assert"],[82,37,37,19],[82,38,37,20,"x"],[82,39,37,21],[82,40,37,22,"shape"],[82,45,37,27],[82,46,37,28,"length"],[82,52,37,34],[82,56,37,38],[82,57,37,39],[82,59,37,41],[82,65,37,47],[82,106,37,88,"x"],[82,107,37,89],[82,108,37,90,"shape"],[82,113,37,95],[82,114,37,96,"length"],[82,120,37,102],[82,122,37,104],[82,123,37,105],[83,6,38,8],[83,12,38,14,"size"],[83,16,38,18],[83,19,38,21,"slice_util"],[83,38,38,31],[83,39,38,31,"slice_util"],[83,49,38,31],[83,50,38,32,"computeOutShape"],[83,65,38,47],[83,66,38,48,"$begin"],[83,72,38,54],[83,74,38,56,"$end"],[83,78,38,60],[83,80,38,62,"$strides"],[83,88,38,70],[83,89,38,71],[84,6,39,8],[85,6,40,8],[85,12,40,14,"sliced"],[85,18,40,20],[85,21,40,23],[85,25,40,23,"slice"],[85,31,40,28],[85,32,40,28,"slice"],[85,37,40,28],[85,39,40,29],[86,8,40,31,"inputs"],[86,14,40,37],[86,16,40,39],[87,10,40,41,"x"],[88,8,40,43],[88,9,40,44],[89,8,40,46,"backend"],[89,15,40,53],[90,8,40,55,"attrs"],[90,13,40,60],[90,15,40,62],[91,10,40,64,"begin"],[91,15,40,69],[91,17,40,71,"$begin"],[91,23,40,77],[92,10,40,79,"size"],[93,8,40,84],[94,6,40,86],[94,7,40,87],[94,8,40,88],[95,6,41,8,"result"],[95,12,41,14],[95,15,42,12],[95,19,42,12,"reshape"],[95,27,42,19],[95,28,42,19,"reshape"],[95,35,42,19],[95,37,42,20],[96,8,42,22,"inputs"],[96,14,42,28],[96,16,42,30],[97,10,42,32,"x"],[97,11,42,33],[97,13,42,35,"sliced"],[98,8,42,42],[98,9,42,43],[99,8,42,45,"backend"],[99,15,42,52],[100,8,42,54,"attrs"],[100,13,42,59],[100,15,42,61],[101,10,42,63,"shape"],[101,15,42,68],[101,17,42,70,"finalShape"],[102,8,42,81],[103,6,42,83],[103,7,42,84],[103,8,42,85],[104,6,43,8,"backend"],[104,13,43,15],[104,14,43,16,"disposeIntermediateTensorInfo"],[104,43,43,45],[104,44,43,46,"sliced"],[104,50,43,52],[104,51,43,53],[105,4,44,4],[105,5,44,5],[105,11,45,9],[106,6,46,8],[106,12,46,14,"xBuf"],[106,16,46,18],[106,19,46,21,"backend"],[106,26,46,28],[106,27,46,29,"bufferSync"],[106,37,46,39],[106,38,46,40,"x"],[106,39,46,41],[106,40,46,42],[107,6,47,8],[107,12,47,14,"outBuf"],[107,18,47,20],[107,21,47,23],[107,25,47,23,"stridedSliceImpl"],[107,43,47,39],[107,44,47,39,"stridedSliceImpl"],[107,60,47,39],[107,62,47,40,"finalShapeSparse"],[107,78,47,56],[107,80,47,58,"xBuf"],[107,84,47,62],[107,86,47,64,"$strides"],[107,94,47,72],[107,96,47,74,"$begin"],[107,102,47,80],[107,103,47,81],[108,6,48,8,"result"],[108,12,48,14],[108,15,48,17,"backend"],[108,22,48,24],[108,23,48,25,"makeTensorInfo"],[108,37,48,39],[108,38,48,40,"finalShape"],[108,48,48,50],[108,50,48,52,"outBuf"],[108,56,48,58],[108,57,48,59,"dtype"],[108,62,48,64],[108,64,48,66,"outBuf"],[108,70,48,72],[108,71,48,73,"values"],[108,77,48,79],[108,78,48,80],[109,4,49,4],[110,4,50,4],[110,11,50,11,"result"],[110,17,50,17],[111,2,51,0],[112,2,52,7],[112,8,52,13,"stridedSliceConfig"],[112,26,52,31],[112,29,52,34],[113,4,53,4,"kernelName"],[113,14,53,14],[113,16,53,16,"StridedSlice"],[113,35,53,28],[113,36,53,28,"StridedSlice"],[113,48,53,28],[114,4,54,4,"backendName"],[114,15,54,15],[114,17,54,17],[114,22,54,22],[115,4,55,4,"kernelFunc"],[115,14,55,14],[115,16,55,16,"stridedSlice"],[116,2,56,0],[116,3,56,1],[117,0,56,2],[117,3]],"functionMap":{"names":["<global>","stridedSlice","util.assert$argument_1"],"mappings":"AAA;OCqB;yCCe,+DD;CDc"},"hasCjsExports":false},"type":"js/module"}]}