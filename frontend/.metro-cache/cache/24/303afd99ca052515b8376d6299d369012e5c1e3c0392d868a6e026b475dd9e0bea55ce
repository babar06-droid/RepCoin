{"dependencies":[{"name":"../../tensor_util_env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":56,"index":759}}],"key":"xfSGNGkCJdZhfQ673y/6d+no2yU=","exportNames":["*"],"imports":1}},{"name":"../../util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":760},"end":{"line":18,"column":47,"index":807}}],"key":"OiLVMoS12Mp3xgHkQeTdnQIBX6Q=","exportNames":["*"],"imports":1}},{"name":"../add","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":808},"end":{"line":19,"column":29,"index":837}}],"key":"S+ID0fW8sc9iwSUS6COac9En52o=","exportNames":["*"],"imports":1}},{"name":"../log","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":838},"end":{"line":20,"column":29,"index":867}}],"key":"ezvp6j4hcDQoQq2xiM9V3Bv6NA4=","exportNames":["*"],"imports":1}},{"name":"../loss_ops_utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":868},"end":{"line":21,"column":46,"index":914}}],"key":"DAPyQ0ldu7pmRn3jRz+wBfmq/uQ=","exportNames":["*"],"imports":1}},{"name":"../mul","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":22,"column":0,"index":915},"end":{"line":22,"column":29,"index":944}}],"key":"IV74B7MBUPoSZUTM5ocGXe9fIRE=","exportNames":["*"],"imports":1}},{"name":"../neg","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":23,"column":0,"index":945},"end":{"line":23,"column":29,"index":974}}],"key":"dIvRqtCbdaqqXK829v9NQbmYkxI=","exportNames":["*"],"imports":1}},{"name":"../operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":24,"column":0,"index":975},"end":{"line":24,"column":34,"index":1009}}],"key":"fQilPqfSvhAHjyfKT0P4wel7jE4=","exportNames":["*"],"imports":1}},{"name":"../scalar","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":25,"column":0,"index":1010},"end":{"line":25,"column":35,"index":1045}}],"key":"u3TTm6Tdu30WLt+AMD6qMWu+U20=","exportNames":["*"],"imports":1}},{"name":"../sub","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":26,"column":0,"index":1046},"end":{"line":26,"column":29,"index":1075}}],"key":"VHM5JuAkEzgPhqMJH9y/GvrNozc=","exportNames":["*"],"imports":1}},{"name":"./compute_weighted_loss","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":27,"column":0,"index":1076},"end":{"line":27,"column":62,"index":1138}}],"key":"GQ6sNEw27lLpLYC7mByWPpwMOcY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"logLoss\", {\n    enumerable: true,\n    get: function () {\n      return logLoss;\n    }\n  });\n  var _tensor_util_env = require(_dependencyMap[0], \"../../tensor_util_env\");\n  var _util = require(_dependencyMap[1], \"../../util\");\n  var _add = require(_dependencyMap[2], \"../add\");\n  var _log = require(_dependencyMap[3], \"../log\");\n  var _loss_ops_utils = require(_dependencyMap[4], \"../loss_ops_utils\");\n  var _mul = require(_dependencyMap[5], \"../mul\");\n  var _neg = require(_dependencyMap[6], \"../neg\");\n  var _operation = require(_dependencyMap[7], \"../operation\");\n  var _scalar = require(_dependencyMap[8], \"../scalar\");\n  var _sub = require(_dependencyMap[9], \"../sub\");\n  var _compute_weighted_loss = require(_dependencyMap[10], \"./compute_weighted_loss\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  /**\n   * Computes the log loss between two tensors.\n   *\n   * @param labels The ground truth output tensor, same dimensions as\n   *    'predictions'.\n   * @param predictions The predicted outputs.\n   * @param weights Tensor whose rank is either 0, or the same rank as\n   *    `labels`, and must be broadcastable to `labels` (i.e., all dimensions\n   *    must be either `1`, or the same as the corresponding `losses`\n   *    dimension).\n   * @param epsilon A small increment to avoid taking log of zero\n   * @param reduction Type of reduction to apply to loss. Should be of type\n   *    `Reduction`\n   *\n   * @doc {heading: 'Training', subheading: 'Losses', namespace: 'losses'}\n   */\n  function logLoss_(labels, predictions, weights, epsilon = 1e-7, reduction = _loss_ops_utils.Reduction.SUM_BY_NONZERO_WEIGHTS) {\n    const $labels = (0, _tensor_util_env.convertToTensor)(labels, 'labels', 'logLoss');\n    const $predictions = (0, _tensor_util_env.convertToTensor)(predictions, 'predictions', 'logLoss');\n    let $weights = null;\n    if (weights != null) {\n      $weights = (0, _tensor_util_env.convertToTensor)(weights, 'weights', 'logLoss');\n    }\n    (0, _util.assertShapesMatch)($labels.shape, $predictions.shape, 'Error in logLoss: ');\n    const one = (0, _scalar.scalar)(1);\n    const epsilonScalar = (0, _scalar.scalar)(epsilon);\n    const l1 = (0, _neg.neg)((0, _mul.mul)($labels, (0, _log.log)((0, _add.add)($predictions, epsilonScalar))));\n    const l2 = (0, _mul.mul)((0, _sub.sub)(one, $labels), (0, _log.log)((0, _add.add)((0, _sub.sub)(one, $predictions), epsilonScalar)));\n    const losses = (0, _sub.sub)(l1, l2);\n    return (0, _compute_weighted_loss.computeWeightedLoss)(losses, $weights, reduction);\n  }\n  const logLoss = /* @__PURE__ */(0, _operation.op)({\n    logLoss_\n  });\n});","lineCount":75,"map":[[7,2,59,0,"Object"],[7,8,59,0],[7,9,59,0,"defineProperty"],[7,23,59,0],[7,24,59,0,"exports"],[7,31,59,0],[8,4,59,0,"enumerable"],[8,14,59,0],[9,4,59,0,"get"],[9,7,59,0],[9,18,59,0,"get"],[9,19,59,0],[10,6,59,0],[10,13,59,0,"logLoss"],[10,20,59,0],[11,4,59,0],[12,2,59,0],[13,2,17,0],[13,6,17,0,"_tensor_util_env"],[13,22,17,0],[13,25,17,0,"require"],[13,32,17,0],[13,33,17,0,"_dependencyMap"],[13,47,17,0],[14,2,18,0],[14,6,18,0,"_util"],[14,11,18,0],[14,14,18,0,"require"],[14,21,18,0],[14,22,18,0,"_dependencyMap"],[14,36,18,0],[15,2,19,0],[15,6,19,0,"_add"],[15,10,19,0],[15,13,19,0,"require"],[15,20,19,0],[15,21,19,0,"_dependencyMap"],[15,35,19,0],[16,2,20,0],[16,6,20,0,"_log"],[16,10,20,0],[16,13,20,0,"require"],[16,20,20,0],[16,21,20,0,"_dependencyMap"],[16,35,20,0],[17,2,21,0],[17,6,21,0,"_loss_ops_utils"],[17,21,21,0],[17,24,21,0,"require"],[17,31,21,0],[17,32,21,0,"_dependencyMap"],[17,46,21,0],[18,2,22,0],[18,6,22,0,"_mul"],[18,10,22,0],[18,13,22,0,"require"],[18,20,22,0],[18,21,22,0,"_dependencyMap"],[18,35,22,0],[19,2,23,0],[19,6,23,0,"_neg"],[19,10,23,0],[19,13,23,0,"require"],[19,20,23,0],[19,21,23,0,"_dependencyMap"],[19,35,23,0],[20,2,24,0],[20,6,24,0,"_operation"],[20,16,24,0],[20,19,24,0,"require"],[20,26,24,0],[20,27,24,0,"_dependencyMap"],[20,41,24,0],[21,2,25,0],[21,6,25,0,"_scalar"],[21,13,25,0],[21,16,25,0,"require"],[21,23,25,0],[21,24,25,0,"_dependencyMap"],[21,38,25,0],[22,2,26,0],[22,6,26,0,"_sub"],[22,10,26,0],[22,13,26,0,"require"],[22,20,26,0],[22,21,26,0,"_dependencyMap"],[22,35,26,0],[23,2,27,0],[23,6,27,0,"_compute_weighted_loss"],[23,28,27,0],[23,31,27,0,"require"],[23,38,27,0],[23,39,27,0,"_dependencyMap"],[23,53,27,0],[24,2,1,0],[25,0,2,0],[26,0,3,0],[27,0,4,0],[28,0,5,0],[29,0,6,0],[30,0,7,0],[31,0,8,0],[32,0,9,0],[33,0,10,0],[34,0,11,0],[35,0,12,0],[36,0,13,0],[37,0,14,0],[38,0,15,0],[39,0,16,0],[41,2,28,0],[42,0,29,0],[43,0,30,0],[44,0,31,0],[45,0,32,0],[46,0,33,0],[47,0,34,0],[48,0,35,0],[49,0,36,0],[50,0,37,0],[51,0,38,0],[52,0,39,0],[53,0,40,0],[54,0,41,0],[55,0,42,0],[56,0,43,0],[57,2,44,0],[57,11,44,9,"logLoss_"],[57,19,44,17,"logLoss_"],[57,20,44,18,"labels"],[57,26,44,24],[57,28,44,26,"predictions"],[57,39,44,37],[57,41,44,39,"weights"],[57,48,44,46],[57,50,44,48,"epsilon"],[57,57,44,55],[57,60,44,58],[57,64,44,62],[57,66,44,64,"reduction"],[57,75,44,73],[57,78,44,76,"Reduction"],[57,93,44,85],[57,94,44,85,"Reduction"],[57,103,44,85],[57,104,44,86,"SUM_BY_NONZERO_WEIGHTS"],[57,126,44,108],[57,128,44,110],[58,4,45,4],[58,10,45,10,"$labels"],[58,17,45,17],[58,20,45,20],[58,24,45,20,"convertToTensor"],[58,40,45,35],[58,41,45,35,"convertToTensor"],[58,56,45,35],[58,58,45,36,"labels"],[58,64,45,42],[58,66,45,44],[58,74,45,52],[58,76,45,54],[58,85,45,63],[58,86,45,64],[59,4,46,4],[59,10,46,10,"$predictions"],[59,22,46,22],[59,25,46,25],[59,29,46,25,"convertToTensor"],[59,45,46,40],[59,46,46,40,"convertToTensor"],[59,61,46,40],[59,63,46,41,"predictions"],[59,74,46,52],[59,76,46,54],[59,89,46,67],[59,91,46,69],[59,100,46,78],[59,101,46,79],[60,4,47,4],[60,8,47,8,"$weights"],[60,16,47,16],[60,19,47,19],[60,23,47,23],[61,4,48,4],[61,8,48,8,"weights"],[61,15,48,15],[61,19,48,19],[61,23,48,23],[61,25,48,25],[62,6,49,8,"$weights"],[62,14,49,16],[62,17,49,19],[62,21,49,19,"convertToTensor"],[62,37,49,34],[62,38,49,34,"convertToTensor"],[62,53,49,34],[62,55,49,35,"weights"],[62,62,49,42],[62,64,49,44],[62,73,49,53],[62,75,49,55],[62,84,49,64],[62,85,49,65],[63,4,50,4],[64,4,51,4],[64,8,51,4,"assertShapesMatch"],[64,13,51,21],[64,14,51,21,"assertShapesMatch"],[64,31,51,21],[64,33,51,22,"$labels"],[64,40,51,29],[64,41,51,30,"shape"],[64,46,51,35],[64,48,51,37,"$predictions"],[64,60,51,49],[64,61,51,50,"shape"],[64,66,51,55],[64,68,51,57],[64,88,51,77],[64,89,51,78],[65,4,52,4],[65,10,52,10,"one"],[65,13,52,13],[65,16,52,16],[65,20,52,16,"scalar"],[65,27,52,22],[65,28,52,22,"scalar"],[65,34,52,22],[65,36,52,23],[65,37,52,24],[65,38,52,25],[66,4,53,4],[66,10,53,10,"epsilonScalar"],[66,23,53,23],[66,26,53,26],[66,30,53,26,"scalar"],[66,37,53,32],[66,38,53,32,"scalar"],[66,44,53,32],[66,46,53,33,"epsilon"],[66,53,53,40],[66,54,53,41],[67,4,54,4],[67,10,54,10,"l1"],[67,12,54,12],[67,15,54,15],[67,19,54,15,"neg"],[67,23,54,18],[67,24,54,18,"neg"],[67,27,54,18],[67,29,54,19],[67,33,54,19,"mul"],[67,37,54,22],[67,38,54,22,"mul"],[67,41,54,22],[67,43,54,23,"$labels"],[67,50,54,30],[67,52,54,32],[67,56,54,32,"log"],[67,60,54,35],[67,61,54,35,"log"],[67,64,54,35],[67,66,54,36],[67,70,54,36,"add"],[67,74,54,39],[67,75,54,39,"add"],[67,78,54,39],[67,80,54,40,"$predictions"],[67,92,54,52],[67,94,54,54,"epsilonScalar"],[67,107,54,67],[67,108,54,68],[67,109,54,69],[67,110,54,70],[67,111,54,71],[68,4,55,4],[68,10,55,10,"l2"],[68,12,55,12],[68,15,55,15],[68,19,55,15,"mul"],[68,23,55,18],[68,24,55,18,"mul"],[68,27,55,18],[68,29,55,19],[68,33,55,19,"sub"],[68,37,55,22],[68,38,55,22,"sub"],[68,41,55,22],[68,43,55,23,"one"],[68,46,55,26],[68,48,55,28,"$labels"],[68,55,55,35],[68,56,55,36],[68,58,55,38],[68,62,55,38,"log"],[68,66,55,41],[68,67,55,41,"log"],[68,70,55,41],[68,72,55,42],[68,76,55,42,"add"],[68,80,55,45],[68,81,55,45,"add"],[68,84,55,45],[68,86,55,46],[68,90,55,46,"sub"],[68,94,55,49],[68,95,55,49,"sub"],[68,98,55,49],[68,100,55,50,"one"],[68,103,55,53],[68,105,55,55,"$predictions"],[68,117,55,67],[68,118,55,68],[68,120,55,70,"epsilonScalar"],[68,133,55,83],[68,134,55,84],[68,135,55,85],[68,136,55,86],[69,4,56,4],[69,10,56,10,"losses"],[69,16,56,16],[69,19,56,19],[69,23,56,19,"sub"],[69,27,56,22],[69,28,56,22,"sub"],[69,31,56,22],[69,33,56,23,"l1"],[69,35,56,25],[69,37,56,27,"l2"],[69,39,56,29],[69,40,56,30],[70,4,57,4],[70,11,57,11],[70,15,57,11,"computeWeightedLoss"],[70,37,57,30],[70,38,57,30,"computeWeightedLoss"],[70,57,57,30],[70,59,57,31,"losses"],[70,65,57,37],[70,67,57,39,"$weights"],[70,75,57,47],[70,77,57,49,"reduction"],[70,86,57,58],[70,87,57,59],[71,2,58,0],[72,2,59,7],[72,8,59,13,"logLoss"],[72,15,59,20],[72,18,59,23],[72,33,59,39],[72,37,59,39,"op"],[72,47,59,41],[72,48,59,41,"op"],[72,50,59,41],[72,52,59,42],[73,4,59,44,"logLoss_"],[74,2,59,53],[74,3,59,54],[74,4,59,55],[75,0,59,56],[75,3]],"functionMap":{"names":["<global>","logLoss_"],"mappings":"AAA;AC2C;CDc"},"hasCjsExports":false},"type":"js/module"}]}