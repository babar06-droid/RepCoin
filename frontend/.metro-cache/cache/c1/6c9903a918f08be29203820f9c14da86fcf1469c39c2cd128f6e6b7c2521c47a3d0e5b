{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":68,"index":771}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}},{"name":"./Exp","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":772},"end":{"line":18,"column":28,"index":800}}],"key":"ByNbiPEBIBdLND0+JQ9e6/8hYm0=","exportNames":["*"],"imports":1}},{"name":"./Max","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":801},"end":{"line":19,"column":28,"index":829}}],"key":"Nrbf05LgYlBg1R+DOCyyiNniJc4=","exportNames":["*"],"imports":1}},{"name":"./RealDiv","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":830},"end":{"line":20,"column":32,"index":862}}],"key":"VqZAX+E57NzLJ3Hrt21pUkw1VCU=","exportNames":["*"],"imports":1}},{"name":"./Reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":863},"end":{"line":21,"column":36,"index":899}}],"key":"EUWK+oKi/AwokPOQ1jng5DYfQSc=","exportNames":["*"],"imports":1}},{"name":"./Sub","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":22,"column":0,"index":900},"end":{"line":22,"column":28,"index":928}}],"key":"9W07n6ozadDWuE/ZeS7WMqezAOo=","exportNames":["*"],"imports":1}},{"name":"./Sum","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":23,"column":0,"index":929},"end":{"line":23,"column":28,"index":957}}],"key":"d7Y5U7PWKSyphQklNUED/rT1MrQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.softmax = softmax;\n  Object.defineProperty(exports, \"softmaxConfig\", {\n    enumerable: true,\n    get: function () {\n      return softmaxConfig;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  var _Exp = require(_dependencyMap[1], \"./Exp\");\n  var _Max = require(_dependencyMap[2], \"./Max\");\n  var _RealDiv = require(_dependencyMap[3], \"./RealDiv\");\n  var _Reshape = require(_dependencyMap[4], \"./Reshape\");\n  var _Sub = require(_dependencyMap[5], \"./Sub\");\n  var _Sum = require(_dependencyMap[6], \"./Sum\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  function softmax(args) {\n    const {\n      inputs,\n      backend,\n      attrs\n    } = args;\n    const {\n      logits\n    } = inputs;\n    const {\n      dim\n    } = attrs;\n    const logitsRank = logits.shape.length;\n    let $dim = dim;\n    if ($dim === -1) {\n      $dim = logitsRank - 1;\n    }\n    if ($dim !== logitsRank - 1) {\n      throw Error('Softmax along a non-last dimension is not yet supported. ' + `Logits was rank ${logitsRank} and dim was ${$dim}`);\n    }\n    const axes = _tensorflowTfjsCore.util.parseAxisParam([$dim], logits.shape);\n    const maxLogit = (0, _Max.max)({\n      inputs: {\n        x: logits\n      },\n      backend,\n      attrs: {\n        reductionIndices: axes,\n        keepDims: false\n      }\n    });\n    const expandedShape = _tensorflowTfjsCore.backend_util.expandShapeToKeepDim(maxLogit.shape, axes);\n    const maxLogitReshaped = (0, _Reshape.reshape)({\n      inputs: {\n        x: maxLogit\n      },\n      backend,\n      attrs: {\n        shape: expandedShape\n      }\n    });\n    const a = (0, _Sub.sub)({\n      inputs: {\n        a: logits,\n        b: maxLogitReshaped\n      },\n      backend\n    });\n    const b = (0, _Exp.exp)({\n      inputs: {\n        x: a\n      },\n      backend\n    });\n    const sumExp = (0, _Sum.sum)({\n      inputs: {\n        x: b\n      },\n      backend,\n      attrs: {\n        axis: axes,\n        keepDims: false\n      }\n    });\n    const sumReshaped = (0, _Reshape.reshape)({\n      inputs: {\n        x: sumExp\n      },\n      backend,\n      attrs: {\n        shape: expandedShape\n      }\n    });\n    const result = (0, _RealDiv.div)({\n      inputs: {\n        a: b,\n        b: sumReshaped\n      },\n      backend\n    });\n    backend.disposeIntermediateTensorInfo(maxLogit);\n    backend.disposeIntermediateTensorInfo(maxLogitReshaped);\n    backend.disposeIntermediateTensorInfo(a);\n    backend.disposeIntermediateTensorInfo(b);\n    backend.disposeIntermediateTensorInfo(sumExp);\n    backend.disposeIntermediateTensorInfo(sumReshaped);\n    return result;\n  }\n  const softmaxConfig = {\n    kernelName: _tensorflowTfjsCore.Softmax,\n    backendName: 'cpu',\n    kernelFunc: softmax\n  };\n});","lineCount":131,"map":[[7,2,24,0,"exports"],[7,9,24,0],[7,10,24,0,"softmax"],[7,17,24,0],[7,20,24,0,"softmax"],[7,27,24,0],[8,2,58,0,"Object"],[8,8,58,0],[8,9,58,0,"defineProperty"],[8,23,58,0],[8,24,58,0,"exports"],[8,31,58,0],[9,4,58,0,"enumerable"],[9,14,58,0],[10,4,58,0,"get"],[10,7,58,0],[10,18,58,0,"get"],[10,19,58,0],[11,6,58,0],[11,13,58,0,"softmaxConfig"],[11,26,58,0],[12,4,58,0],[13,2,58,0],[14,2,17,0],[14,6,17,0,"_tensorflowTfjsCore"],[14,25,17,0],[14,28,17,0,"require"],[14,35,17,0],[14,36,17,0,"_dependencyMap"],[14,50,17,0],[15,2,18,0],[15,6,18,0,"_Exp"],[15,10,18,0],[15,13,18,0,"require"],[15,20,18,0],[15,21,18,0,"_dependencyMap"],[15,35,18,0],[16,2,19,0],[16,6,19,0,"_Max"],[16,10,19,0],[16,13,19,0,"require"],[16,20,19,0],[16,21,19,0,"_dependencyMap"],[16,35,19,0],[17,2,20,0],[17,6,20,0,"_RealDiv"],[17,14,20,0],[17,17,20,0,"require"],[17,24,20,0],[17,25,20,0,"_dependencyMap"],[17,39,20,0],[18,2,21,0],[18,6,21,0,"_Reshape"],[18,14,21,0],[18,17,21,0,"require"],[18,24,21,0],[18,25,21,0,"_dependencyMap"],[18,39,21,0],[19,2,22,0],[19,6,22,0,"_Sub"],[19,10,22,0],[19,13,22,0,"require"],[19,20,22,0],[19,21,22,0,"_dependencyMap"],[19,35,22,0],[20,2,23,0],[20,6,23,0,"_Sum"],[20,10,23,0],[20,13,23,0,"require"],[20,20,23,0],[20,21,23,0,"_dependencyMap"],[20,35,23,0],[21,2,1,0],[22,0,2,0],[23,0,3,0],[24,0,4,0],[25,0,5,0],[26,0,6,0],[27,0,7,0],[28,0,8,0],[29,0,9,0],[30,0,10,0],[31,0,11,0],[32,0,12,0],[33,0,13,0],[34,0,14,0],[35,0,15,0],[36,0,16,0],[38,2,24,7],[38,11,24,16,"softmax"],[38,18,24,23,"softmax"],[38,19,24,24,"args"],[38,23,24,28],[38,25,24,30],[39,4,25,4],[39,10,25,10],[40,6,25,12,"inputs"],[40,12,25,18],[41,6,25,20,"backend"],[41,13,25,27],[42,6,25,29,"attrs"],[43,4,25,35],[43,5,25,36],[43,8,25,39,"args"],[43,12,25,43],[44,4,26,4],[44,10,26,10],[45,6,26,12,"logits"],[46,4,26,19],[46,5,26,20],[46,8,26,23,"inputs"],[46,14,26,29],[47,4,27,4],[47,10,27,10],[48,6,27,12,"dim"],[49,4,27,16],[49,5,27,17],[49,8,27,20,"attrs"],[49,13,27,25],[50,4,28,4],[50,10,28,10,"logitsRank"],[50,20,28,20],[50,23,28,23,"logits"],[50,29,28,29],[50,30,28,30,"shape"],[50,35,28,35],[50,36,28,36,"length"],[50,42,28,42],[51,4,29,4],[51,8,29,8,"$dim"],[51,12,29,12],[51,15,29,15,"dim"],[51,18,29,18],[52,4,30,4],[52,8,30,8,"$dim"],[52,12,30,12],[52,17,30,17],[52,18,30,18],[52,19,30,19],[52,21,30,21],[53,6,31,8,"$dim"],[53,10,31,12],[53,13,31,15,"logitsRank"],[53,23,31,25],[53,26,31,28],[53,27,31,29],[54,4,32,4],[55,4,33,4],[55,8,33,8,"$dim"],[55,12,33,12],[55,17,33,17,"logitsRank"],[55,27,33,27],[55,30,33,30],[55,31,33,31],[55,33,33,33],[56,6,34,8],[56,12,34,14,"Error"],[56,17,34,19],[56,18,34,20],[56,77,34,79],[56,80,35,12],[56,99,35,31,"logitsRank"],[56,109,35,41],[56,125,35,57,"$dim"],[56,129,35,61],[56,131,35,63],[56,132,35,64],[57,4,36,4],[58,4,37,4],[58,10,37,10,"axes"],[58,14,37,14],[58,17,37,17,"util"],[58,36,37,21],[58,37,37,21,"util"],[58,41,37,21],[58,42,37,22,"parseAxisParam"],[58,56,37,36],[58,57,37,37],[58,58,37,38,"$dim"],[58,62,37,42],[58,63,37,43],[58,65,37,45,"logits"],[58,71,37,51],[58,72,37,52,"shape"],[58,77,37,57],[58,78,37,58],[59,4,38,4],[59,10,38,10,"maxLogit"],[59,18,38,18],[59,21,38,21],[59,25,38,21,"max"],[59,29,38,24],[59,30,38,24,"max"],[59,33,38,24],[59,35,38,25],[60,6,39,8,"inputs"],[60,12,39,14],[60,14,39,16],[61,8,39,18,"x"],[61,9,39,19],[61,11,39,21,"logits"],[62,6,39,28],[62,7,39,29],[63,6,40,8,"backend"],[63,13,40,15],[64,6,41,8,"attrs"],[64,11,41,13],[64,13,41,15],[65,8,41,17,"reductionIndices"],[65,24,41,33],[65,26,41,35,"axes"],[65,30,41,39],[66,8,41,41,"keepDims"],[66,16,41,49],[66,18,41,51],[67,6,41,57],[68,4,42,4],[68,5,42,5],[68,6,42,6],[69,4,43,4],[69,10,43,10,"expandedShape"],[69,23,43,23],[69,26,43,26,"backend_util"],[69,45,43,38],[69,46,43,38,"backend_util"],[69,58,43,38],[69,59,43,39,"expandShapeToKeepDim"],[69,79,43,59],[69,80,43,60,"maxLogit"],[69,88,43,68],[69,89,43,69,"shape"],[69,94,43,74],[69,96,43,76,"axes"],[69,100,43,80],[69,101,43,81],[70,4,44,4],[70,10,44,10,"maxLogitReshaped"],[70,26,44,26],[70,29,44,29],[70,33,44,29,"reshape"],[70,41,44,36],[70,42,44,36,"reshape"],[70,49,44,36],[70,51,44,37],[71,6,44,39,"inputs"],[71,12,44,45],[71,14,44,47],[72,8,44,49,"x"],[72,9,44,50],[72,11,44,52,"maxLogit"],[73,6,44,61],[73,7,44,62],[74,6,44,64,"backend"],[74,13,44,71],[75,6,44,73,"attrs"],[75,11,44,78],[75,13,44,80],[76,8,44,82,"shape"],[76,13,44,87],[76,15,44,89,"expandedShape"],[77,6,44,103],[78,4,44,105],[78,5,44,106],[78,6,44,107],[79,4,45,4],[79,10,45,10,"a"],[79,11,45,11],[79,14,45,14],[79,18,45,14,"sub"],[79,22,45,17],[79,23,45,17,"sub"],[79,26,45,17],[79,28,45,18],[80,6,45,20,"inputs"],[80,12,45,26],[80,14,45,28],[81,8,45,30,"a"],[81,9,45,31],[81,11,45,33,"logits"],[81,17,45,39],[82,8,45,41,"b"],[82,9,45,42],[82,11,45,44,"maxLogitReshaped"],[83,6,45,61],[83,7,45,62],[84,6,45,64,"backend"],[85,4,45,72],[85,5,45,73],[85,6,45,74],[86,4,46,4],[86,10,46,10,"b"],[86,11,46,11],[86,14,46,14],[86,18,46,14,"exp"],[86,22,46,17],[86,23,46,17,"exp"],[86,26,46,17],[86,28,46,18],[87,6,46,20,"inputs"],[87,12,46,26],[87,14,46,28],[88,8,46,30,"x"],[88,9,46,31],[88,11,46,33,"a"],[89,6,46,35],[89,7,46,36],[90,6,46,38,"backend"],[91,4,46,46],[91,5,46,47],[91,6,46,48],[92,4,47,4],[92,10,47,10,"sumExp"],[92,16,47,16],[92,19,47,19],[92,23,47,19,"sum"],[92,27,47,22],[92,28,47,22,"sum"],[92,31,47,22],[92,33,47,23],[93,6,47,25,"inputs"],[93,12,47,31],[93,14,47,33],[94,8,47,35,"x"],[94,9,47,36],[94,11,47,38,"b"],[95,6,47,40],[95,7,47,41],[96,6,47,43,"backend"],[96,13,47,50],[97,6,47,52,"attrs"],[97,11,47,57],[97,13,47,59],[98,8,47,61,"axis"],[98,12,47,65],[98,14,47,67,"axes"],[98,18,47,71],[99,8,47,73,"keepDims"],[99,16,47,81],[99,18,47,83],[100,6,47,89],[101,4,47,91],[101,5,47,92],[101,6,47,93],[102,4,48,4],[102,10,48,10,"sumReshaped"],[102,21,48,21],[102,24,48,24],[102,28,48,24,"reshape"],[102,36,48,31],[102,37,48,31,"reshape"],[102,44,48,31],[102,46,48,32],[103,6,48,34,"inputs"],[103,12,48,40],[103,14,48,42],[104,8,48,44,"x"],[104,9,48,45],[104,11,48,47,"sumExp"],[105,6,48,54],[105,7,48,55],[106,6,48,57,"backend"],[106,13,48,64],[107,6,48,66,"attrs"],[107,11,48,71],[107,13,48,73],[108,8,48,75,"shape"],[108,13,48,80],[108,15,48,82,"expandedShape"],[109,6,48,96],[110,4,48,98],[110,5,48,99],[110,6,48,100],[111,4,49,4],[111,10,49,10,"result"],[111,16,49,16],[111,19,49,19],[111,23,49,19,"div"],[111,31,49,22],[111,32,49,22,"div"],[111,35,49,22],[111,37,49,23],[112,6,49,25,"inputs"],[112,12,49,31],[112,14,49,33],[113,8,49,35,"a"],[113,9,49,36],[113,11,49,38,"b"],[113,12,49,39],[114,8,49,41,"b"],[114,9,49,42],[114,11,49,44,"sumReshaped"],[115,6,49,56],[115,7,49,57],[116,6,49,59,"backend"],[117,4,49,67],[117,5,49,68],[117,6,49,69],[118,4,50,4,"backend"],[118,11,50,11],[118,12,50,12,"disposeIntermediateTensorInfo"],[118,41,50,41],[118,42,50,42,"maxLogit"],[118,50,50,50],[118,51,50,51],[119,4,51,4,"backend"],[119,11,51,11],[119,12,51,12,"disposeIntermediateTensorInfo"],[119,41,51,41],[119,42,51,42,"maxLogitReshaped"],[119,58,51,58],[119,59,51,59],[120,4,52,4,"backend"],[120,11,52,11],[120,12,52,12,"disposeIntermediateTensorInfo"],[120,41,52,41],[120,42,52,42,"a"],[120,43,52,43],[120,44,52,44],[121,4,53,4,"backend"],[121,11,53,11],[121,12,53,12,"disposeIntermediateTensorInfo"],[121,41,53,41],[121,42,53,42,"b"],[121,43,53,43],[121,44,53,44],[122,4,54,4,"backend"],[122,11,54,11],[122,12,54,12,"disposeIntermediateTensorInfo"],[122,41,54,41],[122,42,54,42,"sumExp"],[122,48,54,48],[122,49,54,49],[123,4,55,4,"backend"],[123,11,55,11],[123,12,55,12,"disposeIntermediateTensorInfo"],[123,41,55,41],[123,42,55,42,"sumReshaped"],[123,53,55,53],[123,54,55,54],[124,4,56,4],[124,11,56,11,"result"],[124,17,56,17],[125,2,57,0],[126,2,58,7],[126,8,58,13,"softmaxConfig"],[126,21,58,26],[126,24,58,29],[127,4,59,4,"kernelName"],[127,14,59,14],[127,16,59,16,"Softmax"],[127,35,59,23],[127,36,59,23,"Softmax"],[127,43,59,23],[128,4,60,4,"backendName"],[128,15,60,15],[128,17,60,17],[128,22,60,22],[129,4,61,4,"kernelFunc"],[129,14,61,14],[129,16,61,16,"softmax"],[130,2,62,0],[130,3,62,1],[131,0,62,2],[131,3]],"functionMap":{"names":["<global>","softmax"],"mappings":"AAA;OCuB;CDiC"},"hasCjsExports":false},"type":"js/module"}]}