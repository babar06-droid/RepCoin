{"dependencies":[{"name":"../../engine","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":38,"index":741}}],"key":"v39fFCcPTN6kCKPiVEOA5hKbvfQ=","exportNames":["*"],"imports":1}},{"name":"../../util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":742},"end":{"line":18,"column":36,"index":778}}],"key":"OiLVMoS12Mp3xgHkQeTdnQIBX6Q=","exportNames":["*"],"imports":1}},{"name":"../div","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":779},"end":{"line":19,"column":29,"index":808}}],"key":"5rHCiV00cfBGwUZFTnTN9j0PzWw=","exportNames":["*"],"imports":1}},{"name":"../mul","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":809},"end":{"line":20,"column":29,"index":838}}],"key":"IV74B7MBUPoSZUTM5ocGXe9fIRE=","exportNames":["*"],"imports":1}},{"name":"../norm","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":839},"end":{"line":21,"column":31,"index":870}}],"key":"mKucxOYw7nPYSb1A3y+VHrB+Z/M=","exportNames":["*"],"imports":1}},{"name":"../operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":22,"column":0,"index":871},"end":{"line":22,"column":34,"index":905}}],"key":"fQilPqfSvhAHjyfKT0P4wel7jE4=","exportNames":["*"],"imports":1}},{"name":"../split","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":23,"column":0,"index":906},"end":{"line":23,"column":33,"index":939}}],"key":"Gh7trP/VKKW06k8CNRvoesiz1lY=","exportNames":["*"],"imports":1}},{"name":"../squeeze","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":24,"column":0,"index":940},"end":{"line":24,"column":37,"index":977}}],"key":"iieCjT2wKmrjAy+nrtqfwpaGzTw=","exportNames":["*"],"imports":1}},{"name":"../stack","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":25,"column":0,"index":978},"end":{"line":25,"column":33,"index":1011}}],"key":"bGgQOqW8QZFq0kqPTWvXReU3u7k=","exportNames":["*"],"imports":1}},{"name":"../sub","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":26,"column":0,"index":1012},"end":{"line":26,"column":29,"index":1041}}],"key":"VHM5JuAkEzgPhqMJH9y/GvrNozc=","exportNames":["*"],"imports":1}},{"name":"../sum","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":27,"column":0,"index":1042},"end":{"line":27,"column":29,"index":1071}}],"key":"iMzhCilxhON+Kq66I0CtH0j3scg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"gramSchmidt\", {\n    enumerable: true,\n    get: function () {\n      return gramSchmidt;\n    }\n  });\n  var _engine = require(_dependencyMap[0], \"../../engine\");\n  var _util = require(_dependencyMap[1], \"../../util\");\n  var _div = require(_dependencyMap[2], \"../div\");\n  var _mul = require(_dependencyMap[3], \"../mul\");\n  var _norm = require(_dependencyMap[4], \"../norm\");\n  var _operation = require(_dependencyMap[5], \"../operation\");\n  var _split = require(_dependencyMap[6], \"../split\");\n  var _squeeze = require(_dependencyMap[7], \"../squeeze\");\n  var _stack = require(_dependencyMap[8], \"../stack\");\n  var _sub = require(_dependencyMap[9], \"../sub\");\n  var _sum = require(_dependencyMap[10], \"../sum\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  /**\n   * Gram-Schmidt orthogonalization.\n   *\n   * ```js\n   * const x = tf.tensor2d([[1, 2], [3, 4]]);\n   * let y = tf.linalg.gramSchmidt(x);\n   * y.print();\n   * console.log('Orthogonalized:');\n   * y.dot(y.transpose()).print();  // should be nearly the identity matrix.\n   * console.log('First row direction maintained:');\n   * const data = await y.array();\n   * console.log(data[0][1] / data[0][0]);  // should be nearly 2.\n   * ```\n   *\n   * @param xs The vectors to be orthogonalized, in one of the two following\n   *   formats:\n   *   - An Array of `tf.Tensor1D`.\n   *   - A `tf.Tensor2D`, i.e., a matrix, in which case the vectors are the rows\n   *     of `xs`.\n   *   In each case, all the vectors must have the same length and the length\n   *   must be greater than or equal to the number of vectors.\n   * @returns The orthogonalized and normalized vectors or matrix.\n   *   Orthogonalization means that the vectors or the rows of the matrix\n   *   are orthogonal (zero inner products). Normalization means that each\n   *   vector or each row of the matrix has an L2 norm that equals `1`.\n   *\n   * @doc {heading:'Operations', subheading:'Linear Algebra', namespace:'linalg'}\n   */\n  function gramSchmidt_(xs) {\n    let inputIsTensor2D;\n    if (Array.isArray(xs)) {\n      inputIsTensor2D = false;\n      (0, _util.assert)(xs != null && xs.length > 0, () => 'Gram-Schmidt process: input must not be null, undefined, or ' + 'empty');\n      const dim = xs[0].shape[0];\n      for (let i = 1; i < xs.length; ++i) {\n        (0, _util.assert)(xs[i].shape[0] === dim, () => 'Gram-Schmidt: Non-unique lengths found in the input vectors: ' + `(${xs[i].shape[0]} vs. ${dim})`);\n      }\n    } else {\n      inputIsTensor2D = true;\n      xs = (0, _split.split)(xs, xs.shape[0], 0).map(x => (0, _squeeze.squeeze)(x, [0]));\n    }\n    (0, _util.assert)(xs.length <= xs[0].shape[0], () => `Gram-Schmidt: Number of vectors (${xs.length}) exceeds ` + `number of dimensions (${xs[0].shape[0]}).`);\n    const ys = [];\n    const xs1d = xs;\n    for (let i = 0; i < xs.length; ++i) {\n      ys.push(_engine.ENGINE.tidy(() => {\n        let x = xs1d[i];\n        if (i > 0) {\n          for (let j = 0; j < i; ++j) {\n            const proj = (0, _mul.mul)((0, _sum.sum)((0, _mul.mul)(ys[j], x)), ys[j]);\n            x = (0, _sub.sub)(x, proj);\n          }\n        }\n        return (0, _div.div)(x, (0, _norm.norm)(x, 'euclidean'));\n      }));\n    }\n    if (inputIsTensor2D) {\n      return (0, _stack.stack)(ys, 0);\n    } else {\n      return ys;\n    }\n  }\n  const gramSchmidt = /* @__PURE__ */(0, _operation.op)({\n    gramSchmidt_\n  });\n});","lineCount":106,"map":[[7,2,95,0,"Object"],[7,8,95,0],[7,9,95,0,"defineProperty"],[7,23,95,0],[7,24,95,0,"exports"],[7,31,95,0],[8,4,95,0,"enumerable"],[8,14,95,0],[9,4,95,0,"get"],[9,7,95,0],[9,18,95,0,"get"],[9,19,95,0],[10,6,95,0],[10,13,95,0,"gramSchmidt"],[10,24,95,0],[11,4,95,0],[12,2,95,0],[13,2,17,0],[13,6,17,0,"_engine"],[13,13,17,0],[13,16,17,0,"require"],[13,23,17,0],[13,24,17,0,"_dependencyMap"],[13,38,17,0],[14,2,18,0],[14,6,18,0,"_util"],[14,11,18,0],[14,14,18,0,"require"],[14,21,18,0],[14,22,18,0,"_dependencyMap"],[14,36,18,0],[15,2,19,0],[15,6,19,0,"_div"],[15,10,19,0],[15,13,19,0,"require"],[15,20,19,0],[15,21,19,0,"_dependencyMap"],[15,35,19,0],[16,2,20,0],[16,6,20,0,"_mul"],[16,10,20,0],[16,13,20,0,"require"],[16,20,20,0],[16,21,20,0,"_dependencyMap"],[16,35,20,0],[17,2,21,0],[17,6,21,0,"_norm"],[17,11,21,0],[17,14,21,0,"require"],[17,21,21,0],[17,22,21,0,"_dependencyMap"],[17,36,21,0],[18,2,22,0],[18,6,22,0,"_operation"],[18,16,22,0],[18,19,22,0,"require"],[18,26,22,0],[18,27,22,0,"_dependencyMap"],[18,41,22,0],[19,2,23,0],[19,6,23,0,"_split"],[19,12,23,0],[19,15,23,0,"require"],[19,22,23,0],[19,23,23,0,"_dependencyMap"],[19,37,23,0],[20,2,24,0],[20,6,24,0,"_squeeze"],[20,14,24,0],[20,17,24,0,"require"],[20,24,24,0],[20,25,24,0,"_dependencyMap"],[20,39,24,0],[21,2,25,0],[21,6,25,0,"_stack"],[21,12,25,0],[21,15,25,0,"require"],[21,22,25,0],[21,23,25,0,"_dependencyMap"],[21,37,25,0],[22,2,26,0],[22,6,26,0,"_sub"],[22,10,26,0],[22,13,26,0,"require"],[22,20,26,0],[22,21,26,0,"_dependencyMap"],[22,35,26,0],[23,2,27,0],[23,6,27,0,"_sum"],[23,10,27,0],[23,13,27,0,"require"],[23,20,27,0],[23,21,27,0,"_dependencyMap"],[23,35,27,0],[24,2,1,0],[25,0,2,0],[26,0,3,0],[27,0,4,0],[28,0,5,0],[29,0,6,0],[30,0,7,0],[31,0,8,0],[32,0,9,0],[33,0,10,0],[34,0,11,0],[35,0,12,0],[36,0,13,0],[37,0,14,0],[38,0,15,0],[39,0,16,0],[41,2,28,0],[42,0,29,0],[43,0,30,0],[44,0,31,0],[45,0,32,0],[46,0,33,0],[47,0,34,0],[48,0,35,0],[49,0,36,0],[50,0,37,0],[51,0,38,0],[52,0,39,0],[53,0,40,0],[54,0,41,0],[55,0,42,0],[56,0,43,0],[57,0,44,0],[58,0,45,0],[59,0,46,0],[60,0,47,0],[61,0,48,0],[62,0,49,0],[63,0,50,0],[64,0,51,0],[65,0,52,0],[66,0,53,0],[67,0,54,0],[68,0,55,0],[69,2,56,0],[69,11,56,9,"gramSchmidt_"],[69,23,56,21,"gramSchmidt_"],[69,24,56,22,"xs"],[69,26,56,24],[69,28,56,26],[70,4,57,4],[70,8,57,8,"inputIsTensor2D"],[70,23,57,23],[71,4,58,4],[71,8,58,8,"Array"],[71,13,58,13],[71,14,58,14,"isArray"],[71,21,58,21],[71,22,58,22,"xs"],[71,24,58,24],[71,25,58,25],[71,27,58,27],[72,6,59,8,"inputIsTensor2D"],[72,21,59,23],[72,24,59,26],[72,29,59,31],[73,6,60,8],[73,10,60,8,"assert"],[73,15,60,14],[73,16,60,14,"assert"],[73,22,60,14],[73,24,60,15,"xs"],[73,26,60,17],[73,30,60,21],[73,34,60,25],[73,38,60,29,"xs"],[73,40,60,31],[73,41,60,32,"length"],[73,47,60,38],[73,50,60,41],[73,51,60,42],[73,53,60,44],[73,59,60,50],[73,121,60,112],[73,124,61,12],[73,131,61,19],[73,132,61,20],[74,6,62,8],[74,12,62,14,"dim"],[74,15,62,17],[74,18,62,20,"xs"],[74,20,62,22],[74,21,62,23],[74,22,62,24],[74,23,62,25],[74,24,62,26,"shape"],[74,29,62,31],[74,30,62,32],[74,31,62,33],[74,32,62,34],[75,6,63,8],[75,11,63,13],[75,15,63,17,"i"],[75,16,63,18],[75,19,63,21],[75,20,63,22],[75,22,63,24,"i"],[75,23,63,25],[75,26,63,28,"xs"],[75,28,63,30],[75,29,63,31,"length"],[75,35,63,37],[75,37,63,39],[75,39,63,41,"i"],[75,40,63,42],[75,42,63,44],[76,8,64,12],[76,12,64,12,"assert"],[76,17,64,18],[76,18,64,18,"assert"],[76,24,64,18],[76,26,64,19,"xs"],[76,28,64,21],[76,29,64,22,"i"],[76,30,64,23],[76,31,64,24],[76,32,64,25,"shape"],[76,37,64,30],[76,38,64,31],[76,39,64,32],[76,40,64,33],[76,45,64,38,"dim"],[76,48,64,41],[76,50,64,43],[76,56,64,49],[76,119,64,112],[76,122,65,16],[76,126,65,20,"xs"],[76,128,65,22],[76,129,65,23,"i"],[76,130,65,24],[76,131,65,25],[76,132,65,26,"shape"],[76,137,65,31],[76,138,65,32],[76,139,65,33],[76,140,65,34],[76,148,65,42,"dim"],[76,151,65,45],[76,154,65,48],[76,155,65,49],[77,6,66,8],[78,4,67,4],[78,5,67,5],[78,11,68,9],[79,6,69,8,"inputIsTensor2D"],[79,21,69,23],[79,24,69,26],[79,28,69,30],[80,6,70,8,"xs"],[80,8,70,10],[80,11,70,13],[80,15,70,13,"split"],[80,21,70,18],[80,22,70,18,"split"],[80,27,70,18],[80,29,70,19,"xs"],[80,31,70,21],[80,33,70,23,"xs"],[80,35,70,25],[80,36,70,26,"shape"],[80,41,70,31],[80,42,70,32],[80,43,70,33],[80,44,70,34],[80,46,70,36],[80,47,70,37],[80,48,70,38],[80,49,70,39,"map"],[80,52,70,42],[80,53,70,43,"x"],[80,54,70,44],[80,58,70,48],[80,62,70,48,"squeeze"],[80,70,70,55],[80,71,70,55,"squeeze"],[80,78,70,55],[80,80,70,56,"x"],[80,81,70,57],[80,83,70,59],[80,84,70,60],[80,85,70,61],[80,86,70,62],[80,87,70,63],[80,88,70,64],[81,4,71,4],[82,4,72,4],[82,8,72,4,"assert"],[82,13,72,10],[82,14,72,10,"assert"],[82,20,72,10],[82,22,72,11,"xs"],[82,24,72,13],[82,25,72,14,"length"],[82,31,72,20],[82,35,72,24,"xs"],[82,37,72,26],[82,38,72,27],[82,39,72,28],[82,40,72,29],[82,41,72,30,"shape"],[82,46,72,35],[82,47,72,36],[82,48,72,37],[82,49,72,38],[82,51,72,40],[82,57,72,46],[82,93,72,82,"xs"],[82,95,72,84],[82,96,72,85,"length"],[82,102,72,91],[82,114,72,103],[82,117,73,8],[82,142,73,33,"xs"],[82,144,73,35],[82,145,73,36],[82,146,73,37],[82,147,73,38],[82,148,73,39,"shape"],[82,153,73,44],[82,154,73,45],[82,155,73,46],[82,156,73,47],[82,160,73,51],[82,161,73,52],[83,4,74,4],[83,10,74,10,"ys"],[83,12,74,12],[83,15,74,15],[83,17,74,17],[84,4,75,4],[84,10,75,10,"xs1d"],[84,14,75,14],[84,17,75,17,"xs"],[84,19,75,19],[85,4,76,4],[85,9,76,9],[85,13,76,13,"i"],[85,14,76,14],[85,17,76,17],[85,18,76,18],[85,20,76,20,"i"],[85,21,76,21],[85,24,76,24,"xs"],[85,26,76,26],[85,27,76,27,"length"],[85,33,76,33],[85,35,76,35],[85,37,76,37,"i"],[85,38,76,38],[85,40,76,40],[86,6,77,8,"ys"],[86,8,77,10],[86,9,77,11,"push"],[86,13,77,15],[86,14,77,16,"ENGINE"],[86,21,77,22],[86,22,77,22,"ENGINE"],[86,28,77,22],[86,29,77,23,"tidy"],[86,33,77,27],[86,34,77,28],[86,40,77,34],[87,8,78,12],[87,12,78,16,"x"],[87,13,78,17],[87,16,78,20,"xs1d"],[87,20,78,24],[87,21,78,25,"i"],[87,22,78,26],[87,23,78,27],[88,8,79,12],[88,12,79,16,"i"],[88,13,79,17],[88,16,79,20],[88,17,79,21],[88,19,79,23],[89,10,80,16],[89,15,80,21],[89,19,80,25,"j"],[89,20,80,26],[89,23,80,29],[89,24,80,30],[89,26,80,32,"j"],[89,27,80,33],[89,30,80,36,"i"],[89,31,80,37],[89,33,80,39],[89,35,80,41,"j"],[89,36,80,42],[89,38,80,44],[90,12,81,20],[90,18,81,26,"proj"],[90,22,81,30],[90,25,81,33],[90,29,81,33,"mul"],[90,33,81,36],[90,34,81,36,"mul"],[90,37,81,36],[90,39,81,37],[90,43,81,37,"sum"],[90,47,81,40],[90,48,81,40,"sum"],[90,51,81,40],[90,53,81,41],[90,57,81,41,"mul"],[90,61,81,44],[90,62,81,44,"mul"],[90,65,81,44],[90,67,81,45,"ys"],[90,69,81,47],[90,70,81,48,"j"],[90,71,81,49],[90,72,81,50],[90,74,81,52,"x"],[90,75,81,53],[90,76,81,54],[90,77,81,55],[90,79,81,57,"ys"],[90,81,81,59],[90,82,81,60,"j"],[90,83,81,61],[90,84,81,62],[90,85,81,63],[91,12,82,20,"x"],[91,13,82,21],[91,16,82,24],[91,20,82,24,"sub"],[91,24,82,27],[91,25,82,27,"sub"],[91,28,82,27],[91,30,82,28,"x"],[91,31,82,29],[91,33,82,31,"proj"],[91,37,82,35],[91,38,82,36],[92,10,83,16],[93,8,84,12],[94,8,85,12],[94,15,85,19],[94,19,85,19,"div"],[94,23,85,22],[94,24,85,22,"div"],[94,27,85,22],[94,29,85,23,"x"],[94,30,85,24],[94,32,85,26],[94,36,85,26,"norm"],[94,41,85,30],[94,42,85,30,"norm"],[94,46,85,30],[94,48,85,31,"x"],[94,49,85,32],[94,51,85,34],[94,62,85,45],[94,63,85,46],[94,64,85,47],[95,6,86,8],[95,7,86,9],[95,8,86,10],[95,9,86,11],[96,4,87,4],[97,4,88,4],[97,8,88,8,"inputIsTensor2D"],[97,23,88,23],[97,25,88,25],[98,6,89,8],[98,13,89,15],[98,17,89,15,"stack"],[98,23,89,20],[98,24,89,20,"stack"],[98,29,89,20],[98,31,89,21,"ys"],[98,33,89,23],[98,35,89,25],[98,36,89,26],[98,37,89,27],[99,4,90,4],[99,5,90,5],[99,11,91,9],[100,6,92,8],[100,13,92,15,"ys"],[100,15,92,17],[101,4,93,4],[102,2,94,0],[103,2,95,7],[103,8,95,13,"gramSchmidt"],[103,19,95,24],[103,22,95,27],[103,37,95,43],[103,41,95,43,"op"],[103,51,95,45],[103,52,95,45,"op"],[103,54,95,45],[103,56,95,46],[104,4,95,48,"gramSchmidt_"],[105,2,95,61],[105,3,95,62],[105,4,95,63],[106,0,95,64],[106,3]],"functionMap":{"names":["<global>","gramSchmidt_","assert$argument_1","split.map$argument_0","ENGINE.tidy$argument_0"],"mappings":"AAA;ACuD;4CCI;mBDC;2CCG;gDDC;2CEK,oBF;wCCE;mDDC;4BGI;SHS;CDQ"},"hasCjsExports":false},"type":"js/module"}]}