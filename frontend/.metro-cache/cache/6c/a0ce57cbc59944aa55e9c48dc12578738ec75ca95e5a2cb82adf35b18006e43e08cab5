{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":86,"index":789}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}},{"name":"../cpu_util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":790},"end":{"line":18,"column":47,"index":837}}],"key":"5L5S4GXlh/uJh1MrXQbkPSVOWm4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.sliceImpl = sliceImpl;\n  exports.slice = slice;\n  Object.defineProperty(exports, \"sliceConfig\", {\n    enumerable: true,\n    get: function () {\n      return sliceConfig;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  var _cpu_util = require(_dependencyMap[1], \"../cpu_util\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  function sliceImpl(vals, begin, size, shape, dtype) {\n    const isContinous = _tensorflowTfjsCore.slice_util.isSliceContinous(shape, begin, size);\n    const length = _tensorflowTfjsCore.util.sizeFromShape(size);\n    const xStrides = _tensorflowTfjsCore.util.computeStrides(shape);\n    if (isContinous) {\n      const flatOffset = _tensorflowTfjsCore.slice_util.computeFlatOffset(begin, xStrides);\n      if (dtype === 'string') {\n        return vals.slice(flatOffset, flatOffset + length);\n      }\n      return vals.subarray(flatOffset, flatOffset + length);\n    }\n    const decodedData = dtype === 'string' ? _tensorflowTfjsCore.backend_util.fromUint8ToStringArray(vals) : vals;\n    const inBuf = (0, _tensorflowTfjsCore.buffer)(shape, dtype, decodedData);\n    const outBuf = (0, _tensorflowTfjsCore.buffer)(size, dtype);\n    for (let i = 0; i < outBuf.size; ++i) {\n      const outLoc = outBuf.indexToLoc(i);\n      const inLoc = outLoc.map((idx, j) => idx + begin[j]);\n      outBuf.set(inBuf.get(...inLoc), ...outLoc);\n    }\n    if (dtype === 'string') {\n      return _tensorflowTfjsCore.backend_util.fromStringArrayToUint8(outBuf.values);\n    }\n    return outBuf.values;\n  }\n  function slice(args) {\n    const {\n      inputs,\n      backend,\n      attrs\n    } = args;\n    const {\n      x\n    } = inputs;\n    const {\n      begin,\n      size\n    } = attrs;\n    (0, _cpu_util.assertNotComplex)(x, 'slice');\n    const [$begin, $size] = _tensorflowTfjsCore.slice_util.parseSliceParams(x, begin, size);\n    _tensorflowTfjsCore.slice_util.assertParamsValid(x, $begin, $size);\n    const vals = backend.data.get(x.dataId).values;\n    const outVals = sliceImpl(vals, $begin, $size, x.shape, x.dtype);\n    return backend.makeTensorInfo($size, x.dtype, outVals);\n  }\n  const sliceConfig = {\n    kernelName: _tensorflowTfjsCore.Slice,\n    backendName: 'cpu',\n    kernelFunc: slice\n  };\n});","lineCount":83,"map":[[7,2,19,0,"exports"],[7,9,19,0],[7,10,19,0,"sliceImpl"],[7,19,19,0],[7,22,19,0,"sliceImpl"],[7,31,19,0],[8,2,45,0,"exports"],[8,9,45,0],[8,10,45,0,"slice"],[8,15,45,0],[8,18,45,0,"slice"],[8,23,45,0],[9,2,56,0,"Object"],[9,8,56,0],[9,9,56,0,"defineProperty"],[9,23,56,0],[9,24,56,0,"exports"],[9,31,56,0],[10,4,56,0,"enumerable"],[10,14,56,0],[11,4,56,0,"get"],[11,7,56,0],[11,18,56,0,"get"],[11,19,56,0],[12,6,56,0],[12,13,56,0,"sliceConfig"],[12,24,56,0],[13,4,56,0],[14,2,56,0],[15,2,17,0],[15,6,17,0,"_tensorflowTfjsCore"],[15,25,17,0],[15,28,17,0,"require"],[15,35,17,0],[15,36,17,0,"_dependencyMap"],[15,50,17,0],[16,2,18,0],[16,6,18,0,"_cpu_util"],[16,15,18,0],[16,18,18,0,"require"],[16,25,18,0],[16,26,18,0,"_dependencyMap"],[16,40,18,0],[17,2,1,0],[18,0,2,0],[19,0,3,0],[20,0,4,0],[21,0,5,0],[22,0,6,0],[23,0,7,0],[24,0,8,0],[25,0,9,0],[26,0,10,0],[27,0,11,0],[28,0,12,0],[29,0,13,0],[30,0,14,0],[31,0,15,0],[32,0,16,0],[34,2,19,7],[34,11,19,16,"sliceImpl"],[34,20,19,25,"sliceImpl"],[34,21,19,26,"vals"],[34,25,19,30],[34,27,19,32,"begin"],[34,32,19,37],[34,34,19,39,"size"],[34,38,19,43],[34,40,19,45,"shape"],[34,45,19,50],[34,47,19,52,"dtype"],[34,52,19,57],[34,54,19,59],[35,4,20,4],[35,10,20,10,"isContinous"],[35,21,20,21],[35,24,20,24,"slice_util"],[35,43,20,34],[35,44,20,34,"slice_util"],[35,54,20,34],[35,55,20,35,"isSliceContinous"],[35,71,20,51],[35,72,20,52,"shape"],[35,77,20,57],[35,79,20,59,"begin"],[35,84,20,64],[35,86,20,66,"size"],[35,90,20,70],[35,91,20,71],[36,4,21,4],[36,10,21,10,"length"],[36,16,21,16],[36,19,21,19,"util"],[36,38,21,23],[36,39,21,23,"util"],[36,43,21,23],[36,44,21,24,"sizeFromShape"],[36,57,21,37],[36,58,21,38,"size"],[36,62,21,42],[36,63,21,43],[37,4,22,4],[37,10,22,10,"xStrides"],[37,18,22,18],[37,21,22,21,"util"],[37,40,22,25],[37,41,22,25,"util"],[37,45,22,25],[37,46,22,26,"computeStrides"],[37,60,22,40],[37,61,22,41,"shape"],[37,66,22,46],[37,67,22,47],[38,4,23,4],[38,8,23,8,"isContinous"],[38,19,23,19],[38,21,23,21],[39,6,24,8],[39,12,24,14,"flatOffset"],[39,22,24,24],[39,25,24,27,"slice_util"],[39,44,24,37],[39,45,24,37,"slice_util"],[39,55,24,37],[39,56,24,38,"computeFlatOffset"],[39,73,24,55],[39,74,24,56,"begin"],[39,79,24,61],[39,81,24,63,"xStrides"],[39,89,24,71],[39,90,24,72],[40,6,25,8],[40,10,25,12,"dtype"],[40,15,25,17],[40,20,25,22],[40,28,25,30],[40,30,25,32],[41,8,26,12],[41,15,26,19,"vals"],[41,19,26,23],[41,20,26,24,"slice"],[41,25,26,29],[41,26,26,30,"flatOffset"],[41,36,26,40],[41,38,26,42,"flatOffset"],[41,48,26,52],[41,51,26,55,"length"],[41,57,26,61],[41,58,26,62],[42,6,27,8],[43,6,28,8],[43,13,28,15,"vals"],[43,17,28,19],[43,18,28,20,"subarray"],[43,26,28,28],[43,27,28,29,"flatOffset"],[43,37,28,39],[43,39,28,41,"flatOffset"],[43,49,28,51],[43,52,28,54,"length"],[43,58,28,60],[43,59,28,61],[44,4,29,4],[45,4,30,4],[45,10,30,10,"decodedData"],[45,21,30,21],[45,24,30,24,"dtype"],[45,29,30,29],[45,34,30,34],[45,42,30,42],[45,45,31,8,"backend_util"],[45,64,31,20],[45,65,31,20,"backend_util"],[45,77,31,20],[45,78,31,21,"fromUint8ToStringArray"],[45,100,31,43],[45,101,31,44,"vals"],[45,105,31,48],[45,106,31,49],[45,109,32,8,"vals"],[45,113,32,12],[46,4,33,4],[46,10,33,10,"inBuf"],[46,15,33,15],[46,18,33,18],[46,22,33,18,"buffer"],[46,41,33,24],[46,42,33,24,"buffer"],[46,48,33,24],[46,50,33,25,"shape"],[46,55,33,30],[46,57,33,32,"dtype"],[46,62,33,37],[46,64,33,39,"decodedData"],[46,75,33,50],[46,76,33,51],[47,4,34,4],[47,10,34,10,"outBuf"],[47,16,34,16],[47,19,34,19],[47,23,34,19,"buffer"],[47,42,34,25],[47,43,34,25,"buffer"],[47,49,34,25],[47,51,34,26,"size"],[47,55,34,30],[47,57,34,32,"dtype"],[47,62,34,37],[47,63,34,38],[48,4,35,4],[48,9,35,9],[48,13,35,13,"i"],[48,14,35,14],[48,17,35,17],[48,18,35,18],[48,20,35,20,"i"],[48,21,35,21],[48,24,35,24,"outBuf"],[48,30,35,30],[48,31,35,31,"size"],[48,35,35,35],[48,37,35,37],[48,39,35,39,"i"],[48,40,35,40],[48,42,35,42],[49,6,36,8],[49,12,36,14,"outLoc"],[49,18,36,20],[49,21,36,23,"outBuf"],[49,27,36,29],[49,28,36,30,"indexToLoc"],[49,38,36,40],[49,39,36,41,"i"],[49,40,36,42],[49,41,36,43],[50,6,37,8],[50,12,37,14,"inLoc"],[50,17,37,19],[50,20,37,22,"outLoc"],[50,26,37,28],[50,27,37,29,"map"],[50,30,37,32],[50,31,37,33],[50,32,37,34,"idx"],[50,35,37,37],[50,37,37,39,"j"],[50,38,37,40],[50,43,37,45,"idx"],[50,46,37,48],[50,49,37,51,"begin"],[50,54,37,56],[50,55,37,57,"j"],[50,56,37,58],[50,57,37,59],[50,58,37,60],[51,6,38,8,"outBuf"],[51,12,38,14],[51,13,38,15,"set"],[51,16,38,18],[51,17,38,19,"inBuf"],[51,22,38,24],[51,23,38,25,"get"],[51,26,38,28],[51,27,38,29],[51,30,38,32,"inLoc"],[51,35,38,37],[51,36,38,38],[51,38,38,40],[51,41,38,43,"outLoc"],[51,47,38,49],[51,48,38,50],[52,4,39,4],[53,4,40,4],[53,8,40,8,"dtype"],[53,13,40,13],[53,18,40,18],[53,26,40,26],[53,28,40,28],[54,6,41,8],[54,13,41,15,"backend_util"],[54,32,41,27],[54,33,41,27,"backend_util"],[54,45,41,27],[54,46,41,28,"fromStringArrayToUint8"],[54,68,41,50],[54,69,41,51,"outBuf"],[54,75,41,57],[54,76,41,58,"values"],[54,82,41,64],[54,83,41,65],[55,4,42,4],[56,4,43,4],[56,11,43,11,"outBuf"],[56,17,43,17],[56,18,43,18,"values"],[56,24,43,24],[57,2,44,0],[58,2,45,7],[58,11,45,16,"slice"],[58,16,45,21,"slice"],[58,17,45,22,"args"],[58,21,45,26],[58,23,45,28],[59,4,46,4],[59,10,46,10],[60,6,46,12,"inputs"],[60,12,46,18],[61,6,46,20,"backend"],[61,13,46,27],[62,6,46,29,"attrs"],[63,4,46,35],[63,5,46,36],[63,8,46,39,"args"],[63,12,46,43],[64,4,47,4],[64,10,47,10],[65,6,47,12,"x"],[66,4,47,14],[66,5,47,15],[66,8,47,18,"inputs"],[66,14,47,24],[67,4,48,4],[67,10,48,10],[68,6,48,12,"begin"],[68,11,48,17],[69,6,48,19,"size"],[70,4,48,24],[70,5,48,25],[70,8,48,28,"attrs"],[70,13,48,33],[71,4,49,4],[71,8,49,4,"assertNotComplex"],[71,17,49,20],[71,18,49,20,"assertNotComplex"],[71,34,49,20],[71,36,49,21,"x"],[71,37,49,22],[71,39,49,24],[71,46,49,31],[71,47,49,32],[72,4,50,4],[72,10,50,10],[72,11,50,11,"$begin"],[72,17,50,17],[72,19,50,19,"$size"],[72,24,50,24],[72,25,50,25],[72,28,50,28,"slice_util"],[72,47,50,38],[72,48,50,38,"slice_util"],[72,58,50,38],[72,59,50,39,"parseSliceParams"],[72,75,50,55],[72,76,50,56,"x"],[72,77,50,57],[72,79,50,59,"begin"],[72,84,50,64],[72,86,50,66,"size"],[72,90,50,70],[72,91,50,71],[73,4,51,4,"slice_util"],[73,23,51,14],[73,24,51,14,"slice_util"],[73,34,51,14],[73,35,51,15,"assertParamsValid"],[73,52,51,32],[73,53,51,33,"x"],[73,54,51,34],[73,56,51,36,"$begin"],[73,62,51,42],[73,64,51,44,"$size"],[73,69,51,49],[73,70,51,50],[74,4,52,4],[74,10,52,10,"vals"],[74,14,52,14],[74,17,52,17,"backend"],[74,24,52,24],[74,25,52,25,"data"],[74,29,52,29],[74,30,52,30,"get"],[74,33,52,33],[74,34,52,34,"x"],[74,35,52,35],[74,36,52,36,"dataId"],[74,42,52,42],[74,43,52,43],[74,44,52,44,"values"],[74,50,52,50],[75,4,53,4],[75,10,53,10,"outVals"],[75,17,53,17],[75,20,53,20,"sliceImpl"],[75,29,53,29],[75,30,53,30,"vals"],[75,34,53,34],[75,36,53,36,"$begin"],[75,42,53,42],[75,44,53,44,"$size"],[75,49,53,49],[75,51,53,51,"x"],[75,52,53,52],[75,53,53,53,"shape"],[75,58,53,58],[75,60,53,60,"x"],[75,61,53,61],[75,62,53,62,"dtype"],[75,67,53,67],[75,68,53,68],[76,4,54,4],[76,11,54,11,"backend"],[76,18,54,18],[76,19,54,19,"makeTensorInfo"],[76,33,54,33],[76,34,54,34,"$size"],[76,39,54,39],[76,41,54,41,"x"],[76,42,54,42],[76,43,54,43,"dtype"],[76,48,54,48],[76,50,54,50,"outVals"],[76,57,54,57],[76,58,54,58],[77,2,55,0],[78,2,56,7],[78,8,56,13,"sliceConfig"],[78,19,56,24],[78,22,56,27],[79,4,57,4,"kernelName"],[79,14,57,14],[79,16,57,16,"Slice"],[79,35,57,21],[79,36,57,21,"Slice"],[79,41,57,21],[80,4,58,4,"backendName"],[80,15,58,15],[80,17,58,17],[80,22,58,22],[81,4,59,4,"kernelFunc"],[81,14,59,14],[81,16,59,16,"slice"],[82,2,60,0],[82,3,60,1],[83,0,60,2],[83,3]],"functionMap":{"names":["<global>","sliceImpl","outLoc.map$argument_0","slice"],"mappings":"AAA;OCkB;iCCkB,0BD;CDO;OGC;CHU"},"hasCjsExports":false},"type":"js/module"}]}