{"dependencies":[{"name":"../engine","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":35,"index":738}}],"key":"zbTTi8rtwr8rjl75PzEo829Yvss=","exportNames":["*"],"imports":1}},{"name":"../kernel_names","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":739},"end":{"line":18,"column":57,"index":796}}],"key":"gQVznmdGA0uoBQvR5Q4/qW+ITHg=","exportNames":["*"],"imports":1}},{"name":"../util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":797},"end":{"line":19,"column":32,"index":829}}],"key":"DTmef1GE5grNQfsvpIzpBlINy9c=","exportNames":["*"],"imports":1}},{"name":"./operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":830},"end":{"line":20,"column":33,"index":863}}],"key":"lmmEAb6oR3TWnrsrETceKUovfkM=","exportNames":["*"],"imports":1}},{"name":"./reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":864},"end":{"line":21,"column":36,"index":900}}],"key":"dz8GCsFShMGnHX1Wj7bBySjBnSE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"conv3DBackpropFilter\", {\n    enumerable: true,\n    get: function () {\n      return conv3DBackpropFilter;\n    }\n  });\n  var _engine = require(_dependencyMap[0], \"../engine\");\n  var _kernel_names = require(_dependencyMap[1], \"../kernel_names\");\n  var _util = require(_dependencyMap[2], \"../util\");\n  var util = _interopNamespace(_util);\n  var _operation = require(_dependencyMap[3], \"./operation\");\n  var _reshape = require(_dependencyMap[4], \"./reshape\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  /**\n   * Computes the derivative of the filter of a 3D convolution.\n   *\n   * @param x The input tensor, of rank 5 or rank 4 of shape\n   *     [batch, depth, height, width, inChannels]. If rank 4, batch of 1 is\n   *     assumed.\n   * @param dy The dy image, of rank 5 or rank 4, of shape\n   *     [batch, depth, height, width, outDepth]. If rank 4, batch of 1 is\n   *     assumed.\n   * @param filterShape The shape of the filter, length 5,\n   *     [filterDepth, filterHeight, filterWidth, inDepth, outDepth].\n   * @param strides The strides of the convolution: [strideDepth, strideHeight,\n   * strideWidth].\n   * @param pad A string from: 'same', 'valid'. The type of padding algorithm\n   *     used in the forward prop of the op.\n   */\n  function conv3DBackpropFilter_(x, dy, filterShape, strides, pad) {\n    let x5D = x;\n    if (x.rank === 4) {\n      x5D = (0, _reshape.reshape)(x, [1, x.shape[0], x.shape[1], x.shape[2], x.shape[3]]);\n    }\n    let dy5D = dy;\n    if (dy5D.rank === 4) {\n      dy5D = (0, _reshape.reshape)(dy, [1, dy.shape[0], dy.shape[1], dy.shape[2], dy.shape[3]]);\n    }\n    util.assert(x5D.rank === 5, () => `Error in conv3dDerFilter: input must be rank 5, but got shape ` + `${x5D.shape}.`);\n    util.assert(dy5D.rank === 5, () => `Error in conv3dDerFilter: dy must be rank 5, but got shape ` + `${dy5D.shape}.`);\n    util.assert(filterShape.length === 5, () => `Error in conv3dDerFilter: filterShape must be length 5, but got ` + `${filterShape}.`);\n    util.assert(x5D.shape[4] === filterShape[3], () => `Error in conv3dDerFilter: depth of input ${x5D.shape[4]}) must ` + `match input depth in filter (${filterShape[3]}.`);\n    util.assert(dy5D.shape[4] === filterShape[4], () => `Error in conv3dDerFilter: depth of dy (${dy5D.shape[4]}) must ` + `match output depth for filter (${filterShape[4]}).`);\n    const inputs = {\n      x: x5D,\n      dy: dy5D\n    };\n    const attrs = {\n      strides,\n      pad,\n      filterShape\n    };\n    // tslint:disable-next-line: no-unnecessary-type-assertion\n    return _engine.ENGINE.runKernel(_kernel_names.Conv3DBackpropFilterV2, inputs, attrs);\n  }\n  const conv3DBackpropFilter = /* @__PURE__ */(0, _operation.op)({\n    conv3DBackpropFilter_\n  });\n});","lineCount":96,"map":[[22,2,62,0,"Object"],[22,8,62,0],[22,9,62,0,"defineProperty"],[22,23,62,0],[22,24,62,0,"exports"],[22,31,62,0],[23,4,62,0,"enumerable"],[23,14,62,0],[24,4,62,0,"get"],[24,7,62,0],[24,18,62,0,"get"],[24,19,62,0],[25,6,62,0],[25,13,62,0,"conv3DBackpropFilter"],[25,33,62,0],[26,4,62,0],[27,2,62,0],[28,2,17,0],[28,6,17,0,"_engine"],[28,13,17,0],[28,16,17,0,"require"],[28,23,17,0],[28,24,17,0,"_dependencyMap"],[28,38,17,0],[29,2,18,0],[29,6,18,0,"_kernel_names"],[29,19,18,0],[29,22,18,0,"require"],[29,29,18,0],[29,30,18,0,"_dependencyMap"],[29,44,18,0],[30,2,19,0],[30,6,19,0,"_util"],[30,11,19,0],[30,14,19,0,"require"],[30,21,19,0],[30,22,19,0,"_dependencyMap"],[30,36,19,0],[31,2,19,0],[31,6,19,0,"util"],[31,10,19,0],[31,13,19,0,"_interopNamespace"],[31,30,19,0],[31,31,19,0,"_util"],[31,36,19,0],[32,2,20,0],[32,6,20,0,"_operation"],[32,16,20,0],[32,19,20,0,"require"],[32,26,20,0],[32,27,20,0,"_dependencyMap"],[32,41,20,0],[33,2,21,0],[33,6,21,0,"_reshape"],[33,14,21,0],[33,17,21,0,"require"],[33,24,21,0],[33,25,21,0,"_dependencyMap"],[33,39,21,0],[34,2,1,0],[35,0,2,0],[36,0,3,0],[37,0,4,0],[38,0,5,0],[39,0,6,0],[40,0,7,0],[41,0,8,0],[42,0,9,0],[43,0,10,0],[44,0,11,0],[45,0,12,0],[46,0,13,0],[47,0,14,0],[48,0,15,0],[49,0,16,0],[51,2,22,0],[52,0,23,0],[53,0,24,0],[54,0,25,0],[55,0,26,0],[56,0,27,0],[57,0,28,0],[58,0,29,0],[59,0,30,0],[60,0,31,0],[61,0,32,0],[62,0,33,0],[63,0,34,0],[64,0,35,0],[65,0,36,0],[66,0,37,0],[67,2,38,0],[67,11,38,9,"conv3DBackpropFilter_"],[67,32,38,30,"conv3DBackpropFilter_"],[67,33,38,31,"x"],[67,34,38,32],[67,36,38,34,"dy"],[67,38,38,36],[67,40,38,38,"filterShape"],[67,51,38,49],[67,53,38,51,"strides"],[67,60,38,58],[67,62,38,60,"pad"],[67,65,38,63],[67,67,38,65],[68,4,39,4],[68,8,39,8,"x5D"],[68,11,39,11],[68,14,39,14,"x"],[68,15,39,15],[69,4,40,4],[69,8,40,8,"x"],[69,9,40,9],[69,10,40,10,"rank"],[69,14,40,14],[69,19,40,19],[69,20,40,20],[69,22,40,22],[70,6,41,8,"x5D"],[70,9,41,11],[70,12,41,14],[70,16,41,14,"reshape"],[70,24,41,21],[70,25,41,21,"reshape"],[70,32,41,21],[70,34,41,22,"x"],[70,35,41,23],[70,37,41,25],[70,38,41,26],[70,39,41,27],[70,41,41,29,"x"],[70,42,41,30],[70,43,41,31,"shape"],[70,48,41,36],[70,49,41,37],[70,50,41,38],[70,51,41,39],[70,53,41,41,"x"],[70,54,41,42],[70,55,41,43,"shape"],[70,60,41,48],[70,61,41,49],[70,62,41,50],[70,63,41,51],[70,65,41,53,"x"],[70,66,41,54],[70,67,41,55,"shape"],[70,72,41,60],[70,73,41,61],[70,74,41,62],[70,75,41,63],[70,77,41,65,"x"],[70,78,41,66],[70,79,41,67,"shape"],[70,84,41,72],[70,85,41,73],[70,86,41,74],[70,87,41,75],[70,88,41,76],[70,89,41,77],[71,4,42,4],[72,4,43,4],[72,8,43,8,"dy5D"],[72,12,43,12],[72,15,43,15,"dy"],[72,17,43,17],[73,4,44,4],[73,8,44,8,"dy5D"],[73,12,44,12],[73,13,44,13,"rank"],[73,17,44,17],[73,22,44,22],[73,23,44,23],[73,25,44,25],[74,6,45,8,"dy5D"],[74,10,45,12],[74,13,45,15],[74,17,45,15,"reshape"],[74,25,45,22],[74,26,45,22,"reshape"],[74,33,45,22],[74,35,45,23,"dy"],[74,37,45,25],[74,39,45,27],[74,40,45,28],[74,41,45,29],[74,43,45,31,"dy"],[74,45,45,33],[74,46,45,34,"shape"],[74,51,45,39],[74,52,45,40],[74,53,45,41],[74,54,45,42],[74,56,45,44,"dy"],[74,58,45,46],[74,59,45,47,"shape"],[74,64,45,52],[74,65,45,53],[74,66,45,54],[74,67,45,55],[74,69,45,57,"dy"],[74,71,45,59],[74,72,45,60,"shape"],[74,77,45,65],[74,78,45,66],[74,79,45,67],[74,80,45,68],[74,82,45,70,"dy"],[74,84,45,72],[74,85,45,73,"shape"],[74,90,45,78],[74,91,45,79],[74,92,45,80],[74,93,45,81],[74,94,45,82],[74,95,45,83],[75,4,46,4],[76,4,47,4,"util"],[76,8,47,8],[76,9,47,9,"assert"],[76,15,47,15],[76,16,47,16,"x5D"],[76,19,47,19],[76,20,47,20,"rank"],[76,24,47,24],[76,29,47,29],[76,30,47,30],[76,32,47,32],[76,38,47,38],[76,102,47,102],[76,105,48,8],[76,108,48,11,"x5D"],[76,111,48,14],[76,112,48,15,"shape"],[76,117,48,20],[76,120,48,23],[76,121,48,24],[77,4,49,4,"util"],[77,8,49,8],[77,9,49,9,"assert"],[77,15,49,15],[77,16,49,16,"dy5D"],[77,20,49,20],[77,21,49,21,"rank"],[77,25,49,25],[77,30,49,30],[77,31,49,31],[77,33,49,33],[77,39,49,39],[77,100,49,100],[77,103,50,8],[77,106,50,11,"dy5D"],[77,110,50,15],[77,111,50,16,"shape"],[77,116,50,21],[77,119,50,24],[77,120,50,25],[78,4,51,4,"util"],[78,8,51,8],[78,9,51,9,"assert"],[78,15,51,15],[78,16,51,16,"filterShape"],[78,27,51,27],[78,28,51,28,"length"],[78,34,51,34],[78,39,51,39],[78,40,51,40],[78,42,51,42],[78,48,51,48],[78,114,51,114],[78,117,52,8],[78,120,52,11,"filterShape"],[78,131,52,22],[78,134,52,25],[78,135,52,26],[79,4,53,4,"util"],[79,8,53,8],[79,9,53,9,"assert"],[79,15,53,15],[79,16,53,16,"x5D"],[79,19,53,19],[79,20,53,20,"shape"],[79,25,53,25],[79,26,53,26],[79,27,53,27],[79,28,53,28],[79,33,53,33,"filterShape"],[79,44,53,44],[79,45,53,45],[79,46,53,46],[79,47,53,47],[79,49,53,49],[79,55,53,55],[79,99,53,99,"x5D"],[79,102,53,102],[79,103,53,103,"shape"],[79,108,53,108],[79,109,53,109],[79,110,53,110],[79,111,53,111],[79,120,53,120],[79,123,54,8],[79,155,54,40,"filterShape"],[79,166,54,51],[79,167,54,52],[79,168,54,53],[79,169,54,54],[79,172,54,57],[79,173,54,58],[80,4,55,4,"util"],[80,8,55,8],[80,9,55,9,"assert"],[80,15,55,15],[80,16,55,16,"dy5D"],[80,20,55,20],[80,21,55,21,"shape"],[80,26,55,26],[80,27,55,27],[80,28,55,28],[80,29,55,29],[80,34,55,34,"filterShape"],[80,45,55,45],[80,46,55,46],[80,47,55,47],[80,48,55,48],[80,50,55,50],[80,56,55,56],[80,98,55,98,"dy5D"],[80,102,55,102],[80,103,55,103,"shape"],[80,108,55,108],[80,109,55,109],[80,110,55,110],[80,111,55,111],[80,120,55,120],[80,123,56,8],[80,157,56,42,"filterShape"],[80,168,56,53],[80,169,56,54],[80,170,56,55],[80,171,56,56],[80,175,56,60],[80,176,56,61],[81,4,57,4],[81,10,57,10,"inputs"],[81,16,57,16],[81,19,57,19],[82,6,57,21,"x"],[82,7,57,22],[82,9,57,24,"x5D"],[82,12,57,27],[83,6,57,29,"dy"],[83,8,57,31],[83,10,57,33,"dy5D"],[84,4,57,38],[84,5,57,39],[85,4,58,4],[85,10,58,10,"attrs"],[85,15,58,15],[85,18,58,18],[86,6,58,20,"strides"],[86,13,58,27],[87,6,58,29,"pad"],[87,9,58,32],[88,6,58,34,"filterShape"],[89,4,58,46],[89,5,58,47],[90,4,59,4],[91,4,60,4],[91,11,60,11,"ENGINE"],[91,18,60,17],[91,19,60,17,"ENGINE"],[91,25,60,17],[91,26,60,18,"runKernel"],[91,35,60,27],[91,36,60,28,"Conv3DBackpropFilterV2"],[91,49,60,50],[91,50,60,50,"Conv3DBackpropFilterV2"],[91,72,60,50],[91,74,60,52,"inputs"],[91,80,60,58],[91,82,60,60,"attrs"],[91,87,60,65],[91,88,60,66],[92,2,61,0],[93,2,62,7],[93,8,62,13,"conv3DBackpropFilter"],[93,28,62,33],[93,31,62,36],[93,46,62,52],[93,50,62,52,"op"],[93,60,62,54],[93,61,62,54,"op"],[93,63,62,54],[93,65,62,55],[94,4,62,57,"conv3DBackpropFilter_"],[95,2,62,79],[95,3,62,80],[95,4,62,81],[96,0,62,82],[96,3]],"functionMap":{"names":["<global>","conv3DBackpropFilter_","util.assert$argument_1"],"mappings":"AAA;ACqC;gCCS;uBDC;iCCC;wBDC;0CCC;yBDC;iDCC;yDDC;kDCC;4DDC;CDK"},"hasCjsExports":false},"type":"js/module"}]}