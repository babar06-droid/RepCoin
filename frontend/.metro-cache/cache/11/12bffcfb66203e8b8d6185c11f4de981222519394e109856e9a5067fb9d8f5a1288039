{"dependencies":[{"name":"../../engine","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":38,"index":741}}],"key":"v39fFCcPTN6kCKPiVEOA5hKbvfQ=","exportNames":["*"],"imports":1}},{"name":"../../kernel_names","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":742},"end":{"line":18,"column":47,"index":789}}],"key":"rL3QmnnDJzxi3tNgrJ9K3IiMDQ8=","exportNames":["*"],"imports":1}},{"name":"../../tensor_util_env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":790},"end":{"line":19,"column":56,"index":846}}],"key":"xfSGNGkCJdZhfQ673y/6d+no2yU=","exportNames":["*"],"imports":1}},{"name":"../../util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":847},"end":{"line":20,"column":35,"index":882}}],"key":"OiLVMoS12Mp3xgHkQeTdnQIBX6Q=","exportNames":["*"],"imports":1}},{"name":"../operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":883},"end":{"line":21,"column":34,"index":917}}],"key":"fQilPqfSvhAHjyfKT0P4wel7jE4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"transform\", {\n    enumerable: true,\n    get: function () {\n      return transform;\n    }\n  });\n  var _engine = require(_dependencyMap[0], \"../../engine\");\n  var _kernel_names = require(_dependencyMap[1], \"../../kernel_names\");\n  var _tensor_util_env = require(_dependencyMap[2], \"../../tensor_util_env\");\n  var _util = require(_dependencyMap[3], \"../../util\");\n  var util = _interopNamespace(_util);\n  var _operation = require(_dependencyMap[4], \"../operation\");\n  /**\n   * @license\n   * Copyright 2021 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  /**\n   * Applies the given transform(s) to the image(s).\n   *\n   * @param image 4d tensor of shape `[batch, imageHeight, imageWidth, depth]`.\n   * @param transforms Projective transform matrix/matrices. A tensor1d of length\n   *     8 or tensor of size N x 8. If one row of transforms is [a0, a1, a2, b0,\n   *     b1, b2, c0, c1], then it maps the output point (x, y) to a transformed\n   *     input point (x', y') = ((a0 x + a1 y + a2) / k, (b0 x + b1 y + b2) / k),\n   *     where k = c0 x + c1 y + 1. The transforms are inverted compared to the\n   *     transform mapping input points to output points.\n   * @param interpolation Interpolation mode.\n   *     Supported values: 'nearest', 'bilinear'. Default to 'nearest'.\n   * @param fillMode Points outside the boundaries of the input are filled\n   *     according to the given mode, one of 'constant', 'reflect', 'wrap',\n   *     'nearest'. Default to 'constant'.\n   *     'reflect': (d c b a | a b c d | d c b a ) The input is extended by\n   *     reflecting about the edge of the last pixel.\n   *     'constant': (k k k k | a b c d | k k k k) The input is extended by\n   *     filling all values beyond the edge with the same constant value k.\n   *     'wrap': (a b c d | a b c d | a b c d) The input is extended by\n   *     wrapping around to the opposite edge.\n   *     'nearest': (a a a a | a b c d | d d d d) The input is extended by\n   *     the nearest pixel.\n   * @param fillValue A float represents the value to be filled outside the\n   *     boundaries when fillMode is 'constant'.\n   * @param Output dimension after the transform, [height, width]. If undefined,\n   *     output is the same size as input image.\n   *\n   * @doc {heading: 'Operations', subheading: 'Images', namespace: 'image'}\n   */\n  function transform_(image, transforms, interpolation = 'nearest', fillMode = 'constant', fillValue = 0, outputShape) {\n    const $image = (0, _tensor_util_env.convertToTensor)(image, 'image', 'transform', 'float32');\n    const $transforms = (0, _tensor_util_env.convertToTensor)(transforms, 'transforms', 'transform', 'float32');\n    util.assert($image.rank === 4, () => 'Error in transform: image must be rank 4,' + `but got rank ${$image.rank}.`);\n    util.assert($transforms.rank === 2 && ($transforms.shape[0] === $image.shape[0] || $transforms.shape[0] === 1) && $transforms.shape[1] === 8, () => `Error in transform: Input transform should be batch x 8 or 1 x 8`);\n    util.assert(outputShape == null || outputShape.length === 2, () => 'Error in transform: outputShape must be [height, width] or null, ' + `but got ${outputShape}.`);\n    const inputs = {\n      image: $image,\n      transforms: $transforms\n    };\n    const attrs = {\n      interpolation,\n      fillMode,\n      fillValue,\n      outputShape\n    };\n    return _engine.ENGINE.runKernel(_kernel_names.Transform, inputs, attrs);\n  }\n  const transform = /* @__PURE__ */(0, _operation.op)({\n    transform_\n  });\n});","lineCount":102,"map":[[22,2,67,0,"Object"],[22,8,67,0],[22,9,67,0,"defineProperty"],[22,23,67,0],[22,24,67,0,"exports"],[22,31,67,0],[23,4,67,0,"enumerable"],[23,14,67,0],[24,4,67,0,"get"],[24,7,67,0],[24,18,67,0,"get"],[24,19,67,0],[25,6,67,0],[25,13,67,0,"transform"],[25,22,67,0],[26,4,67,0],[27,2,67,0],[28,2,17,0],[28,6,17,0,"_engine"],[28,13,17,0],[28,16,17,0,"require"],[28,23,17,0],[28,24,17,0,"_dependencyMap"],[28,38,17,0],[29,2,18,0],[29,6,18,0,"_kernel_names"],[29,19,18,0],[29,22,18,0,"require"],[29,29,18,0],[29,30,18,0,"_dependencyMap"],[29,44,18,0],[30,2,19,0],[30,6,19,0,"_tensor_util_env"],[30,22,19,0],[30,25,19,0,"require"],[30,32,19,0],[30,33,19,0,"_dependencyMap"],[30,47,19,0],[31,2,20,0],[31,6,20,0,"_util"],[31,11,20,0],[31,14,20,0,"require"],[31,21,20,0],[31,22,20,0,"_dependencyMap"],[31,36,20,0],[32,2,20,0],[32,6,20,0,"util"],[32,10,20,0],[32,13,20,0,"_interopNamespace"],[32,30,20,0],[32,31,20,0,"_util"],[32,36,20,0],[33,2,21,0],[33,6,21,0,"_operation"],[33,16,21,0],[33,19,21,0,"require"],[33,26,21,0],[33,27,21,0,"_dependencyMap"],[33,41,21,0],[34,2,1,0],[35,0,2,0],[36,0,3,0],[37,0,4,0],[38,0,5,0],[39,0,6,0],[40,0,7,0],[41,0,8,0],[42,0,9,0],[43,0,10,0],[44,0,11,0],[45,0,12,0],[46,0,13,0],[47,0,14,0],[48,0,15,0],[49,0,16,0],[51,2,22,0],[52,0,23,0],[53,0,24,0],[54,0,25,0],[55,0,26,0],[56,0,27,0],[57,0,28,0],[58,0,29,0],[59,0,30,0],[60,0,31,0],[61,0,32,0],[62,0,33,0],[63,0,34,0],[64,0,35,0],[65,0,36,0],[66,0,37,0],[67,0,38,0],[68,0,39,0],[69,0,40,0],[70,0,41,0],[71,0,42,0],[72,0,43,0],[73,0,44,0],[74,0,45,0],[75,0,46,0],[76,0,47,0],[77,0,48,0],[78,0,49,0],[79,0,50,0],[80,0,51,0],[81,2,52,0],[81,11,52,9,"transform_"],[81,21,52,19,"transform_"],[81,22,52,20,"image"],[81,27,52,25],[81,29,52,27,"transforms"],[81,39,52,37],[81,41,52,39,"interpolation"],[81,54,52,52],[81,57,52,55],[81,66,52,64],[81,68,52,66,"fillMode"],[81,76,52,74],[81,79,52,77],[81,89,52,87],[81,91,52,89,"fillValue"],[81,100,52,98],[81,103,52,101],[81,104,52,102],[81,106,52,104,"outputShape"],[81,117,52,115],[81,119,52,117],[82,4,53,4],[82,10,53,10,"$image"],[82,16,53,16],[82,19,53,19],[82,23,53,19,"convertToTensor"],[82,39,53,34],[82,40,53,34,"convertToTensor"],[82,55,53,34],[82,57,53,35,"image"],[82,62,53,40],[82,64,53,42],[82,71,53,49],[82,73,53,51],[82,84,53,62],[82,86,53,64],[82,95,53,73],[82,96,53,74],[83,4,54,4],[83,10,54,10,"$transforms"],[83,21,54,21],[83,24,54,24],[83,28,54,24,"convertToTensor"],[83,44,54,39],[83,45,54,39,"convertToTensor"],[83,60,54,39],[83,62,54,40,"transforms"],[83,72,54,50],[83,74,54,52],[83,86,54,64],[83,88,54,66],[83,99,54,77],[83,101,54,79],[83,110,54,88],[83,111,54,89],[84,4,55,4,"util"],[84,8,55,8],[84,9,55,9,"assert"],[84,15,55,15],[84,16,55,16,"$image"],[84,22,55,22],[84,23,55,23,"rank"],[84,27,55,27],[84,32,55,32],[84,33,55,33],[84,35,55,35],[84,41,55,41],[84,84,55,84],[84,87,56,8],[84,103,56,24,"$image"],[84,109,56,30],[84,110,56,31,"rank"],[84,114,56,35],[84,117,56,38],[84,118,56,39],[85,4,57,4,"util"],[85,8,57,8],[85,9,57,9,"assert"],[85,15,57,15],[85,16,57,16,"$transforms"],[85,27,57,27],[85,28,57,28,"rank"],[85,32,57,32],[85,37,57,37],[85,38,57,38],[85,43,58,9,"$transforms"],[85,54,58,20],[85,55,58,21,"shape"],[85,60,58,26],[85,61,58,27],[85,62,58,28],[85,63,58,29],[85,68,58,34,"$image"],[85,74,58,40],[85,75,58,41,"shape"],[85,80,58,46],[85,81,58,47],[85,82,58,48],[85,83,58,49],[85,87,59,12,"$transforms"],[85,98,59,23],[85,99,59,24,"shape"],[85,104,59,29],[85,105,59,30],[85,106,59,31],[85,107,59,32],[85,112,59,37],[85,113,59,38],[85,114,59,39],[85,118,60,8,"$transforms"],[85,129,60,19],[85,130,60,20,"shape"],[85,135,60,25],[85,136,60,26],[85,137,60,27],[85,138,60,28],[85,143,60,33],[85,144,60,34],[85,146,60,36],[85,152,60,42],[85,218,60,108],[85,219,60,109],[86,4,61,4,"util"],[86,8,61,8],[86,9,61,9,"assert"],[86,15,61,15],[86,16,61,16,"outputShape"],[86,27,61,27],[86,31,61,31],[86,35,61,35],[86,39,61,39,"outputShape"],[86,50,61,50],[86,51,61,51,"length"],[86,57,61,57],[86,62,61,62],[86,63,61,63],[86,65,61,65],[86,71,61,71],[86,138,61,138],[86,141,62,8],[86,152,62,19,"outputShape"],[86,163,62,30],[86,166,62,33],[86,167,62,34],[87,4,63,4],[87,10,63,10,"inputs"],[87,16,63,16],[87,19,63,19],[88,6,63,21,"image"],[88,11,63,26],[88,13,63,28,"$image"],[88,19,63,34],[89,6,63,36,"transforms"],[89,16,63,46],[89,18,63,48,"$transforms"],[90,4,63,60],[90,5,63,61],[91,4,64,4],[91,10,64,10,"attrs"],[91,15,64,15],[91,18,64,18],[92,6,64,20,"interpolation"],[92,19,64,33],[93,6,64,35,"fillMode"],[93,14,64,43],[94,6,64,45,"fillValue"],[94,15,64,54],[95,6,64,56,"outputShape"],[96,4,64,68],[96,5,64,69],[97,4,65,4],[97,11,65,11,"ENGINE"],[97,18,65,17],[97,19,65,17,"ENGINE"],[97,25,65,17],[97,26,65,18,"runKernel"],[97,35,65,27],[97,36,65,28,"Transform"],[97,49,65,37],[97,50,65,37,"Transform"],[97,59,65,37],[97,61,65,39,"inputs"],[97,67,65,45],[97,69,65,47,"attrs"],[97,74,65,52],[97,75,65,53],[98,2,66,0],[99,2,67,7],[99,8,67,13,"transform"],[99,17,67,22],[99,20,67,25],[99,35,67,41],[99,39,67,41,"op"],[99,49,67,43],[99,50,67,43,"op"],[99,52,67,43],[99,54,67,44],[100,4,67,46,"transform_"],[101,2,67,57],[101,3,67,58],[101,4,67,59],[102,0,67,60],[102,3]],"functionMap":{"names":["<global>","transform_","util.assert$argument_1"],"mappings":"AAA;ACmD;mCCG;sCDC;oCCI,wED;iECC;iCDC;CDI"},"hasCjsExports":false},"type":"js/module"}]}