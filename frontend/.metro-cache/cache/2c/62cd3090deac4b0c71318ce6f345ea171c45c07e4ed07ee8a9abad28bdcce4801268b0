{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":53,"index":756}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"BatchNormPackedProgram\", {\n    enumerable: true,\n    get: function () {\n      return BatchNormPackedProgram;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  /**\n   * @license\n   * Copyright 2018 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  class BatchNormPackedProgram {\n    constructor(xShape, meanShape, varianceShape, offsetShape, scaleShape, varianceEpsilon) {\n      this.packedInputs = true;\n      this.packedOutput = true;\n      this.variableNames = ['x', 'mean', 'variance'];\n      _tensorflowTfjsCore.backend_util.assertAndGetBroadcastShape(xShape, meanShape);\n      _tensorflowTfjsCore.backend_util.assertAndGetBroadcastShape(xShape, varianceShape);\n      let offsetSnippet = 'vec4(0.0)';\n      if (offsetShape != null) {\n        _tensorflowTfjsCore.backend_util.assertAndGetBroadcastShape(xShape, offsetShape);\n        this.variableNames.push('offset');\n        offsetSnippet = 'getOffsetAtOutCoords()';\n      }\n      let scaleSnippet = 'vec4(1.0)';\n      if (scaleShape != null) {\n        _tensorflowTfjsCore.backend_util.assertAndGetBroadcastShape(xShape, scaleShape);\n        this.variableNames.push('scale');\n        scaleSnippet = 'getScaleAtOutCoords()';\n      }\n      this.outputShape = xShape;\n      this.userCode = `\n      void main() {\n        vec4 offset = ${offsetSnippet};\n        vec4 scale = ${scaleSnippet};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${varianceEpsilon}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `;\n    }\n  }\n});","lineCount":67,"map":[[7,2,18,0,"Object"],[7,8,18,0],[7,9,18,0,"defineProperty"],[7,23,18,0],[7,24,18,0,"exports"],[7,31,18,0],[8,4,18,0,"enumerable"],[8,14,18,0],[9,4,18,0,"get"],[9,7,18,0],[9,18,18,0,"get"],[9,19,18,0],[10,6,18,0],[10,13,18,0,"BatchNormPackedProgram"],[10,35,18,0],[11,4,18,0],[12,2,18,0],[13,2,17,0],[13,6,17,0,"_tensorflowTfjsCore"],[13,25,17,0],[13,28,17,0,"require"],[13,35,17,0],[13,36,17,0,"_dependencyMap"],[13,50,17,0],[14,2,1,0],[15,0,2,0],[16,0,3,0],[17,0,4,0],[18,0,5,0],[19,0,6,0],[20,0,7,0],[21,0,8,0],[22,0,9,0],[23,0,10,0],[24,0,11,0],[25,0,12,0],[26,0,13,0],[27,0,14,0],[28,0,15,0],[29,0,16,0],[31,2,18,7],[31,8,18,13,"BatchNormPackedProgram"],[31,30,18,35],[31,31,18,36],[32,4,19,4,"constructor"],[32,15,19,15,"constructor"],[32,16,19,16,"xShape"],[32,22,19,22],[32,24,19,24,"meanShape"],[32,33,19,33],[32,35,19,35,"varianceShape"],[32,48,19,48],[32,50,19,50,"offsetShape"],[32,61,19,61],[32,63,19,63,"scaleShape"],[32,73,19,73],[32,75,19,75,"varianceEpsilon"],[32,90,19,90],[32,92,19,92],[33,6,20,8],[33,10,20,12],[33,11,20,13,"packedInputs"],[33,23,20,25],[33,26,20,28],[33,30,20,32],[34,6,21,8],[34,10,21,12],[34,11,21,13,"packedOutput"],[34,23,21,25],[34,26,21,28],[34,30,21,32],[35,6,22,8],[35,10,22,12],[35,11,22,13,"variableNames"],[35,24,22,26],[35,27,22,29],[35,28,22,30],[35,31,22,33],[35,33,22,35],[35,39,22,41],[35,41,22,43],[35,51,22,53],[35,52,22,54],[36,6,23,8,"backend_util"],[36,25,23,20],[36,26,23,20,"backend_util"],[36,38,23,20],[36,39,23,21,"assertAndGetBroadcastShape"],[36,65,23,47],[36,66,23,48,"xShape"],[36,72,23,54],[36,74,23,56,"meanShape"],[36,83,23,65],[36,84,23,66],[37,6,24,8,"backend_util"],[37,25,24,20],[37,26,24,20,"backend_util"],[37,38,24,20],[37,39,24,21,"assertAndGetBroadcastShape"],[37,65,24,47],[37,66,24,48,"xShape"],[37,72,24,54],[37,74,24,56,"varianceShape"],[37,87,24,69],[37,88,24,70],[38,6,25,8],[38,10,25,12,"offsetSnippet"],[38,23,25,25],[38,26,25,28],[38,37,25,39],[39,6,26,8],[39,10,26,12,"offsetShape"],[39,21,26,23],[39,25,26,27],[39,29,26,31],[39,31,26,33],[40,8,27,12,"backend_util"],[40,27,27,24],[40,28,27,24,"backend_util"],[40,40,27,24],[40,41,27,25,"assertAndGetBroadcastShape"],[40,67,27,51],[40,68,27,52,"xShape"],[40,74,27,58],[40,76,27,60,"offsetShape"],[40,87,27,71],[40,88,27,72],[41,8,28,12],[41,12,28,16],[41,13,28,17,"variableNames"],[41,26,28,30],[41,27,28,31,"push"],[41,31,28,35],[41,32,28,36],[41,40,28,44],[41,41,28,45],[42,8,29,12,"offsetSnippet"],[42,21,29,25],[42,24,29,28],[42,48,29,52],[43,6,30,8],[44,6,31,8],[44,10,31,12,"scaleSnippet"],[44,22,31,24],[44,25,31,27],[44,36,31,38],[45,6,32,8],[45,10,32,12,"scaleShape"],[45,20,32,22],[45,24,32,26],[45,28,32,30],[45,30,32,32],[46,8,33,12,"backend_util"],[46,27,33,24],[46,28,33,24,"backend_util"],[46,40,33,24],[46,41,33,25,"assertAndGetBroadcastShape"],[46,67,33,51],[46,68,33,52,"xShape"],[46,74,33,58],[46,76,33,60,"scaleShape"],[46,86,33,70],[46,87,33,71],[47,8,34,12],[47,12,34,16],[47,13,34,17,"variableNames"],[47,26,34,30],[47,27,34,31,"push"],[47,31,34,35],[47,32,34,36],[47,39,34,43],[47,40,34,44],[48,8,35,12,"scaleSnippet"],[48,20,35,24],[48,23,35,27],[48,46,35,50],[49,6,36,8],[50,6,37,8],[50,10,37,12],[50,11,37,13,"outputShape"],[50,22,37,24],[50,25,37,27,"xShape"],[50,31,37,33],[51,6,38,8],[51,10,38,12],[51,11,38,13,"userCode"],[51,19,38,21],[51,22,38,24],[52,0,39,0],[53,0,40,0],[53,24,40,24,"offsetSnippet"],[53,37,40,37],[54,0,41,0],[54,23,41,23,"scaleSnippet"],[54,35,41,35],[55,0,42,0],[56,0,43,0],[57,0,44,0],[58,0,45,0],[59,0,46,0],[60,0,47,0],[60,57,47,57,"varianceEpsilon"],[60,72,47,72],[61,0,48,0],[62,0,49,0],[63,0,50,0],[64,0,51,0],[64,5,51,5],[65,4,52,4],[66,2,53,0],[67,0,53,1],[67,3]],"functionMap":{"names":["<global>","BatchNormPackedProgram","BatchNormPackedProgram#constructor"],"mappings":"AAA;OCiB;ICC;KDiC;CDC"},"hasCjsExports":false},"type":"js/module"}]}