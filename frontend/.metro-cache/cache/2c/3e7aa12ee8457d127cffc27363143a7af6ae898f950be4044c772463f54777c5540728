{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":44,"index":747}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}},{"name":"../cpu_util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":848},"end":{"line":20,"column":47,"index":895}}],"key":"5L5S4GXlh/uJh1MrXQbkPSVOWm4=","exportNames":["*"],"imports":1}},{"name":"./Max_impl","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":896},"end":{"line":21,"column":37,"index":933}}],"key":"hMbx96xw0r/jhXbgJ6tKxYAyKjE=","exportNames":["*"],"imports":1}},{"name":"./Transpose_impl","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":22,"column":0,"index":934},"end":{"line":22,"column":49,"index":983}}],"key":"14/1wfkCjW4iZnvkwkO0WFpRQ7E=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.max = max;\n  Object.defineProperty(exports, \"maxConfig\", {\n    enumerable: true,\n    get: function () {\n      return maxConfig;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  var _cpu_util = require(_dependencyMap[1], \"../cpu_util\");\n  var _Max_impl = require(_dependencyMap[2], \"./Max_impl\");\n  var _Transpose_impl = require(_dependencyMap[3], \"./Transpose_impl\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  function max(args) {\n    const {\n      inputs,\n      backend,\n      attrs\n    } = args;\n    const {\n      x\n    } = inputs;\n    const {\n      reductionIndices,\n      keepDims\n    } = attrs;\n    const cpuBackend = backend;\n    let xShape = x.shape;\n    const xRank = xShape.length;\n    const origAxes = _tensorflowTfjsCore.util.parseAxisParam(reductionIndices, xShape);\n    let axes = origAxes;\n    const permutedAxes = _tensorflowTfjsCore.backend_util.getAxesPermutation(axes, xRank);\n    let xVals = cpuBackend.data.get(x.dataId).values;\n    if (permutedAxes != null) {\n      const newShape = new Array(xRank);\n      for (let i = 0; i < newShape.length; i++) {\n        newShape[i] = xShape[permutedAxes[i]];\n      }\n      xVals = (0, _Transpose_impl.transposeImpl)(xVals, xShape, x.dtype, permutedAxes, newShape);\n      axes = _tensorflowTfjsCore.backend_util.getInnerMostAxes(axes.length, xRank);\n      xShape = newShape;\n    }\n    (0, _cpu_util.assertNotComplex)(x, 'max');\n    _tensorflowTfjsCore.backend_util.assertAxesAreInnerMostDims('max', axes, xRank);\n    const [maxOutShape, reduceShape] = _tensorflowTfjsCore.backend_util.computeOutAndReduceShapes(xShape, axes);\n    const reduceSize = _tensorflowTfjsCore.util.sizeFromShape(reduceShape);\n    const result = (0, _Max_impl.maxImpl)(xVals, reduceSize, maxOutShape, x.dtype);\n    const dataId = cpuBackend.write(result, maxOutShape, x.dtype);\n    let outShape = maxOutShape;\n    if (keepDims) {\n      // reshape\n      const newShape = _tensorflowTfjsCore.backend_util.expandShapeToKeepDim(maxOutShape, origAxes);\n      outShape = newShape;\n    }\n    return {\n      dataId,\n      shape: outShape,\n      dtype: x.dtype\n    };\n  }\n  const maxConfig = {\n    kernelName: _tensorflowTfjsCore.Max,\n    backendName: 'cpu',\n    kernelFunc: max\n  };\n});","lineCount":87,"map":[[7,2,23,0,"exports"],[7,9,23,0],[7,10,23,0,"max"],[7,13,23,0],[7,16,23,0,"max"],[7,19,23,0],[8,2,57,0,"Object"],[8,8,57,0],[8,9,57,0,"defineProperty"],[8,23,57,0],[8,24,57,0,"exports"],[8,31,57,0],[9,4,57,0,"enumerable"],[9,14,57,0],[10,4,57,0,"get"],[10,7,57,0],[10,18,57,0,"get"],[10,19,57,0],[11,6,57,0],[11,13,57,0,"maxConfig"],[11,22,57,0],[12,4,57,0],[13,2,57,0],[14,2,17,0],[14,6,17,0,"_tensorflowTfjsCore"],[14,25,17,0],[14,28,17,0,"require"],[14,35,17,0],[14,36,17,0,"_dependencyMap"],[14,50,17,0],[15,2,20,0],[15,6,20,0,"_cpu_util"],[15,15,20,0],[15,18,20,0,"require"],[15,25,20,0],[15,26,20,0,"_dependencyMap"],[15,40,20,0],[16,2,21,0],[16,6,21,0,"_Max_impl"],[16,15,21,0],[16,18,21,0,"require"],[16,25,21,0],[16,26,21,0,"_dependencyMap"],[16,40,21,0],[17,2,22,0],[17,6,22,0,"_Transpose_impl"],[17,21,22,0],[17,24,22,0,"require"],[17,31,22,0],[17,32,22,0,"_dependencyMap"],[17,46,22,0],[18,2,1,0],[19,0,2,0],[20,0,3,0],[21,0,4,0],[22,0,5,0],[23,0,6,0],[24,0,7,0],[25,0,8,0],[26,0,9,0],[27,0,10,0],[28,0,11,0],[29,0,12,0],[30,0,13,0],[31,0,14,0],[32,0,15,0],[33,0,16,0],[35,2,23,7],[35,11,23,16,"max"],[35,14,23,19,"max"],[35,15,23,20,"args"],[35,19,23,24],[35,21,23,26],[36,4,24,4],[36,10,24,10],[37,6,24,12,"inputs"],[37,12,24,18],[38,6,24,20,"backend"],[38,13,24,27],[39,6,24,29,"attrs"],[40,4,24,35],[40,5,24,36],[40,8,24,39,"args"],[40,12,24,43],[41,4,25,4],[41,10,25,10],[42,6,25,12,"x"],[43,4,25,14],[43,5,25,15],[43,8,25,18,"inputs"],[43,14,25,24],[44,4,26,4],[44,10,26,10],[45,6,26,12,"reductionIndices"],[45,22,26,28],[46,6,26,30,"keepDims"],[47,4,26,39],[47,5,26,40],[47,8,26,43,"attrs"],[47,13,26,48],[48,4,27,4],[48,10,27,10,"cpuBackend"],[48,20,27,20],[48,23,27,23,"backend"],[48,30,27,30],[49,4,28,4],[49,8,28,8,"xShape"],[49,14,28,14],[49,17,28,17,"x"],[49,18,28,18],[49,19,28,19,"shape"],[49,24,28,24],[50,4,29,4],[50,10,29,10,"xRank"],[50,15,29,15],[50,18,29,18,"xShape"],[50,24,29,24],[50,25,29,25,"length"],[50,31,29,31],[51,4,30,4],[51,10,30,10,"origAxes"],[51,18,30,18],[51,21,30,21,"util"],[51,40,30,25],[51,41,30,25,"util"],[51,45,30,25],[51,46,30,26,"parseAxisParam"],[51,60,30,40],[51,61,30,41,"reductionIndices"],[51,77,30,57],[51,79,30,59,"xShape"],[51,85,30,65],[51,86,30,66],[52,4,31,4],[52,8,31,8,"axes"],[52,12,31,12],[52,15,31,15,"origAxes"],[52,23,31,23],[53,4,32,4],[53,10,32,10,"permutedAxes"],[53,22,32,22],[53,25,32,25,"backend_util"],[53,44,32,37],[53,45,32,37,"backend_util"],[53,57,32,37],[53,58,32,38,"getAxesPermutation"],[53,76,32,56],[53,77,32,57,"axes"],[53,81,32,61],[53,83,32,63,"xRank"],[53,88,32,68],[53,89,32,69],[54,4,33,4],[54,8,33,8,"xVals"],[54,13,33,13],[54,16,33,16,"cpuBackend"],[54,26,33,26],[54,27,33,27,"data"],[54,31,33,31],[54,32,33,32,"get"],[54,35,33,35],[54,36,33,36,"x"],[54,37,33,37],[54,38,33,38,"dataId"],[54,44,33,44],[54,45,33,45],[54,46,33,46,"values"],[54,52,33,52],[55,4,34,4],[55,8,34,8,"permutedAxes"],[55,20,34,20],[55,24,34,24],[55,28,34,28],[55,30,34,30],[56,6,35,8],[56,12,35,14,"newShape"],[56,20,35,22],[56,23,35,25],[56,27,35,29,"Array"],[56,32,35,34],[56,33,35,35,"xRank"],[56,38,35,40],[56,39,35,41],[57,6,36,8],[57,11,36,13],[57,15,36,17,"i"],[57,16,36,18],[57,19,36,21],[57,20,36,22],[57,22,36,24,"i"],[57,23,36,25],[57,26,36,28,"newShape"],[57,34,36,36],[57,35,36,37,"length"],[57,41,36,43],[57,43,36,45,"i"],[57,44,36,46],[57,46,36,48],[57,48,36,50],[58,8,37,12,"newShape"],[58,16,37,20],[58,17,37,21,"i"],[58,18,37,22],[58,19,37,23],[58,22,37,26,"xShape"],[58,28,37,32],[58,29,37,33,"permutedAxes"],[58,41,37,45],[58,42,37,46,"i"],[58,43,37,47],[58,44,37,48],[58,45,37,49],[59,6,38,8],[60,6,39,8,"xVals"],[60,11,39,13],[60,14,39,16],[60,18,39,16,"transposeImpl"],[60,33,39,29],[60,34,39,29,"transposeImpl"],[60,47,39,29],[60,49,39,30,"xVals"],[60,54,39,35],[60,56,39,37,"xShape"],[60,62,39,43],[60,64,39,45,"x"],[60,65,39,46],[60,66,39,47,"dtype"],[60,71,39,52],[60,73,39,54,"permutedAxes"],[60,85,39,66],[60,87,39,68,"newShape"],[60,95,39,76],[60,96,39,77],[61,6,40,8,"axes"],[61,10,40,12],[61,13,40,15,"backend_util"],[61,32,40,27],[61,33,40,27,"backend_util"],[61,45,40,27],[61,46,40,28,"getInnerMostAxes"],[61,62,40,44],[61,63,40,45,"axes"],[61,67,40,49],[61,68,40,50,"length"],[61,74,40,56],[61,76,40,58,"xRank"],[61,81,40,63],[61,82,40,64],[62,6,41,8,"xShape"],[62,12,41,14],[62,15,41,17,"newShape"],[62,23,41,25],[63,4,42,4],[64,4,43,4],[64,8,43,4,"assertNotComplex"],[64,17,43,20],[64,18,43,20,"assertNotComplex"],[64,34,43,20],[64,36,43,21,"x"],[64,37,43,22],[64,39,43,24],[64,44,43,29],[64,45,43,30],[65,4,44,4,"backend_util"],[65,23,44,16],[65,24,44,16,"backend_util"],[65,36,44,16],[65,37,44,17,"assertAxesAreInnerMostDims"],[65,63,44,43],[65,64,44,44],[65,69,44,49],[65,71,44,51,"axes"],[65,75,44,55],[65,77,44,57,"xRank"],[65,82,44,62],[65,83,44,63],[66,4,45,4],[66,10,45,10],[66,11,45,11,"maxOutShape"],[66,22,45,22],[66,24,45,24,"reduceShape"],[66,35,45,35],[66,36,45,36],[66,39,45,39,"backend_util"],[66,58,45,51],[66,59,45,51,"backend_util"],[66,71,45,51],[66,72,45,52,"computeOutAndReduceShapes"],[66,97,45,77],[66,98,45,78,"xShape"],[66,104,45,84],[66,106,45,86,"axes"],[66,110,45,90],[66,111,45,91],[67,4,46,4],[67,10,46,10,"reduceSize"],[67,20,46,20],[67,23,46,23,"util"],[67,42,46,27],[67,43,46,27,"util"],[67,47,46,27],[67,48,46,28,"sizeFromShape"],[67,61,46,41],[67,62,46,42,"reduceShape"],[67,73,46,53],[67,74,46,54],[68,4,47,4],[68,10,47,10,"result"],[68,16,47,16],[68,19,47,19],[68,23,47,19,"maxImpl"],[68,32,47,26],[68,33,47,26,"maxImpl"],[68,40,47,26],[68,42,47,27,"xVals"],[68,47,47,32],[68,49,47,34,"reduceSize"],[68,59,47,44],[68,61,47,46,"maxOutShape"],[68,72,47,57],[68,74,47,59,"x"],[68,75,47,60],[68,76,47,61,"dtype"],[68,81,47,66],[68,82,47,67],[69,4,48,4],[69,10,48,10,"dataId"],[69,16,48,16],[69,19,48,19,"cpuBackend"],[69,29,48,29],[69,30,48,30,"write"],[69,35,48,35],[69,36,48,36,"result"],[69,42,48,42],[69,44,48,44,"maxOutShape"],[69,55,48,55],[69,57,48,57,"x"],[69,58,48,58],[69,59,48,59,"dtype"],[69,64,48,64],[69,65,48,65],[70,4,49,4],[70,8,49,8,"outShape"],[70,16,49,16],[70,19,49,19,"maxOutShape"],[70,30,49,30],[71,4,50,4],[71,8,50,8,"keepDims"],[71,16,50,16],[71,18,50,18],[72,6,51,8],[73,6,52,8],[73,12,52,14,"newShape"],[73,20,52,22],[73,23,52,25,"backend_util"],[73,42,52,37],[73,43,52,37,"backend_util"],[73,55,52,37],[73,56,52,38,"expandShapeToKeepDim"],[73,76,52,58],[73,77,52,59,"maxOutShape"],[73,88,52,70],[73,90,52,72,"origAxes"],[73,98,52,80],[73,99,52,81],[74,6,53,8,"outShape"],[74,14,53,16],[74,17,53,19,"newShape"],[74,25,53,27],[75,4,54,4],[76,4,55,4],[76,11,55,11],[77,6,55,13,"dataId"],[77,12,55,19],[78,6,55,21,"shape"],[78,11,55,26],[78,13,55,28,"outShape"],[78,21,55,36],[79,6,55,38,"dtype"],[79,11,55,43],[79,13,55,45,"x"],[79,14,55,46],[79,15,55,47,"dtype"],[80,4,55,53],[80,5,55,54],[81,2,56,0],[82,2,57,7],[82,8,57,13,"maxConfig"],[82,17,57,22],[82,20,57,25],[83,4,58,4,"kernelName"],[83,14,58,14],[83,16,58,16,"Max"],[83,35,58,19],[83,36,58,19,"Max"],[83,39,58,19],[84,4,59,4,"backendName"],[84,15,59,15],[84,17,59,17],[84,22,59,22],[85,4,60,4,"kernelFunc"],[85,14,60,14],[85,16,60,16,"max"],[86,2,61,0],[86,3,61,1],[87,0,61,2],[87,3]],"functionMap":{"names":["<global>","max"],"mappings":"AAA;OCsB;CDiC"},"hasCjsExports":false},"type":"js/module"}]}