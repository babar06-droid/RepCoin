{"dependencies":[{"name":"../engine","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":35,"index":738}}],"key":"zbTTi8rtwr8rjl75PzEo829Yvss=","exportNames":["*"],"imports":1}},{"name":"../kernel_names","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":739},"end":{"line":18,"column":56,"index":795}}],"key":"gQVznmdGA0uoBQvR5Q4/qW+ITHg=","exportNames":["*"],"imports":1}},{"name":"../util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":796},"end":{"line":19,"column":32,"index":828}}],"key":"DTmef1GE5grNQfsvpIzpBlINy9c=","exportNames":["*"],"imports":1}},{"name":"./operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":829},"end":{"line":20,"column":33,"index":862}}],"key":"lmmEAb6oR3TWnrsrETceKUovfkM=","exportNames":["*"],"imports":1}},{"name":"./reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":863},"end":{"line":21,"column":36,"index":899}}],"key":"dz8GCsFShMGnHX1Wj7bBySjBnSE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"conv3DBackpropInput\", {\n    enumerable: true,\n    get: function () {\n      return conv3DBackpropInput;\n    }\n  });\n  var _engine = require(_dependencyMap[0], \"../engine\");\n  var _kernel_names = require(_dependencyMap[1], \"../kernel_names\");\n  var _util = require(_dependencyMap[2], \"../util\");\n  var util = _interopNamespace(_util);\n  var _operation = require(_dependencyMap[3], \"./operation\");\n  var _reshape = require(_dependencyMap[4], \"./reshape\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  /**\n   * Computes the derivative of the input of a 3D convolution.\n   *\n   * @param xShape The shape of the input: [batch, depth, height, width,\n   * in_channels]. If length of 4, batch of 1 is assumed.\n   * @param dy The derivative of the output, of rank 5 or rank 4 of shape\n   *   `[batch, outDepth, outHeight, outWidth, in_channels]`.\n   * If rank 4, batch of 1 is assumed.\n   * @param filter The filter, rank 5, of shape\n   *     `[filterDepth, filterHeight, filterWidth, inDepth, outDepth]`.\n   * @param strides The strides of the convolution: `[strideDepth, strideHeight,\n   * strideWidth]`.\n   * @param pad The type of padding algorithm used:\n   *    - `same` and stride 1: output will be of same size as input,\n   *       regardless of filter size.\n   *    - `valid`: output will be smaller than input if filter is larger\n   *       than 1x1.\n   */\n  function conv3DBackpropInput_(xShape, dy, filter, strides, pad) {\n    util.assert(xShape.length === dy.rank, () => `Length of inShape ` + `(${xShape.length}) and rank of dy (${dy.rank}) must match`);\n    let xShape5D = xShape;\n    let dy5D = dy;\n    let reshapedTo5D = false;\n    if (dy.rank === 4) {\n      reshapedTo5D = true;\n      dy5D = (0, _reshape.reshape)(dy, [1, dy.shape[0], dy.shape[1], dy.shape[2], dy.shape[3]]);\n      xShape5D = [1, xShape[0], xShape[1], xShape[2], xShape[3]];\n    }\n    const inDepth = xShape5D[4];\n    const outDepth = dy5D.shape[4];\n    util.assert(xShape5D.length === 5, () => `Error in conv3dDerInput: inShape must be length 5, but got length ` + `${xShape5D.length}.`);\n    util.assert(dy5D.rank === 5, () => `Error in conv3dDerInput: dy must be rank 5, but got ` + `rank ${dy5D.rank}`);\n    util.assert(filter.rank === 5, () => `Error in conv3dDerInput: filter must be rank 5, but got ` + `rank ${filter.rank}`);\n    util.assert(inDepth === filter.shape[3], () => `Error in conv3dDerInput: depth of input (${inDepth}) must ` + `match input depth for filter ${filter.shape[3]}.`);\n    util.assert(outDepth === filter.shape[4], () => `Error in conv3dDerInput: depth of output (${outDepth}) must ` + `match output depth for filter ${filter.shape[4]}.`);\n    const inputs = {\n      dy: dy5D,\n      filter\n    };\n    const attrs = {\n      pad,\n      strides,\n      inputShape: xShape5D\n    };\n    // tslint:disable-next-line: no-unnecessary-type-assertion\n    const res = _engine.ENGINE.runKernel(_kernel_names.Conv3DBackpropInputV2, inputs, attrs);\n    if (reshapedTo5D) {\n      return (0, _reshape.reshape)(res, [res.shape[1], res.shape[2], res.shape[3], res.shape[4]]);\n    }\n    return res;\n  }\n  const conv3DBackpropInput = /* @__PURE__ */(0, _operation.op)({\n    conv3DBackpropInput_\n  });\n});","lineCount":105,"map":[[22,2,72,0,"Object"],[22,8,72,0],[22,9,72,0,"defineProperty"],[22,23,72,0],[22,24,72,0,"exports"],[22,31,72,0],[23,4,72,0,"enumerable"],[23,14,72,0],[24,4,72,0,"get"],[24,7,72,0],[24,18,72,0,"get"],[24,19,72,0],[25,6,72,0],[25,13,72,0,"conv3DBackpropInput"],[25,32,72,0],[26,4,72,0],[27,2,72,0],[28,2,17,0],[28,6,17,0,"_engine"],[28,13,17,0],[28,16,17,0,"require"],[28,23,17,0],[28,24,17,0,"_dependencyMap"],[28,38,17,0],[29,2,18,0],[29,6,18,0,"_kernel_names"],[29,19,18,0],[29,22,18,0,"require"],[29,29,18,0],[29,30,18,0,"_dependencyMap"],[29,44,18,0],[30,2,19,0],[30,6,19,0,"_util"],[30,11,19,0],[30,14,19,0,"require"],[30,21,19,0],[30,22,19,0,"_dependencyMap"],[30,36,19,0],[31,2,19,0],[31,6,19,0,"util"],[31,10,19,0],[31,13,19,0,"_interopNamespace"],[31,30,19,0],[31,31,19,0,"_util"],[31,36,19,0],[32,2,20,0],[32,6,20,0,"_operation"],[32,16,20,0],[32,19,20,0,"require"],[32,26,20,0],[32,27,20,0,"_dependencyMap"],[32,41,20,0],[33,2,21,0],[33,6,21,0,"_reshape"],[33,14,21,0],[33,17,21,0,"require"],[33,24,21,0],[33,25,21,0,"_dependencyMap"],[33,39,21,0],[34,2,1,0],[35,0,2,0],[36,0,3,0],[37,0,4,0],[38,0,5,0],[39,0,6,0],[40,0,7,0],[41,0,8,0],[42,0,9,0],[43,0,10,0],[44,0,11,0],[45,0,12,0],[46,0,13,0],[47,0,14,0],[48,0,15,0],[49,0,16,0],[51,2,22,0],[52,0,23,0],[53,0,24,0],[54,0,25,0],[55,0,26,0],[56,0,27,0],[57,0,28,0],[58,0,29,0],[59,0,30,0],[60,0,31,0],[61,0,32,0],[62,0,33,0],[63,0,34,0],[64,0,35,0],[65,0,36,0],[66,0,37,0],[67,0,38,0],[68,0,39,0],[69,2,40,0],[69,11,40,9,"conv3DBackpropInput_"],[69,31,40,29,"conv3DBackpropInput_"],[69,32,40,30,"xShape"],[69,38,40,36],[69,40,40,38,"dy"],[69,42,40,40],[69,44,40,42,"filter"],[69,50,40,48],[69,52,40,50,"strides"],[69,59,40,57],[69,61,40,59,"pad"],[69,64,40,62],[69,66,40,64],[70,4,41,4,"util"],[70,8,41,8],[70,9,41,9,"assert"],[70,15,41,15],[70,16,41,16,"xShape"],[70,22,41,22],[70,23,41,23,"length"],[70,29,41,29],[70,34,41,34,"dy"],[70,36,41,36],[70,37,41,37,"rank"],[70,41,41,41],[70,43,41,43],[70,49,41,49],[70,69,41,69],[70,72,42,8],[70,76,42,12,"xShape"],[70,82,42,18],[70,83,42,19,"length"],[70,89,42,25],[70,110,42,46,"dy"],[70,112,42,48],[70,113,42,49,"rank"],[70,117,42,53],[70,131,42,67],[70,132,42,68],[71,4,43,4],[71,8,43,8,"xShape5D"],[71,16,43,16],[71,19,43,19,"xShape"],[71,25,43,25],[72,4,44,4],[72,8,44,8,"dy5D"],[72,12,44,12],[72,15,44,15,"dy"],[72,17,44,17],[73,4,45,4],[73,8,45,8,"reshapedTo5D"],[73,20,45,20],[73,23,45,23],[73,28,45,28],[74,4,46,4],[74,8,46,8,"dy"],[74,10,46,10],[74,11,46,11,"rank"],[74,15,46,15],[74,20,46,20],[74,21,46,21],[74,23,46,23],[75,6,47,8,"reshapedTo5D"],[75,18,47,20],[75,21,47,23],[75,25,47,27],[76,6,48,8,"dy5D"],[76,10,48,12],[76,13,48,15],[76,17,48,15,"reshape"],[76,25,48,22],[76,26,48,22,"reshape"],[76,33,48,22],[76,35,48,23,"dy"],[76,37,48,25],[76,39,48,27],[76,40,48,28],[76,41,48,29],[76,43,48,31,"dy"],[76,45,48,33],[76,46,48,34,"shape"],[76,51,48,39],[76,52,48,40],[76,53,48,41],[76,54,48,42],[76,56,48,44,"dy"],[76,58,48,46],[76,59,48,47,"shape"],[76,64,48,52],[76,65,48,53],[76,66,48,54],[76,67,48,55],[76,69,48,57,"dy"],[76,71,48,59],[76,72,48,60,"shape"],[76,77,48,65],[76,78,48,66],[76,79,48,67],[76,80,48,68],[76,82,48,70,"dy"],[76,84,48,72],[76,85,48,73,"shape"],[76,90,48,78],[76,91,48,79],[76,92,48,80],[76,93,48,81],[76,94,48,82],[76,95,48,83],[77,6,49,8,"xShape5D"],[77,14,49,16],[77,17,49,19],[77,18,49,20],[77,19,49,21],[77,21,49,23,"xShape"],[77,27,49,29],[77,28,49,30],[77,29,49,31],[77,30,49,32],[77,32,49,34,"xShape"],[77,38,49,40],[77,39,49,41],[77,40,49,42],[77,41,49,43],[77,43,49,45,"xShape"],[77,49,49,51],[77,50,49,52],[77,51,49,53],[77,52,49,54],[77,54,49,56,"xShape"],[77,60,49,62],[77,61,49,63],[77,62,49,64],[77,63,49,65],[77,64,49,66],[78,4,50,4],[79,4,51,4],[79,10,51,10,"inDepth"],[79,17,51,17],[79,20,51,20,"xShape5D"],[79,28,51,28],[79,29,51,29],[79,30,51,30],[79,31,51,31],[80,4,52,4],[80,10,52,10,"outDepth"],[80,18,52,18],[80,21,52,21,"dy5D"],[80,25,52,25],[80,26,52,26,"shape"],[80,31,52,31],[80,32,52,32],[80,33,52,33],[80,34,52,34],[81,4,53,4,"util"],[81,8,53,8],[81,9,53,9,"assert"],[81,15,53,15],[81,16,53,16,"xShape5D"],[81,24,53,24],[81,25,53,25,"length"],[81,31,53,31],[81,36,53,36],[81,37,53,37],[81,39,53,39],[81,45,53,45],[81,113,53,113],[81,116,54,8],[81,119,54,11,"xShape5D"],[81,127,54,19],[81,128,54,20,"length"],[81,134,54,26],[81,137,54,29],[81,138,54,30],[82,4,55,4,"util"],[82,8,55,8],[82,9,55,9,"assert"],[82,15,55,15],[82,16,55,16,"dy5D"],[82,20,55,20],[82,21,55,21,"rank"],[82,25,55,25],[82,30,55,30],[82,31,55,31],[82,33,55,33],[82,39,55,39],[82,93,55,93],[82,96,56,8],[82,104,56,16,"dy5D"],[82,108,56,20],[82,109,56,21,"rank"],[82,113,56,25],[82,115,56,27],[82,116,56,28],[83,4,57,4,"util"],[83,8,57,8],[83,9,57,9,"assert"],[83,15,57,15],[83,16,57,16,"filter"],[83,22,57,22],[83,23,57,23,"rank"],[83,27,57,27],[83,32,57,32],[83,33,57,33],[83,35,57,35],[83,41,57,41],[83,99,57,99],[83,102,58,8],[83,110,58,16,"filter"],[83,116,58,22],[83,117,58,23,"rank"],[83,121,58,27],[83,123,58,29],[83,124,58,30],[84,4,59,4,"util"],[84,8,59,8],[84,9,59,9,"assert"],[84,15,59,15],[84,16,59,16,"inDepth"],[84,23,59,23],[84,28,59,28,"filter"],[84,34,59,34],[84,35,59,35,"shape"],[84,40,59,40],[84,41,59,41],[84,42,59,42],[84,43,59,43],[84,45,59,45],[84,51,59,51],[84,95,59,95,"inDepth"],[84,102,59,102],[84,111,59,111],[84,114,60,8],[84,146,60,40,"filter"],[84,152,60,46],[84,153,60,47,"shape"],[84,158,60,52],[84,159,60,53],[84,160,60,54],[84,161,60,55],[84,164,60,58],[84,165,60,59],[85,4,61,4,"util"],[85,8,61,8],[85,9,61,9,"assert"],[85,15,61,15],[85,16,61,16,"outDepth"],[85,24,61,24],[85,29,61,29,"filter"],[85,35,61,35],[85,36,61,36,"shape"],[85,41,61,41],[85,42,61,42],[85,43,61,43],[85,44,61,44],[85,46,61,46],[85,52,61,52],[85,97,61,97,"outDepth"],[85,105,61,105],[85,114,61,114],[85,117,62,8],[85,150,62,41,"filter"],[85,156,62,47],[85,157,62,48,"shape"],[85,162,62,53],[85,163,62,54],[85,164,62,55],[85,165,62,56],[85,168,62,59],[85,169,62,60],[86,4,63,4],[86,10,63,10,"inputs"],[86,16,63,16],[86,19,63,19],[87,6,63,21,"dy"],[87,8,63,23],[87,10,63,25,"dy5D"],[87,14,63,29],[88,6,63,31,"filter"],[89,4,63,38],[89,5,63,39],[90,4,64,4],[90,10,64,10,"attrs"],[90,15,64,15],[90,18,64,18],[91,6,64,20,"pad"],[91,9,64,23],[92,6,64,25,"strides"],[92,13,64,32],[93,6,64,34,"inputShape"],[93,16,64,44],[93,18,64,46,"xShape5D"],[94,4,64,55],[94,5,64,56],[95,4,65,4],[96,4,66,4],[96,10,66,10,"res"],[96,13,66,13],[96,16,66,16,"ENGINE"],[96,23,66,22],[96,24,66,22,"ENGINE"],[96,30,66,22],[96,31,66,23,"runKernel"],[96,40,66,32],[96,41,66,33,"Conv3DBackpropInputV2"],[96,54,66,54],[96,55,66,54,"Conv3DBackpropInputV2"],[96,76,66,54],[96,78,66,56,"inputs"],[96,84,66,62],[96,86,66,64,"attrs"],[96,91,66,69],[96,92,66,70],[97,4,67,4],[97,8,67,8,"reshapedTo5D"],[97,20,67,20],[97,22,67,22],[98,6,68,8],[98,13,68,15],[98,17,68,15,"reshape"],[98,25,68,22],[98,26,68,22,"reshape"],[98,33,68,22],[98,35,68,23,"res"],[98,38,68,26],[98,40,68,28],[98,41,68,29,"res"],[98,44,68,32],[98,45,68,33,"shape"],[98,50,68,38],[98,51,68,39],[98,52,68,40],[98,53,68,41],[98,55,68,43,"res"],[98,58,68,46],[98,59,68,47,"shape"],[98,64,68,52],[98,65,68,53],[98,66,68,54],[98,67,68,55],[98,69,68,57,"res"],[98,72,68,60],[98,73,68,61,"shape"],[98,78,68,66],[98,79,68,67],[98,80,68,68],[98,81,68,69],[98,83,68,71,"res"],[98,86,68,74],[98,87,68,75,"shape"],[98,92,68,80],[98,93,68,81],[98,94,68,82],[98,95,68,83],[98,96,68,84],[98,97,68,85],[99,4,69,4],[100,4,70,4],[100,11,70,11,"res"],[100,14,70,14],[101,2,71,0],[102,2,72,7],[102,8,72,13,"conv3DBackpropInput"],[102,27,72,32],[102,30,72,35],[102,45,72,51],[102,49,72,51,"op"],[102,59,72,53],[102,60,72,53,"op"],[102,62,72,53],[102,64,72,54],[103,4,72,56,"conv3DBackpropInput_"],[104,2,72,77],[104,3,72,78],[104,4,72,79],[105,0,72,80],[105,3]],"functionMap":{"names":["<global>","conv3DBackpropInput_","util.assert$argument_1"],"mappings":"AAA;ACuC;2CCC;mEDC;uCCW;6BDC;iCCC;2BDC;mCCC;6BDC;6CCC;0DDC;8CCC;2DDC;CDS"},"hasCjsExports":false},"type":"js/module"}]}