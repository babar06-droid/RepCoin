{"dependencies":[{"name":"../engine","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":35,"index":738}}],"key":"zbTTi8rtwr8rjl75PzEo829Yvss=","exportNames":["*"],"imports":1}},{"name":"../kernel_names","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":739},"end":{"line":18,"column":46,"index":785}}],"key":"gQVznmdGA0uoBQvR5Q4/qW+ITHg=","exportNames":["*"],"imports":1}},{"name":"../tensor_util_env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":786},"end":{"line":19,"column":53,"index":839}}],"key":"UCKDOr/oOGi3nbD26ZhyAVW61qk=","exportNames":["*"],"imports":1}},{"name":"./operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":840},"end":{"line":20,"column":33,"index":873}}],"key":"lmmEAb6oR3TWnrsrETceKUovfkM=","exportNames":["*"],"imports":1}},{"name":"./reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":874},"end":{"line":21,"column":36,"index":910}}],"key":"dz8GCsFShMGnHX1Wj7bBySjBnSE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"multinomial\", {\n    enumerable: true,\n    get: function () {\n      return multinomial;\n    }\n  });\n  var _engine = require(_dependencyMap[0], \"../engine\");\n  var _kernel_names = require(_dependencyMap[1], \"../kernel_names\");\n  var _tensor_util_env = require(_dependencyMap[2], \"../tensor_util_env\");\n  var _operation = require(_dependencyMap[3], \"./operation\");\n  var _reshape = require(_dependencyMap[4], \"./reshape\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  /**\n   * Creates a `tf.Tensor` with values drawn from a multinomial distribution.\n   *\n   * ```js\n   * const probs = tf.tensor([.75, .25]);\n   * tf.multinomial(probs, 3).print();\n   * ```\n   *\n   * @param logits 1D array with unnormalized log-probabilities, or\n   *     2D array of shape `[batchSize, numOutcomes]`. See the `normalized`\n   *     parameter.\n   * @param numSamples Number of samples to draw for each row slice.\n   * @param seed The seed number.\n   * @param normalized Whether the provided `logits` are normalized true\n   *     probabilities (sum to 1). Defaults to false.\n   * @return 1D array of shape `[numSamples]`, or 2D array of shape\n   *     `[batchSize, numSamples]`, depending on the rank of the input.\n   *\n   * @doc {heading: 'Tensors', subheading: 'Random'}\n   */\n  function multinomial_(logits, numSamples, seed, normalized = false) {\n    const $logits = (0, _tensor_util_env.convertToTensor)(logits, 'logits', 'multinomial');\n    const numOutcomes = $logits.size;\n    const origRank = $logits.rank;\n    if (numOutcomes < 2) {\n      throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ` + `${numOutcomes}.`);\n    }\n    if (origRank > 2) {\n      throw new Error(`Rank of probabilities must be 1 or 2, but is ${origRank}`);\n    }\n    // TODO(lina128): Investigate correct seed behavior. The code seems not allow\n    // setting see to 0.\n    seed = seed || Math.random();\n    // The kernel only accepts (and returns) rank 2 tensors.\n    const logits2D = origRank === 1 ? (0, _reshape.reshape)($logits, [1, -1]) : $logits;\n    const inputs = {\n      logits: logits2D\n    };\n    const attrs = {\n      numSamples,\n      seed,\n      normalized\n    };\n    // tslint:disable-next-line: no-unnecessary-type-assertion\n    const res = _engine.ENGINE.runKernel(_kernel_names.Multinomial, inputs, attrs);\n    // tslint:disable-next-line:no-unnecessary-type-assertion\n    return origRank === 1 ? (0, _reshape.reshape)(res, [res.size]) : res;\n  }\n  const multinomial = /* @__PURE__ */(0, _operation.op)({\n    multinomial_\n  });\n});","lineCount":86,"map":[[7,2,65,0,"Object"],[7,8,65,0],[7,9,65,0,"defineProperty"],[7,23,65,0],[7,24,65,0,"exports"],[7,31,65,0],[8,4,65,0,"enumerable"],[8,14,65,0],[9,4,65,0,"get"],[9,7,65,0],[9,18,65,0,"get"],[9,19,65,0],[10,6,65,0],[10,13,65,0,"multinomial"],[10,24,65,0],[11,4,65,0],[12,2,65,0],[13,2,17,0],[13,6,17,0,"_engine"],[13,13,17,0],[13,16,17,0,"require"],[13,23,17,0],[13,24,17,0,"_dependencyMap"],[13,38,17,0],[14,2,18,0],[14,6,18,0,"_kernel_names"],[14,19,18,0],[14,22,18,0,"require"],[14,29,18,0],[14,30,18,0,"_dependencyMap"],[14,44,18,0],[15,2,19,0],[15,6,19,0,"_tensor_util_env"],[15,22,19,0],[15,25,19,0,"require"],[15,32,19,0],[15,33,19,0,"_dependencyMap"],[15,47,19,0],[16,2,20,0],[16,6,20,0,"_operation"],[16,16,20,0],[16,19,20,0,"require"],[16,26,20,0],[16,27,20,0,"_dependencyMap"],[16,41,20,0],[17,2,21,0],[17,6,21,0,"_reshape"],[17,14,21,0],[17,17,21,0,"require"],[17,24,21,0],[17,25,21,0,"_dependencyMap"],[17,39,21,0],[18,2,1,0],[19,0,2,0],[20,0,3,0],[21,0,4,0],[22,0,5,0],[23,0,6,0],[24,0,7,0],[25,0,8,0],[26,0,9,0],[27,0,10,0],[28,0,11,0],[29,0,12,0],[30,0,13,0],[31,0,14,0],[32,0,15,0],[33,0,16,0],[35,2,22,0],[36,0,23,0],[37,0,24,0],[38,0,25,0],[39,0,26,0],[40,0,27,0],[41,0,28,0],[42,0,29,0],[43,0,30,0],[44,0,31,0],[45,0,32,0],[46,0,33,0],[47,0,34,0],[48,0,35,0],[49,0,36,0],[50,0,37,0],[51,0,38,0],[52,0,39,0],[53,0,40,0],[54,0,41,0],[55,2,42,0],[55,11,42,9,"multinomial_"],[55,23,42,21,"multinomial_"],[55,24,42,22,"logits"],[55,30,42,28],[55,32,42,30,"numSamples"],[55,42,42,40],[55,44,42,42,"seed"],[55,48,42,46],[55,50,42,48,"normalized"],[55,60,42,58],[55,63,42,61],[55,68,42,66],[55,70,42,68],[56,4,43,4],[56,10,43,10,"$logits"],[56,17,43,17],[56,20,43,20],[56,24,43,20,"convertToTensor"],[56,40,43,35],[56,41,43,35,"convertToTensor"],[56,56,43,35],[56,58,43,36,"logits"],[56,64,43,42],[56,66,43,44],[56,74,43,52],[56,76,43,54],[56,89,43,67],[56,90,43,68],[57,4,44,4],[57,10,44,10,"numOutcomes"],[57,21,44,21],[57,24,44,24,"$logits"],[57,31,44,31],[57,32,44,32,"size"],[57,36,44,36],[58,4,45,4],[58,10,45,10,"origRank"],[58,18,45,18],[58,21,45,21,"$logits"],[58,28,45,28],[58,29,45,29,"rank"],[58,33,45,33],[59,4,46,4],[59,8,46,8,"numOutcomes"],[59,19,46,19],[59,22,46,22],[59,23,46,23],[59,25,46,25],[60,6,47,8],[60,12,47,14],[60,16,47,18,"Error"],[60,21,47,23],[60,22,47,24],[60,84,47,86],[60,87,48,12],[60,90,48,15,"numOutcomes"],[60,101,48,26],[60,104,48,29],[60,105,48,30],[61,4,49,4],[62,4,50,4],[62,8,50,8,"origRank"],[62,16,50,16],[62,19,50,19],[62,20,50,20],[62,22,50,22],[63,6,51,8],[63,12,51,14],[63,16,51,18,"Error"],[63,21,51,23],[63,22,51,24],[63,70,51,72,"origRank"],[63,78,51,80],[63,80,51,82],[63,81,51,83],[64,4,52,4],[65,4,53,4],[66,4,54,4],[67,4,55,4,"seed"],[67,8,55,8],[67,11,55,11,"seed"],[67,15,55,15],[67,19,55,19,"Math"],[67,23,55,23],[67,24,55,24,"random"],[67,30,55,30],[67,31,55,31],[67,32,55,32],[68,4,56,4],[69,4,57,4],[69,10,57,10,"logits2D"],[69,18,57,18],[69,21,57,21,"origRank"],[69,29,57,29],[69,34,57,34],[69,35,57,35],[69,38,57,38],[69,42,57,38,"reshape"],[69,50,57,45],[69,51,57,45,"reshape"],[69,58,57,45],[69,60,57,46,"$logits"],[69,67,57,53],[69,69,57,55],[69,70,57,56],[69,71,57,57],[69,73,57,59],[69,74,57,60],[69,75,57,61],[69,76,57,62],[69,77,57,63],[69,80,57,66,"$logits"],[69,87,57,73],[70,4,58,4],[70,10,58,10,"inputs"],[70,16,58,16],[70,19,58,19],[71,6,58,21,"logits"],[71,12,58,27],[71,14,58,29,"logits2D"],[72,4,58,38],[72,5,58,39],[73,4,59,4],[73,10,59,10,"attrs"],[73,15,59,15],[73,18,59,18],[74,6,59,20,"numSamples"],[74,16,59,30],[75,6,59,32,"seed"],[75,10,59,36],[76,6,59,38,"normalized"],[77,4,59,49],[77,5,59,50],[78,4,60,4],[79,4,61,4],[79,10,61,10,"res"],[79,13,61,13],[79,16,61,16,"ENGINE"],[79,23,61,22],[79,24,61,22,"ENGINE"],[79,30,61,22],[79,31,61,23,"runKernel"],[79,40,61,32],[79,41,61,33,"Multinomial"],[79,54,61,44],[79,55,61,44,"Multinomial"],[79,66,61,44],[79,68,61,46,"inputs"],[79,74,61,52],[79,76,61,54,"attrs"],[79,81,61,59],[79,82,61,60],[80,4,62,4],[81,4,63,4],[81,11,63,11,"origRank"],[81,19,63,19],[81,24,63,24],[81,25,63,25],[81,28,63,28],[81,32,63,28,"reshape"],[81,40,63,35],[81,41,63,35,"reshape"],[81,48,63,35],[81,50,63,36,"res"],[81,53,63,39],[81,55,63,41],[81,56,63,42,"res"],[81,59,63,45],[81,60,63,46,"size"],[81,64,63,50],[81,65,63,51],[81,66,63,52],[81,69,63,55,"res"],[81,72,63,58],[82,2,64,0],[83,2,65,7],[83,8,65,13,"multinomial"],[83,19,65,24],[83,22,65,27],[83,37,65,43],[83,41,65,43,"op"],[83,51,65,45],[83,52,65,45,"op"],[83,54,65,45],[83,56,65,46],[84,4,65,48,"multinomial_"],[85,2,65,61],[85,3,65,62],[85,4,65,63],[86,0,65,64],[86,3]],"functionMap":{"names":["<global>","multinomial_"],"mappings":"AAA;ACyC;CDsB"},"hasCjsExports":false},"type":"js/module"}]}