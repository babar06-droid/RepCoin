{"dependencies":[{"name":"./keras_format/common","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":13,"column":0,"index":337},"end":{"line":13,"column":151,"index":488}}],"key":"S5/I5WRhEa72dfPhU4KnggBTGVM=","exportNames":["*"],"imports":1}},{"name":"./utils/generic_utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":14,"column":0,"index":489},"end":{"line":14,"column":66,"index":555}}],"key":"/2zQY6+MFVFJzbAjB88SOq9Hyw4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.checkDataFormat = checkDataFormat;\n  exports.checkInterpolationFormat = checkInterpolationFormat;\n  exports.checkPaddingMode = checkPaddingMode;\n  exports.checkPoolMode = checkPoolMode;\n  exports.nameScope = nameScope;\n  exports.getScopedTensorName = getScopedTensorName;\n  exports.getUniqueTensorName = getUniqueTensorName;\n  exports.isValidTensorName = isValidTensorName;\n  var _keras_formatCommon = require(_dependencyMap[0], \"./keras_format/common\");\n  var _utilsGeneric_utils = require(_dependencyMap[1], \"./utils/generic_utils\");\n  /**\n   * @license\n   * Copyright 2018 Google LLC\n   *\n   * Use of this source code is governed by an MIT-style\n   * license that can be found in the LICENSE file or at\n   * https://opensource.org/licenses/MIT.\n   * =============================================================================\n   */\n  /**\n   * Common functions for TensorFlow.js Layers.\n   */\n\n  // A map from the requested scoped name of a Tensor to the number of Tensors\n  // wanting that name so far.  This allows enforcing name uniqueness by appending\n  // an incrementing index, e.g. scope/name, scope/name_1, scope/name_2, etc.\n  const nameMap = new Map();\n  function checkDataFormat(value) {\n    (0, _utilsGeneric_utils.checkStringTypeUnionValue)(_keras_formatCommon.VALID_DATA_FORMAT_VALUES, 'DataFormat', value);\n  }\n  function checkInterpolationFormat(value) {\n    (0, _utilsGeneric_utils.checkStringTypeUnionValue)(_keras_formatCommon.VALID_INTERPOLATION_FORMAT_VALUES, 'InterpolationFormat', value);\n  }\n  function checkPaddingMode(value) {\n    (0, _utilsGeneric_utils.checkStringTypeUnionValue)(_keras_formatCommon.VALID_PADDING_MODE_VALUES, 'PaddingMode', value);\n  }\n  function checkPoolMode(value) {\n    (0, _utilsGeneric_utils.checkStringTypeUnionValue)(_keras_formatCommon.VALID_POOL_MODE_VALUES, 'PoolMode', value);\n  }\n  const _nameScopeStack = [];\n  const _nameScopeDivider = '/';\n  /**\n   * Enter namescope, which can be nested.\n   */\n  function nameScope(name, fn) {\n    _nameScopeStack.push(name);\n    try {\n      const val = fn();\n      _nameScopeStack.pop();\n      return val;\n    } catch (e) {\n      _nameScopeStack.pop();\n      throw e;\n    }\n  }\n  /**\n   * Get the current namescope as a flat, concatenated string.\n   */\n  function currentNameScopePrefix() {\n    if (_nameScopeStack.length === 0) {\n      return '';\n    } else {\n      return _nameScopeStack.join(_nameScopeDivider) + _nameScopeDivider;\n    }\n  }\n  /**\n   * Get the name a Tensor (or Variable) would have if not uniqueified.\n   * @param tensorName\n   * @return Scoped name string.\n   */\n  function getScopedTensorName(tensorName) {\n    if (!isValidTensorName(tensorName)) {\n      throw new Error('Not a valid tensor name: \\'' + tensorName + '\\'');\n    }\n    return currentNameScopePrefix() + tensorName;\n  }\n  /**\n   * Get unique names for Tensors and Variables.\n   * @param scopedName The fully-qualified name of the Tensor, i.e. as produced by\n   *  `getScopedTensorName()`.\n   * @return A unique version of the given fully scoped name.\n   *   If this is the first time that the scoped name is seen in this session,\n   *   then the given `scopedName` is returned unaltered.  If the same name is\n   *   seen again (producing a collision), an incrementing suffix is added to the\n   *   end of the name, so it takes the form 'scope/name_1', 'scope/name_2', etc.\n   */\n  function getUniqueTensorName(scopedName) {\n    if (!isValidTensorName(scopedName)) {\n      throw new Error('Not a valid tensor name: \\'' + scopedName + '\\'');\n    }\n    if (!nameMap.has(scopedName)) {\n      nameMap.set(scopedName, 0);\n    }\n    const index = nameMap.get(scopedName);\n    nameMap.set(scopedName, nameMap.get(scopedName) + 1);\n    if (index > 0) {\n      const result = `${scopedName}_${index}`;\n      // Mark the composed name as used in case someone wants\n      // to call getUniqueTensorName(\"name_1\").\n      nameMap.set(result, 1);\n      return result;\n    } else {\n      return scopedName;\n    }\n  }\n  const tensorNameRegex = new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\\._\\/]*$/);\n  /**\n   * Determine whether a string is a valid tensor name.\n   * @param name\n   * @returns A Boolean indicating whether `name` is a valid tensor name.\n   */\n  function isValidTensorName(name) {\n    return !!name.match(tensorNameRegex);\n  }\n});","lineCount":121,"map":[[7,2,19,0,"exports"],[7,9,19,0],[7,10,19,0,"checkDataFormat"],[7,25,19,0],[7,28,19,0,"checkDataFormat"],[7,43,19,0],[8,2,22,0,"exports"],[8,9,22,0],[8,10,22,0,"checkInterpolationFormat"],[8,34,22,0],[8,37,22,0,"checkInterpolationFormat"],[8,61,22,0],[9,2,25,0,"exports"],[9,9,25,0],[9,10,25,0,"checkPaddingMode"],[9,26,25,0],[9,29,25,0,"checkPaddingMode"],[9,45,25,0],[10,2,28,0,"exports"],[10,9,28,0],[10,10,28,0,"checkPoolMode"],[10,23,28,0],[10,26,28,0,"checkPoolMode"],[10,39,28,0],[11,2,36,0,"exports"],[11,9,36,0],[11,10,36,0,"nameScope"],[11,19,36,0],[11,22,36,0,"nameScope"],[11,31,36,0],[12,2,64,0,"exports"],[12,9,64,0],[12,10,64,0,"getScopedTensorName"],[12,29,64,0],[12,32,64,0,"getScopedTensorName"],[12,51,64,0],[13,2,80,0,"exports"],[13,9,80,0],[13,10,80,0,"getUniqueTensorName"],[13,29,80,0],[13,32,80,0,"getUniqueTensorName"],[13,51,80,0],[14,2,106,0,"exports"],[14,9,106,0],[14,10,106,0,"isValidTensorName"],[14,27,106,0],[14,30,106,0,"isValidTensorName"],[14,47,106,0],[15,2,13,0],[15,6,13,0,"_keras_formatCommon"],[15,25,13,0],[15,28,13,0,"require"],[15,35,13,0],[15,36,13,0,"_dependencyMap"],[15,50,13,0],[16,2,14,0],[16,6,14,0,"_utilsGeneric_utils"],[16,25,14,0],[16,28,14,0,"require"],[16,35,14,0],[16,36,14,0,"_dependencyMap"],[16,50,14,0],[17,2,1,0],[18,0,2,0],[19,0,3,0],[20,0,4,0],[21,0,5,0],[22,0,6,0],[23,0,7,0],[24,0,8,0],[25,0,9,0],[26,2,10,0],[27,0,11,0],[28,0,12,0],[30,2,15,0],[31,2,16,0],[32,2,17,0],[33,2,18,0],[33,8,18,6,"nameMap"],[33,15,18,13],[33,18,18,16],[33,22,18,20,"Map"],[33,25,18,23],[33,26,18,24],[33,27,18,25],[34,2,19,7],[34,11,19,16,"checkDataFormat"],[34,26,19,31,"checkDataFormat"],[34,27,19,32,"value"],[34,32,19,37],[34,34,19,39],[35,4,20,4],[35,8,20,4,"checkStringTypeUnionValue"],[35,27,20,29],[35,28,20,29,"checkStringTypeUnionValue"],[35,53,20,29],[35,55,20,30,"VALID_DATA_FORMAT_VALUES"],[35,74,20,54],[35,75,20,54,"VALID_DATA_FORMAT_VALUES"],[35,99,20,54],[35,101,20,56],[35,113,20,68],[35,115,20,70,"value"],[35,120,20,75],[35,121,20,76],[36,2,21,0],[37,2,22,7],[37,11,22,16,"checkInterpolationFormat"],[37,35,22,40,"checkInterpolationFormat"],[37,36,22,41,"value"],[37,41,22,46],[37,43,22,48],[38,4,23,4],[38,8,23,4,"checkStringTypeUnionValue"],[38,27,23,29],[38,28,23,29,"checkStringTypeUnionValue"],[38,53,23,29],[38,55,23,30,"VALID_INTERPOLATION_FORMAT_VALUES"],[38,74,23,63],[38,75,23,63,"VALID_INTERPOLATION_FORMAT_VALUES"],[38,108,23,63],[38,110,23,65],[38,131,23,86],[38,133,23,88,"value"],[38,138,23,93],[38,139,23,94],[39,2,24,0],[40,2,25,7],[40,11,25,16,"checkPaddingMode"],[40,27,25,32,"checkPaddingMode"],[40,28,25,33,"value"],[40,33,25,38],[40,35,25,40],[41,4,26,4],[41,8,26,4,"checkStringTypeUnionValue"],[41,27,26,29],[41,28,26,29,"checkStringTypeUnionValue"],[41,53,26,29],[41,55,26,30,"VALID_PADDING_MODE_VALUES"],[41,74,26,55],[41,75,26,55,"VALID_PADDING_MODE_VALUES"],[41,100,26,55],[41,102,26,57],[41,115,26,70],[41,117,26,72,"value"],[41,122,26,77],[41,123,26,78],[42,2,27,0],[43,2,28,7],[43,11,28,16,"checkPoolMode"],[43,24,28,29,"checkPoolMode"],[43,25,28,30,"value"],[43,30,28,35],[43,32,28,37],[44,4,29,4],[44,8,29,4,"checkStringTypeUnionValue"],[44,27,29,29],[44,28,29,29,"checkStringTypeUnionValue"],[44,53,29,29],[44,55,29,30,"VALID_POOL_MODE_VALUES"],[44,74,29,52],[44,75,29,52,"VALID_POOL_MODE_VALUES"],[44,97,29,52],[44,99,29,54],[44,109,29,64],[44,111,29,66,"value"],[44,116,29,71],[44,117,29,72],[45,2,30,0],[46,2,31,0],[46,8,31,6,"_nameScopeStack"],[46,23,31,21],[46,26,31,24],[46,28,31,26],[47,2,32,0],[47,8,32,6,"_nameScopeDivider"],[47,25,32,23],[47,28,32,26],[47,31,32,29],[48,2,33,0],[49,0,34,0],[50,0,35,0],[51,2,36,7],[51,11,36,16,"nameScope"],[51,20,36,25,"nameScope"],[51,21,36,26,"name"],[51,25,36,30],[51,27,36,32,"fn"],[51,29,36,34],[51,31,36,36],[52,4,37,4,"_nameScopeStack"],[52,19,37,19],[52,20,37,20,"push"],[52,24,37,24],[52,25,37,25,"name"],[52,29,37,29],[52,30,37,30],[53,4,38,4],[53,8,38,8],[54,6,39,8],[54,12,39,14,"val"],[54,15,39,17],[54,18,39,20,"fn"],[54,20,39,22],[54,21,39,23],[54,22,39,24],[55,6,40,8,"_nameScopeStack"],[55,21,40,23],[55,22,40,24,"pop"],[55,25,40,27],[55,26,40,28],[55,27,40,29],[56,6,41,8],[56,13,41,15,"val"],[56,16,41,18],[57,4,42,4],[57,5,42,5],[57,6,43,4],[57,13,43,11,"e"],[57,14,43,12],[57,16,43,14],[58,6,44,8,"_nameScopeStack"],[58,21,44,23],[58,22,44,24,"pop"],[58,25,44,27],[58,26,44,28],[58,27,44,29],[59,6,45,8],[59,12,45,14,"e"],[59,13,45,15],[60,4,46,4],[61,2,47,0],[62,2,48,0],[63,0,49,0],[64,0,50,0],[65,2,51,0],[65,11,51,9,"currentNameScopePrefix"],[65,33,51,31,"currentNameScopePrefix"],[65,34,51,31],[65,36,51,34],[66,4,52,4],[66,8,52,8,"_nameScopeStack"],[66,23,52,23],[66,24,52,24,"length"],[66,30,52,30],[66,35,52,35],[66,36,52,36],[66,38,52,38],[67,6,53,8],[67,13,53,15],[67,15,53,17],[68,4,54,4],[68,5,54,5],[68,11,55,9],[69,6,56,8],[69,13,56,15,"_nameScopeStack"],[69,28,56,30],[69,29,56,31,"join"],[69,33,56,35],[69,34,56,36,"_nameScopeDivider"],[69,51,56,53],[69,52,56,54],[69,55,56,57,"_nameScopeDivider"],[69,72,56,74],[70,4,57,4],[71,2,58,0],[72,2,59,0],[73,0,60,0],[74,0,61,0],[75,0,62,0],[76,0,63,0],[77,2,64,7],[77,11,64,16,"getScopedTensorName"],[77,30,64,35,"getScopedTensorName"],[77,31,64,36,"tensorName"],[77,41,64,46],[77,43,64,48],[78,4,65,4],[78,8,65,8],[78,9,65,9,"isValidTensorName"],[78,26,65,26],[78,27,65,27,"tensorName"],[78,37,65,37],[78,38,65,38],[78,40,65,40],[79,6,66,8],[79,12,66,14],[79,16,66,18,"Error"],[79,21,66,23],[79,22,66,24],[79,51,66,53],[79,54,66,56,"tensorName"],[79,64,66,66],[79,67,66,69],[79,71,66,73],[79,72,66,74],[80,4,67,4],[81,4,68,4],[81,11,68,11,"currentNameScopePrefix"],[81,33,68,33],[81,34,68,34],[81,35,68,35],[81,38,68,38,"tensorName"],[81,48,68,48],[82,2,69,0],[83,2,70,0],[84,0,71,0],[85,0,72,0],[86,0,73,0],[87,0,74,0],[88,0,75,0],[89,0,76,0],[90,0,77,0],[91,0,78,0],[92,0,79,0],[93,2,80,7],[93,11,80,16,"getUniqueTensorName"],[93,30,80,35,"getUniqueTensorName"],[93,31,80,36,"scopedName"],[93,41,80,46],[93,43,80,48],[94,4,81,4],[94,8,81,8],[94,9,81,9,"isValidTensorName"],[94,26,81,26],[94,27,81,27,"scopedName"],[94,37,81,37],[94,38,81,38],[94,40,81,40],[95,6,82,8],[95,12,82,14],[95,16,82,18,"Error"],[95,21,82,23],[95,22,82,24],[95,51,82,53],[95,54,82,56,"scopedName"],[95,64,82,66],[95,67,82,69],[95,71,82,73],[95,72,82,74],[96,4,83,4],[97,4,84,4],[97,8,84,8],[97,9,84,9,"nameMap"],[97,16,84,16],[97,17,84,17,"has"],[97,20,84,20],[97,21,84,21,"scopedName"],[97,31,84,31],[97,32,84,32],[97,34,84,34],[98,6,85,8,"nameMap"],[98,13,85,15],[98,14,85,16,"set"],[98,17,85,19],[98,18,85,20,"scopedName"],[98,28,85,30],[98,30,85,32],[98,31,85,33],[98,32,85,34],[99,4,86,4],[100,4,87,4],[100,10,87,10,"index"],[100,15,87,15],[100,18,87,18,"nameMap"],[100,25,87,25],[100,26,87,26,"get"],[100,29,87,29],[100,30,87,30,"scopedName"],[100,40,87,40],[100,41,87,41],[101,4,88,4,"nameMap"],[101,11,88,11],[101,12,88,12,"set"],[101,15,88,15],[101,16,88,16,"scopedName"],[101,26,88,26],[101,28,88,28,"nameMap"],[101,35,88,35],[101,36,88,36,"get"],[101,39,88,39],[101,40,88,40,"scopedName"],[101,50,88,50],[101,51,88,51],[101,54,88,54],[101,55,88,55],[101,56,88,56],[102,4,89,4],[102,8,89,8,"index"],[102,13,89,13],[102,16,89,16],[102,17,89,17],[102,19,89,19],[103,6,90,8],[103,12,90,14,"result"],[103,18,90,20],[103,21,90,23],[103,24,90,26,"scopedName"],[103,34,90,36],[103,38,90,40,"index"],[103,43,90,45],[103,45,90,47],[104,6,91,8],[105,6,92,8],[106,6,93,8,"nameMap"],[106,13,93,15],[106,14,93,16,"set"],[106,17,93,19],[106,18,93,20,"result"],[106,24,93,26],[106,26,93,28],[106,27,93,29],[106,28,93,30],[107,6,94,8],[107,13,94,15,"result"],[107,19,94,21],[108,4,95,4],[108,5,95,5],[108,11,96,9],[109,6,97,8],[109,13,97,15,"scopedName"],[109,23,97,25],[110,4,98,4],[111,2,99,0],[112,2,100,0],[112,8,100,6,"tensorNameRegex"],[112,23,100,21],[112,26,100,24],[112,30,100,28,"RegExp"],[112,36,100,34],[112,37,100,35],[112,70,100,68],[112,71,100,69],[113,2,101,0],[114,0,102,0],[115,0,103,0],[116,0,104,0],[117,0,105,0],[118,2,106,7],[118,11,106,16,"isValidTensorName"],[118,28,106,33,"isValidTensorName"],[118,29,106,34,"name"],[118,33,106,38],[118,35,106,40],[119,4,107,4],[119,11,107,11],[119,12,107,12],[119,13,107,13,"name"],[119,17,107,17],[119,18,107,18,"match"],[119,23,107,23],[119,24,107,24,"tensorNameRegex"],[119,39,107,39],[119,40,107,40],[120,2,108,0],[121,0,108,1],[121,3]],"functionMap":{"names":["<global>","checkDataFormat","checkInterpolationFormat","checkPaddingMode","checkPoolMode","nameScope","currentNameScopePrefix","getScopedTensorName","getUniqueTensorName","isValidTensorName"],"mappings":"AAA;OCkB;CDE;OEC;CFE;OGC;CHE;OIC;CJE;OKM;CLW;AMI;CNO;OOM;CPK;OQW;CRmB;OSO;CTE"},"hasCjsExports":false},"type":"js/module"}]}