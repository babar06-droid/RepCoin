{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"ResizeNearestNeighborProgram\", {\n    enumerable: true,\n    get: function () {\n      return ResizeNearestNeighborProgram;\n    }\n  });\n  /**\n   * @license\n   * Copyright 2018 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n  class ResizeNearestNeighborProgram {\n    constructor(inputShape, newHeight, newWidth, alignCorners, halfPixelCenters) {\n      this.variableNames = ['A'];\n      this.outputShape = [];\n      const [batch, oldHeight, oldWidth, depth] = inputShape;\n      this.outputShape = [batch, newHeight, newWidth, depth];\n      const effectiveInSize = [alignCorners && newHeight > 1 ? oldHeight - 1 : oldHeight, alignCorners && newWidth > 1 ? oldWidth - 1 : oldWidth];\n      const effectiveOutSize = [alignCorners && newHeight > 1 ? newHeight - 1 : newHeight, alignCorners && newWidth > 1 ? newWidth - 1 : newWidth];\n      // When align corners is false, we rounds the value with floor.\n      const roundBase = alignCorners ? '0.5' : '0.0';\n      let sourceFracIndexRC;\n      if (halfPixelCenters) {\n        sourceFracIndexRC = `max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC` + `, vec2(0.0))`;\n      } else {\n        sourceFracIndexRC = `vec2(yRC) * effectiveInputOverOutputRatioRC`;\n      }\n      this.userCode = `\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${effectiveInSize[0] / effectiveOutSize[0]},\n          ${effectiveInSize[1] / effectiveOutSize[1]});\n      const vec2 inputShapeRC = vec2(${oldHeight}.0, ${oldWidth}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${sourceFracIndexRC};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${roundBase})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `;\n    }\n  }\n});","lineCount":70,"map":[[7,2,17,0,"Object"],[7,8,17,0],[7,9,17,0,"defineProperty"],[7,23,17,0],[7,24,17,0,"exports"],[7,31,17,0],[8,4,17,0,"enumerable"],[8,14,17,0],[9,4,17,0,"get"],[9,7,17,0],[9,18,17,0,"get"],[9,19,17,0],[10,6,17,0],[10,13,17,0,"ResizeNearestNeighborProgram"],[10,41,17,0],[11,4,17,0],[12,2,17,0],[13,2,1,0],[14,0,2,0],[15,0,3,0],[16,0,4,0],[17,0,5,0],[18,0,6,0],[19,0,7,0],[20,0,8,0],[21,0,9,0],[22,0,10,0],[23,0,11,0],[24,0,12,0],[25,0,13,0],[26,0,14,0],[27,0,15,0],[28,0,16,0],[29,2,17,7],[29,8,17,13,"ResizeNearestNeighborProgram"],[29,36,17,41],[29,37,17,42],[30,4,18,4,"constructor"],[30,15,18,15,"constructor"],[30,16,18,16,"inputShape"],[30,26,18,26],[30,28,18,28,"newHeight"],[30,37,18,37],[30,39,18,39,"newWidth"],[30,47,18,47],[30,49,18,49,"alignCorners"],[30,61,18,61],[30,63,18,63,"halfPixelCenters"],[30,79,18,79],[30,81,18,81],[31,6,19,8],[31,10,19,12],[31,11,19,13,"variableNames"],[31,24,19,26],[31,27,19,29],[31,28,19,30],[31,31,19,33],[31,32,19,34],[32,6,20,8],[32,10,20,12],[32,11,20,13,"outputShape"],[32,22,20,24],[32,25,20,27],[32,27,20,29],[33,6,21,8],[33,12,21,14],[33,13,21,15,"batch"],[33,18,21,20],[33,20,21,22,"oldHeight"],[33,29,21,31],[33,31,21,33,"oldWidth"],[33,39,21,41],[33,41,21,43,"depth"],[33,46,21,48],[33,47,21,49],[33,50,21,52,"inputShape"],[33,60,21,62],[34,6,22,8],[34,10,22,12],[34,11,22,13,"outputShape"],[34,22,22,24],[34,25,22,27],[34,26,22,28,"batch"],[34,31,22,33],[34,33,22,35,"newHeight"],[34,42,22,44],[34,44,22,46,"newWidth"],[34,52,22,54],[34,54,22,56,"depth"],[34,59,22,61],[34,60,22,62],[35,6,23,8],[35,12,23,14,"effectiveInSize"],[35,27,23,29],[35,30,23,32],[35,31,24,13,"alignCorners"],[35,43,24,25],[35,47,24,29,"newHeight"],[35,56,24,38],[35,59,24,41],[35,60,24,42],[35,63,24,46,"oldHeight"],[35,72,24,55],[35,75,24,58],[35,76,24,59],[35,79,24,62,"oldHeight"],[35,88,24,71],[35,90,25,13,"alignCorners"],[35,102,25,25],[35,106,25,29,"newWidth"],[35,114,25,37],[35,117,25,40],[35,118,25,41],[35,121,25,45,"oldWidth"],[35,129,25,53],[35,132,25,56],[35,133,25,57],[35,136,25,60,"oldWidth"],[35,144,25,68],[35,145,26,9],[36,6,27,8],[36,12,27,14,"effectiveOutSize"],[36,28,27,30],[36,31,27,33],[36,32,28,13,"alignCorners"],[36,44,28,25],[36,48,28,29,"newHeight"],[36,57,28,38],[36,60,28,41],[36,61,28,42],[36,64,28,46,"newHeight"],[36,73,28,55],[36,76,28,58],[36,77,28,59],[36,80,28,62,"newHeight"],[36,89,28,71],[36,91,29,13,"alignCorners"],[36,103,29,25],[36,107,29,29,"newWidth"],[36,115,29,37],[36,118,29,40],[36,119,29,41],[36,122,29,45,"newWidth"],[36,130,29,53],[36,133,29,56],[36,134,29,57],[36,137,29,60,"newWidth"],[36,145,29,68],[36,146,30,9],[37,6,31,8],[38,6,32,8],[38,12,32,14,"roundBase"],[38,21,32,23],[38,24,32,26,"alignCorners"],[38,36,32,38],[38,39,32,41],[38,44,32,46],[38,47,32,49],[38,52,32,54],[39,6,33,8],[39,10,33,12,"sourceFracIndexRC"],[39,27,33,29],[40,6,34,8],[40,10,34,12,"halfPixelCenters"],[40,26,34,28],[40,28,34,30],[41,8,35,12,"sourceFracIndexRC"],[41,25,35,29],[41,28,36,16],[41,91,36,79],[41,94,37,20],[41,108,37,34],[42,6,38,8],[42,7,38,9],[42,13,39,13],[43,8,40,12,"sourceFracIndexRC"],[43,25,40,29],[43,28,40,32],[43,73,40,77],[44,6,41,8],[45,6,42,8],[45,10,42,12],[45,11,42,13,"userCode"],[45,19,42,21],[45,22,42,24],[46,0,43,0],[47,0,44,0],[47,12,44,12,"effectiveInSize"],[47,27,44,27],[47,28,44,28],[47,29,44,29],[47,30,44,30],[47,33,44,33,"effectiveOutSize"],[47,49,44,49],[47,50,44,50],[47,51,44,51],[47,52,44,52],[48,0,45,0],[48,12,45,12,"effectiveInSize"],[48,27,45,27],[48,28,45,28],[48,29,45,29],[48,30,45,30],[48,33,45,33,"effectiveOutSize"],[48,49,45,49],[48,50,45,50],[48,51,45,51],[48,52,45,52],[49,0,46,0],[49,39,46,39,"oldHeight"],[49,48,46,48],[49,55,46,55,"oldWidth"],[49,63,46,63],[50,0,47,0],[51,0,48,0],[52,0,49,0],[53,0,50,0],[54,0,51,0],[55,0,52,0],[56,0,53,0],[57,0,54,0],[58,0,55,0],[58,35,55,35,"sourceFracIndexRC"],[58,52,55,52],[59,0,56,0],[60,0,57,0],[61,0,58,0],[62,0,59,0],[62,62,59,62,"roundBase"],[62,71,59,71],[63,0,60,0],[64,0,61,0],[65,0,62,0],[66,0,63,0],[67,0,64,0],[67,5,64,5],[68,4,65,4],[69,2,66,0],[70,0,66,1],[70,3]],"functionMap":{"names":["<global>","ResizeNearestNeighborProgram","ResizeNearestNeighborProgram#constructor"],"mappings":"AAA;OCgB;ICC;KD+C;CDC"},"hasCjsExports":false},"type":"js/module"}]}