{"dependencies":[{"name":"../flags","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":18,"index":721}}],"key":"hawNNux77JV91bDokUTs9kT5E+w=","exportNames":["*"],"imports":1}},{"name":"../environment","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":722},"end":{"line":18,"column":37,"index":759}}],"key":"323TQX5NUoddX6O9m11KmxLlAqE=","exportNames":["*"],"imports":1}},{"name":"../io/indexed_db","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":760},"end":{"line":19,"column":77,"index":837}}],"key":"BkIKbwkIVgr9BHb2LBwlW1RQgM0=","exportNames":["*"],"imports":1}},{"name":"../io/local_storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":838},"end":{"line":20,"column":86,"index":924}}],"key":"4g8hPN1ekfDYvWvOhwSFbBZlpW4=","exportNames":["*"],"imports":1}},{"name":"../io/model_management","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":925},"end":{"line":21,"column":67,"index":992}}],"key":"51YWuopA33dOa2Szz+k+7KXwfz0=","exportNames":["*"],"imports":1}},{"name":"./is_typed_array_browser","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":22,"column":0,"index":993},"end":{"line":22,"column":63,"index":1056}}],"key":"oAJ8faQyAA8xbAfDkLN5SeZjckg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"PlatformBrowser\", {\n    enumerable: true,\n    get: function () {\n      return PlatformBrowser;\n    }\n  });\n  require(_dependencyMap[0], \"../flags\");\n  var _environment = require(_dependencyMap[1], \"../environment\");\n  var _ioIndexed_db = require(_dependencyMap[2], \"../io/indexed_db\");\n  var _ioLocal_storage = require(_dependencyMap[3], \"../io/local_storage\");\n  var _ioModel_management = require(_dependencyMap[4], \"../io/model_management\");\n  var _is_typed_array_browser = require(_dependencyMap[5], \"./is_typed_array_browser\");\n  /**\n   * @license\n   * Copyright 2019 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  class PlatformBrowser {\n    constructor() {\n      // For setTimeoutCustom\n      this.messageName = 'setTimeoutCustom';\n      this.functionRefs = [];\n      this.handledMessageCount = 0;\n      this.hasEventListener = false;\n    }\n    fetch(path, init) {\n      return fetch(path, init);\n    }\n    now() {\n      return performance.now();\n    }\n    encode(text, encoding) {\n      if (encoding !== 'utf-8' && encoding !== 'utf8') {\n        throw new Error(`Browser's encoder only supports utf-8, but got ${encoding}`);\n      }\n      if (this.textEncoder == null) {\n        this.textEncoder = new TextEncoder();\n      }\n      return this.textEncoder.encode(text);\n    }\n    decode(bytes, encoding) {\n      return new TextDecoder(encoding).decode(bytes);\n    }\n    // If the setTimeout nesting level is greater than 5 and timeout is less\n    // than 4ms, timeout will be clamped to 4ms, which hurts the perf.\n    // Interleaving window.postMessage and setTimeout will trick the browser and\n    // avoid the clamp.\n    setTimeoutCustom(functionRef, delay) {\n      if (typeof window === 'undefined' || !(0, _environment.env)().getBool('USE_SETTIMEOUTCUSTOM')) {\n        setTimeout(functionRef, delay);\n        return;\n      }\n      this.functionRefs.push(functionRef);\n      setTimeout(() => {\n        window.postMessage({\n          name: this.messageName,\n          index: this.functionRefs.length - 1\n        }, '*');\n      }, delay);\n      if (!this.hasEventListener) {\n        this.hasEventListener = true;\n        window.addEventListener('message', event => {\n          if (event.source === window && event.data.name === this.messageName) {\n            event.stopPropagation();\n            const functionRef = this.functionRefs[event.data.index];\n            functionRef();\n            this.handledMessageCount++;\n            if (this.handledMessageCount === this.functionRefs.length) {\n              this.functionRefs = [];\n              this.handledMessageCount = 0;\n            }\n          }\n        }, true);\n      }\n    }\n    isTypedArray(a) {\n      return (0, _is_typed_array_browser.isTypedArrayBrowser)(a);\n    }\n  }\n  if ((0, _environment.env)().get('IS_BROWSER')) {\n    (0, _environment.env)().setPlatform('browser', new PlatformBrowser());\n    // Register LocalStorage IOHandler\n    try {\n      _ioModel_management.ModelStoreManagerRegistry.registerManager(_ioLocal_storage.BrowserLocalStorage.URL_SCHEME, new _ioLocal_storage.BrowserLocalStorageManager());\n    } catch (err) {}\n    // Register IndexedDB IOHandler\n    try {\n      _ioModel_management.ModelStoreManagerRegistry.registerManager(_ioIndexed_db.BrowserIndexedDB.URL_SCHEME, new _ioIndexed_db.BrowserIndexedDBManager());\n    } catch (err) {}\n  }\n});","lineCount":109,"map":[[7,2,23,0,"Object"],[7,8,23,0],[7,9,23,0,"defineProperty"],[7,23,23,0],[7,24,23,0,"exports"],[7,31,23,0],[8,4,23,0,"enumerable"],[8,14,23,0],[9,4,23,0,"get"],[9,7,23,0],[9,18,23,0,"get"],[9,19,23,0],[10,6,23,0],[10,13,23,0,"PlatformBrowser"],[10,28,23,0],[11,4,23,0],[12,2,23,0],[13,2,17,0,"require"],[13,9,17,0],[13,10,17,0,"_dependencyMap"],[13,24,17,0],[14,2,18,0],[14,6,18,0,"_environment"],[14,18,18,0],[14,21,18,0,"require"],[14,28,18,0],[14,29,18,0,"_dependencyMap"],[14,43,18,0],[15,2,19,0],[15,6,19,0,"_ioIndexed_db"],[15,19,19,0],[15,22,19,0,"require"],[15,29,19,0],[15,30,19,0,"_dependencyMap"],[15,44,19,0],[16,2,20,0],[16,6,20,0,"_ioLocal_storage"],[16,22,20,0],[16,25,20,0,"require"],[16,32,20,0],[16,33,20,0,"_dependencyMap"],[16,47,20,0],[17,2,21,0],[17,6,21,0,"_ioModel_management"],[17,25,21,0],[17,28,21,0,"require"],[17,35,21,0],[17,36,21,0,"_dependencyMap"],[17,50,21,0],[18,2,22,0],[18,6,22,0,"_is_typed_array_browser"],[18,29,22,0],[18,32,22,0,"require"],[18,39,22,0],[18,40,22,0,"_dependencyMap"],[18,54,22,0],[19,2,1,0],[20,0,2,0],[21,0,3,0],[22,0,4,0],[23,0,5,0],[24,0,6,0],[25,0,7,0],[26,0,8,0],[27,0,9,0],[28,0,10,0],[29,0,11,0],[30,0,12,0],[31,0,13,0],[32,0,14,0],[33,0,15,0],[34,0,16,0],[36,2,23,7],[36,8,23,13,"PlatformBrowser"],[36,23,23,28],[36,24,23,29],[37,4,24,4,"constructor"],[37,15,24,15,"constructor"],[37,16,24,15],[37,18,24,18],[38,6,25,8],[39,6,26,8],[39,10,26,12],[39,11,26,13,"messageName"],[39,22,26,24],[39,25,26,27],[39,43,26,45],[40,6,27,8],[40,10,27,12],[40,11,27,13,"functionRefs"],[40,23,27,25],[40,26,27,28],[40,28,27,30],[41,6,28,8],[41,10,28,12],[41,11,28,13,"handledMessageCount"],[41,30,28,32],[41,33,28,35],[41,34,28,36],[42,6,29,8],[42,10,29,12],[42,11,29,13,"hasEventListener"],[42,27,29,29],[42,30,29,32],[42,35,29,37],[43,4,30,4],[44,4,31,4,"fetch"],[44,9,31,9,"fetch"],[44,10,31,10,"path"],[44,14,31,14],[44,16,31,16,"init"],[44,20,31,20],[44,22,31,22],[45,6,32,8],[45,13,32,15,"fetch"],[45,18,32,20],[45,19,32,21,"path"],[45,23,32,25],[45,25,32,27,"init"],[45,29,32,31],[45,30,32,32],[46,4,33,4],[47,4,34,4,"now"],[47,7,34,7,"now"],[47,8,34,7],[47,10,34,10],[48,6,35,8],[48,13,35,15,"performance"],[48,24,35,26],[48,25,35,27,"now"],[48,28,35,30],[48,29,35,31],[48,30,35,32],[49,4,36,4],[50,4,37,4,"encode"],[50,10,37,10,"encode"],[50,11,37,11,"text"],[50,15,37,15],[50,17,37,17,"encoding"],[50,25,37,25],[50,27,37,27],[51,6,38,8],[51,10,38,12,"encoding"],[51,18,38,20],[51,23,38,25],[51,30,38,32],[51,34,38,36,"encoding"],[51,42,38,44],[51,47,38,49],[51,53,38,55],[51,55,38,57],[52,8,39,12],[52,14,39,18],[52,18,39,22,"Error"],[52,23,39,27],[52,24,39,28],[52,74,39,78,"encoding"],[52,82,39,86],[52,84,39,88],[52,85,39,89],[53,6,40,8],[54,6,41,8],[54,10,41,12],[54,14,41,16],[54,15,41,17,"textEncoder"],[54,26,41,28],[54,30,41,32],[54,34,41,36],[54,36,41,38],[55,8,42,12],[55,12,42,16],[55,13,42,17,"textEncoder"],[55,24,42,28],[55,27,42,31],[55,31,42,35,"TextEncoder"],[55,42,42,46],[55,43,42,47],[55,44,42,48],[56,6,43,8],[57,6,44,8],[57,13,44,15],[57,17,44,19],[57,18,44,20,"textEncoder"],[57,29,44,31],[57,30,44,32,"encode"],[57,36,44,38],[57,37,44,39,"text"],[57,41,44,43],[57,42,44,44],[58,4,45,4],[59,4,46,4,"decode"],[59,10,46,10,"decode"],[59,11,46,11,"bytes"],[59,16,46,16],[59,18,46,18,"encoding"],[59,26,46,26],[59,28,46,28],[60,6,47,8],[60,13,47,15],[60,17,47,19,"TextDecoder"],[60,28,47,30],[60,29,47,31,"encoding"],[60,37,47,39],[60,38,47,40],[60,39,47,41,"decode"],[60,45,47,47],[60,46,47,48,"bytes"],[60,51,47,53],[60,52,47,54],[61,4,48,4],[62,4,49,4],[63,4,50,4],[64,4,51,4],[65,4,52,4],[66,4,53,4,"setTimeoutCustom"],[66,20,53,20,"setTimeoutCustom"],[66,21,53,21,"functionRef"],[66,32,53,32],[66,34,53,34,"delay"],[66,39,53,39],[66,41,53,41],[67,6,54,8],[67,10,54,12],[67,17,54,19,"window"],[67,23,54,25],[67,28,54,30],[67,39,54,41],[67,43,55,12],[67,44,55,13],[67,48,55,13,"env"],[67,60,55,16],[67,61,55,16,"env"],[67,64,55,16],[67,66,55,17],[67,67,55,18],[67,68,55,19,"getBool"],[67,75,55,26],[67,76,55,27],[67,98,55,49],[67,99,55,50],[67,101,55,52],[68,8,56,12,"setTimeout"],[68,18,56,22],[68,19,56,23,"functionRef"],[68,30,56,34],[68,32,56,36,"delay"],[68,37,56,41],[68,38,56,42],[69,8,57,12],[70,6,58,8],[71,6,59,8],[71,10,59,12],[71,11,59,13,"functionRefs"],[71,23,59,25],[71,24,59,26,"push"],[71,28,59,30],[71,29,59,31,"functionRef"],[71,40,59,42],[71,41,59,43],[72,6,60,8,"setTimeout"],[72,16,60,18],[72,17,60,19],[72,23,60,25],[73,8,61,12,"window"],[73,14,61,18],[73,15,61,19,"postMessage"],[73,26,61,30],[73,27,61,31],[74,10,61,33,"name"],[74,14,61,37],[74,16,61,39],[74,20,61,43],[74,21,61,44,"messageName"],[74,32,61,55],[75,10,61,57,"index"],[75,15,61,62],[75,17,61,64],[75,21,61,68],[75,22,61,69,"functionRefs"],[75,34,61,81],[75,35,61,82,"length"],[75,41,61,88],[75,44,61,91],[76,8,61,93],[76,9,61,94],[76,11,61,96],[76,14,61,99],[76,15,61,100],[77,6,62,8],[77,7,62,9],[77,9,62,11,"delay"],[77,14,62,16],[77,15,62,17],[78,6,63,8],[78,10,63,12],[78,11,63,13],[78,15,63,17],[78,16,63,18,"hasEventListener"],[78,32,63,34],[78,34,63,36],[79,8,64,12],[79,12,64,16],[79,13,64,17,"hasEventListener"],[79,29,64,33],[79,32,64,36],[79,36,64,40],[80,8,65,12,"window"],[80,14,65,18],[80,15,65,19,"addEventListener"],[80,31,65,35],[80,32,65,36],[80,41,65,45],[80,43,65,48,"event"],[80,48,65,53],[80,52,65,58],[81,10,66,16],[81,14,66,20,"event"],[81,19,66,25],[81,20,66,26,"source"],[81,26,66,32],[81,31,66,37,"window"],[81,37,66,43],[81,41,66,47,"event"],[81,46,66,52],[81,47,66,53,"data"],[81,51,66,57],[81,52,66,58,"name"],[81,56,66,62],[81,61,66,67],[81,65,66,71],[81,66,66,72,"messageName"],[81,77,66,83],[81,79,66,85],[82,12,67,20,"event"],[82,17,67,25],[82,18,67,26,"stopPropagation"],[82,33,67,41],[82,34,67,42],[82,35,67,43],[83,12,68,20],[83,18,68,26,"functionRef"],[83,29,68,37],[83,32,68,40],[83,36,68,44],[83,37,68,45,"functionRefs"],[83,49,68,57],[83,50,68,58,"event"],[83,55,68,63],[83,56,68,64,"data"],[83,60,68,68],[83,61,68,69,"index"],[83,66,68,74],[83,67,68,75],[84,12,69,20,"functionRef"],[84,23,69,31],[84,24,69,32],[84,25,69,33],[85,12,70,20],[85,16,70,24],[85,17,70,25,"handledMessageCount"],[85,36,70,44],[85,38,70,46],[86,12,71,20],[86,16,71,24],[86,20,71,28],[86,21,71,29,"handledMessageCount"],[86,40,71,48],[86,45,71,53],[86,49,71,57],[86,50,71,58,"functionRefs"],[86,62,71,70],[86,63,71,71,"length"],[86,69,71,77],[86,71,71,79],[87,14,72,24],[87,18,72,28],[87,19,72,29,"functionRefs"],[87,31,72,41],[87,34,72,44],[87,36,72,46],[88,14,73,24],[88,18,73,28],[88,19,73,29,"handledMessageCount"],[88,38,73,48],[88,41,73,51],[88,42,73,52],[89,12,74,20],[90,10,75,16],[91,8,76,12],[91,9,76,13],[91,11,76,15],[91,15,76,19],[91,16,76,20],[92,6,77,8],[93,4,78,4],[94,4,79,4,"isTypedArray"],[94,16,79,16,"isTypedArray"],[94,17,79,17,"a"],[94,18,79,18],[94,20,79,20],[95,6,80,8],[95,13,80,15],[95,17,80,15,"isTypedArrayBrowser"],[95,40,80,34],[95,41,80,34,"isTypedArrayBrowser"],[95,60,80,34],[95,62,80,35,"a"],[95,63,80,36],[95,64,80,37],[96,4,81,4],[97,2,82,0],[98,2,83,0],[98,6,83,4],[98,10,83,4,"env"],[98,22,83,7],[98,23,83,7,"env"],[98,26,83,7],[98,28,83,8],[98,29,83,9],[98,30,83,10,"get"],[98,33,83,13],[98,34,83,14],[98,46,83,26],[98,47,83,27],[98,49,83,29],[99,4,84,4],[99,8,84,4,"env"],[99,20,84,7],[99,21,84,7,"env"],[99,24,84,7],[99,26,84,8],[99,27,84,9],[99,28,84,10,"setPlatform"],[99,39,84,21],[99,40,84,22],[99,49,84,31],[99,51,84,33],[99,55,84,37,"PlatformBrowser"],[99,70,84,52],[99,71,84,53],[99,72,84,54],[99,73,84,55],[100,4,85,4],[101,4,86,4],[101,8,86,8],[102,6,87,8,"ModelStoreManagerRegistry"],[102,25,87,33],[102,26,87,33,"ModelStoreManagerRegistry"],[102,51,87,33],[102,52,87,34,"registerManager"],[102,67,87,49],[102,68,87,50,"BrowserLocalStorage"],[102,84,87,69],[102,85,87,69,"BrowserLocalStorage"],[102,104,87,69],[102,105,87,70,"URL_SCHEME"],[102,115,87,80],[102,117,87,82],[102,121,87,86,"BrowserLocalStorageManager"],[102,137,87,112],[102,138,87,112,"BrowserLocalStorageManager"],[102,164,87,112],[102,165,87,113],[102,166,87,114],[102,167,87,115],[103,4,88,4],[103,5,88,5],[103,6,89,4],[103,13,89,11,"err"],[103,16,89,14],[103,18,89,16],[103,19,90,4],[104,4,91,4],[105,4,92,4],[105,8,92,8],[106,6,93,8,"ModelStoreManagerRegistry"],[106,25,93,33],[106,26,93,33,"ModelStoreManagerRegistry"],[106,51,93,33],[106,52,93,34,"registerManager"],[106,67,93,49],[106,68,93,50,"BrowserIndexedDB"],[106,81,93,66],[106,82,93,66,"BrowserIndexedDB"],[106,98,93,66],[106,99,93,67,"URL_SCHEME"],[106,109,93,77],[106,111,93,79],[106,115,93,83,"BrowserIndexedDBManager"],[106,128,93,106],[106,129,93,106,"BrowserIndexedDBManager"],[106,152,93,106],[106,153,93,107],[106,154,93,108],[106,155,93,109],[107,4,94,4],[107,5,94,5],[107,6,95,4],[107,13,95,11,"err"],[107,16,95,14],[107,18,95,16],[107,19,96,4],[108,2,97,0],[109,0,97,1],[109,3]],"functionMap":{"names":["<global>","PlatformBrowser","PlatformBrowser#constructor","PlatformBrowser#fetch","PlatformBrowser#now","PlatformBrowser#encode","PlatformBrowser#decode","PlatformBrowser#setTimeoutCustom","setTimeout$argument_0","window.addEventListener$argument_1","PlatformBrowser#isTypedArray"],"mappings":"AAA;OCsB;ICC;KDM;IEC;KFE;IGC;KHE;IIC;KJQ;IKC;KLE;IMK;mBCO;SDE;+CEG;aFW;KNE;ISC;KTE;CDC"},"hasCjsExports":false},"type":"js/module"}]}