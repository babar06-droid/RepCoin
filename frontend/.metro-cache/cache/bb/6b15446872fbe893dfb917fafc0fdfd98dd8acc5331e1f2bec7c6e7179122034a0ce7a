{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":44,"index":747}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.getGlslDifferences = getGlslDifferences;\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  /**\n   * @license\n   * Copyright 2018 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  function getGlslDifferences() {\n    let version;\n    let attribute;\n    let varyingVs;\n    let varyingFs;\n    let texture2D;\n    let output;\n    let defineOutput;\n    let defineSpecialNaN;\n    let defineSpecialInf;\n    let defineRound;\n    if ((0, _tensorflowTfjsCore.env)().getNumber('WEBGL_VERSION') === 2) {\n      version = '#version 300 es';\n      attribute = 'in';\n      varyingVs = 'out';\n      varyingFs = 'in';\n      texture2D = 'texture';\n      output = 'outputColor';\n      defineOutput = 'out vec4 outputColor;';\n      // Use custom isnan definition to work across differences between\n      // implementations on various platforms. While this should happen in ANGLE\n      // we still see differences between android and windows (on chrome) when\n      // using isnan directly. Since WebGL2 supports uint type and\n      // floatBitsToUinT built-in function, we could implment isnan following\n      // IEEE 754 rules.\n      // NaN defination in IEEE 754-1985 is :\n      //   - sign = either 0 or 1.\n      //   - biased exponent = all 1 bits.\n      //   - fraction = anything except all 0 bits (since all 0 bits represents\n      //   infinity).\n      // https://en.wikipedia.org/wiki/IEEE_754-1985#Representation_of_non-numbers\n      defineSpecialNaN = (0, _tensorflowTfjsCore.env)().getBool('WEBGL2_ISNAN_CUSTOM') ? `\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ` : '';\n      // In webgl 2 we do not need to specify a custom isinf so there is no\n      // need for a special INFINITY constant.\n      defineSpecialInf = ``;\n      defineRound = `\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    `;\n    } else {\n      version = '';\n      attribute = 'attribute';\n      varyingVs = 'varying';\n      varyingFs = 'varying';\n      texture2D = 'texture2D';\n      output = 'gl_FragColor';\n      defineOutput = '';\n      // WebGL1 has no built in isnan so we define one here.\n      defineSpecialNaN = `\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    `;\n      defineSpecialInf = `\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    `;\n      defineRound = `\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    `;\n    }\n    return {\n      version,\n      attribute,\n      varyingVs,\n      varyingFs,\n      texture2D,\n      output,\n      defineOutput,\n      defineSpecialNaN,\n      defineSpecialInf,\n      defineRound\n    };\n  }\n});","lineCount":134,"map":[[7,2,18,0,"exports"],[7,9,18,0],[7,10,18,0,"getGlslDifferences"],[7,28,18,0],[7,31,18,0,"getGlslDifferences"],[7,49,18,0],[8,2,17,0],[8,6,17,0,"_tensorflowTfjsCore"],[8,25,17,0],[8,28,17,0,"require"],[8,35,17,0],[8,36,17,0,"_dependencyMap"],[8,50,17,0],[9,2,1,0],[10,0,2,0],[11,0,3,0],[12,0,4,0],[13,0,5,0],[14,0,6,0],[15,0,7,0],[16,0,8,0],[17,0,9,0],[18,0,10,0],[19,0,11,0],[20,0,12,0],[21,0,13,0],[22,0,14,0],[23,0,15,0],[24,0,16,0],[26,2,18,7],[26,11,18,16,"getGlslDifferences"],[26,29,18,34,"getGlslDifferences"],[26,30,18,34],[26,32,18,37],[27,4,19,4],[27,8,19,8,"version"],[27,15,19,15],[28,4,20,4],[28,8,20,8,"attribute"],[28,17,20,17],[29,4,21,4],[29,8,21,8,"varyingVs"],[29,17,21,17],[30,4,22,4],[30,8,22,8,"varyingFs"],[30,17,22,17],[31,4,23,4],[31,8,23,8,"texture2D"],[31,17,23,17],[32,4,24,4],[32,8,24,8,"output"],[32,14,24,14],[33,4,25,4],[33,8,25,8,"defineOutput"],[33,20,25,20],[34,4,26,4],[34,8,26,8,"defineSpecialNaN"],[34,24,26,24],[35,4,27,4],[35,8,27,8,"defineSpecialInf"],[35,24,27,24],[36,4,28,4],[36,8,28,8,"defineRound"],[36,19,28,19],[37,4,29,4],[37,8,29,8],[37,12,29,8,"env"],[37,31,29,11],[37,32,29,11,"env"],[37,35,29,11],[37,37,29,12],[37,38,29,13],[37,39,29,14,"getNumber"],[37,48,29,23],[37,49,29,24],[37,64,29,39],[37,65,29,40],[37,70,29,45],[37,71,29,46],[37,73,29,48],[38,6,30,8,"version"],[38,13,30,15],[38,16,30,18],[38,33,30,35],[39,6,31,8,"attribute"],[39,15,31,17],[39,18,31,20],[39,22,31,24],[40,6,32,8,"varyingVs"],[40,15,32,17],[40,18,32,20],[40,23,32,25],[41,6,33,8,"varyingFs"],[41,15,33,17],[41,18,33,20],[41,22,33,24],[42,6,34,8,"texture2D"],[42,15,34,17],[42,18,34,20],[42,27,34,29],[43,6,35,8,"output"],[43,12,35,14],[43,15,35,17],[43,28,35,30],[44,6,36,8,"defineOutput"],[44,18,36,20],[44,21,36,23],[44,44,36,46],[45,6,37,8],[46,6,38,8],[47,6,39,8],[48,6,40,8],[49,6,41,8],[50,6,42,8],[51,6,43,8],[52,6,44,8],[53,6,45,8],[54,6,46,8],[55,6,47,8],[56,6,48,8],[57,6,49,8,"defineSpecialNaN"],[57,22,49,24],[57,25,49,27],[57,29,49,27,"env"],[57,48,49,30],[57,49,49,30,"env"],[57,52,49,30],[57,54,49,31],[57,55,49,32],[57,56,49,33,"getBool"],[57,63,49,40],[57,64,49,41],[57,85,49,62],[57,86,49,63],[57,89,49,66],[58,0,50,0],[59,0,51,0],[60,0,52,0],[61,0,53,0],[62,0,54,0],[63,0,55,0],[64,0,56,0],[65,0,57,0],[66,0,58,0],[67,0,59,0],[68,0,60,0],[69,0,61,0],[69,5,61,5],[69,8,62,12],[69,10,62,14],[70,6,63,8],[71,6,64,8],[72,6,65,8,"defineSpecialInf"],[72,22,65,24],[72,25,65,27],[72,27,65,29],[73,6,66,8,"defineRound"],[73,17,66,19],[73,20,66,22],[74,0,67,0],[75,0,68,0],[76,0,69,0],[77,0,70,0],[78,0,71,0],[79,0,72,0],[80,0,73,0],[81,0,74,0],[82,0,75,0],[82,5,75,5],[83,4,76,4],[83,5,76,5],[83,11,77,9],[84,6,78,8,"version"],[84,13,78,15],[84,16,78,18],[84,18,78,20],[85,6,79,8,"attribute"],[85,15,79,17],[85,18,79,20],[85,29,79,31],[86,6,80,8,"varyingVs"],[86,15,80,17],[86,18,80,20],[86,27,80,29],[87,6,81,8,"varyingFs"],[87,15,81,17],[87,18,81,20],[87,27,81,29],[88,6,82,8,"texture2D"],[88,15,82,17],[88,18,82,20],[88,29,82,31],[89,6,83,8,"output"],[89,12,83,14],[89,15,83,17],[89,29,83,31],[90,6,84,8,"defineOutput"],[90,18,84,20],[90,21,84,23],[90,23,84,25],[91,6,85,8],[92,6,86,8,"defineSpecialNaN"],[92,22,86,24],[92,25,86,27],[93,0,87,0],[94,0,88,0],[95,0,89,0],[96,0,90,0],[97,0,91,0],[98,0,92,0],[99,0,93,0],[100,0,94,0],[100,5,94,5],[101,6,95,8,"defineSpecialInf"],[101,22,95,24],[101,25,95,27],[102,0,96,0],[103,0,97,0],[104,0,98,0],[105,0,99,0],[106,0,100,0],[107,0,101,0],[108,0,102,0],[109,0,103,0],[110,0,104,0],[110,5,104,5],[111,6,105,8,"defineRound"],[111,17,105,19],[111,20,105,22],[112,0,106,0],[113,0,107,0],[114,0,108,0],[115,0,109,0],[116,0,110,0],[117,0,111,0],[118,0,112,0],[119,0,113,0],[119,5,113,5],[120,4,114,4],[121,4,115,4],[121,11,115,11],[122,6,116,8,"version"],[122,13,116,15],[123,6,117,8,"attribute"],[123,15,117,17],[124,6,118,8,"varyingVs"],[124,15,118,17],[125,6,119,8,"varyingFs"],[125,15,119,17],[126,6,120,8,"texture2D"],[126,15,120,17],[127,6,121,8,"output"],[127,12,121,14],[128,6,122,8,"defineOutput"],[128,18,122,20],[129,6,123,8,"defineSpecialNaN"],[129,22,123,24],[130,6,124,8,"defineSpecialInf"],[130,22,124,24],[131,6,125,8,"defineRound"],[132,4,126,4],[132,5,126,5],[133,2,127,0],[134,0,127,1],[134,3]],"functionMap":{"names":["<global>","getGlslDifferences"],"mappings":"AAA;OCiB;CD6G"},"hasCjsExports":false},"type":"js/module"}]}