{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":51,"index":754}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}},{"name":"../diag_gpu","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":755},"end":{"line":18,"column":42,"index":797}}],"key":"PynXcJGxCIIhhlUIYA3RBEXi6tY=","exportNames":["*"],"imports":1}},{"name":"./Reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":798},"end":{"line":19,"column":36,"index":834}}],"key":"EUWK+oKi/AwokPOQ1jng5DYfQSc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.diag = diag;\n  Object.defineProperty(exports, \"diagConfig\", {\n    enumerable: true,\n    get: function () {\n      return diagConfig;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  var _diag_gpu = require(_dependencyMap[1], \"../diag_gpu\");\n  var _Reshape = require(_dependencyMap[2], \"./Reshape\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  function diag(args) {\n    const {\n      inputs,\n      backend\n    } = args;\n    const {\n      x\n    } = inputs;\n    const outShape = [...x.shape, ...x.shape];\n    const xSize = _tensorflowTfjsCore.util.sizeFromShape(x.shape);\n    const flat = (0, _Reshape.reshape)({\n      inputs: {\n        x\n      },\n      backend,\n      attrs: {\n        shape: [xSize]\n      }\n    });\n    const program = new _diag_gpu.DiagProgram(xSize);\n    const res = backend.runWebGLProgram(program, [flat], flat.dtype);\n    const out = (0, _Reshape.reshape)({\n      inputs: {\n        x: res\n      },\n      backend,\n      attrs: {\n        shape: outShape\n      }\n    });\n    backend.disposeIntermediateTensorInfo(flat);\n    backend.disposeIntermediateTensorInfo(res);\n    return out;\n  }\n  const diagConfig = {\n    kernelName: _tensorflowTfjsCore.Diag,\n    backendName: 'webgl',\n    kernelFunc: diag\n  };\n});","lineCount":73,"map":[[7,2,20,0,"exports"],[7,9,20,0],[7,10,20,0,"diag"],[7,14,20,0],[7,17,20,0,"diag"],[7,21,20,0],[8,2,33,0,"Object"],[8,8,33,0],[8,9,33,0,"defineProperty"],[8,23,33,0],[8,24,33,0,"exports"],[8,31,33,0],[9,4,33,0,"enumerable"],[9,14,33,0],[10,4,33,0,"get"],[10,7,33,0],[10,18,33,0,"get"],[10,19,33,0],[11,6,33,0],[11,13,33,0,"diagConfig"],[11,23,33,0],[12,4,33,0],[13,2,33,0],[14,2,17,0],[14,6,17,0,"_tensorflowTfjsCore"],[14,25,17,0],[14,28,17,0,"require"],[14,35,17,0],[14,36,17,0,"_dependencyMap"],[14,50,17,0],[15,2,18,0],[15,6,18,0,"_diag_gpu"],[15,15,18,0],[15,18,18,0,"require"],[15,25,18,0],[15,26,18,0,"_dependencyMap"],[15,40,18,0],[16,2,19,0],[16,6,19,0,"_Reshape"],[16,14,19,0],[16,17,19,0,"require"],[16,24,19,0],[16,25,19,0,"_dependencyMap"],[16,39,19,0],[17,2,1,0],[18,0,2,0],[19,0,3,0],[20,0,4,0],[21,0,5,0],[22,0,6,0],[23,0,7,0],[24,0,8,0],[25,0,9,0],[26,0,10,0],[27,0,11,0],[28,0,12,0],[29,0,13,0],[30,0,14,0],[31,0,15,0],[32,0,16,0],[34,2,20,7],[34,11,20,16,"diag"],[34,15,20,20,"diag"],[34,16,20,21,"args"],[34,20,20,25],[34,22,20,27],[35,4,21,4],[35,10,21,10],[36,6,21,12,"inputs"],[36,12,21,18],[37,6,21,20,"backend"],[38,4,21,28],[38,5,21,29],[38,8,21,32,"args"],[38,12,21,36],[39,4,22,4],[39,10,22,10],[40,6,22,12,"x"],[41,4,22,14],[41,5,22,15],[41,8,22,18,"inputs"],[41,14,22,24],[42,4,23,4],[42,10,23,10,"outShape"],[42,18,23,18],[42,21,23,21],[42,22,23,22],[42,25,23,25,"x"],[42,26,23,26],[42,27,23,27,"shape"],[42,32,23,32],[42,34,23,34],[42,37,23,37,"x"],[42,38,23,38],[42,39,23,39,"shape"],[42,44,23,44],[42,45,23,45],[43,4,24,4],[43,10,24,10,"xSize"],[43,15,24,15],[43,18,24,18,"util"],[43,37,24,22],[43,38,24,22,"util"],[43,42,24,22],[43,43,24,23,"sizeFromShape"],[43,56,24,36],[43,57,24,37,"x"],[43,58,24,38],[43,59,24,39,"shape"],[43,64,24,44],[43,65,24,45],[44,4,25,4],[44,10,25,10,"flat"],[44,14,25,14],[44,17,25,17],[44,21,25,17,"reshape"],[44,29,25,24],[44,30,25,24,"reshape"],[44,37,25,24],[44,39,25,25],[45,6,25,27,"inputs"],[45,12,25,33],[45,14,25,35],[46,8,25,37,"x"],[47,6,25,39],[47,7,25,40],[48,6,25,42,"backend"],[48,13,25,49],[49,6,25,51,"attrs"],[49,11,25,56],[49,13,25,58],[50,8,25,60,"shape"],[50,13,25,65],[50,15,25,67],[50,16,25,68,"xSize"],[50,21,25,73],[51,6,25,75],[52,4,25,77],[52,5,25,78],[52,6,25,79],[53,4,26,4],[53,10,26,10,"program"],[53,17,26,17],[53,20,26,20],[53,24,26,24,"DiagProgram"],[53,33,26,35],[53,34,26,35,"DiagProgram"],[53,45,26,35],[53,46,26,36,"xSize"],[53,51,26,41],[53,52,26,42],[54,4,27,4],[54,10,27,10,"res"],[54,13,27,13],[54,16,27,16,"backend"],[54,23,27,23],[54,24,27,24,"runWebGLProgram"],[54,39,27,39],[54,40,27,40,"program"],[54,47,27,47],[54,49,27,49],[54,50,27,50,"flat"],[54,54,27,54],[54,55,27,55],[54,57,27,57,"flat"],[54,61,27,61],[54,62,27,62,"dtype"],[54,67,27,67],[54,68,27,68],[55,4,28,4],[55,10,28,10,"out"],[55,13,28,13],[55,16,28,16],[55,20,28,16,"reshape"],[55,28,28,23],[55,29,28,23,"reshape"],[55,36,28,23],[55,38,28,24],[56,6,28,26,"inputs"],[56,12,28,32],[56,14,28,34],[57,8,28,36,"x"],[57,9,28,37],[57,11,28,39,"res"],[58,6,28,43],[58,7,28,44],[59,6,28,46,"backend"],[59,13,28,53],[60,6,28,55,"attrs"],[60,11,28,60],[60,13,28,62],[61,8,28,64,"shape"],[61,13,28,69],[61,15,28,71,"outShape"],[62,6,28,80],[63,4,28,82],[63,5,28,83],[63,6,28,84],[64,4,29,4,"backend"],[64,11,29,11],[64,12,29,12,"disposeIntermediateTensorInfo"],[64,41,29,41],[64,42,29,42,"flat"],[64,46,29,46],[64,47,29,47],[65,4,30,4,"backend"],[65,11,30,11],[65,12,30,12,"disposeIntermediateTensorInfo"],[65,41,30,41],[65,42,30,42,"res"],[65,45,30,45],[65,46,30,46],[66,4,31,4],[66,11,31,11,"out"],[66,14,31,14],[67,2,32,0],[68,2,33,7],[68,8,33,13,"diagConfig"],[68,18,33,23],[68,21,33,26],[69,4,34,4,"kernelName"],[69,14,34,14],[69,16,34,16,"Diag"],[69,35,34,20],[69,36,34,20,"Diag"],[69,40,34,20],[70,4,35,4,"backendName"],[70,15,35,15],[70,17,35,17],[70,24,35,24],[71,4,36,4,"kernelFunc"],[71,14,36,14],[71,16,36,16,"diag"],[72,2,37,0],[72,3,37,1],[73,0,37,2],[73,3]],"functionMap":{"names":["<global>","diag"],"mappings":"AAA;OCmB;CDY"},"hasCjsExports":false},"type":"js/module"}]}