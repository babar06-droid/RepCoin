{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"MultinomialProgram\", {\n    enumerable: true,\n    get: function () {\n      return MultinomialProgram;\n    }\n  });\n  /**\n   * @license\n   * Copyright 2017 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n  class MultinomialProgram {\n    constructor(batchSize, numOutcomes, numSamples) {\n      this.variableNames = ['probs'];\n      this.customUniforms = [{\n        name: 'seed',\n        type: 'float'\n      }];\n      this.outputShape = [batchSize, numSamples];\n      this.userCode = `\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${numOutcomes - 1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${numOutcomes - 1}));\n      }\n    `;\n    }\n  }\n});","lineCount":60,"map":[[7,2,17,0,"Object"],[7,8,17,0],[7,9,17,0,"defineProperty"],[7,23,17,0],[7,24,17,0,"exports"],[7,31,17,0],[8,4,17,0,"enumerable"],[8,14,17,0],[9,4,17,0,"get"],[9,7,17,0],[9,18,17,0,"get"],[9,19,17,0],[10,6,17,0],[10,13,17,0,"MultinomialProgram"],[10,31,17,0],[11,4,17,0],[12,2,17,0],[13,2,1,0],[14,0,2,0],[15,0,3,0],[16,0,4,0],[17,0,5,0],[18,0,6,0],[19,0,7,0],[20,0,8,0],[21,0,9,0],[22,0,10,0],[23,0,11,0],[24,0,12,0],[25,0,13,0],[26,0,14,0],[27,0,15,0],[28,0,16,0],[29,2,17,7],[29,8,17,13,"MultinomialProgram"],[29,26,17,31],[29,27,17,32],[30,4,18,4,"constructor"],[30,15,18,15,"constructor"],[30,16,18,16,"batchSize"],[30,25,18,25],[30,27,18,27,"numOutcomes"],[30,38,18,38],[30,40,18,40,"numSamples"],[30,50,18,50],[30,52,18,52],[31,6,19,8],[31,10,19,12],[31,11,19,13,"variableNames"],[31,24,19,26],[31,27,19,29],[31,28,19,30],[31,35,19,37],[31,36,19,38],[32,6,20,8],[32,10,20,12],[32,11,20,13,"customUniforms"],[32,25,20,27],[32,28,20,30],[32,29,20,31],[33,8,20,33,"name"],[33,12,20,37],[33,14,20,39],[33,20,20,45],[34,8,20,47,"type"],[34,12,20,51],[34,14,20,53],[35,6,20,61],[35,7,20,62],[35,8,20,63],[36,6,21,8],[36,10,21,12],[36,11,21,13,"outputShape"],[36,22,21,24],[36,25,21,27],[36,26,21,28,"batchSize"],[36,35,21,37],[36,37,21,39,"numSamples"],[36,47,21,49],[36,48,21,50],[37,6,22,8],[37,10,22,12],[37,11,22,13,"userCode"],[37,19,22,21],[37,22,22,24],[38,0,23,0],[39,0,24,0],[40,0,25,0],[41,0,26,0],[42,0,27,0],[43,0,28,0],[44,0,29,0],[45,0,30,0],[45,30,30,30,"numOutcomes"],[45,41,30,41],[45,44,30,44],[45,45,30,45],[46,0,31,0],[47,0,32,0],[48,0,33,0],[49,0,34,0],[50,0,35,0],[51,0,36,0],[52,0,37,0],[53,0,38,0],[54,0,39,0],[55,0,40,0],[55,26,40,26,"numOutcomes"],[55,37,40,37],[55,40,40,40],[55,41,40,41],[56,0,41,0],[57,0,42,0],[57,5,42,5],[58,4,43,4],[59,2,44,0],[60,0,44,1],[60,3]],"functionMap":{"names":["<global>","MultinomialProgram","MultinomialProgram#constructor"],"mappings":"AAA;OCgB;ICC;KDyB;CDC"},"hasCjsExports":false},"type":"js/module"}]}