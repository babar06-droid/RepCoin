{"dependencies":[{"name":"./shader_compiler","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":54,"index":54}}],"key":"yVSKlvZSxQn3Ck2puzGVWEYPzq8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"GatherNDProgram\", {\n    enumerable: true,\n    get: function () {\n      return GatherNDProgram;\n    }\n  });\n  var _shader_compiler = require(_dependencyMap[0], \"./shader_compiler\");\n  class GatherNDProgram {\n    constructor(sliceDim, strides, shape, paramsShape) {\n      this.sliceDim = sliceDim;\n      this.strides = strides;\n      this.paramsShape = paramsShape;\n      this.variableNames = ['x', 'indices'];\n      this.outputShape = shape;\n      const dtype = (0, _shader_compiler.getCoordsDataType)(shape.length);\n      let mainLoop = `\n    int index;`;\n      for (let j = 0; j < this.sliceDim; j++) {\n        mainLoop += `\n          index = round(getIndices(coords[0], ${j}));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[j]};\n          flattenIndex += index * ${this.strides[j]};`;\n      }\n      this.userCode = `\n         void main() {\n          ${dtype} coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ${mainLoop}\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      `;\n    }\n  }\n});","lineCount":44,"map":[[7,2,2,0,"Object"],[7,8,2,0],[7,9,2,0,"defineProperty"],[7,23,2,0],[7,24,2,0,"exports"],[7,31,2,0],[8,4,2,0,"enumerable"],[8,14,2,0],[9,4,2,0,"get"],[9,7,2,0],[9,18,2,0,"get"],[9,19,2,0],[10,6,2,0],[10,13,2,0,"GatherNDProgram"],[10,28,2,0],[11,4,2,0],[12,2,2,0],[13,2,1,0],[13,6,1,0,"_shader_compiler"],[13,22,1,0],[13,25,1,0,"require"],[13,32,1,0],[13,33,1,0,"_dependencyMap"],[13,47,1,0],[14,2,2,7],[14,8,2,13,"GatherNDProgram"],[14,23,2,28],[14,24,2,29],[15,4,3,4,"constructor"],[15,15,3,15,"constructor"],[15,16,3,16,"sliceDim"],[15,24,3,24],[15,26,3,26,"strides"],[15,33,3,33],[15,35,3,35,"shape"],[15,40,3,40],[15,42,3,42,"paramsShape"],[15,53,3,53],[15,55,3,55],[16,6,4,8],[16,10,4,12],[16,11,4,13,"sliceDim"],[16,19,4,21],[16,22,4,24,"sliceDim"],[16,30,4,32],[17,6,5,8],[17,10,5,12],[17,11,5,13,"strides"],[17,18,5,20],[17,21,5,23,"strides"],[17,28,5,30],[18,6,6,8],[18,10,6,12],[18,11,6,13,"paramsShape"],[18,22,6,24],[18,25,6,27,"paramsShape"],[18,36,6,38],[19,6,7,8],[19,10,7,12],[19,11,7,13,"variableNames"],[19,24,7,26],[19,27,7,29],[19,28,7,30],[19,31,7,33],[19,33,7,35],[19,42,7,44],[19,43,7,45],[20,6,8,8],[20,10,8,12],[20,11,8,13,"outputShape"],[20,22,8,24],[20,25,8,27,"shape"],[20,30,8,32],[21,6,9,8],[21,12,9,14,"dtype"],[21,17,9,19],[21,20,9,22],[21,24,9,22,"getCoordsDataType"],[21,40,9,39],[21,41,9,39,"getCoordsDataType"],[21,58,9,39],[21,60,9,40,"shape"],[21,65,9,45],[21,66,9,46,"length"],[21,72,9,52],[21,73,9,53],[22,6,10,8],[22,10,10,12,"mainLoop"],[22,18,10,20],[22,21,10,23],[23,0,11,0],[23,15,11,15],[24,6,12,8],[24,11,12,13],[24,15,12,17,"j"],[24,16,12,18],[24,19,12,21],[24,20,12,22],[24,22,12,24,"j"],[24,23,12,25],[24,26,12,28],[24,30,12,32],[24,31,12,33,"sliceDim"],[24,39,12,41],[24,41,12,43,"j"],[24,42,12,44],[24,44,12,46],[24,46,12,48],[25,8,13,12,"mainLoop"],[25,16,13,20],[25,20,13,24],[26,0,14,0],[26,48,14,48,"j"],[26,49,14,49],[27,0,15,0],[28,0,16,0],[28,54,16,54],[28,58,16,58],[28,59,16,59,"paramsShape"],[28,70,16,70],[28,71,16,71,"j"],[28,72,16,72],[28,73,16,73],[29,0,17,0],[29,36,17,36],[29,40,17,40],[29,41,17,41,"strides"],[29,48,17,48],[29,49,17,49,"j"],[29,50,17,50],[29,51,17,51],[29,54,17,54],[30,6,18,8],[31,6,19,8],[31,10,19,12],[31,11,19,13,"userCode"],[31,19,19,21],[31,22,19,24],[32,0,20,0],[33,0,21,0],[33,12,21,12,"dtype"],[33,17,21,17],[34,0,22,0],[35,0,23,0],[36,0,24,0],[37,0,25,0],[37,12,25,12,"mainLoop"],[37,20,25,20],[38,0,26,0],[39,0,27,0],[40,0,28,0],[41,0,29,0],[41,7,29,7],[42,4,30,4],[43,2,31,0],[44,0,31,1],[44,3]],"functionMap":{"names":["<global>","GatherNDProgram","GatherNDProgram#constructor"],"mappings":"AAA;OCC;ICC;KD2B;CDC"},"hasCjsExports":false},"type":"js/module"}]}