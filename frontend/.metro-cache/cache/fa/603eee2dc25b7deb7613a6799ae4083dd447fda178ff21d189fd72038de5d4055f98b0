{"dependencies":[{"name":"../tensor_util_env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":53,"index":53}}],"key":"UCKDOr/oOGi3nbD26ZhyAVW61qk=","exportNames":["*"],"imports":1}},{"name":"../util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":54},"end":{"line":2,"column":32,"index":86}}],"key":"DTmef1GE5grNQfsvpIzpBlINy9c=","exportNames":["*"],"imports":1}},{"name":"./batchnorm","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":87},"end":{"line":3,"column":40,"index":127}}],"key":"IJXygL7Fam2lIk0ZFBto2ynRK18=","exportNames":["*"],"imports":1}},{"name":"./operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":128},"end":{"line":4,"column":33,"index":161}}],"key":"lmmEAb6oR3TWnrsrETceKUovfkM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"batchNorm3d\", {\n    enumerable: true,\n    get: function () {\n      return batchNorm3d;\n    }\n  });\n  var _tensor_util_env = require(_dependencyMap[0], \"../tensor_util_env\");\n  var _util = require(_dependencyMap[1], \"../util\");\n  var util = _interopNamespace(_util);\n  var _batchnorm = require(_dependencyMap[2], \"./batchnorm\");\n  var _operation = require(_dependencyMap[3], \"./operation\");\n  /**\n   * Batch normalization, strictly for 3D. For the more relaxed version, see\n   * `tf.batchNorm`.\n   *\n   * @param x The input Tensor.\n   * @param mean A mean Tensor.\n   * @param variance A variance Tensor.\n   * @param offset An offset Tensor.\n   * @param scale A scale Tensor.\n   * @param varianceEpsilon A small float number to avoid dividing by 0.\n   */\n  function batchNorm3d_(x, mean, variance, offset, scale, varianceEpsilon) {\n    const $x = (0, _tensor_util_env.convertToTensor)(x, 'x', 'batchNorm');\n    const $mean = (0, _tensor_util_env.convertToTensor)(mean, 'mean', 'batchNorm');\n    const $variance = (0, _tensor_util_env.convertToTensor)(variance, 'variance', 'batchNorm');\n    let $scale;\n    if (scale != null) {\n      $scale = (0, _tensor_util_env.convertToTensor)(scale, 'scale', 'batchNorm');\n    }\n    let $offset;\n    if (offset != null) {\n      $offset = (0, _tensor_util_env.convertToTensor)(offset, 'offset', 'batchNorm');\n    }\n    util.assert($x.rank === 3, () => `Error in batchNorm3D: x must be rank 3 but got rank ` + `${$x.rank}.`);\n    util.assert($mean.rank === 3 || $mean.rank === 1, () => `Error in batchNorm3D: mean must be rank 3 or rank 1 but ` + `got rank ${$mean.rank}.`);\n    util.assert($variance.rank === 3 || $variance.rank === 1, () => `Error in batchNorm3D: variance must be rank 3 or rank 1 ` + `but got rank ${$variance.rank}.`);\n    if ($scale != null) {\n      util.assert($scale.rank === 3 || $scale.rank === 1, () => `Error in batchNorm3D: scale must be rank 3 or rank 1 ` + `but got rank ${$scale.rank}.`);\n    }\n    if ($offset != null) {\n      util.assert($offset.rank === 3 || $offset.rank === 1, () => `Error in batchNorm3D: offset must be rank 3 or rank 1 ` + `but got rank ${$offset.rank}.`);\n    }\n    return (0, _batchnorm.batchNorm)($x, $mean, $variance, $offset, $scale, varianceEpsilon);\n  }\n  const batchNorm3d = /* @__PURE__ */(0, _operation.op)({\n    batchNorm3d_\n  });\n});","lineCount":70,"map":[[22,2,44,0,"Object"],[22,8,44,0],[22,9,44,0,"defineProperty"],[22,23,44,0],[22,24,44,0,"exports"],[22,31,44,0],[23,4,44,0,"enumerable"],[23,14,44,0],[24,4,44,0,"get"],[24,7,44,0],[24,18,44,0,"get"],[24,19,44,0],[25,6,44,0],[25,13,44,0,"batchNorm3d"],[25,24,44,0],[26,4,44,0],[27,2,44,0],[28,2,1,0],[28,6,1,0,"_tensor_util_env"],[28,22,1,0],[28,25,1,0,"require"],[28,32,1,0],[28,33,1,0,"_dependencyMap"],[28,47,1,0],[29,2,2,0],[29,6,2,0,"_util"],[29,11,2,0],[29,14,2,0,"require"],[29,21,2,0],[29,22,2,0,"_dependencyMap"],[29,36,2,0],[30,2,2,0],[30,6,2,0,"util"],[30,10,2,0],[30,13,2,0,"_interopNamespace"],[30,30,2,0],[30,31,2,0,"_util"],[30,36,2,0],[31,2,3,0],[31,6,3,0,"_batchnorm"],[31,16,3,0],[31,19,3,0,"require"],[31,26,3,0],[31,27,3,0,"_dependencyMap"],[31,41,3,0],[32,2,4,0],[32,6,4,0,"_operation"],[32,16,4,0],[32,19,4,0,"require"],[32,26,4,0],[32,27,4,0,"_dependencyMap"],[32,41,4,0],[33,2,5,0],[34,0,6,0],[35,0,7,0],[36,0,8,0],[37,0,9,0],[38,0,10,0],[39,0,11,0],[40,0,12,0],[41,0,13,0],[42,0,14,0],[43,0,15,0],[44,2,16,0],[44,11,16,9,"batchNorm3d_"],[44,23,16,21,"batchNorm3d_"],[44,24,16,22,"x"],[44,25,16,23],[44,27,16,25,"mean"],[44,31,16,29],[44,33,16,31,"variance"],[44,41,16,39],[44,43,16,41,"offset"],[44,49,16,47],[44,51,16,49,"scale"],[44,56,16,54],[44,58,16,56,"varianceEpsilon"],[44,73,16,71],[44,75,16,73],[45,4,17,4],[45,10,17,10,"$x"],[45,12,17,12],[45,15,17,15],[45,19,17,15,"convertToTensor"],[45,35,17,30],[45,36,17,30,"convertToTensor"],[45,51,17,30],[45,53,17,31,"x"],[45,54,17,32],[45,56,17,34],[45,59,17,37],[45,61,17,39],[45,72,17,50],[45,73,17,51],[46,4,18,4],[46,10,18,10,"$mean"],[46,15,18,15],[46,18,18,18],[46,22,18,18,"convertToTensor"],[46,38,18,33],[46,39,18,33,"convertToTensor"],[46,54,18,33],[46,56,18,34,"mean"],[46,60,18,38],[46,62,18,40],[46,68,18,46],[46,70,18,48],[46,81,18,59],[46,82,18,60],[47,4,19,4],[47,10,19,10,"$variance"],[47,19,19,19],[47,22,19,22],[47,26,19,22,"convertToTensor"],[47,42,19,37],[47,43,19,37,"convertToTensor"],[47,58,19,37],[47,60,19,38,"variance"],[47,68,19,46],[47,70,19,48],[47,80,19,58],[47,82,19,60],[47,93,19,71],[47,94,19,72],[48,4,20,4],[48,8,20,8,"$scale"],[48,14,20,14],[49,4,21,4],[49,8,21,8,"scale"],[49,13,21,13],[49,17,21,17],[49,21,21,21],[49,23,21,23],[50,6,22,8,"$scale"],[50,12,22,14],[50,15,22,17],[50,19,22,17,"convertToTensor"],[50,35,22,32],[50,36,22,32,"convertToTensor"],[50,51,22,32],[50,53,22,33,"scale"],[50,58,22,38],[50,60,22,40],[50,67,22,47],[50,69,22,49],[50,80,22,60],[50,81,22,61],[51,4,23,4],[52,4,24,4],[52,8,24,8,"$offset"],[52,15,24,15],[53,4,25,4],[53,8,25,8,"offset"],[53,14,25,14],[53,18,25,18],[53,22,25,22],[53,24,25,24],[54,6,26,8,"$offset"],[54,13,26,15],[54,16,26,18],[54,20,26,18,"convertToTensor"],[54,36,26,33],[54,37,26,33,"convertToTensor"],[54,52,26,33],[54,54,26,34,"offset"],[54,60,26,40],[54,62,26,42],[54,70,26,50],[54,72,26,52],[54,83,26,63],[54,84,26,64],[55,4,27,4],[56,4,28,4,"util"],[56,8,28,8],[56,9,28,9,"assert"],[56,15,28,15],[56,16,28,16,"$x"],[56,18,28,18],[56,19,28,19,"rank"],[56,23,28,23],[56,28,28,28],[56,29,28,29],[56,31,28,31],[56,37,28,37],[56,91,28,91],[56,94,29,8],[56,97,29,11,"$x"],[56,99,29,13],[56,100,29,14,"rank"],[56,104,29,18],[56,107,29,21],[56,108,29,22],[57,4,30,4,"util"],[57,8,30,8],[57,9,30,9,"assert"],[57,15,30,15],[57,16,30,16,"$mean"],[57,21,30,21],[57,22,30,22,"rank"],[57,26,30,26],[57,31,30,31],[57,32,30,32],[57,36,30,36,"$mean"],[57,41,30,41],[57,42,30,42,"rank"],[57,46,30,46],[57,51,30,51],[57,52,30,52],[57,54,30,54],[57,60,30,60],[57,118,30,118],[57,121,31,8],[57,133,31,20,"$mean"],[57,138,31,25],[57,139,31,26,"rank"],[57,143,31,30],[57,146,31,33],[57,147,31,34],[58,4,32,4,"util"],[58,8,32,8],[58,9,32,9,"assert"],[58,15,32,15],[58,16,32,16,"$variance"],[58,25,32,25],[58,26,32,26,"rank"],[58,30,32,30],[58,35,32,35],[58,36,32,36],[58,40,32,40,"$variance"],[58,49,32,49],[58,50,32,50,"rank"],[58,54,32,54],[58,59,32,59],[58,60,32,60],[58,62,32,62],[58,68,32,68],[58,126,32,126],[58,129,33,8],[58,145,33,24,"$variance"],[58,154,33,33],[58,155,33,34,"rank"],[58,159,33,38],[58,162,33,41],[58,163,33,42],[59,4,34,4],[59,8,34,8,"$scale"],[59,14,34,14],[59,18,34,18],[59,22,34,22],[59,24,34,24],[60,6,35,8,"util"],[60,10,35,12],[60,11,35,13,"assert"],[60,17,35,19],[60,18,35,20,"$scale"],[60,24,35,26],[60,25,35,27,"rank"],[60,29,35,31],[60,34,35,36],[60,35,35,37],[60,39,35,41,"$scale"],[60,45,35,47],[60,46,35,48,"rank"],[60,50,35,52],[60,55,35,57],[60,56,35,58],[60,58,35,60],[60,64,35,66],[60,119,35,121],[60,122,36,12],[60,138,36,28,"$scale"],[60,144,36,34],[60,145,36,35,"rank"],[60,149,36,39],[60,152,36,42],[60,153,36,43],[61,4,37,4],[62,4,38,4],[62,8,38,8,"$offset"],[62,15,38,15],[62,19,38,19],[62,23,38,23],[62,25,38,25],[63,6,39,8,"util"],[63,10,39,12],[63,11,39,13,"assert"],[63,17,39,19],[63,18,39,20,"$offset"],[63,25,39,27],[63,26,39,28,"rank"],[63,30,39,32],[63,35,39,37],[63,36,39,38],[63,40,39,42,"$offset"],[63,47,39,49],[63,48,39,50,"rank"],[63,52,39,54],[63,57,39,59],[63,58,39,60],[63,60,39,62],[63,66,39,68],[63,122,39,124],[63,125,40,12],[63,141,40,28,"$offset"],[63,148,40,35],[63,149,40,36,"rank"],[63,153,40,40],[63,156,40,43],[63,157,40,44],[64,4,41,4],[65,4,42,4],[65,11,42,11],[65,15,42,11,"batchNorm"],[65,25,42,20],[65,26,42,20,"batchNorm"],[65,35,42,20],[65,37,42,21,"$x"],[65,39,42,23],[65,41,42,25,"$mean"],[65,46,42,30],[65,48,42,32,"$variance"],[65,57,42,41],[65,59,42,43,"$offset"],[65,66,42,50],[65,68,42,52,"$scale"],[65,74,42,58],[65,76,42,60,"varianceEpsilon"],[65,91,42,75],[65,92,42,76],[66,2,43,0],[67,2,44,7],[67,8,44,13,"batchNorm3d"],[67,19,44,24],[67,22,44,27],[67,37,44,43],[67,41,44,43,"op"],[67,51,44,45],[67,52,44,45,"op"],[67,54,44,45],[67,56,44,46],[68,4,44,48,"batchNorm3d_"],[69,2,44,61],[69,3,44,62],[69,4,44,63],[70,0,44,64],[70,3]],"functionMap":{"names":["<global>","batchNorm3d_","util.assert$argument_1"],"mappings":"AAA;ACe;+BCY;qBDC;sDCC;iCDC;8DCC;yCDC;4DCE;0CDC;8DCG;2CDC;CDG"},"hasCjsExports":false},"type":"js/module"}]}