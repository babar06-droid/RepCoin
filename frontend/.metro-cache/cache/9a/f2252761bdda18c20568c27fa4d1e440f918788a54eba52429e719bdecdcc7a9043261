{"dependencies":[{"name":"../engine","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":35,"index":738}}],"key":"zbTTi8rtwr8rjl75PzEo829Yvss=","exportNames":["*"],"imports":1}},{"name":"../kernel_names","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":739},"end":{"line":18,"column":38,"index":777}}],"key":"gQVznmdGA0uoBQvR5Q4/qW+ITHg=","exportNames":["*"],"imports":1}},{"name":"../tensor_util_env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":778},"end":{"line":19,"column":53,"index":831}}],"key":"UCKDOr/oOGi3nbD26ZhyAVW61qk=","exportNames":["*"],"imports":1}},{"name":"../util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":832},"end":{"line":20,"column":32,"index":864}}],"key":"DTmef1GE5grNQfsvpIzpBlINy9c=","exportNames":["*"],"imports":1}},{"name":"./operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":865},"end":{"line":21,"column":33,"index":898}}],"key":"lmmEAb6oR3TWnrsrETceKUovfkM=","exportNames":["*"],"imports":1}},{"name":"./reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":22,"column":0,"index":899},"end":{"line":22,"column":36,"index":935}}],"key":"dz8GCsFShMGnHX1Wj7bBySjBnSE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"localResponseNormalization\", {\n    enumerable: true,\n    get: function () {\n      return localResponseNormalization;\n    }\n  });\n  var _engine = require(_dependencyMap[0], \"../engine\");\n  var _kernel_names = require(_dependencyMap[1], \"../kernel_names\");\n  var _tensor_util_env = require(_dependencyMap[2], \"../tensor_util_env\");\n  var _util = require(_dependencyMap[3], \"../util\");\n  var util = _interopNamespace(_util);\n  var _operation = require(_dependencyMap[4], \"./operation\");\n  var _reshape = require(_dependencyMap[5], \"./reshape\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  /**\n   * Normalizes the activation of a local neighborhood across or within\n   * channels.\n   *\n   * @param x The input tensor. The 4-D input tensor is treated as a 3-D array\n   *     of 1D vectors (along the last dimension), and each vector is\n   *     normalized independently.\n   * @param depthRadius The number of adjacent channels in the 1D normalization\n   *     window.\n   * @param bias A constant bias term for the basis.\n   * @param alpha A scale factor, usually positive.\n   * @param beta An exponent.\n   *\n   * @doc {heading: 'Operations', subheading: 'Normalization'}\n   */\n  function localResponseNormalization_(x, depthRadius = 5, bias = 1, alpha = 1, beta = 0.5) {\n    const $x = (0, _tensor_util_env.convertToTensor)(x, 'x', 'localResponseNormalization');\n    util.assert($x.rank === 4 || $x.rank === 3, () => `Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${$x.rank}.`);\n    util.assert(util.isInt(depthRadius), () => `Error in localResponseNormalization: depthRadius must be an ` + `integer but got depthRadius ${depthRadius}.`);\n    let x4D = $x;\n    let reshapedTo4D = false;\n    if ($x.rank === 3) {\n      reshapedTo4D = true;\n      x4D = (0, _reshape.reshape)($x, [1, $x.shape[0], $x.shape[1], $x.shape[2]]);\n    }\n    const inputs = {\n      x: x4D\n    };\n    const attrs = {\n      depthRadius,\n      bias,\n      alpha,\n      beta\n    };\n    // tslint:disable-next-line: no-unnecessary-type-assertion\n    const res = _engine.ENGINE.runKernel(_kernel_names.LRN, inputs, attrs);\n    if (reshapedTo4D) {\n      return (0, _reshape.reshape)(res, [res.shape[1], res.shape[2], res.shape[3]]);\n    } else {\n      return res;\n    }\n  }\n  const localResponseNormalization = /* @__PURE__ */(0, _operation.op)({\n    localResponseNormalization_\n  });\n});","lineCount":98,"map":[[22,2,61,0,"Object"],[22,8,61,0],[22,9,61,0,"defineProperty"],[22,23,61,0],[22,24,61,0,"exports"],[22,31,61,0],[23,4,61,0,"enumerable"],[23,14,61,0],[24,4,61,0,"get"],[24,7,61,0],[24,18,61,0,"get"],[24,19,61,0],[25,6,61,0],[25,13,61,0,"localResponseNormalization"],[25,39,61,0],[26,4,61,0],[27,2,61,0],[28,2,17,0],[28,6,17,0,"_engine"],[28,13,17,0],[28,16,17,0,"require"],[28,23,17,0],[28,24,17,0,"_dependencyMap"],[28,38,17,0],[29,2,18,0],[29,6,18,0,"_kernel_names"],[29,19,18,0],[29,22,18,0,"require"],[29,29,18,0],[29,30,18,0,"_dependencyMap"],[29,44,18,0],[30,2,19,0],[30,6,19,0,"_tensor_util_env"],[30,22,19,0],[30,25,19,0,"require"],[30,32,19,0],[30,33,19,0,"_dependencyMap"],[30,47,19,0],[31,2,20,0],[31,6,20,0,"_util"],[31,11,20,0],[31,14,20,0,"require"],[31,21,20,0],[31,22,20,0,"_dependencyMap"],[31,36,20,0],[32,2,20,0],[32,6,20,0,"util"],[32,10,20,0],[32,13,20,0,"_interopNamespace"],[32,30,20,0],[32,31,20,0,"_util"],[32,36,20,0],[33,2,21,0],[33,6,21,0,"_operation"],[33,16,21,0],[33,19,21,0,"require"],[33,26,21,0],[33,27,21,0,"_dependencyMap"],[33,41,21,0],[34,2,22,0],[34,6,22,0,"_reshape"],[34,14,22,0],[34,17,22,0,"require"],[34,24,22,0],[34,25,22,0,"_dependencyMap"],[34,39,22,0],[35,2,1,0],[36,0,2,0],[37,0,3,0],[38,0,4,0],[39,0,5,0],[40,0,6,0],[41,0,7,0],[42,0,8,0],[43,0,9,0],[44,0,10,0],[45,0,11,0],[46,0,12,0],[47,0,13,0],[48,0,14,0],[49,0,15,0],[50,0,16,0],[52,2,23,0],[53,0,24,0],[54,0,25,0],[55,0,26,0],[56,0,27,0],[57,0,28,0],[58,0,29,0],[59,0,30,0],[60,0,31,0],[61,0,32,0],[62,0,33,0],[63,0,34,0],[64,0,35,0],[65,0,36,0],[66,0,37,0],[67,2,38,0],[67,11,38,9,"localResponseNormalization_"],[67,38,38,36,"localResponseNormalization_"],[67,39,38,37,"x"],[67,40,38,38],[67,42,38,40,"depthRadius"],[67,53,38,51],[67,56,38,54],[67,57,38,55],[67,59,38,57,"bias"],[67,63,38,61],[67,66,38,64],[67,67,38,65],[67,69,38,67,"alpha"],[67,74,38,72],[67,77,38,75],[67,78,38,76],[67,80,38,78,"beta"],[67,84,38,82],[67,87,38,85],[67,90,38,88],[67,92,38,90],[68,4,39,4],[68,10,39,10,"$x"],[68,12,39,12],[68,15,39,15],[68,19,39,15,"convertToTensor"],[68,35,39,30],[68,36,39,30,"convertToTensor"],[68,51,39,30],[68,53,39,31,"x"],[68,54,39,32],[68,56,39,34],[68,59,39,37],[68,61,39,39],[68,89,39,67],[68,90,39,68],[69,4,40,4,"util"],[69,8,40,8],[69,9,40,9,"assert"],[69,15,40,15],[69,16,40,16,"$x"],[69,18,40,18],[69,19,40,19,"rank"],[69,23,40,23],[69,28,40,28],[69,29,40,29],[69,33,40,33,"$x"],[69,35,40,35],[69,36,40,36,"rank"],[69,40,40,40],[69,45,40,45],[69,46,40,46],[69,48,40,48],[69,54,40,54],[70,0,41,0],[70,22,41,22,"$x"],[70,24,41,24],[70,25,41,25,"rank"],[70,29,41,29],[70,32,41,32],[70,33,41,33],[71,4,42,4,"util"],[71,8,42,8],[71,9,42,9,"assert"],[71,15,42,15],[71,16,42,16,"util"],[71,20,42,20],[71,21,42,21,"isInt"],[71,26,42,26],[71,27,42,27,"depthRadius"],[71,38,42,38],[71,39,42,39],[71,41,42,41],[71,47,42,47],[71,109,42,109],[71,112,43,8],[71,143,43,39,"depthRadius"],[71,154,43,50],[71,157,43,53],[71,158,43,54],[72,4,44,4],[72,8,44,8,"x4D"],[72,11,44,11],[72,14,44,14,"$x"],[72,16,44,16],[73,4,45,4],[73,8,45,8,"reshapedTo4D"],[73,20,45,20],[73,23,45,23],[73,28,45,28],[74,4,46,4],[74,8,46,8,"$x"],[74,10,46,10],[74,11,46,11,"rank"],[74,15,46,15],[74,20,46,20],[74,21,46,21],[74,23,46,23],[75,6,47,8,"reshapedTo4D"],[75,18,47,20],[75,21,47,23],[75,25,47,27],[76,6,48,8,"x4D"],[76,9,48,11],[76,12,48,14],[76,16,48,14,"reshape"],[76,24,48,21],[76,25,48,21,"reshape"],[76,32,48,21],[76,34,48,22,"$x"],[76,36,48,24],[76,38,48,26],[76,39,48,27],[76,40,48,28],[76,42,48,30,"$x"],[76,44,48,32],[76,45,48,33,"shape"],[76,50,48,38],[76,51,48,39],[76,52,48,40],[76,53,48,41],[76,55,48,43,"$x"],[76,57,48,45],[76,58,48,46,"shape"],[76,63,48,51],[76,64,48,52],[76,65,48,53],[76,66,48,54],[76,68,48,56,"$x"],[76,70,48,58],[76,71,48,59,"shape"],[76,76,48,64],[76,77,48,65],[76,78,48,66],[76,79,48,67],[76,80,48,68],[76,81,48,69],[77,4,49,4],[78,4,50,4],[78,10,50,10,"inputs"],[78,16,50,16],[78,19,50,19],[79,6,50,21,"x"],[79,7,50,22],[79,9,50,24,"x4D"],[80,4,50,28],[80,5,50,29],[81,4,51,4],[81,10,51,10,"attrs"],[81,15,51,15],[81,18,51,18],[82,6,51,20,"depthRadius"],[82,17,51,31],[83,6,51,33,"bias"],[83,10,51,37],[84,6,51,39,"alpha"],[84,11,51,44],[85,6,51,46,"beta"],[86,4,51,51],[86,5,51,52],[87,4,52,4],[88,4,53,4],[88,10,53,10,"res"],[88,13,53,13],[88,16,53,16,"ENGINE"],[88,23,53,22],[88,24,53,22,"ENGINE"],[88,30,53,22],[88,31,53,23,"runKernel"],[88,40,53,32],[88,41,53,33,"LRN"],[88,54,53,36],[88,55,53,36,"LRN"],[88,58,53,36],[88,60,53,38,"inputs"],[88,66,53,44],[88,68,53,46,"attrs"],[88,73,53,51],[88,74,53,52],[89,4,54,4],[89,8,54,8,"reshapedTo4D"],[89,20,54,20],[89,22,54,22],[90,6,55,8],[90,13,55,15],[90,17,55,15,"reshape"],[90,25,55,22],[90,26,55,22,"reshape"],[90,33,55,22],[90,35,55,23,"res"],[90,38,55,26],[90,40,55,28],[90,41,55,29,"res"],[90,44,55,32],[90,45,55,33,"shape"],[90,50,55,38],[90,51,55,39],[90,52,55,40],[90,53,55,41],[90,55,55,43,"res"],[90,58,55,46],[90,59,55,47,"shape"],[90,64,55,52],[90,65,55,53],[90,66,55,54],[90,67,55,55],[90,69,55,57,"res"],[90,72,55,60],[90,73,55,61,"shape"],[90,78,55,66],[90,79,55,67],[90,80,55,68],[90,81,55,69],[90,82,55,70],[90,83,55,71],[91,4,56,4],[91,5,56,5],[91,11,57,9],[92,6,58,8],[92,13,58,15,"res"],[92,16,58,18],[93,4,59,4],[94,2,60,0],[95,2,61,7],[95,8,61,13,"localResponseNormalization"],[95,34,61,39],[95,37,61,42],[95,52,61,58],[95,56,61,58,"op"],[95,66,61,60],[95,67,61,60,"op"],[95,69,61,60],[95,71,61,61],[96,4,61,63,"localResponseNormalization_"],[97,2,61,91],[97,3,61,92],[97,4,61,93],[98,0,61,94],[98,3]],"functionMap":{"names":["<global>","localResponseNormalization_","util.assert$argument_1"],"mappings":"AAA;ACqC;gDCE;gCDC;yCCC;qDDC;CDiB"},"hasCjsExports":false},"type":"js/module"}]}