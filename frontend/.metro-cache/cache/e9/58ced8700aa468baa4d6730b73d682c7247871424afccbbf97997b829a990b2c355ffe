{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":32,"index":32}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../NativeWorklets","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":33},"end":{"line":2,"column":45,"index":78}}],"key":"vS/wptm08w0iNUGZoMNUVKibMw0=","exportNames":["*"],"imports":1}},{"name":"../worklet","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":79},"end":{"line":3,"column":52,"index":131}}],"key":"PVCWKCDYK1BIGxYQk//tww52M4Q=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.useWorklet = useWorklet;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _NativeWorklets = require(_dependencyMap[1], \"../NativeWorklets\");\n  var _worklet = require(_dependencyMap[2], \"../worklet\");\n  /**\n   * Create a Worklet function that automatically memoizes itself using it's auto-captured closure.\n   * The returned function can be called from both a Worklet context and the JS context, but will execute on a Worklet context.\n   *\n   * @worklet\n   * @param context The context to run this Worklet in. Can be `default` to use the default background context, or a custom context.\n   * @param callback The Worklet. Must be marked with the `'worklet'` directive.\n   * @returns A memoized Worklet\n   * ```ts\n   * const sayHello = useWorklet('default', (name: string) => {\n   *   'worklet'\n   *   console.log(`Hello ${name}, I am running on the Worklet Thread!`)\n   * })\n   * sayHello()\n   * ```\n   */\n  function useWorklet(context, callback) {\n    // Since `Worklets.defaultContext` always constructs a new jsi::Object,\n    // we cannot use it in React's dependency-list as that'd trigger a new dependency each render.\n    // Instead, we compare only it's name as a unique ID to re-trigger useMemo only when the name changes.\n    const contextName = context === \"default\" ? context : context.name;\n\n    // As a dependency for this use-memo we use all of the values captured inside the worklet,\n    // as well as the unique context name.\n    const dependencies = [...(0, _worklet.getWorkletDependencies)(callback), contextName];\n    return (0, _react.useMemo)(() => {\n      const actualContext = context === \"default\" ? _NativeWorklets.Worklets.defaultContext : context;\n      return actualContext.createRunAsync(callback);\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    dependencies);\n  }\n});","lineCount":43,"map":[[7,2,21,0,"exports"],[7,9,21,0],[7,10,21,0,"useWorklet"],[7,20,21,0],[7,23,21,0,"useWorklet"],[7,33,21,0],[8,2,1,0],[8,6,1,0,"_react"],[8,12,1,0],[8,15,1,0,"require"],[8,22,1,0],[8,23,1,0,"_dependencyMap"],[8,37,1,0],[9,2,2,0],[9,6,2,0,"_NativeWorklets"],[9,21,2,0],[9,24,2,0,"require"],[9,31,2,0],[9,32,2,0,"_dependencyMap"],[9,46,2,0],[10,2,3,0],[10,6,3,0,"_worklet"],[10,14,3,0],[10,17,3,0,"require"],[10,24,3,0],[10,25,3,0,"_dependencyMap"],[10,39,3,0],[11,2,5,0],[12,0,6,0],[13,0,7,0],[14,0,8,0],[15,0,9,0],[16,0,10,0],[17,0,11,0],[18,0,12,0],[19,0,13,0],[20,0,14,0],[21,0,15,0],[22,0,16,0],[23,0,17,0],[24,0,18,0],[25,0,19,0],[26,0,20,0],[27,2,21,7],[27,11,21,16,"useWorklet"],[27,21,21,26,"useWorklet"],[27,22,21,27,"context"],[27,29,21,34],[27,31,21,36,"callback"],[27,39,21,44],[27,41,21,46],[28,4,22,2],[29,4,23,2],[30,4,24,2],[31,4,25,2],[31,10,25,8,"contextName"],[31,21,25,19],[31,24,25,22,"context"],[31,31,25,29],[31,36,25,34],[31,45,25,43],[31,48,25,46,"context"],[31,55,25,53],[31,58,25,56,"context"],[31,65,25,63],[31,66,25,64,"name"],[31,70,25,68],[33,4,27,2],[34,4,28,2],[35,4,29,2],[35,10,29,8,"dependencies"],[35,22,29,20],[35,25,29,23],[35,26,29,24],[35,29,29,27],[35,33,29,27,"getWorkletDependencies"],[35,41,29,49],[35,42,29,49,"getWorkletDependencies"],[35,64,29,49],[35,66,29,50,"callback"],[35,74,29,58],[35,75,29,59],[35,77,29,61,"contextName"],[35,88,29,72],[35,89,29,73],[36,4,30,2],[36,11,30,9],[36,15,30,9,"useMemo"],[36,21,30,16],[36,22,30,16,"useMemo"],[36,29,30,16],[36,31,30,17],[36,37,30,23],[37,6,31,4],[37,12,31,10,"actualContext"],[37,25,31,23],[37,28,31,26,"context"],[37,35,31,33],[37,40,31,38],[37,49,31,47],[37,52,31,50,"Worklets"],[37,67,31,58],[37,68,31,58,"Worklets"],[37,76,31,58],[37,77,31,59,"defaultContext"],[37,91,31,73],[37,94,31,76,"context"],[37,101,31,83],[38,6,32,4],[38,13,32,11,"actualContext"],[38,26,32,24],[38,27,32,25,"createRunAsync"],[38,41,32,39],[38,42,32,40,"callback"],[38,50,32,48],[38,51,32,49],[39,4,33,2],[39,5,33,3],[40,4,34,2],[41,4,35,2,"dependencies"],[41,16,35,14],[41,17,35,15],[42,2,36,0],[43,0,36,1],[43,3]],"functionMap":{"names":["<global>","useWorklet","useMemo$argument_0"],"mappings":"AAA;OCoB;iBCS;GDG;CDG"},"hasCjsExports":false},"type":"js/module"}]}