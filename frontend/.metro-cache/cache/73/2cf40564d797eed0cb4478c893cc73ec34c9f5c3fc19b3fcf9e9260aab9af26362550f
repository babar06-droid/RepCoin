{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"RotateProgram\", {\n    enumerable: true,\n    get: function () {\n      return RotateProgram;\n    }\n  });\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n  class RotateProgram {\n    constructor(imageShape, fillValue) {\n      this.variableNames = ['Image'];\n      this.outputShape = [];\n      this.customUniforms = [{\n        name: 'params',\n        type: 'vec4'\n      }];\n      const imageHeight = imageShape[1];\n      const imageWidth = imageShape[2];\n      this.outputShape = imageShape;\n      let fillSnippet = '';\n      if (typeof fillValue === 'number') {\n        fillSnippet = `float outputValue = ${fillValue.toFixed(2)};`;\n      } else {\n        fillSnippet = `\n        vec3 fill = vec3(${fillValue.join(',')});\n        float outputValue = fill[coords[3]];`;\n      }\n      this.userCode = `\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ${fillSnippet}\n          if(coordX >= 0 && coordX < ${imageWidth} && coordY >= 0 && coordY < ${imageHeight}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `;\n    }\n  }\n});","lineCount":68,"map":[[7,2,17,0,"Object"],[7,8,17,0],[7,9,17,0,"defineProperty"],[7,23,17,0],[7,24,17,0,"exports"],[7,31,17,0],[8,4,17,0,"enumerable"],[8,14,17,0],[9,4,17,0,"get"],[9,7,17,0],[9,18,17,0,"get"],[9,19,17,0],[10,6,17,0],[10,13,17,0,"RotateProgram"],[10,26,17,0],[11,4,17,0],[12,2,17,0],[13,2,1,0],[14,0,2,0],[15,0,3,0],[16,0,4,0],[17,0,5,0],[18,0,6,0],[19,0,7,0],[20,0,8,0],[21,0,9,0],[22,0,10,0],[23,0,11,0],[24,0,12,0],[25,0,13,0],[26,0,14,0],[27,0,15,0],[28,0,16,0],[29,2,17,7],[29,8,17,13,"RotateProgram"],[29,21,17,26],[29,22,17,27],[30,4,18,4,"constructor"],[30,15,18,15,"constructor"],[30,16,18,16,"imageShape"],[30,26,18,26],[30,28,18,28,"fillValue"],[30,37,18,37],[30,39,18,39],[31,6,19,8],[31,10,19,12],[31,11,19,13,"variableNames"],[31,24,19,26],[31,27,19,29],[31,28,19,30],[31,35,19,37],[31,36,19,38],[32,6,20,8],[32,10,20,12],[32,11,20,13,"outputShape"],[32,22,20,24],[32,25,20,27],[32,27,20,29],[33,6,21,8],[33,10,21,12],[33,11,21,13,"customUniforms"],[33,25,21,27],[33,28,21,30],[33,29,21,31],[34,8,21,33,"name"],[34,12,21,37],[34,14,21,39],[34,22,21,47],[35,8,21,49,"type"],[35,12,21,53],[35,14,21,55],[36,6,21,62],[36,7,21,63],[36,8,21,64],[37,6,22,8],[37,12,22,14,"imageHeight"],[37,23,22,25],[37,26,22,28,"imageShape"],[37,36,22,38],[37,37,22,39],[37,38,22,40],[37,39,22,41],[38,6,23,8],[38,12,23,14,"imageWidth"],[38,22,23,24],[38,25,23,27,"imageShape"],[38,35,23,37],[38,36,23,38],[38,37,23,39],[38,38,23,40],[39,6,24,8],[39,10,24,12],[39,11,24,13,"outputShape"],[39,22,24,24],[39,25,24,27,"imageShape"],[39,35,24,37],[40,6,25,8],[40,10,25,12,"fillSnippet"],[40,21,25,23],[40,24,25,26],[40,26,25,28],[41,6,26,8],[41,10,26,12],[41,17,26,19,"fillValue"],[41,26,26,28],[41,31,26,33],[41,39,26,41],[41,41,26,43],[42,8,27,12,"fillSnippet"],[42,19,27,23],[42,22,27,26],[42,45,27,49,"fillValue"],[42,54,27,58],[42,55,27,59,"toFixed"],[42,62,27,66],[42,63,27,67],[42,64,27,68],[42,65,27,69],[42,68,27,72],[43,6,28,8],[43,7,28,9],[43,13,29,13],[44,8,30,12,"fillSnippet"],[44,19,30,23],[44,22,30,26],[45,0,31,0],[45,27,31,27,"fillValue"],[45,36,31,36],[45,37,31,37,"join"],[45,41,31,41],[45,42,31,42],[45,45,31,45],[45,46,31,46],[46,0,32,0],[46,45,32,45],[47,6,33,8],[48,6,34,8],[48,10,34,12],[48,11,34,13,"userCode"],[48,19,34,21],[48,22,34,24],[49,0,35,0],[50,0,36,0],[51,0,37,0],[52,0,38,0],[53,0,39,0],[54,0,40,0],[55,0,41,0],[56,0,42,0],[57,0,43,0],[58,0,44,0],[59,0,45,0],[59,12,45,12,"fillSnippet"],[59,23,45,23],[60,0,46,0],[60,39,46,39,"imageWidth"],[60,49,46,49],[60,80,46,80,"imageHeight"],[60,91,46,91],[61,0,47,0],[62,0,48,0],[63,0,49,0],[64,0,50,0],[65,0,51,0],[65,5,51,5],[66,4,52,4],[67,2,53,0],[68,0,53,1],[68,3]],"functionMap":{"names":["<global>","RotateProgram","RotateProgram#constructor"],"mappings":"AAA;OCgB;ICC;KDkC;CDC"},"hasCjsExports":false},"type":"js/module"}]}