{"dependencies":[{"name":"../kernel_names","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":43,"index":746}}],"key":"gQVznmdGA0uoBQvR5Q4/qW+ITHg=","exportNames":["*"],"imports":1}},{"name":"../ops/broadcast_util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":747},"end":{"line":18,"column":85,"index":832}}],"key":"Qvkkzd+OEKB4AewZTACLHdeSCuY=","exportNames":["*"],"imports":1}},{"name":"../ops/cast","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":833},"end":{"line":19,"column":35,"index":868}}],"key":"WivC6qgff7NU+wGToo3tfKFUEPo=","exportNames":["*"],"imports":1}},{"name":"../ops/mul","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":869},"end":{"line":20,"column":33,"index":902}}],"key":"8VMM/o0r3nOvGtT2jgKf2KxknFk=","exportNames":["*"],"imports":1}},{"name":"../ops/reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":903},"end":{"line":21,"column":41,"index":944}}],"key":"y6qCHUFGUly5Bq9K/sbHhy1R7kE=","exportNames":["*"],"imports":1}},{"name":"../ops/sum","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":22,"column":0,"index":945},"end":{"line":22,"column":33,"index":978}}],"key":"QFu1HORitJ22mTBAu0XhrnhYCVg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"multiplyGradConfig\", {\n    enumerable: true,\n    get: function () {\n      return multiplyGradConfig;\n    }\n  });\n  var _kernel_names = require(_dependencyMap[0], \"../kernel_names\");\n  var _opsBroadcast_util = require(_dependencyMap[1], \"../ops/broadcast_util\");\n  var _opsCast = require(_dependencyMap[2], \"../ops/cast\");\n  var _opsMul = require(_dependencyMap[3], \"../ops/mul\");\n  var _opsReshape = require(_dependencyMap[4], \"../ops/reshape\");\n  var _opsSum = require(_dependencyMap[5], \"../ops/sum\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  const multiplyGradConfig = {\n    kernelName: _kernel_names.Multiply,\n    inputsToSave: ['a', 'b'],\n    gradFunc: (dy, saved) => {\n      const [a, b] = saved;\n      const outShape = (0, _opsBroadcast_util.assertAndGetBroadcastShape)(a.shape, b.shape);\n      const derA = () => {\n        const res = (0, _opsMul.mul)(dy, (0, _opsCast.cast)(b, 'float32'));\n        const reduceAxes = (0, _opsBroadcast_util.getReductionAxes)(a.shape, outShape);\n        if (reduceAxes.length > 0) {\n          return (0, _opsReshape.reshape)((0, _opsSum.sum)(res, reduceAxes), a.shape);\n        }\n        return res;\n      };\n      const derB = () => {\n        const res = (0, _opsMul.mul)(dy, (0, _opsCast.cast)(a, 'float32'));\n        const reduceAxes = (0, _opsBroadcast_util.getReductionAxes)(b.shape, outShape);\n        if (reduceAxes.length > 0) {\n          return (0, _opsReshape.reshape)((0, _opsSum.sum)(res, reduceAxes), b.shape);\n        }\n        return res;\n      };\n      return {\n        a: derA,\n        b: derB\n      };\n    }\n  };\n});","lineCount":64,"map":[[7,2,23,0,"Object"],[7,8,23,0],[7,9,23,0,"defineProperty"],[7,23,23,0],[7,24,23,0,"exports"],[7,31,23,0],[8,4,23,0,"enumerable"],[8,14,23,0],[9,4,23,0,"get"],[9,7,23,0],[9,18,23,0,"get"],[9,19,23,0],[10,6,23,0],[10,13,23,0,"multiplyGradConfig"],[10,31,23,0],[11,4,23,0],[12,2,23,0],[13,2,17,0],[13,6,17,0,"_kernel_names"],[13,19,17,0],[13,22,17,0,"require"],[13,29,17,0],[13,30,17,0,"_dependencyMap"],[13,44,17,0],[14,2,18,0],[14,6,18,0,"_opsBroadcast_util"],[14,24,18,0],[14,27,18,0,"require"],[14,34,18,0],[14,35,18,0,"_dependencyMap"],[14,49,18,0],[15,2,19,0],[15,6,19,0,"_opsCast"],[15,14,19,0],[15,17,19,0,"require"],[15,24,19,0],[15,25,19,0,"_dependencyMap"],[15,39,19,0],[16,2,20,0],[16,6,20,0,"_opsMul"],[16,13,20,0],[16,16,20,0,"require"],[16,23,20,0],[16,24,20,0,"_dependencyMap"],[16,38,20,0],[17,2,21,0],[17,6,21,0,"_opsReshape"],[17,17,21,0],[17,20,21,0,"require"],[17,27,21,0],[17,28,21,0,"_dependencyMap"],[17,42,21,0],[18,2,22,0],[18,6,22,0,"_opsSum"],[18,13,22,0],[18,16,22,0,"require"],[18,23,22,0],[18,24,22,0,"_dependencyMap"],[18,38,22,0],[19,2,1,0],[20,0,2,0],[21,0,3,0],[22,0,4,0],[23,0,5,0],[24,0,6,0],[25,0,7,0],[26,0,8,0],[27,0,9,0],[28,0,10,0],[29,0,11,0],[30,0,12,0],[31,0,13,0],[32,0,14,0],[33,0,15,0],[34,0,16,0],[36,2,23,7],[36,8,23,13,"multiplyGradConfig"],[36,26,23,31],[36,29,23,34],[37,4,24,4,"kernelName"],[37,14,24,14],[37,16,24,16,"Multiply"],[37,29,24,24],[37,30,24,24,"Multiply"],[37,38,24,24],[38,4,25,4,"inputsToSave"],[38,16,25,16],[38,18,25,18],[38,19,25,19],[38,22,25,22],[38,24,25,24],[38,27,25,27],[38,28,25,28],[39,4,26,4,"gradFunc"],[39,12,26,12],[39,14,26,14,"gradFunc"],[39,15,26,15,"dy"],[39,17,26,17],[39,19,26,19,"saved"],[39,24,26,24],[39,29,26,29],[40,6,27,8],[40,12,27,14],[40,13,27,15,"a"],[40,14,27,16],[40,16,27,18,"b"],[40,17,27,19],[40,18,27,20],[40,21,27,23,"saved"],[40,26,27,28],[41,6,28,8],[41,12,28,14,"outShape"],[41,20,28,22],[41,23,28,25],[41,27,28,25,"assertAndGetBroadcastShape"],[41,45,28,51],[41,46,28,51,"assertAndGetBroadcastShape"],[41,72,28,51],[41,74,28,52,"a"],[41,75,28,53],[41,76,28,54,"shape"],[41,81,28,59],[41,83,28,61,"b"],[41,84,28,62],[41,85,28,63,"shape"],[41,90,28,68],[41,91,28,69],[42,6,29,8],[42,12,29,14,"derA"],[42,16,29,18],[42,19,29,21,"derA"],[42,20,29,21],[42,25,29,27],[43,8,30,12],[43,14,30,18,"res"],[43,17,30,21],[43,20,30,24],[43,24,30,24,"mul"],[43,31,30,27],[43,32,30,27,"mul"],[43,35,30,27],[43,37,30,28,"dy"],[43,39,30,30],[43,41,30,32],[43,45,30,32,"cast"],[43,53,30,36],[43,54,30,36,"cast"],[43,58,30,36],[43,60,30,37,"b"],[43,61,30,38],[43,63,30,40],[43,72,30,49],[43,73,30,50],[43,74,30,51],[44,8,31,12],[44,14,31,18,"reduceAxes"],[44,24,31,28],[44,27,31,31],[44,31,31,31,"getReductionAxes"],[44,49,31,47],[44,50,31,47,"getReductionAxes"],[44,66,31,47],[44,68,31,48,"a"],[44,69,31,49],[44,70,31,50,"shape"],[44,75,31,55],[44,77,31,57,"outShape"],[44,85,31,65],[44,86,31,66],[45,8,32,12],[45,12,32,16,"reduceAxes"],[45,22,32,26],[45,23,32,27,"length"],[45,29,32,33],[45,32,32,36],[45,33,32,37],[45,35,32,39],[46,10,33,16],[46,17,33,23],[46,21,33,23,"reshape"],[46,32,33,30],[46,33,33,30,"reshape"],[46,40,33,30],[46,42,33,31],[46,46,33,31,"sum"],[46,53,33,34],[46,54,33,34,"sum"],[46,57,33,34],[46,59,33,35,"res"],[46,62,33,38],[46,64,33,40,"reduceAxes"],[46,74,33,50],[46,75,33,51],[46,77,33,53,"a"],[46,78,33,54],[46,79,33,55,"shape"],[46,84,33,60],[46,85,33,61],[47,8,34,12],[48,8,35,12],[48,15,35,19,"res"],[48,18,35,22],[49,6,36,8],[49,7,36,9],[50,6,37,8],[50,12,37,14,"derB"],[50,16,37,18],[50,19,37,21,"derB"],[50,20,37,21],[50,25,37,27],[51,8,38,12],[51,14,38,18,"res"],[51,17,38,21],[51,20,38,24],[51,24,38,24,"mul"],[51,31,38,27],[51,32,38,27,"mul"],[51,35,38,27],[51,37,38,28,"dy"],[51,39,38,30],[51,41,38,32],[51,45,38,32,"cast"],[51,53,38,36],[51,54,38,36,"cast"],[51,58,38,36],[51,60,38,37,"a"],[51,61,38,38],[51,63,38,40],[51,72,38,49],[51,73,38,50],[51,74,38,51],[52,8,39,12],[52,14,39,18,"reduceAxes"],[52,24,39,28],[52,27,39,31],[52,31,39,31,"getReductionAxes"],[52,49,39,47],[52,50,39,47,"getReductionAxes"],[52,66,39,47],[52,68,39,48,"b"],[52,69,39,49],[52,70,39,50,"shape"],[52,75,39,55],[52,77,39,57,"outShape"],[52,85,39,65],[52,86,39,66],[53,8,40,12],[53,12,40,16,"reduceAxes"],[53,22,40,26],[53,23,40,27,"length"],[53,29,40,33],[53,32,40,36],[53,33,40,37],[53,35,40,39],[54,10,41,16],[54,17,41,23],[54,21,41,23,"reshape"],[54,32,41,30],[54,33,41,30,"reshape"],[54,40,41,30],[54,42,41,31],[54,46,41,31,"sum"],[54,53,41,34],[54,54,41,34,"sum"],[54,57,41,34],[54,59,41,35,"res"],[54,62,41,38],[54,64,41,40,"reduceAxes"],[54,74,41,50],[54,75,41,51],[54,77,41,53,"b"],[54,78,41,54],[54,79,41,55,"shape"],[54,84,41,60],[54,85,41,61],[55,8,42,12],[56,8,43,12],[56,15,43,19,"res"],[56,18,43,22],[57,6,44,8],[57,7,44,9],[58,6,45,8],[58,13,45,15],[59,8,45,17,"a"],[59,9,45,18],[59,11,45,20,"derA"],[59,15,45,24],[60,8,45,26,"b"],[60,9,45,27],[60,11,45,29,"derB"],[61,6,45,34],[61,7,45,35],[62,4,46,4],[63,2,47,0],[63,3,47,1],[64,0,47,2],[64,3]],"functionMap":{"names":["<global>","multiplyGradConfig.gradFunc","derA","derB"],"mappings":"AAA;cCyB;qBCG;SDO;qBEC;SFO;KDE"},"hasCjsExports":false},"type":"js/module"}]}