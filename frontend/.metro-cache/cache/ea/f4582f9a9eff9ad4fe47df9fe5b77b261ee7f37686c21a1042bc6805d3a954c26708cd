{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":68,"index":771}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}},{"name":"../cpu_util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":772},"end":{"line":18,"column":47,"index":819}}],"key":"5L5S4GXlh/uJh1MrXQbkPSVOWm4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.resizeNearestNeighbor = resizeNearestNeighbor;\n  Object.defineProperty(exports, \"resizeNearestNeighborConfig\", {\n    enumerable: true,\n    get: function () {\n      return resizeNearestNeighborConfig;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  var _cpu_util = require(_dependencyMap[1], \"../cpu_util\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  function resizeNearestNeighbor(args) {\n    const {\n      inputs,\n      backend,\n      attrs\n    } = args;\n    const {\n      images\n    } = inputs;\n    const {\n      alignCorners,\n      halfPixelCenters,\n      size\n    } = attrs;\n    (0, _cpu_util.assertNotComplex)(images, 'resizeNearestNeighbor');\n    const imagesStrides = _tensorflowTfjsCore.util.computeStrides(images.shape);\n    const [newHeight, newWidth] = size;\n    const [batch, oldHeight, oldWidth, numChannels] = images.shape;\n    const xValues = backend.data.get(images.dataId).values;\n    const output = new Float32Array(batch * newHeight * newWidth * numChannels);\n    const effectiveInputSize = [alignCorners && newHeight > 1 ? oldHeight - 1 : oldHeight, alignCorners && newWidth > 1 ? oldWidth - 1 : oldWidth];\n    const effectiveOutputSize = [alignCorners && newHeight > 1 ? newHeight - 1 : newHeight, alignCorners && newWidth > 1 ? newWidth - 1 : newWidth];\n    const effectiveRowSizeRatio = effectiveInputSize[0] / effectiveOutputSize[0];\n    const effectiveColSizeRatio = effectiveInputSize[1] / effectiveOutputSize[1];\n    let outputOffset = 0;\n    for (let b = 0; b < batch; b++) {\n      const batchOffset = b * imagesStrides[0];\n      for (let r = 0; r < newHeight; r++) {\n        const sourceFracRow = halfPixelCenters ? effectiveRowSizeRatio * (r + 0.5) : effectiveRowSizeRatio * r;\n        let sourceNearestRow = Math.min(oldHeight - 1, alignCorners ? Math.round(sourceFracRow) : Math.floor(sourceFracRow));\n        if (halfPixelCenters) {\n          sourceNearestRow = Math.max(0, sourceNearestRow);\n        }\n        const rowOffset = batchOffset + sourceNearestRow * imagesStrides[1];\n        for (let c = 0; c < newWidth; c++) {\n          const sourceFracCol = halfPixelCenters ? effectiveColSizeRatio * (c + 0.5) : effectiveColSizeRatio * c;\n          let sourceNearestCol = Math.min(oldWidth - 1, alignCorners ? Math.round(sourceFracCol) : Math.floor(sourceFracCol));\n          if (halfPixelCenters) {\n            sourceNearestCol = Math.max(0, sourceNearestCol);\n          }\n          const colOffset = rowOffset + sourceNearestCol * imagesStrides[2];\n          for (let d = 0; d < numChannels; d++) {\n            // Begin shader.\n            // Compute the fractional index of the source.\n            const newVal = xValues[colOffset + d];\n            output[outputOffset++] = newVal;\n          }\n        }\n      }\n    }\n    return backend.makeTensorInfo([batch, newHeight, newWidth, numChannels], images.dtype, output);\n  }\n  const resizeNearestNeighborConfig = {\n    kernelName: _tensorflowTfjsCore.ResizeNearestNeighbor,\n    backendName: 'cpu',\n    kernelFunc: resizeNearestNeighbor\n  };\n});","lineCount":90,"map":[[7,2,19,0,"exports"],[7,9,19,0],[7,10,19,0,"resizeNearestNeighbor"],[7,31,19,0],[7,34,19,0,"resizeNearestNeighbor"],[7,55,19,0],[8,2,72,0,"Object"],[8,8,72,0],[8,9,72,0,"defineProperty"],[8,23,72,0],[8,24,72,0,"exports"],[8,31,72,0],[9,4,72,0,"enumerable"],[9,14,72,0],[10,4,72,0,"get"],[10,7,72,0],[10,18,72,0,"get"],[10,19,72,0],[11,6,72,0],[11,13,72,0,"resizeNearestNeighborConfig"],[11,40,72,0],[12,4,72,0],[13,2,72,0],[14,2,17,0],[14,6,17,0,"_tensorflowTfjsCore"],[14,25,17,0],[14,28,17,0,"require"],[14,35,17,0],[14,36,17,0,"_dependencyMap"],[14,50,17,0],[15,2,18,0],[15,6,18,0,"_cpu_util"],[15,15,18,0],[15,18,18,0,"require"],[15,25,18,0],[15,26,18,0,"_dependencyMap"],[15,40,18,0],[16,2,1,0],[17,0,2,0],[18,0,3,0],[19,0,4,0],[20,0,5,0],[21,0,6,0],[22,0,7,0],[23,0,8,0],[24,0,9,0],[25,0,10,0],[26,0,11,0],[27,0,12,0],[28,0,13,0],[29,0,14,0],[30,0,15,0],[31,0,16,0],[33,2,19,7],[33,11,19,16,"resizeNearestNeighbor"],[33,32,19,37,"resizeNearestNeighbor"],[33,33,19,38,"args"],[33,37,19,42],[33,39,19,44],[34,4,20,4],[34,10,20,10],[35,6,20,12,"inputs"],[35,12,20,18],[36,6,20,20,"backend"],[36,13,20,27],[37,6,20,29,"attrs"],[38,4,20,35],[38,5,20,36],[38,8,20,39,"args"],[38,12,20,43],[39,4,21,4],[39,10,21,10],[40,6,21,12,"images"],[41,4,21,19],[41,5,21,20],[41,8,21,23,"inputs"],[41,14,21,29],[42,4,22,4],[42,10,22,10],[43,6,22,12,"alignCorners"],[43,18,22,24],[44,6,22,26,"halfPixelCenters"],[44,22,22,42],[45,6,22,44,"size"],[46,4,22,49],[46,5,22,50],[46,8,22,53,"attrs"],[46,13,22,58],[47,4,23,4],[47,8,23,4,"assertNotComplex"],[47,17,23,20],[47,18,23,20,"assertNotComplex"],[47,34,23,20],[47,36,23,21,"images"],[47,42,23,27],[47,44,23,29],[47,67,23,52],[47,68,23,53],[48,4,24,4],[48,10,24,10,"imagesStrides"],[48,23,24,23],[48,26,24,26,"util"],[48,45,24,30],[48,46,24,30,"util"],[48,50,24,30],[48,51,24,31,"computeStrides"],[48,65,24,45],[48,66,24,46,"images"],[48,72,24,52],[48,73,24,53,"shape"],[48,78,24,58],[48,79,24,59],[49,4,25,4],[49,10,25,10],[49,11,25,11,"newHeight"],[49,20,25,20],[49,22,25,22,"newWidth"],[49,30,25,30],[49,31,25,31],[49,34,25,34,"size"],[49,38,25,38],[50,4,26,4],[50,10,26,10],[50,11,26,11,"batch"],[50,16,26,16],[50,18,26,18,"oldHeight"],[50,27,26,27],[50,29,26,29,"oldWidth"],[50,37,26,37],[50,39,26,39,"numChannels"],[50,50,26,50],[50,51,26,51],[50,54,26,54,"images"],[50,60,26,60],[50,61,26,61,"shape"],[50,66,26,66],[51,4,27,4],[51,10,27,10,"xValues"],[51,17,27,17],[51,20,27,20,"backend"],[51,27,27,27],[51,28,27,28,"data"],[51,32,27,32],[51,33,27,33,"get"],[51,36,27,36],[51,37,27,37,"images"],[51,43,27,43],[51,44,27,44,"dataId"],[51,50,27,50],[51,51,27,51],[51,52,27,52,"values"],[51,58,27,58],[52,4,28,4],[52,10,28,10,"output"],[52,16,28,16],[52,19,28,19],[52,23,28,23,"Float32Array"],[52,35,28,35],[52,36,28,36,"batch"],[52,41,28,41],[52,44,28,44,"newHeight"],[52,53,28,53],[52,56,28,56,"newWidth"],[52,64,28,64],[52,67,28,67,"numChannels"],[52,78,28,78],[52,79,28,79],[53,4,29,4],[53,10,29,10,"effectiveInputSize"],[53,28,29,28],[53,31,29,31],[53,32,30,9,"alignCorners"],[53,44,30,21],[53,48,30,25,"newHeight"],[53,57,30,34],[53,60,30,37],[53,61,30,38],[53,64,30,42,"oldHeight"],[53,73,30,51],[53,76,30,54],[53,77,30,55],[53,80,30,58,"oldHeight"],[53,89,30,67],[53,91,31,9,"alignCorners"],[53,103,31,21],[53,107,31,25,"newWidth"],[53,115,31,33],[53,118,31,36],[53,119,31,37],[53,122,31,41,"oldWidth"],[53,130,31,49],[53,133,31,52],[53,134,31,53],[53,137,31,56,"oldWidth"],[53,145,31,64],[53,146,32,5],[54,4,33,4],[54,10,33,10,"effectiveOutputSize"],[54,29,33,29],[54,32,33,32],[54,33,34,9,"alignCorners"],[54,45,34,21],[54,49,34,25,"newHeight"],[54,58,34,34],[54,61,34,37],[54,62,34,38],[54,65,34,42,"newHeight"],[54,74,34,51],[54,77,34,54],[54,78,34,55],[54,81,34,58,"newHeight"],[54,90,34,67],[54,92,35,9,"alignCorners"],[54,104,35,21],[54,108,35,25,"newWidth"],[54,116,35,33],[54,119,35,36],[54,120,35,37],[54,123,35,41,"newWidth"],[54,131,35,49],[54,134,35,52],[54,135,35,53],[54,138,35,56,"newWidth"],[54,146,35,64],[54,147,36,5],[55,4,37,4],[55,10,37,10,"effectiveRowSizeRatio"],[55,31,37,31],[55,34,37,34,"effectiveInputSize"],[55,52,37,52],[55,53,37,53],[55,54,37,54],[55,55,37,55],[55,58,37,58,"effectiveOutputSize"],[55,77,37,77],[55,78,37,78],[55,79,37,79],[55,80,37,80],[56,4,38,4],[56,10,38,10,"effectiveColSizeRatio"],[56,31,38,31],[56,34,38,34,"effectiveInputSize"],[56,52,38,52],[56,53,38,53],[56,54,38,54],[56,55,38,55],[56,58,38,58,"effectiveOutputSize"],[56,77,38,77],[56,78,38,78],[56,79,38,79],[56,80,38,80],[57,4,39,4],[57,8,39,8,"outputOffset"],[57,20,39,20],[57,23,39,23],[57,24,39,24],[58,4,40,4],[58,9,40,9],[58,13,40,13,"b"],[58,14,40,14],[58,17,40,17],[58,18,40,18],[58,20,40,20,"b"],[58,21,40,21],[58,24,40,24,"batch"],[58,29,40,29],[58,31,40,31,"b"],[58,32,40,32],[58,34,40,34],[58,36,40,36],[59,6,41,8],[59,12,41,14,"batchOffset"],[59,23,41,25],[59,26,41,28,"b"],[59,27,41,29],[59,30,41,32,"imagesStrides"],[59,43,41,45],[59,44,41,46],[59,45,41,47],[59,46,41,48],[60,6,42,8],[60,11,42,13],[60,15,42,17,"r"],[60,16,42,18],[60,19,42,21],[60,20,42,22],[60,22,42,24,"r"],[60,23,42,25],[60,26,42,28,"newHeight"],[60,35,42,37],[60,37,42,39,"r"],[60,38,42,40],[60,40,42,42],[60,42,42,44],[61,8,43,12],[61,14,43,18,"sourceFracRow"],[61,27,43,31],[61,30,43,34,"halfPixelCenters"],[61,46,43,50],[61,49,44,16,"effectiveRowSizeRatio"],[61,70,44,37],[61,74,44,41,"r"],[61,75,44,42],[61,78,44,45],[61,81,44,48],[61,82,44,49],[61,85,45,16,"effectiveRowSizeRatio"],[61,106,45,37],[61,109,45,40,"r"],[61,110,45,41],[62,8,46,12],[62,12,46,16,"sourceNearestRow"],[62,28,46,32],[62,31,46,35,"Math"],[62,35,46,39],[62,36,46,40,"min"],[62,39,46,43],[62,40,46,44,"oldHeight"],[62,49,46,53],[62,52,46,56],[62,53,46,57],[62,55,46,59,"alignCorners"],[62,67,46,71],[62,70,46,74,"Math"],[62,74,46,78],[62,75,46,79,"round"],[62,80,46,84],[62,81,46,85,"sourceFracRow"],[62,94,46,98],[62,95,46,99],[62,98,46,102,"Math"],[62,102,46,106],[62,103,46,107,"floor"],[62,108,46,112],[62,109,46,113,"sourceFracRow"],[62,122,46,126],[62,123,46,127],[62,124,46,128],[63,8,47,12],[63,12,47,16,"halfPixelCenters"],[63,28,47,32],[63,30,47,34],[64,10,48,16,"sourceNearestRow"],[64,26,48,32],[64,29,48,35,"Math"],[64,33,48,39],[64,34,48,40,"max"],[64,37,48,43],[64,38,48,44],[64,39,48,45],[64,41,48,47,"sourceNearestRow"],[64,57,48,63],[64,58,48,64],[65,8,49,12],[66,8,50,12],[66,14,50,18,"rowOffset"],[66,23,50,27],[66,26,50,30,"batchOffset"],[66,37,50,41],[66,40,50,44,"sourceNearestRow"],[66,56,50,60],[66,59,50,63,"imagesStrides"],[66,72,50,76],[66,73,50,77],[66,74,50,78],[66,75,50,79],[67,8,51,12],[67,13,51,17],[67,17,51,21,"c"],[67,18,51,22],[67,21,51,25],[67,22,51,26],[67,24,51,28,"c"],[67,25,51,29],[67,28,51,32,"newWidth"],[67,36,51,40],[67,38,51,42,"c"],[67,39,51,43],[67,41,51,45],[67,43,51,47],[68,10,52,16],[68,16,52,22,"sourceFracCol"],[68,29,52,35],[68,32,52,38,"halfPixelCenters"],[68,48,52,54],[68,51,53,20,"effectiveColSizeRatio"],[68,72,53,41],[68,76,53,45,"c"],[68,77,53,46],[68,80,53,49],[68,83,53,52],[68,84,53,53],[68,87,54,20,"effectiveColSizeRatio"],[68,108,54,41],[68,111,54,44,"c"],[68,112,54,45],[69,10,55,16],[69,14,55,20,"sourceNearestCol"],[69,30,55,36],[69,33,55,39,"Math"],[69,37,55,43],[69,38,55,44,"min"],[69,41,55,47],[69,42,55,48,"oldWidth"],[69,50,55,56],[69,53,55,59],[69,54,55,60],[69,56,55,62,"alignCorners"],[69,68,55,74],[69,71,55,77,"Math"],[69,75,55,81],[69,76,55,82,"round"],[69,81,55,87],[69,82,55,88,"sourceFracCol"],[69,95,55,101],[69,96,55,102],[69,99,56,20,"Math"],[69,103,56,24],[69,104,56,25,"floor"],[69,109,56,30],[69,110,56,31,"sourceFracCol"],[69,123,56,44],[69,124,56,45],[69,125,56,46],[70,10,57,16],[70,14,57,20,"halfPixelCenters"],[70,30,57,36],[70,32,57,38],[71,12,58,20,"sourceNearestCol"],[71,28,58,36],[71,31,58,39,"Math"],[71,35,58,43],[71,36,58,44,"max"],[71,39,58,47],[71,40,58,48],[71,41,58,49],[71,43,58,51,"sourceNearestCol"],[71,59,58,67],[71,60,58,68],[72,10,59,16],[73,10,60,16],[73,16,60,22,"colOffset"],[73,25,60,31],[73,28,60,34,"rowOffset"],[73,37,60,43],[73,40,60,46,"sourceNearestCol"],[73,56,60,62],[73,59,60,65,"imagesStrides"],[73,72,60,78],[73,73,60,79],[73,74,60,80],[73,75,60,81],[74,10,61,16],[74,15,61,21],[74,19,61,25,"d"],[74,20,61,26],[74,23,61,29],[74,24,61,30],[74,26,61,32,"d"],[74,27,61,33],[74,30,61,36,"numChannels"],[74,41,61,47],[74,43,61,49,"d"],[74,44,61,50],[74,46,61,52],[74,48,61,54],[75,12,62,20],[76,12,63,20],[77,12,64,20],[77,18,64,26,"newVal"],[77,24,64,32],[77,27,64,35,"xValues"],[77,34,64,42],[77,35,64,43,"colOffset"],[77,44,64,52],[77,47,64,55,"d"],[77,48,64,56],[77,49,64,57],[78,12,65,20,"output"],[78,18,65,26],[78,19,65,27,"outputOffset"],[78,31,65,39],[78,33,65,41],[78,34,65,42],[78,37,65,45,"newVal"],[78,43,65,51],[79,10,66,16],[80,8,67,12],[81,6,68,8],[82,4,69,4],[83,4,70,4],[83,11,70,11,"backend"],[83,18,70,18],[83,19,70,19,"makeTensorInfo"],[83,33,70,33],[83,34,70,34],[83,35,70,35,"batch"],[83,40,70,40],[83,42,70,42,"newHeight"],[83,51,70,51],[83,53,70,53,"newWidth"],[83,61,70,61],[83,63,70,63,"numChannels"],[83,74,70,74],[83,75,70,75],[83,77,70,77,"images"],[83,83,70,83],[83,84,70,84,"dtype"],[83,89,70,89],[83,91,70,91,"output"],[83,97,70,97],[83,98,70,98],[84,2,71,0],[85,2,72,7],[85,8,72,13,"resizeNearestNeighborConfig"],[85,35,72,40],[85,38,72,43],[86,4,73,4,"kernelName"],[86,14,73,14],[86,16,73,16,"ResizeNearestNeighbor"],[86,35,73,37],[86,36,73,37,"ResizeNearestNeighbor"],[86,57,73,37],[87,4,74,4,"backendName"],[87,15,74,15],[87,17,74,17],[87,22,74,22],[88,4,75,4,"kernelFunc"],[88,14,75,14],[88,16,75,16,"resizeNearestNeighbor"],[89,2,76,0],[89,3,76,1],[90,0,76,2],[90,3]],"functionMap":{"names":["<global>","resizeNearestNeighbor"],"mappings":"AAA;OCkB;CDoD"},"hasCjsExports":false},"type":"js/module"}]}