{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":74,"index":777}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}},{"name":"../scatter_gpu","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":778},"end":{"line":18,"column":48,"index":826}}],"key":"GRK5YsbRkKChK693sWTEUrzdWBE=","exportNames":["*"],"imports":1}},{"name":"./Reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":827},"end":{"line":19,"column":36,"index":863}}],"key":"EUWK+oKi/AwokPOQ1jng5DYfQSc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.tensorScatterUpdate = tensorScatterUpdate;\n  Object.defineProperty(exports, \"tensorScatterUpdateConfig\", {\n    enumerable: true,\n    get: function () {\n      return tensorScatterUpdateConfig;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  var _scatter_gpu = require(_dependencyMap[1], \"../scatter_gpu\");\n  var _Reshape = require(_dependencyMap[2], \"./Reshape\");\n  /**\n   * @license\n   * Copyright 2022 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  function tensorScatterUpdate(args) {\n    const {\n      inputs,\n      backend,\n      attrs\n    } = args;\n    const {\n      tensor,\n      indices,\n      updates\n    } = inputs;\n    const {} = attrs;\n    const {\n      sliceRank,\n      numUpdates,\n      sliceSize,\n      strides,\n      outputSize\n    } = _tensorflowTfjsCore.backend_util.calculateShapes(updates, indices, tensor.shape);\n    const flattenShape = [outputSize / sliceSize, sliceSize];\n    if (outputSize === 0) {\n      return backend.makeTensorInfo(tensor.shape, indices.dtype);\n    }\n    const flattenIndices = (0, _Reshape.reshape)({\n      inputs: {\n        x: indices\n      },\n      backend,\n      attrs: {\n        shape: [numUpdates, sliceRank]\n      }\n    });\n    const flattenX = (0, _Reshape.reshape)({\n      inputs: {\n        x: updates\n      },\n      backend,\n      attrs: {\n        shape: [numUpdates, sliceSize]\n      }\n    });\n    const flattenTensor = (0, _Reshape.reshape)({\n      inputs: {\n        x: tensor\n      },\n      backend,\n      attrs: {\n        shape: flattenShape\n      }\n    });\n    const program = new _scatter_gpu.ScatterProgram(numUpdates, sliceRank, flattenIndices.shape.length, flattenX.shape.length, strides, flattenShape, false, true);\n    const res = backend.runWebGLProgram(program, [flattenX, flattenIndices, flattenTensor], flattenTensor.dtype);\n    const reshaped = (0, _Reshape.reshape)({\n      inputs: {\n        x: res\n      },\n      backend,\n      attrs: {\n        shape: tensor.shape\n      }\n    });\n    backend.disposeIntermediateTensorInfo(flattenIndices);\n    backend.disposeIntermediateTensorInfo(flattenX);\n    backend.disposeIntermediateTensorInfo(flattenTensor);\n    backend.disposeIntermediateTensorInfo(res);\n    return reshaped;\n  }\n  const tensorScatterUpdateConfig = {\n    kernelName: _tensorflowTfjsCore.TensorScatterUpdate,\n    backendName: 'webgl',\n    kernelFunc: tensorScatterUpdate\n  };\n});","lineCount":106,"map":[[7,2,20,0,"exports"],[7,9,20,0],[7,10,20,0,"tensorScatterUpdate"],[7,29,20,0],[7,32,20,0,"tensorScatterUpdate"],[7,51,20,0],[8,2,41,0,"Object"],[8,8,41,0],[8,9,41,0,"defineProperty"],[8,23,41,0],[8,24,41,0,"exports"],[8,31,41,0],[9,4,41,0,"enumerable"],[9,14,41,0],[10,4,41,0,"get"],[10,7,41,0],[10,18,41,0,"get"],[10,19,41,0],[11,6,41,0],[11,13,41,0,"tensorScatterUpdateConfig"],[11,38,41,0],[12,4,41,0],[13,2,41,0],[14,2,17,0],[14,6,17,0,"_tensorflowTfjsCore"],[14,25,17,0],[14,28,17,0,"require"],[14,35,17,0],[14,36,17,0,"_dependencyMap"],[14,50,17,0],[15,2,18,0],[15,6,18,0,"_scatter_gpu"],[15,18,18,0],[15,21,18,0,"require"],[15,28,18,0],[15,29,18,0,"_dependencyMap"],[15,43,18,0],[16,2,19,0],[16,6,19,0,"_Reshape"],[16,14,19,0],[16,17,19,0,"require"],[16,24,19,0],[16,25,19,0,"_dependencyMap"],[16,39,19,0],[17,2,1,0],[18,0,2,0],[19,0,3,0],[20,0,4,0],[21,0,5,0],[22,0,6,0],[23,0,7,0],[24,0,8,0],[25,0,9,0],[26,0,10,0],[27,0,11,0],[28,0,12,0],[29,0,13,0],[30,0,14,0],[31,0,15,0],[32,0,16,0],[34,2,20,7],[34,11,20,16,"tensorScatterUpdate"],[34,30,20,35,"tensorScatterUpdate"],[34,31,20,36,"args"],[34,35,20,40],[34,37,20,42],[35,4,21,4],[35,10,21,10],[36,6,21,12,"inputs"],[36,12,21,18],[37,6,21,20,"backend"],[37,13,21,27],[38,6,21,29,"attrs"],[39,4,21,35],[39,5,21,36],[39,8,21,39,"args"],[39,12,21,43],[40,4,22,4],[40,10,22,10],[41,6,22,12,"tensor"],[41,12,22,18],[42,6,22,20,"indices"],[42,13,22,27],[43,6,22,29,"updates"],[44,4,22,37],[44,5,22,38],[44,8,22,41,"inputs"],[44,14,22,47],[45,4,23,4],[45,10,23,10],[45,11,23,11],[45,12,23,12],[45,15,23,15,"attrs"],[45,20,23,20],[46,4,24,4],[46,10,24,10],[47,6,24,12,"sliceRank"],[47,15,24,21],[48,6,24,23,"numUpdates"],[48,16,24,33],[49,6,24,35,"sliceSize"],[49,15,24,44],[50,6,24,46,"strides"],[50,13,24,53],[51,6,24,55,"outputSize"],[52,4,24,66],[52,5,24,67],[52,8,24,70,"backend_util"],[52,27,24,82],[52,28,24,82,"backend_util"],[52,40,24,82],[52,41,24,83,"calculateShapes"],[52,56,24,98],[52,57,24,99,"updates"],[52,64,24,106],[52,66,24,108,"indices"],[52,73,24,115],[52,75,24,117,"tensor"],[52,81,24,123],[52,82,24,124,"shape"],[52,87,24,129],[52,88,24,130],[53,4,25,4],[53,10,25,10,"flattenShape"],[53,22,25,22],[53,25,25,25],[53,26,25,26,"outputSize"],[53,36,25,36],[53,39,25,39,"sliceSize"],[53,48,25,48],[53,50,25,50,"sliceSize"],[53,59,25,59],[53,60,25,60],[54,4,26,4],[54,8,26,8,"outputSize"],[54,18,26,18],[54,23,26,23],[54,24,26,24],[54,26,26,26],[55,6,27,8],[55,13,27,15,"backend"],[55,20,27,22],[55,21,27,23,"makeTensorInfo"],[55,35,27,37],[55,36,27,38,"tensor"],[55,42,27,44],[55,43,27,45,"shape"],[55,48,27,50],[55,50,27,52,"indices"],[55,57,27,59],[55,58,27,60,"dtype"],[55,63,27,65],[55,64,27,66],[56,4,28,4],[57,4,29,4],[57,10,29,10,"flattenIndices"],[57,24,29,24],[57,27,29,27],[57,31,29,27,"reshape"],[57,39,29,34],[57,40,29,34,"reshape"],[57,47,29,34],[57,49,29,35],[58,6,29,37,"inputs"],[58,12,29,43],[58,14,29,45],[59,8,29,47,"x"],[59,9,29,48],[59,11,29,50,"indices"],[60,6,29,58],[60,7,29,59],[61,6,29,61,"backend"],[61,13,29,68],[62,6,29,70,"attrs"],[62,11,29,75],[62,13,29,77],[63,8,29,79,"shape"],[63,13,29,84],[63,15,29,86],[63,16,29,87,"numUpdates"],[63,26,29,97],[63,28,29,99,"sliceRank"],[63,37,29,108],[64,6,29,110],[65,4,29,112],[65,5,29,113],[65,6,29,114],[66,4,30,4],[66,10,30,10,"flattenX"],[66,18,30,18],[66,21,30,21],[66,25,30,21,"reshape"],[66,33,30,28],[66,34,30,28,"reshape"],[66,41,30,28],[66,43,30,29],[67,6,30,31,"inputs"],[67,12,30,37],[67,14,30,39],[68,8,30,41,"x"],[68,9,30,42],[68,11,30,44,"updates"],[69,6,30,52],[69,7,30,53],[70,6,30,55,"backend"],[70,13,30,62],[71,6,30,64,"attrs"],[71,11,30,69],[71,13,30,71],[72,8,30,73,"shape"],[72,13,30,78],[72,15,30,80],[72,16,30,81,"numUpdates"],[72,26,30,91],[72,28,30,93,"sliceSize"],[72,37,30,102],[73,6,30,104],[74,4,30,106],[74,5,30,107],[74,6,30,108],[75,4,31,4],[75,10,31,10,"flattenTensor"],[75,23,31,23],[75,26,31,26],[75,30,31,26,"reshape"],[75,38,31,33],[75,39,31,33,"reshape"],[75,46,31,33],[75,48,31,34],[76,6,31,36,"inputs"],[76,12,31,42],[76,14,31,44],[77,8,31,46,"x"],[77,9,31,47],[77,11,31,49,"tensor"],[78,6,31,56],[78,7,31,57],[79,6,31,59,"backend"],[79,13,31,66],[80,6,31,68,"attrs"],[80,11,31,73],[80,13,31,75],[81,8,31,77,"shape"],[81,13,31,82],[81,15,31,84,"flattenShape"],[82,6,31,97],[83,4,31,99],[83,5,31,100],[83,6,31,101],[84,4,32,4],[84,10,32,10,"program"],[84,17,32,17],[84,20,32,20],[84,24,32,24,"ScatterProgram"],[84,36,32,38],[84,37,32,38,"ScatterProgram"],[84,51,32,38],[84,52,32,39,"numUpdates"],[84,62,32,49],[84,64,32,51,"sliceRank"],[84,73,32,60],[84,75,32,62,"flattenIndices"],[84,89,32,76],[84,90,32,77,"shape"],[84,95,32,82],[84,96,32,83,"length"],[84,102,32,89],[84,104,32,91,"flattenX"],[84,112,32,99],[84,113,32,100,"shape"],[84,118,32,105],[84,119,32,106,"length"],[84,125,32,112],[84,127,32,114,"strides"],[84,134,32,121],[84,136,32,123,"flattenShape"],[84,148,32,135],[84,150,32,137],[84,155,32,142],[84,157,32,144],[84,161,32,148],[84,162,32,149],[85,4,33,4],[85,10,33,10,"res"],[85,13,33,13],[85,16,33,16,"backend"],[85,23,33,23],[85,24,33,24,"runWebGLProgram"],[85,39,33,39],[85,40,33,40,"program"],[85,47,33,47],[85,49,33,49],[85,50,33,50,"flattenX"],[85,58,33,58],[85,60,33,60,"flattenIndices"],[85,74,33,74],[85,76,33,76,"flattenTensor"],[85,89,33,89],[85,90,33,90],[85,92,33,92,"flattenTensor"],[85,105,33,105],[85,106,33,106,"dtype"],[85,111,33,111],[85,112,33,112],[86,4,34,4],[86,10,34,10,"reshaped"],[86,18,34,18],[86,21,34,21],[86,25,34,21,"reshape"],[86,33,34,28],[86,34,34,28,"reshape"],[86,41,34,28],[86,43,34,29],[87,6,34,31,"inputs"],[87,12,34,37],[87,14,34,39],[88,8,34,41,"x"],[88,9,34,42],[88,11,34,44,"res"],[89,6,34,48],[89,7,34,49],[90,6,34,51,"backend"],[90,13,34,58],[91,6,34,60,"attrs"],[91,11,34,65],[91,13,34,67],[92,8,34,69,"shape"],[92,13,34,74],[92,15,34,76,"tensor"],[92,21,34,82],[92,22,34,83,"shape"],[93,6,34,89],[94,4,34,91],[94,5,34,92],[94,6,34,93],[95,4,35,4,"backend"],[95,11,35,11],[95,12,35,12,"disposeIntermediateTensorInfo"],[95,41,35,41],[95,42,35,42,"flattenIndices"],[95,56,35,56],[95,57,35,57],[96,4,36,4,"backend"],[96,11,36,11],[96,12,36,12,"disposeIntermediateTensorInfo"],[96,41,36,41],[96,42,36,42,"flattenX"],[96,50,36,50],[96,51,36,51],[97,4,37,4,"backend"],[97,11,37,11],[97,12,37,12,"disposeIntermediateTensorInfo"],[97,41,37,41],[97,42,37,42,"flattenTensor"],[97,55,37,55],[97,56,37,56],[98,4,38,4,"backend"],[98,11,38,11],[98,12,38,12,"disposeIntermediateTensorInfo"],[98,41,38,41],[98,42,38,42,"res"],[98,45,38,45],[98,46,38,46],[99,4,39,4],[99,11,39,11,"reshaped"],[99,19,39,19],[100,2,40,0],[101,2,41,7],[101,8,41,13,"tensorScatterUpdateConfig"],[101,33,41,38],[101,36,41,41],[102,4,42,4,"kernelName"],[102,14,42,14],[102,16,42,16,"TensorScatterUpdate"],[102,35,42,35],[102,36,42,35,"TensorScatterUpdate"],[102,55,42,35],[103,4,43,4,"backendName"],[103,15,43,15],[103,17,43,17],[103,24,43,24],[104,4,44,4,"kernelFunc"],[104,14,44,14],[104,16,44,16,"tensorScatterUpdate"],[105,2,45,0],[105,3,45,1],[106,0,45,2],[106,3]],"functionMap":{"names":["<global>","tensorScatterUpdate"],"mappings":"AAA;OCmB;CDoB"},"hasCjsExports":false},"type":"js/module"}]}