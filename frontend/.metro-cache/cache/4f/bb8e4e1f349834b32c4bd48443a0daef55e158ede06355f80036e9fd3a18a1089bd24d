{"dependencies":[{"name":"../tensor_util_env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":53,"index":53}}],"key":"UCKDOr/oOGi3nbD26ZhyAVW61qk=","exportNames":["*"],"imports":1}},{"name":"../util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":54},"end":{"line":2,"column":32,"index":86}}],"key":"DTmef1GE5grNQfsvpIzpBlINy9c=","exportNames":["*"],"imports":1}},{"name":"./conv2d","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":87},"end":{"line":3,"column":34,"index":121}}],"key":"oqJbny/3Y1K0NqrYfJ1Kp/oE/kg=","exportNames":["*"],"imports":1}},{"name":"./conv_util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":122},"end":{"line":4,"column":41,"index":163}}],"key":"INQe0zbIADI7uIipkS0WmYFlLZ8=","exportNames":["*"],"imports":1}},{"name":"./operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":164},"end":{"line":5,"column":33,"index":197}}],"key":"lmmEAb6oR3TWnrsrETceKUovfkM=","exportNames":["*"],"imports":1}},{"name":"./reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":198},"end":{"line":6,"column":36,"index":234}}],"key":"dz8GCsFShMGnHX1Wj7bBySjBnSE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"conv1d\", {\n    enumerable: true,\n    get: function () {\n      return conv1d;\n    }\n  });\n  var _tensor_util_env = require(_dependencyMap[0], \"../tensor_util_env\");\n  var _util = require(_dependencyMap[1], \"../util\");\n  var util = _interopNamespace(_util);\n  var _conv2d = require(_dependencyMap[2], \"./conv2d\");\n  var _conv_util = require(_dependencyMap[3], \"./conv_util\");\n  var conv_util = _interopNamespace(_conv_util);\n  var _operation = require(_dependencyMap[4], \"./operation\");\n  var _reshape = require(_dependencyMap[5], \"./reshape\");\n  /**\n   * Computes a 1D convolution over the input x.\n   *\n   * @param x The input tensor, of rank 3 or rank 2, of shape\n   *     `[batch, width, inChannels]`. If rank 2, batch of 1 is assumed.\n   * @param filter The filter, rank 3, of shape\n   *     `[filterWidth, inDepth, outDepth]`.\n   * @param stride The number of entries by which the filter is moved right at\n   *     each step.\n   * @param pad The type of padding algorithm.\n   *    - `same` and stride 1: output will be of same size as input,\n   *       regardless of filter size.\n   *    - `valid`: output will be smaller than input if filter is larger\n   *       than 1x1.\n   *   - For more info, see this guide:\n   *     [https://www.tensorflow.org/api_docs/python/tf/nn/convolution](\n   *          https://www.tensorflow.org/api_docs/python/tf/nn/convolution)\n   * @param dataFormat An optional string from \"NWC\", \"NCW\". Defaults to \"NWC\",\n   *     the data is stored in the order of [batch, in_width, in_channels]. Only\n   *     \"NWC\" is currently supported.\n   * @param dilation The dilation rate in which we sample input values in\n   *     atrous convolution. Defaults to `1`. If it is greater than 1, then\n   *     stride must be `1`.\n   * @param dimRoundingMode A string from: 'ceil', 'round', 'floor'. If none is\n   *     provided, it will default to truncate.\n   *\n   * @doc {heading: 'Operations', subheading: 'Convolution'}\n   */\n  function conv1d_(x, filter, stride, pad, dataFormat = 'NWC', dilation = 1, dimRoundingMode) {\n    const $x = (0, _tensor_util_env.convertToTensor)(x, 'x', 'conv1d');\n    const $filter = (0, _tensor_util_env.convertToTensor)(filter, 'filter', 'conv1d');\n    let x3D = $x;\n    let reshapedTo3D = false;\n    if ($x.rank === 2) {\n      reshapedTo3D = true;\n      x3D = (0, _reshape.reshape)($x, [1, $x.shape[0], $x.shape[1]]);\n    }\n    util.assert(x3D.rank === 3, () => `Error in conv1d: input must be rank 3, but got rank ${x3D.rank}.`);\n    util.assert($filter.rank === 3, () => `Error in conv1d: filter must be rank 3, but got rank ` + `${$filter.rank}.`);\n    conv_util.checkPadOnDimRoundingMode('conv1d', pad, dimRoundingMode);\n    util.assert(x3D.shape[2] === $filter.shape[1], () => `Error in conv1d: depth of input (${x3D.shape[2]}) must match ` + `input depth for filter ${$filter.shape[1]}.`);\n    util.assert(conv_util.eitherStridesOrDilationsAreOne(stride, dilation), () => 'Error in conv1D: Either stride or dilation must be 1. ' + `Got stride ${stride} and dilation '${dilation}'`);\n    util.assert(conv_util.stridesOrDilationsArePositive(dilation), () => 'Error in conv1D: Dilated rates should be larger than 0.');\n    util.assert(conv_util.stridesOrDilationsArePositive(stride), () => 'Error in conv1D: Stride should be larger than 0.');\n    util.assert(dataFormat === 'NWC', () => `Error in conv1d: got dataFormat of ${dataFormat} but only NWC is currently supported.`);\n    const filter4D = (0, _reshape.reshape)($filter, [1, $filter.shape[0], $filter.shape[1], $filter.shape[2]]);\n    const input4D = (0, _reshape.reshape)(x3D, [x3D.shape[0], 1, x3D.shape[1], x3D.shape[2]]);\n    const strides = [1, stride];\n    const dilations = [1, dilation];\n    const conv2dDataFormat = 'NHWC';\n    const res = (0, _conv2d.conv2d)(input4D, filter4D, strides, pad, conv2dDataFormat, dilations, dimRoundingMode);\n    if (reshapedTo3D) {\n      return (0, _reshape.reshape)(res, [res.shape[2], res.shape[3]]);\n    }\n    return (0, _reshape.reshape)(res, [res.shape[0], res.shape[2], res.shape[3]]);\n  }\n  const conv1d = /* @__PURE__ */(0, _operation.op)({\n    conv1d_\n  });\n});","lineCount":95,"map":[[22,2,66,0,"Object"],[22,8,66,0],[22,9,66,0,"defineProperty"],[22,23,66,0],[22,24,66,0,"exports"],[22,31,66,0],[23,4,66,0,"enumerable"],[23,14,66,0],[24,4,66,0,"get"],[24,7,66,0],[24,18,66,0,"get"],[24,19,66,0],[25,6,66,0],[25,13,66,0,"conv1d"],[25,19,66,0],[26,4,66,0],[27,2,66,0],[28,2,1,0],[28,6,1,0,"_tensor_util_env"],[28,22,1,0],[28,25,1,0,"require"],[28,32,1,0],[28,33,1,0,"_dependencyMap"],[28,47,1,0],[29,2,2,0],[29,6,2,0,"_util"],[29,11,2,0],[29,14,2,0,"require"],[29,21,2,0],[29,22,2,0,"_dependencyMap"],[29,36,2,0],[30,2,2,0],[30,6,2,0,"util"],[30,10,2,0],[30,13,2,0,"_interopNamespace"],[30,30,2,0],[30,31,2,0,"_util"],[30,36,2,0],[31,2,3,0],[31,6,3,0,"_conv2d"],[31,13,3,0],[31,16,3,0,"require"],[31,23,3,0],[31,24,3,0,"_dependencyMap"],[31,38,3,0],[32,2,4,0],[32,6,4,0,"_conv_util"],[32,16,4,0],[32,19,4,0,"require"],[32,26,4,0],[32,27,4,0,"_dependencyMap"],[32,41,4,0],[33,2,4,0],[33,6,4,0,"conv_util"],[33,15,4,0],[33,18,4,0,"_interopNamespace"],[33,35,4,0],[33,36,4,0,"_conv_util"],[33,46,4,0],[34,2,5,0],[34,6,5,0,"_operation"],[34,16,5,0],[34,19,5,0,"require"],[34,26,5,0],[34,27,5,0,"_dependencyMap"],[34,41,5,0],[35,2,6,0],[35,6,6,0,"_reshape"],[35,14,6,0],[35,17,6,0,"require"],[35,24,6,0],[35,25,6,0,"_dependencyMap"],[35,39,6,0],[36,2,7,0],[37,0,8,0],[38,0,9,0],[39,0,10,0],[40,0,11,0],[41,0,12,0],[42,0,13,0],[43,0,14,0],[44,0,15,0],[45,0,16,0],[46,0,17,0],[47,0,18,0],[48,0,19,0],[49,0,20,0],[50,0,21,0],[51,0,22,0],[52,0,23,0],[53,0,24,0],[54,0,25,0],[55,0,26,0],[56,0,27,0],[57,0,28,0],[58,0,29,0],[59,0,30,0],[60,0,31,0],[61,0,32,0],[62,0,33,0],[63,0,34,0],[64,2,35,0],[64,11,35,9,"conv1d_"],[64,18,35,16,"conv1d_"],[64,19,35,17,"x"],[64,20,35,18],[64,22,35,20,"filter"],[64,28,35,26],[64,30,35,28,"stride"],[64,36,35,34],[64,38,35,36,"pad"],[64,41,35,39],[64,43,35,41,"dataFormat"],[64,53,35,51],[64,56,35,54],[64,61,35,59],[64,63,35,61,"dilation"],[64,71,35,69],[64,74,35,72],[64,75,35,73],[64,77,35,75,"dimRoundingMode"],[64,92,35,90],[64,94,35,92],[65,4,36,4],[65,10,36,10,"$x"],[65,12,36,12],[65,15,36,15],[65,19,36,15,"convertToTensor"],[65,35,36,30],[65,36,36,30,"convertToTensor"],[65,51,36,30],[65,53,36,31,"x"],[65,54,36,32],[65,56,36,34],[65,59,36,37],[65,61,36,39],[65,69,36,47],[65,70,36,48],[66,4,37,4],[66,10,37,10,"$filter"],[66,17,37,17],[66,20,37,20],[66,24,37,20,"convertToTensor"],[66,40,37,35],[66,41,37,35,"convertToTensor"],[66,56,37,35],[66,58,37,36,"filter"],[66,64,37,42],[66,66,37,44],[66,74,37,52],[66,76,37,54],[66,84,37,62],[66,85,37,63],[67,4,38,4],[67,8,38,8,"x3D"],[67,11,38,11],[67,14,38,14,"$x"],[67,16,38,16],[68,4,39,4],[68,8,39,8,"reshapedTo3D"],[68,20,39,20],[68,23,39,23],[68,28,39,28],[69,4,40,4],[69,8,40,8,"$x"],[69,10,40,10],[69,11,40,11,"rank"],[69,15,40,15],[69,20,40,20],[69,21,40,21],[69,23,40,23],[70,6,41,8,"reshapedTo3D"],[70,18,41,20],[70,21,41,23],[70,25,41,27],[71,6,42,8,"x3D"],[71,9,42,11],[71,12,42,14],[71,16,42,14,"reshape"],[71,24,42,21],[71,25,42,21,"reshape"],[71,32,42,21],[71,34,42,22,"$x"],[71,36,42,24],[71,38,42,26],[71,39,42,27],[71,40,42,28],[71,42,42,30,"$x"],[71,44,42,32],[71,45,42,33,"shape"],[71,50,42,38],[71,51,42,39],[71,52,42,40],[71,53,42,41],[71,55,42,43,"$x"],[71,57,42,45],[71,58,42,46,"shape"],[71,63,42,51],[71,64,42,52],[71,65,42,53],[71,66,42,54],[71,67,42,55],[71,68,42,56],[72,4,43,4],[73,4,44,4,"util"],[73,8,44,8],[73,9,44,9,"assert"],[73,15,44,15],[73,16,44,16,"x3D"],[73,19,44,19],[73,20,44,20,"rank"],[73,24,44,24],[73,29,44,29],[73,30,44,30],[73,32,44,32],[73,38,44,38],[73,93,44,93,"x3D"],[73,96,44,96],[73,97,44,97,"rank"],[73,101,44,101],[73,104,44,104],[73,105,44,105],[74,4,45,4,"util"],[74,8,45,8],[74,9,45,9,"assert"],[74,15,45,15],[74,16,45,16,"$filter"],[74,23,45,23],[74,24,45,24,"rank"],[74,28,45,28],[74,33,45,33],[74,34,45,34],[74,36,45,36],[74,42,45,42],[74,97,45,97],[74,100,46,8],[74,103,46,11,"$filter"],[74,110,46,18],[74,111,46,19,"rank"],[74,115,46,23],[74,118,46,26],[74,119,46,27],[75,4,47,4,"conv_util"],[75,13,47,13],[75,14,47,14,"checkPadOnDimRoundingMode"],[75,39,47,39],[75,40,47,40],[75,48,47,48],[75,50,47,50,"pad"],[75,53,47,53],[75,55,47,55,"dimRoundingMode"],[75,70,47,70],[75,71,47,71],[76,4,48,4,"util"],[76,8,48,8],[76,9,48,9,"assert"],[76,15,48,15],[76,16,48,16,"x3D"],[76,19,48,19],[76,20,48,20,"shape"],[76,25,48,25],[76,26,48,26],[76,27,48,27],[76,28,48,28],[76,33,48,33,"$filter"],[76,40,48,40],[76,41,48,41,"shape"],[76,46,48,46],[76,47,48,47],[76,48,48,48],[76,49,48,49],[76,51,48,51],[76,57,48,57],[76,93,48,93,"x3D"],[76,96,48,96],[76,97,48,97,"shape"],[76,102,48,102],[76,103,48,103],[76,104,48,104],[76,105,48,105],[76,120,48,120],[76,123,49,8],[76,149,49,34,"$filter"],[76,156,49,41],[76,157,49,42,"shape"],[76,162,49,47],[76,163,49,48],[76,164,49,49],[76,165,49,50],[76,168,49,53],[76,169,49,54],[77,4,50,4,"util"],[77,8,50,8],[77,9,50,9,"assert"],[77,15,50,15],[77,16,50,16,"conv_util"],[77,25,50,25],[77,26,50,26,"eitherStridesOrDilationsAreOne"],[77,56,50,56],[77,57,50,57,"stride"],[77,63,50,63],[77,65,50,65,"dilation"],[77,73,50,73],[77,74,50,74],[77,76,50,76],[77,82,50,82],[77,138,50,138],[77,141,51,8],[77,155,51,22,"stride"],[77,161,51,28],[77,179,51,46,"dilation"],[77,187,51,54],[77,190,51,57],[77,191,51,58],[78,4,52,4,"util"],[78,8,52,8],[78,9,52,9,"assert"],[78,15,52,15],[78,16,52,16,"conv_util"],[78,25,52,25],[78,26,52,26,"stridesOrDilationsArePositive"],[78,55,52,55],[78,56,52,56,"dilation"],[78,64,52,64],[78,65,52,65],[78,67,52,67],[78,73,52,73],[78,130,52,130],[78,131,52,131],[79,4,53,4,"util"],[79,8,53,8],[79,9,53,9,"assert"],[79,15,53,15],[79,16,53,16,"conv_util"],[79,25,53,25],[79,26,53,26,"stridesOrDilationsArePositive"],[79,55,53,55],[79,56,53,56,"stride"],[79,62,53,62],[79,63,53,63],[79,65,53,65],[79,71,53,71],[79,121,53,121],[79,122,53,122],[80,4,54,4,"util"],[80,8,54,8],[80,9,54,9,"assert"],[80,15,54,15],[80,16,54,16,"dataFormat"],[80,26,54,26],[80,31,54,31],[80,36,54,36],[80,38,54,38],[80,44,54,44],[80,82,54,82,"dataFormat"],[80,92,54,92],[80,131,54,131],[80,132,54,132],[81,4,55,4],[81,10,55,10,"filter4D"],[81,18,55,18],[81,21,55,21],[81,25,55,21,"reshape"],[81,33,55,28],[81,34,55,28,"reshape"],[81,41,55,28],[81,43,55,29,"$filter"],[81,50,55,36],[81,52,55,38],[81,53,55,39],[81,54,55,40],[81,56,55,42,"$filter"],[81,63,55,49],[81,64,55,50,"shape"],[81,69,55,55],[81,70,55,56],[81,71,55,57],[81,72,55,58],[81,74,55,60,"$filter"],[81,81,55,67],[81,82,55,68,"shape"],[81,87,55,73],[81,88,55,74],[81,89,55,75],[81,90,55,76],[81,92,55,78,"$filter"],[81,99,55,85],[81,100,55,86,"shape"],[81,105,55,91],[81,106,55,92],[81,107,55,93],[81,108,55,94],[81,109,55,95],[81,110,55,96],[82,4,56,4],[82,10,56,10,"input4D"],[82,17,56,17],[82,20,56,20],[82,24,56,20,"reshape"],[82,32,56,27],[82,33,56,27,"reshape"],[82,40,56,27],[82,42,56,28,"x3D"],[82,45,56,31],[82,47,56,33],[82,48,56,34,"x3D"],[82,51,56,37],[82,52,56,38,"shape"],[82,57,56,43],[82,58,56,44],[82,59,56,45],[82,60,56,46],[82,62,56,48],[82,63,56,49],[82,65,56,51,"x3D"],[82,68,56,54],[82,69,56,55,"shape"],[82,74,56,60],[82,75,56,61],[82,76,56,62],[82,77,56,63],[82,79,56,65,"x3D"],[82,82,56,68],[82,83,56,69,"shape"],[82,88,56,74],[82,89,56,75],[82,90,56,76],[82,91,56,77],[82,92,56,78],[82,93,56,79],[83,4,57,4],[83,10,57,10,"strides"],[83,17,57,17],[83,20,57,20],[83,21,57,21],[83,22,57,22],[83,24,57,24,"stride"],[83,30,57,30],[83,31,57,31],[84,4,58,4],[84,10,58,10,"dilations"],[84,19,58,19],[84,22,58,22],[84,23,58,23],[84,24,58,24],[84,26,58,26,"dilation"],[84,34,58,34],[84,35,58,35],[85,4,59,4],[85,10,59,10,"conv2dDataFormat"],[85,26,59,26],[85,29,59,29],[85,35,59,35],[86,4,60,4],[86,10,60,10,"res"],[86,13,60,13],[86,16,60,16],[86,20,60,16,"conv2d"],[86,27,60,22],[86,28,60,22,"conv2d"],[86,34,60,22],[86,36,60,23,"input4D"],[86,43,60,30],[86,45,60,32,"filter4D"],[86,53,60,40],[86,55,60,42,"strides"],[86,62,60,49],[86,64,60,51,"pad"],[86,67,60,54],[86,69,60,56,"conv2dDataFormat"],[86,85,60,72],[86,87,60,74,"dilations"],[86,96,60,83],[86,98,60,85,"dimRoundingMode"],[86,113,60,100],[86,114,60,101],[87,4,61,4],[87,8,61,8,"reshapedTo3D"],[87,20,61,20],[87,22,61,22],[88,6,62,8],[88,13,62,15],[88,17,62,15,"reshape"],[88,25,62,22],[88,26,62,22,"reshape"],[88,33,62,22],[88,35,62,23,"res"],[88,38,62,26],[88,40,62,28],[88,41,62,29,"res"],[88,44,62,32],[88,45,62,33,"shape"],[88,50,62,38],[88,51,62,39],[88,52,62,40],[88,53,62,41],[88,55,62,43,"res"],[88,58,62,46],[88,59,62,47,"shape"],[88,64,62,52],[88,65,62,53],[88,66,62,54],[88,67,62,55],[88,68,62,56],[88,69,62,57],[89,4,63,4],[90,4,64,4],[90,11,64,11],[90,15,64,11,"reshape"],[90,23,64,18],[90,24,64,18,"reshape"],[90,31,64,18],[90,33,64,19,"res"],[90,36,64,22],[90,38,64,24],[90,39,64,25,"res"],[90,42,64,28],[90,43,64,29,"shape"],[90,48,64,34],[90,49,64,35],[90,50,64,36],[90,51,64,37],[90,53,64,39,"res"],[90,56,64,42],[90,57,64,43,"shape"],[90,62,64,48],[90,63,64,49],[90,64,64,50],[90,65,64,51],[90,67,64,53,"res"],[90,70,64,56],[90,71,64,57,"shape"],[90,76,64,62],[90,77,64,63],[90,78,64,64],[90,79,64,65],[90,80,64,66],[90,81,64,67],[91,2,65,0],[92,2,66,7],[92,8,66,13,"conv1d"],[92,14,66,19],[92,17,66,22],[92,32,66,38],[92,36,66,38,"op"],[92,46,66,40],[92,47,66,40,"op"],[92,49,66,40],[92,51,66,41],[93,4,66,43,"conv1d_"],[94,2,66,51],[94,3,66,52],[94,4,66,53],[95,0,66,54],[95,3]],"functionMap":{"names":["<global>","conv1d_","util.assert$argument_1"],"mappings":"AAA;ACkC;gCCS,wED;oCCC;0BDC;mDCE;qDDC;4ECC;yDDC;mECC,+DD;iECC,wDD;sCCC,6FD;CDW"},"hasCjsExports":false},"type":"js/module"}]}