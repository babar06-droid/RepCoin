{"dependencies":[{"name":"./shader_compiler","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":54,"index":757}}],"key":"yVSKlvZSxQn3Ck2puzGVWEYPzq8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"SliceProgram\", {\n    enumerable: true,\n    get: function () {\n      return SliceProgram;\n    }\n  });\n  var _shader_compiler = require(_dependencyMap[0], \"./shader_compiler\");\n  /**\n   * @license\n   * Copyright 2017 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  class SliceProgram {\n    constructor(destSize) {\n      this.variableNames = ['source'];\n      this.outputShape = destSize;\n      this.rank = destSize.length;\n      const dtype = (0, _shader_compiler.getCoordsDataType)(this.rank);\n      this.customUniforms = [{\n        name: 'start',\n        arrayIndex: this.rank,\n        type: 'int'\n      }];\n      const sourceCoords = getCoords(this.rank);\n      let body;\n      const coordSum = destSize.map((_, i) => {\n        return `sourceLoc.${coords[i]} = start[${i}] + coords.${coords[i]};`;\n      });\n      body = `\n        ${dtype} sourceLoc;\n        ${dtype} coords = getOutputCoords();\n        ${coordSum.join('\\n')}\n      `;\n      this.userCode = `\n      void main() {\n        ${body}\n        setOutput(getSource(${sourceCoords}));\n      }\n    `;\n    }\n  }\n  const coords = ['x', 'y', 'z', 'w', 'u', 'v'];\n  function getCoords(rank) {\n    if (rank === 1) {\n      return 'sourceLoc';\n    } else if (rank <= 6) {\n      return coords.slice(0, rank).map(x => 'sourceLoc.' + x).join(',');\n    } else {\n      throw Error(`Slicing for rank ${rank} is not yet supported`);\n    }\n  }\n});","lineCount":70,"map":[[7,2,18,0,"Object"],[7,8,18,0],[7,9,18,0,"defineProperty"],[7,23,18,0],[7,24,18,0,"exports"],[7,31,18,0],[8,4,18,0,"enumerable"],[8,14,18,0],[9,4,18,0,"get"],[9,7,18,0],[9,18,18,0,"get"],[9,19,18,0],[10,6,18,0],[10,13,18,0,"SliceProgram"],[10,25,18,0],[11,4,18,0],[12,2,18,0],[13,2,17,0],[13,6,17,0,"_shader_compiler"],[13,22,17,0],[13,25,17,0,"require"],[13,32,17,0],[13,33,17,0,"_dependencyMap"],[13,47,17,0],[14,2,1,0],[15,0,2,0],[16,0,3,0],[17,0,4,0],[18,0,5,0],[19,0,6,0],[20,0,7,0],[21,0,8,0],[22,0,9,0],[23,0,10,0],[24,0,11,0],[25,0,12,0],[26,0,13,0],[27,0,14,0],[28,0,15,0],[29,0,16,0],[31,2,18,7],[31,8,18,13,"SliceProgram"],[31,20,18,25],[31,21,18,26],[32,4,19,4,"constructor"],[32,15,19,15,"constructor"],[32,16,19,16,"destSize"],[32,24,19,24],[32,26,19,26],[33,6,20,8],[33,10,20,12],[33,11,20,13,"variableNames"],[33,24,20,26],[33,27,20,29],[33,28,20,30],[33,36,20,38],[33,37,20,39],[34,6,21,8],[34,10,21,12],[34,11,21,13,"outputShape"],[34,22,21,24],[34,25,21,27,"destSize"],[34,33,21,35],[35,6,22,8],[35,10,22,12],[35,11,22,13,"rank"],[35,15,22,17],[35,18,22,20,"destSize"],[35,26,22,28],[35,27,22,29,"length"],[35,33,22,35],[36,6,23,8],[36,12,23,14,"dtype"],[36,17,23,19],[36,20,23,22],[36,24,23,22,"getCoordsDataType"],[36,40,23,39],[36,41,23,39,"getCoordsDataType"],[36,58,23,39],[36,60,23,40],[36,64,23,44],[36,65,23,45,"rank"],[36,69,23,49],[36,70,23,50],[37,6,24,8],[37,10,24,12],[37,11,24,13,"customUniforms"],[37,25,24,27],[37,28,24,30],[37,29,24,31],[38,8,24,33,"name"],[38,12,24,37],[38,14,24,39],[38,21,24,46],[39,8,24,48,"arrayIndex"],[39,18,24,58],[39,20,24,60],[39,24,24,64],[39,25,24,65,"rank"],[39,29,24,69],[40,8,24,71,"type"],[40,12,24,75],[40,14,24,77],[41,6,24,83],[41,7,24,84],[41,8,24,85],[42,6,25,8],[42,12,25,14,"sourceCoords"],[42,24,25,26],[42,27,25,29,"getCoords"],[42,36,25,38],[42,37,25,39],[42,41,25,43],[42,42,25,44,"rank"],[42,46,25,48],[42,47,25,49],[43,6,26,8],[43,10,26,12,"body"],[43,14,26,16],[44,6,27,8],[44,12,27,14,"coordSum"],[44,20,27,22],[44,23,27,25,"destSize"],[44,31,27,33],[44,32,27,34,"map"],[44,35,27,37],[44,36,27,38],[44,37,27,39,"_"],[44,38,27,40],[44,40,27,42,"i"],[44,41,27,43],[44,46,27,48],[45,8,28,12],[45,15,28,19],[45,28,28,32,"coords"],[45,34,28,38],[45,35,28,39,"i"],[45,36,28,40],[45,37,28,41],[45,49,28,53,"i"],[45,50,28,54],[45,64,28,68,"coords"],[45,70,28,74],[45,71,28,75,"i"],[45,72,28,76],[45,73,28,77],[45,76,28,80],[46,6,29,8],[46,7,29,9],[46,8,29,10],[47,6,30,8,"body"],[47,10,30,12],[47,13,30,15],[48,0,31,0],[48,10,31,10,"dtype"],[48,15,31,15],[49,0,32,0],[49,10,32,10,"dtype"],[49,15,32,15],[50,0,33,0],[50,10,33,10,"coordSum"],[50,18,33,18],[50,19,33,19,"join"],[50,23,33,23],[50,24,33,24],[50,28,33,28],[50,29,33,29],[51,0,34,0],[51,7,34,7],[52,6,35,8],[52,10,35,12],[52,11,35,13,"userCode"],[52,19,35,21],[52,22,35,24],[53,0,36,0],[54,0,37,0],[54,10,37,10,"body"],[54,14,37,14],[55,0,38,0],[55,30,38,30,"sourceCoords"],[55,42,38,42],[56,0,39,0],[57,0,40,0],[57,5,40,5],[58,4,41,4],[59,2,42,0],[60,2,43,0],[60,8,43,6,"coords"],[60,14,43,12],[60,17,43,15],[60,18,43,16],[60,21,43,19],[60,23,43,21],[60,26,43,24],[60,28,43,26],[60,31,43,29],[60,33,43,31],[60,36,43,34],[60,38,43,36],[60,41,43,39],[60,43,43,41],[60,46,43,44],[60,47,43,45],[61,2,44,0],[61,11,44,9,"getCoords"],[61,20,44,18,"getCoords"],[61,21,44,19,"rank"],[61,25,44,23],[61,27,44,25],[62,4,45,4],[62,8,45,8,"rank"],[62,12,45,12],[62,17,45,17],[62,18,45,18],[62,20,45,20],[63,6,46,8],[63,13,46,15],[63,24,46,26],[64,4,47,4],[64,5,47,5],[64,11,48,9],[64,15,48,13,"rank"],[64,19,48,17],[64,23,48,21],[64,24,48,22],[64,26,48,24],[65,6,49,8],[65,13,49,15,"coords"],[65,19,49,21],[65,20,49,22,"slice"],[65,25,49,27],[65,26,49,28],[65,27,49,29],[65,29,49,31,"rank"],[65,33,49,35],[65,34,49,36],[65,35,49,37,"map"],[65,38,49,40],[65,39,49,41,"x"],[65,40,49,42],[65,44,49,46],[65,56,49,58],[65,59,49,61,"x"],[65,60,49,62],[65,61,49,63],[65,62,49,64,"join"],[65,66,49,68],[65,67,49,69],[65,70,49,72],[65,71,49,73],[66,4,50,4],[66,5,50,5],[66,11,51,9],[67,6,52,8],[67,12,52,14,"Error"],[67,17,52,19],[67,18,52,20],[67,38,52,40,"rank"],[67,42,52,44],[67,65,52,67],[67,66,52,68],[68,4,53,4],[69,2,54,0],[70,0,54,1],[70,3]],"functionMap":{"names":["<global>","SliceProgram","SliceProgram#constructor","destSize.map$argument_0","getCoords","coords.slice.map$argument_0"],"mappings":"AAA;OCiB;ICC;sCCQ;SDE;KDY;CDC;AIE;yCCK,qBD;CJK"},"hasCjsExports":false},"type":"js/module"}]}