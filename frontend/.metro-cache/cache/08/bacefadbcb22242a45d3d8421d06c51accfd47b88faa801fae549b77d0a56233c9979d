{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":44,"index":747}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"SearchSortedProgram\", {\n    enumerable: true,\n    get: function () {\n      return SearchSortedProgram;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  /**\n   * @license\n   * Copyright 2022 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  class SearchSortedProgram {\n    constructor(batchSize, numInputs, numValues, side) {\n      this.variableNames = ['sortedSequence', 'values'];\n      this.customUniforms = [{\n        name: 'numInputs',\n        type: 'int'\n      }];\n      this.outputShape = [batchSize, numValues];\n      const webGL2LoopHead = 'while (left < right) {';\n      // WebGL1 doesn't accept non constant loop conditions, so upper bound loop\n      // iterations.\n      const webGL1LoopHead = `for (int i = 0; i < ${Math.ceil(Math.log2(numInputs + 1))}; ++i) { if (left >= right) break;`;\n      const loopHead = (0, _tensorflowTfjsCore.env)().getNumber('WEBGL_VERSION') === 2 ? webGL2LoopHead : webGL1LoopHead;\n      // left corresponds to lower bound and right to upper bound.\n      const boundComparator = side === 'left' ? '<' : '<=';\n      this.userCode = `\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ${loopHead}\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ${boundComparator} value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     `;\n    }\n  }\n});","lineCount":74,"map":[[7,2,18,0,"Object"],[7,8,18,0],[7,9,18,0,"defineProperty"],[7,23,18,0],[7,24,18,0,"exports"],[7,31,18,0],[8,4,18,0,"enumerable"],[8,14,18,0],[9,4,18,0,"get"],[9,7,18,0],[9,18,18,0,"get"],[9,19,18,0],[10,6,18,0],[10,13,18,0,"SearchSortedProgram"],[10,32,18,0],[11,4,18,0],[12,2,18,0],[13,2,17,0],[13,6,17,0,"_tensorflowTfjsCore"],[13,25,17,0],[13,28,17,0,"require"],[13,35,17,0],[13,36,17,0,"_dependencyMap"],[13,50,17,0],[14,2,1,0],[15,0,2,0],[16,0,3,0],[17,0,4,0],[18,0,5,0],[19,0,6,0],[20,0,7,0],[21,0,8,0],[22,0,9,0],[23,0,10,0],[24,0,11,0],[25,0,12,0],[26,0,13,0],[27,0,14,0],[28,0,15,0],[29,0,16,0],[31,2,18,7],[31,8,18,13,"SearchSortedProgram"],[31,27,18,32],[31,28,18,33],[32,4,19,4,"constructor"],[32,15,19,15,"constructor"],[32,16,19,16,"batchSize"],[32,25,19,25],[32,27,19,27,"numInputs"],[32,36,19,36],[32,38,19,38,"numValues"],[32,47,19,47],[32,49,19,49,"side"],[32,53,19,53],[32,55,19,55],[33,6,20,8],[33,10,20,12],[33,11,20,13,"variableNames"],[33,24,20,26],[33,27,20,29],[33,28,20,30],[33,44,20,46],[33,46,20,48],[33,54,20,56],[33,55,20,57],[34,6,21,8],[34,10,21,12],[34,11,21,13,"customUniforms"],[34,25,21,27],[34,28,21,30],[34,29,21,31],[35,8,21,33,"name"],[35,12,21,37],[35,14,21,39],[35,25,21,50],[36,8,21,52,"type"],[36,12,21,56],[36,14,21,58],[37,6,21,64],[37,7,21,65],[37,8,21,66],[38,6,22,8],[38,10,22,12],[38,11,22,13,"outputShape"],[38,22,22,24],[38,25,22,27],[38,26,22,28,"batchSize"],[38,35,22,37],[38,37,22,39,"numValues"],[38,46,22,48],[38,47,22,49],[39,6,23,8],[39,12,23,14,"webGL2LoopHead"],[39,26,23,28],[39,29,23,31],[39,53,23,55],[40,6,24,8],[41,6,25,8],[42,6,26,8],[42,12,26,14,"webGL1LoopHead"],[42,26,26,28],[42,29,26,31],[42,52,26,54,"Math"],[42,56,26,58],[42,57,26,59,"ceil"],[42,61,26,63],[42,62,26,64,"Math"],[42,66,26,68],[42,67,26,69,"log2"],[42,71,26,73],[42,72,26,74,"numInputs"],[42,81,26,83],[42,84,26,86],[42,85,26,87],[42,86,26,88],[42,87,26,89],[42,123,26,125],[43,6,27,8],[43,12,27,14,"loopHead"],[43,20,27,22],[43,23,27,25],[43,27,27,25,"env"],[43,46,27,28],[43,47,27,28,"env"],[43,50,27,28],[43,52,27,29],[43,53,27,30],[43,54,27,31,"getNumber"],[43,63,27,40],[43,64,27,41],[43,79,27,56],[43,80,27,57],[43,85,27,62],[43,86,27,63],[43,89,27,66,"webGL2LoopHead"],[43,103,27,80],[43,106,28,12,"webGL1LoopHead"],[43,120,28,26],[44,6,29,8],[45,6,30,8],[45,12,30,14,"boundComparator"],[45,27,30,29],[45,30,30,32,"side"],[45,34,30,36],[45,39,30,41],[45,45,30,47],[45,48,30,50],[45,51,30,53],[45,54,30,56],[45,58,30,60],[46,6,31,8],[46,10,31,12],[46,11,31,13,"userCode"],[46,19,31,21],[46,22,31,24],[47,0,32,0],[48,0,33,0],[49,0,34,0],[50,0,35,0],[51,0,36,0],[51,11,36,11,"loopHead"],[51,19,36,19],[52,0,37,0],[53,0,38,0],[53,47,38,47,"boundComparator"],[53,62,38,62],[54,0,39,0],[55,0,40,0],[56,0,41,0],[57,0,42,0],[58,0,43,0],[59,0,44,0],[60,0,45,0],[61,0,46,0],[62,0,47,0],[63,0,48,0],[64,0,49,0],[65,0,50,0],[66,0,51,0],[67,0,52,0],[68,0,53,0],[69,0,54,0],[70,0,55,0],[71,0,56,0],[71,6,56,6],[72,4,57,4],[73,2,58,0],[74,0,58,1],[74,3]],"functionMap":{"names":["<global>","SearchSortedProgram","SearchSortedProgram#constructor"],"mappings":"AAA;OCiB;ICC;KDsC;CDC"},"hasCjsExports":false},"type":"js/module"}]}