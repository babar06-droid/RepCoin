{"dependencies":[{"name":"../engine","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":35,"index":738}}],"key":"zbTTi8rtwr8rjl75PzEo829Yvss=","exportNames":["*"],"imports":1}},{"name":"../kernel_names","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":739},"end":{"line":18,"column":44,"index":783}}],"key":"gQVznmdGA0uoBQvR5Q4/qW+ITHg=","exportNames":["*"],"imports":1}},{"name":"../tensor_util_env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":784},"end":{"line":19,"column":53,"index":837}}],"key":"UCKDOr/oOGi3nbD26ZhyAVW61qk=","exportNames":["*"],"imports":1}},{"name":"../util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":838},"end":{"line":20,"column":32,"index":870}}],"key":"DTmef1GE5grNQfsvpIzpBlINy9c=","exportNames":["*"],"imports":1}},{"name":"./cast","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":871},"end":{"line":21,"column":30,"index":901}}],"key":"zLuFDMcy9OTJI8veTtIwJ7mqKPc=","exportNames":["*"],"imports":1}},{"name":"./conv_util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":22,"column":0,"index":902},"end":{"line":22,"column":56,"index":958}}],"key":"INQe0zbIADI7uIipkS0WmYFlLZ8=","exportNames":["*"],"imports":1}},{"name":"./operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":23,"column":0,"index":959},"end":{"line":23,"column":33,"index":992}}],"key":"lmmEAb6oR3TWnrsrETceKUovfkM=","exportNames":["*"],"imports":1}},{"name":"./reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":24,"column":0,"index":993},"end":{"line":24,"column":36,"index":1029}}],"key":"dz8GCsFShMGnHX1Wj7bBySjBnSE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"avgPool3d\", {\n    enumerable: true,\n    get: function () {\n      return avgPool3d;\n    }\n  });\n  var _engine = require(_dependencyMap[0], \"../engine\");\n  var _kernel_names = require(_dependencyMap[1], \"../kernel_names\");\n  var _tensor_util_env = require(_dependencyMap[2], \"../tensor_util_env\");\n  var _util = require(_dependencyMap[3], \"../util\");\n  var util = _interopNamespace(_util);\n  var _cast = require(_dependencyMap[4], \"./cast\");\n  var _conv_util = require(_dependencyMap[5], \"./conv_util\");\n  var _operation = require(_dependencyMap[6], \"./operation\");\n  var _reshape = require(_dependencyMap[7], \"./reshape\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  /**\n   * Computes the 3D average pooling.\n   *\n   * ```js\n   * const x = tf.tensor5d([1, 2, 3, 4, 5, 6, 7, 8], [1, 2, 2, 2, 1]);\n   * const result = tf.avgPool3d(x, 2, 1, 'valid');\n   * result.print();\n   * ```\n   *\n   * @param x The input tensor, of rank 5 or rank 4 of shape\n   *     `[batch, depth, height, width, inChannels]`.\n   * @param filterSize The filter size:\n   *     `[filterDepth, filterHeight, filterWidth]`.\n   *     If `filterSize` is a single number,\n   *     then `filterDepth == filterHeight == filterWidth`.\n   * @param strides The strides of the pooling:\n   *     `[strideDepth, strideHeight, strideWidth]`.\n   *     If `strides` is a single number,\n   *     then `strideDepth == strideHeight == strideWidth`.\n   * @param pad The type of padding algorithm.\n   *    - `same` and stride 1: output will be of same size as input,\n   *       regardless of filter size.\n   *    - `valid`: output will be smaller than input if filter is larger\n   *       than 1*1x1.\n   *    - For more info, see this guide:\n   *     [https://www.tensorflow.org/api_docs/python/tf/nn/convolution](\n   *          https://www.tensorflow.org/api_docs/python/tf/nn/convolution)\n   * @param dimRoundingMode A string from: 'ceil', 'round', 'floor'. If none is\n   *     provided, it will default to truncate.\n   * @param dataFormat An optional string from: \"NDHWC\", \"NCDHW\". Defaults to\n   *     \"NDHWC\". Specify the data format of the input and output data. With the\n   *     default format \"NDHWC\", the data is stored in the order of: [batch,\n   *     depth, height, width, channels]. Only \"NDHWC\" is currently supported.\n   *\n   * @doc {heading: 'Operations', subheading: 'Convolution'}\n   */\n  function avgPool3d_(x, filterSize, strides, pad, dimRoundingMode, dataFormat = 'NDHWC') {\n    const $x = (0, _tensor_util_env.convertToTensor)(x, 'x', 'avgPool3d', 'float32');\n    let x5D = $x;\n    let reshapedTo5D = false;\n    if ($x.rank === 4) {\n      reshapedTo5D = true;\n      x5D = (0, _reshape.reshape)($x, [1, $x.shape[0], $x.shape[1], $x.shape[2], $x.shape[3]]);\n    }\n    util.assert(x5D.rank === 5, () => `Error in avgPool3d: x must be rank 5 but got rank ${x5D.rank}.`);\n    util.assert(dataFormat === 'NDHWC', () => `Error in avgPool3d: Only NDHWC is currently supported, ` + `but got dataFormat of ${dataFormat}`);\n    util.assert(typeof strides === 'number' && strides > 0 || Array.isArray(strides) && strides[0] > 0 && strides[1] > 0 && strides[2] > 0, () => `Error in avgPool3d: Stride must be > 0, but got '${strides}'`);\n    (0, _conv_util.checkPadOnDimRoundingMode)('avgPool3d', pad, dimRoundingMode);\n    const inputs = {\n      x: x5D\n    };\n    const attrs = {\n      filterSize,\n      strides,\n      pad,\n      dimRoundingMode,\n      dataFormat\n    };\n    // tslint:disable-next-line: no-unnecessary-type-assertion\n    let res = _engine.ENGINE.runKernel(_kernel_names.AvgPool3D, inputs, attrs);\n    res = (0, _cast.cast)(res, x5D.dtype);\n    if (reshapedTo5D) {\n      return (0, _reshape.reshape)(res, [res.shape[1], res.shape[2], res.shape[3], res.shape[4]]);\n    }\n    return res;\n  }\n  const avgPool3d = /* @__PURE__ */(0, _operation.op)({\n    avgPool3d_\n  });\n});","lineCount":123,"map":[[22,2,86,0,"Object"],[22,8,86,0],[22,9,86,0,"defineProperty"],[22,23,86,0],[22,24,86,0,"exports"],[22,31,86,0],[23,4,86,0,"enumerable"],[23,14,86,0],[24,4,86,0,"get"],[24,7,86,0],[24,18,86,0,"get"],[24,19,86,0],[25,6,86,0],[25,13,86,0,"avgPool3d"],[25,22,86,0],[26,4,86,0],[27,2,86,0],[28,2,17,0],[28,6,17,0,"_engine"],[28,13,17,0],[28,16,17,0,"require"],[28,23,17,0],[28,24,17,0,"_dependencyMap"],[28,38,17,0],[29,2,18,0],[29,6,18,0,"_kernel_names"],[29,19,18,0],[29,22,18,0,"require"],[29,29,18,0],[29,30,18,0,"_dependencyMap"],[29,44,18,0],[30,2,19,0],[30,6,19,0,"_tensor_util_env"],[30,22,19,0],[30,25,19,0,"require"],[30,32,19,0],[30,33,19,0,"_dependencyMap"],[30,47,19,0],[31,2,20,0],[31,6,20,0,"_util"],[31,11,20,0],[31,14,20,0,"require"],[31,21,20,0],[31,22,20,0,"_dependencyMap"],[31,36,20,0],[32,2,20,0],[32,6,20,0,"util"],[32,10,20,0],[32,13,20,0,"_interopNamespace"],[32,30,20,0],[32,31,20,0,"_util"],[32,36,20,0],[33,2,21,0],[33,6,21,0,"_cast"],[33,11,21,0],[33,14,21,0,"require"],[33,21,21,0],[33,22,21,0,"_dependencyMap"],[33,36,21,0],[34,2,22,0],[34,6,22,0,"_conv_util"],[34,16,22,0],[34,19,22,0,"require"],[34,26,22,0],[34,27,22,0,"_dependencyMap"],[34,41,22,0],[35,2,23,0],[35,6,23,0,"_operation"],[35,16,23,0],[35,19,23,0,"require"],[35,26,23,0],[35,27,23,0,"_dependencyMap"],[35,41,23,0],[36,2,24,0],[36,6,24,0,"_reshape"],[36,14,24,0],[36,17,24,0,"require"],[36,24,24,0],[36,25,24,0,"_dependencyMap"],[36,39,24,0],[37,2,1,0],[38,0,2,0],[39,0,3,0],[40,0,4,0],[41,0,5,0],[42,0,6,0],[43,0,7,0],[44,0,8,0],[45,0,9,0],[46,0,10,0],[47,0,11,0],[48,0,12,0],[49,0,13,0],[50,0,14,0],[51,0,15,0],[52,0,16,0],[54,2,25,0],[55,0,26,0],[56,0,27,0],[57,0,28,0],[58,0,29,0],[59,0,30,0],[60,0,31,0],[61,0,32,0],[62,0,33,0],[63,0,34,0],[64,0,35,0],[65,0,36,0],[66,0,37,0],[67,0,38,0],[68,0,39,0],[69,0,40,0],[70,0,41,0],[71,0,42,0],[72,0,43,0],[73,0,44,0],[74,0,45,0],[75,0,46,0],[76,0,47,0],[77,0,48,0],[78,0,49,0],[79,0,50,0],[80,0,51,0],[81,0,52,0],[82,0,53,0],[83,0,54,0],[84,0,55,0],[85,0,56,0],[86,0,57,0],[87,0,58,0],[88,0,59,0],[89,0,60,0],[90,2,61,0],[90,11,61,9,"avgPool3d_"],[90,21,61,19,"avgPool3d_"],[90,22,61,20,"x"],[90,23,61,21],[90,25,61,23,"filterSize"],[90,35,61,33],[90,37,61,35,"strides"],[90,44,61,42],[90,46,61,44,"pad"],[90,49,61,47],[90,51,61,49,"dimRoundingMode"],[90,66,61,64],[90,68,61,66,"dataFormat"],[90,78,61,76],[90,81,61,79],[90,88,61,86],[90,90,61,88],[91,4,62,4],[91,10,62,10,"$x"],[91,12,62,12],[91,15,62,15],[91,19,62,15,"convertToTensor"],[91,35,62,30],[91,36,62,30,"convertToTensor"],[91,51,62,30],[91,53,62,31,"x"],[91,54,62,32],[91,56,62,34],[91,59,62,37],[91,61,62,39],[91,72,62,50],[91,74,62,52],[91,83,62,61],[91,84,62,62],[92,4,63,4],[92,8,63,8,"x5D"],[92,11,63,11],[92,14,63,14,"$x"],[92,16,63,16],[93,4,64,4],[93,8,64,8,"reshapedTo5D"],[93,20,64,20],[93,23,64,23],[93,28,64,28],[94,4,65,4],[94,8,65,8,"$x"],[94,10,65,10],[94,11,65,11,"rank"],[94,15,65,15],[94,20,65,20],[94,21,65,21],[94,23,65,23],[95,6,66,8,"reshapedTo5D"],[95,18,66,20],[95,21,66,23],[95,25,66,27],[96,6,67,8,"x5D"],[96,9,67,11],[96,12,67,14],[96,16,67,14,"reshape"],[96,24,67,21],[96,25,67,21,"reshape"],[96,32,67,21],[96,34,67,22,"$x"],[96,36,67,24],[96,38,67,26],[96,39,67,27],[96,40,67,28],[96,42,67,30,"$x"],[96,44,67,32],[96,45,67,33,"shape"],[96,50,67,38],[96,51,67,39],[96,52,67,40],[96,53,67,41],[96,55,67,43,"$x"],[96,57,67,45],[96,58,67,46,"shape"],[96,63,67,51],[96,64,67,52],[96,65,67,53],[96,66,67,54],[96,68,67,56,"$x"],[96,70,67,58],[96,71,67,59,"shape"],[96,76,67,64],[96,77,67,65],[96,78,67,66],[96,79,67,67],[96,81,67,69,"$x"],[96,83,67,71],[96,84,67,72,"shape"],[96,89,67,77],[96,90,67,78],[96,91,67,79],[96,92,67,80],[96,93,67,81],[96,94,67,82],[97,4,68,4],[98,4,69,4,"util"],[98,8,69,8],[98,9,69,9,"assert"],[98,15,69,15],[98,16,69,16,"x5D"],[98,19,69,19],[98,20,69,20,"rank"],[98,24,69,24],[98,29,69,29],[98,30,69,30],[98,32,69,32],[98,38,69,38],[98,91,69,91,"x5D"],[98,94,69,94],[98,95,69,95,"rank"],[98,99,69,99],[98,102,69,102],[98,103,69,103],[99,4,70,4,"util"],[99,8,70,8],[99,9,70,9,"assert"],[99,15,70,15],[99,16,70,16,"dataFormat"],[99,26,70,26],[99,31,70,31],[99,38,70,38],[99,40,70,40],[99,46,70,46],[99,103,70,103],[99,106,71,8],[99,131,71,33,"dataFormat"],[99,141,71,43],[99,143,71,45],[99,144,71,46],[100,4,72,4,"util"],[100,8,72,8],[100,9,72,9,"assert"],[100,15,72,15],[100,16,72,17],[100,23,72,24,"strides"],[100,30,72,31],[100,35,72,36],[100,43,72,44],[100,47,72,48,"strides"],[100,54,72,55],[100,57,72,58],[100,58,72,59],[100,62,73,9,"Array"],[100,67,73,14],[100,68,73,15,"isArray"],[100,75,73,22],[100,76,73,23,"strides"],[100,83,73,30],[100,84,73,31],[100,88,73,35,"strides"],[100,95,73,42],[100,96,73,43],[100,97,73,44],[100,98,73,45],[100,101,73,48],[100,102,73,49],[100,106,73,53,"strides"],[100,113,73,60],[100,114,73,61],[100,115,73,62],[100,116,73,63],[100,119,73,66],[100,120,73,67],[100,124,74,12,"strides"],[100,131,74,19],[100,132,74,20],[100,133,74,21],[100,134,74,22],[100,137,74,25],[100,138,74,27],[100,140,74,29],[100,146,74,35],[100,198,74,87,"strides"],[100,205,74,94],[100,208,74,97],[100,209,74,98],[101,4,75,4],[101,8,75,4,"checkPadOnDimRoundingMode"],[101,18,75,29],[101,19,75,29,"checkPadOnDimRoundingMode"],[101,44,75,29],[101,46,75,30],[101,57,75,41],[101,59,75,43,"pad"],[101,62,75,46],[101,64,75,48,"dimRoundingMode"],[101,79,75,63],[101,80,75,64],[102,4,76,4],[102,10,76,10,"inputs"],[102,16,76,16],[102,19,76,19],[103,6,76,21,"x"],[103,7,76,22],[103,9,76,24,"x5D"],[104,4,76,28],[104,5,76,29],[105,4,77,4],[105,10,77,10,"attrs"],[105,15,77,15],[105,18,77,18],[106,6,77,20,"filterSize"],[106,16,77,30],[107,6,77,32,"strides"],[107,13,77,39],[108,6,77,41,"pad"],[108,9,77,44],[109,6,77,46,"dimRoundingMode"],[109,21,77,61],[110,6,77,63,"dataFormat"],[111,4,77,74],[111,5,77,75],[112,4,78,4],[113,4,79,4],[113,8,79,8,"res"],[113,11,79,11],[113,14,79,14,"ENGINE"],[113,21,79,20],[113,22,79,20,"ENGINE"],[113,28,79,20],[113,29,79,21,"runKernel"],[113,38,79,30],[113,39,79,31,"AvgPool3D"],[113,52,79,40],[113,53,79,40,"AvgPool3D"],[113,62,79,40],[113,64,79,42,"inputs"],[113,70,79,48],[113,72,79,50,"attrs"],[113,77,79,55],[113,78,79,56],[114,4,80,4,"res"],[114,7,80,7],[114,10,80,10],[114,14,80,10,"cast"],[114,19,80,14],[114,20,80,14,"cast"],[114,24,80,14],[114,26,80,15,"res"],[114,29,80,18],[114,31,80,20,"x5D"],[114,34,80,23],[114,35,80,24,"dtype"],[114,40,80,29],[114,41,80,30],[115,4,81,4],[115,8,81,8,"reshapedTo5D"],[115,20,81,20],[115,22,81,22],[116,6,82,8],[116,13,82,15],[116,17,82,15,"reshape"],[116,25,82,22],[116,26,82,22,"reshape"],[116,33,82,22],[116,35,82,23,"res"],[116,38,82,26],[116,40,82,28],[116,41,82,29,"res"],[116,44,82,32],[116,45,82,33,"shape"],[116,50,82,38],[116,51,82,39],[116,52,82,40],[116,53,82,41],[116,55,82,43,"res"],[116,58,82,46],[116,59,82,47,"shape"],[116,64,82,52],[116,65,82,53],[116,66,82,54],[116,67,82,55],[116,69,82,57,"res"],[116,72,82,60],[116,73,82,61,"shape"],[116,78,82,66],[116,79,82,67],[116,80,82,68],[116,81,82,69],[116,83,82,71,"res"],[116,86,82,74],[116,87,82,75,"shape"],[116,92,82,80],[116,93,82,81],[116,94,82,82],[116,95,82,83],[116,96,82,84],[116,97,82,85],[117,4,83,4],[118,4,84,4],[118,11,84,11,"res"],[118,14,84,14],[119,2,85,0],[120,2,86,7],[120,8,86,13,"avgPool3d"],[120,17,86,22],[120,20,86,25],[120,35,86,41],[120,39,86,41,"op"],[120,49,86,43],[120,50,86,43,"op"],[120,52,86,43],[120,54,86,44],[121,4,86,46,"avgPool3d_"],[122,2,86,57],[122,3,86,58],[122,4,86,59],[123,0,86,60],[123,3]],"functionMap":{"names":["<global>","avgPool3d_","util.assert$argument_1"],"mappings":"AAA;AC4D;gCCQ,sED;wCCC;6CDC;6BCG,oED;CDW"},"hasCjsExports":false},"type":"js/module"}]}