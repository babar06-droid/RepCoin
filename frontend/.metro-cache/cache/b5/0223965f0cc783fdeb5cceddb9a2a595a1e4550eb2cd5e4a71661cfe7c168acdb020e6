{"dependencies":[{"name":"./gpgpu_math","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":48,"index":751}}],"key":"r7nFADTf/sGcqNrAYkmj7Z35J80=","exportNames":["*"],"imports":1}},{"name":"./packing_util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":752},"end":{"line":18,"column":62,"index":814}}],"key":"XZxV38atso3t5pLpH4+paVH17Hc=","exportNames":["*"],"imports":1}},{"name":"./shader_compiler","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":815},"end":{"line":19,"column":54,"index":869}}],"key":"yVSKlvZSxQn3Ck2puzGVWEYPzq8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"UnpackProgram\", {\n    enumerable: true,\n    get: function () {\n      return UnpackProgram;\n    }\n  });\n  var _gpgpu_math = require(_dependencyMap[0], \"./gpgpu_math\");\n  var _packing_util = require(_dependencyMap[1], \"./packing_util\");\n  var _shader_compiler = require(_dependencyMap[2], \"./shader_compiler\");\n  /**\n   * @license\n   * Copyright 2018 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  class UnpackProgram {\n    constructor(outputShape) {\n      this.variableNames = ['A'];\n      this.packedInputs = true;\n      this.packedOutput = false;\n      this.outputShape = outputShape;\n      this.enableShapeUniforms = (0, _gpgpu_math.useShapeUniforms)(this.outputShape.length);\n      const rank = outputShape.length;\n      const channels = (0, _packing_util.getChannels)('rc', rank);\n      const dtype = (0, _shader_compiler.getCoordsDataType)(rank);\n      const sourceCoords = (0, _packing_util.getSourceCoords)(rank, channels);\n      const innerDims = channels.slice(-2);\n      const coords = rank <= 1 ? 'rc' : `vec2(${innerDims.join(',')})`;\n      this.userCode = `\n      void main() {\n        ${dtype} rc = getOutputCoords();\n        vec4 packedInput = getA(${sourceCoords});\n\n        setOutput(getChannel(packedInput, ${coords}));\n      }\n    `;\n    }\n  }\n});","lineCount":56,"map":[[7,2,20,0,"Object"],[7,8,20,0],[7,9,20,0,"defineProperty"],[7,23,20,0],[7,24,20,0,"exports"],[7,31,20,0],[8,4,20,0,"enumerable"],[8,14,20,0],[9,4,20,0,"get"],[9,7,20,0],[9,18,20,0,"get"],[9,19,20,0],[10,6,20,0],[10,13,20,0,"UnpackProgram"],[10,26,20,0],[11,4,20,0],[12,2,20,0],[13,2,17,0],[13,6,17,0,"_gpgpu_math"],[13,17,17,0],[13,20,17,0,"require"],[13,27,17,0],[13,28,17,0,"_dependencyMap"],[13,42,17,0],[14,2,18,0],[14,6,18,0,"_packing_util"],[14,19,18,0],[14,22,18,0,"require"],[14,29,18,0],[14,30,18,0,"_dependencyMap"],[14,44,18,0],[15,2,19,0],[15,6,19,0,"_shader_compiler"],[15,22,19,0],[15,25,19,0,"require"],[15,32,19,0],[15,33,19,0,"_dependencyMap"],[15,47,19,0],[16,2,1,0],[17,0,2,0],[18,0,3,0],[19,0,4,0],[20,0,5,0],[21,0,6,0],[22,0,7,0],[23,0,8,0],[24,0,9,0],[25,0,10,0],[26,0,11,0],[27,0,12,0],[28,0,13,0],[29,0,14,0],[30,0,15,0],[31,0,16,0],[33,2,20,7],[33,8,20,13,"UnpackProgram"],[33,21,20,26],[33,22,20,27],[34,4,21,4,"constructor"],[34,15,21,15,"constructor"],[34,16,21,16,"outputShape"],[34,27,21,27],[34,29,21,29],[35,6,22,8],[35,10,22,12],[35,11,22,13,"variableNames"],[35,24,22,26],[35,27,22,29],[35,28,22,30],[35,31,22,33],[35,32,22,34],[36,6,23,8],[36,10,23,12],[36,11,23,13,"packedInputs"],[36,23,23,25],[36,26,23,28],[36,30,23,32],[37,6,24,8],[37,10,24,12],[37,11,24,13,"packedOutput"],[37,23,24,25],[37,26,24,28],[37,31,24,33],[38,6,25,8],[38,10,25,12],[38,11,25,13,"outputShape"],[38,22,25,24],[38,25,25,27,"outputShape"],[38,36,25,38],[39,6,26,8],[39,10,26,12],[39,11,26,13,"enableShapeUniforms"],[39,30,26,32],[39,33,26,35],[39,37,26,35,"useShapeUniforms"],[39,48,26,51],[39,49,26,51,"useShapeUniforms"],[39,65,26,51],[39,67,26,52],[39,71,26,56],[39,72,26,57,"outputShape"],[39,83,26,68],[39,84,26,69,"length"],[39,90,26,75],[39,91,26,76],[40,6,27,8],[40,12,27,14,"rank"],[40,16,27,18],[40,19,27,21,"outputShape"],[40,30,27,32],[40,31,27,33,"length"],[40,37,27,39],[41,6,28,8],[41,12,28,14,"channels"],[41,20,28,22],[41,23,28,25],[41,27,28,25,"getChannels"],[41,40,28,36],[41,41,28,36,"getChannels"],[41,52,28,36],[41,54,28,37],[41,58,28,41],[41,60,28,43,"rank"],[41,64,28,47],[41,65,28,48],[42,6,29,8],[42,12,29,14,"dtype"],[42,17,29,19],[42,20,29,22],[42,24,29,22,"getCoordsDataType"],[42,40,29,39],[42,41,29,39,"getCoordsDataType"],[42,58,29,39],[42,60,29,40,"rank"],[42,64,29,44],[42,65,29,45],[43,6,30,8],[43,12,30,14,"sourceCoords"],[43,24,30,26],[43,27,30,29],[43,31,30,29,"getSourceCoords"],[43,44,30,44],[43,45,30,44,"getSourceCoords"],[43,60,30,44],[43,62,30,45,"rank"],[43,66,30,49],[43,68,30,51,"channels"],[43,76,30,59],[43,77,30,60],[44,6,31,8],[44,12,31,14,"innerDims"],[44,21,31,23],[44,24,31,26,"channels"],[44,32,31,34],[44,33,31,35,"slice"],[44,38,31,40],[44,39,31,41],[44,40,31,42],[44,41,31,43],[44,42,31,44],[45,6,32,8],[45,12,32,14,"coords"],[45,18,32,20],[45,21,32,23,"rank"],[45,25,32,27],[45,29,32,31],[45,30,32,32],[45,33,32,35],[45,37,32,39],[45,40,32,42],[45,48,32,50,"innerDims"],[45,57,32,59],[45,58,32,60,"join"],[45,62,32,64],[45,63,32,65],[45,66,32,68],[45,67,32,69],[45,70,32,72],[46,6,33,8],[46,10,33,12],[46,11,33,13,"userCode"],[46,19,33,21],[46,22,33,24],[47,0,34,0],[48,0,35,0],[48,10,35,10,"dtype"],[48,15,35,15],[49,0,36,0],[49,34,36,34,"sourceCoords"],[49,46,36,46],[50,0,37,0],[51,0,38,0],[51,44,38,44,"coords"],[51,50,38,50],[52,0,39,0],[53,0,40,0],[53,5,40,5],[54,4,41,4],[55,2,42,0],[56,0,42,1],[56,3]],"functionMap":{"names":["<global>","UnpackProgram","UnpackProgram#constructor"],"mappings":"AAA;OCmB;ICC;KDoB;CDC"},"hasCjsExports":false},"type":"js/module"}]}