{"dependencies":[{"name":"./shader_compiler","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":54,"index":757}}],"key":"yVSKlvZSxQn3Ck2puzGVWEYPzq8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"SelectProgram\", {\n    enumerable: true,\n    get: function () {\n      return SelectProgram;\n    }\n  });\n  var _shader_compiler = require(_dependencyMap[0], \"./shader_compiler\");\n  /**\n   * @license\n   * Copyright 2017 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  class SelectProgram {\n    constructor(cRank, shape, rank) {\n      this.variableNames = ['c', 'a', 'b'];\n      this.outputShape = shape;\n      let cCoords;\n      let abCoords;\n      if (rank > 4) {\n        throw Error(`Where for rank ${rank} is not yet supported`);\n      }\n      if (rank === 1) {\n        abCoords = `resRC`;\n        cCoords = `resRC`;\n      } else {\n        const currentCoords = ['resRC.x', 'resRC.y', 'resRC.z', 'resRC.w'];\n        const cCoordVars = [];\n        const abCoordVars = [];\n        for (let i = 0; i < shape.length; i++) {\n          abCoordVars.push(`${currentCoords[i]}`);\n          if (i < cRank) {\n            cCoordVars.push(`${currentCoords[i]}`);\n          }\n        }\n        cCoords = cCoordVars.join();\n        abCoords = abCoordVars.join();\n      }\n      const dtype = (0, _shader_compiler.getCoordsDataType)(rank);\n      this.userCode = `\n      void main() {\n        ${dtype} resRC = getOutputCoords();\n        float cVal = getC(${cCoords});\n        if (cVal >= 1.0) {\n          setOutput(getA(${abCoords}));\n        } else {\n          setOutput(getB(${abCoords}));\n        }\n      }\n    `;\n    }\n  }\n});","lineCount":70,"map":[[7,2,18,0,"Object"],[7,8,18,0],[7,9,18,0,"defineProperty"],[7,23,18,0],[7,24,18,0,"exports"],[7,31,18,0],[8,4,18,0,"enumerable"],[8,14,18,0],[9,4,18,0,"get"],[9,7,18,0],[9,18,18,0,"get"],[9,19,18,0],[10,6,18,0],[10,13,18,0,"SelectProgram"],[10,26,18,0],[11,4,18,0],[12,2,18,0],[13,2,17,0],[13,6,17,0,"_shader_compiler"],[13,22,17,0],[13,25,17,0,"require"],[13,32,17,0],[13,33,17,0,"_dependencyMap"],[13,47,17,0],[14,2,1,0],[15,0,2,0],[16,0,3,0],[17,0,4,0],[18,0,5,0],[19,0,6,0],[20,0,7,0],[21,0,8,0],[22,0,9,0],[23,0,10,0],[24,0,11,0],[25,0,12,0],[26,0,13,0],[27,0,14,0],[28,0,15,0],[29,0,16,0],[31,2,18,7],[31,8,18,13,"SelectProgram"],[31,21,18,26],[31,22,18,27],[32,4,19,4,"constructor"],[32,15,19,15,"constructor"],[32,16,19,16,"cRank"],[32,21,19,21],[32,23,19,23,"shape"],[32,28,19,28],[32,30,19,30,"rank"],[32,34,19,34],[32,36,19,36],[33,6,20,8],[33,10,20,12],[33,11,20,13,"variableNames"],[33,24,20,26],[33,27,20,29],[33,28,20,30],[33,31,20,33],[33,33,20,35],[33,36,20,38],[33,38,20,40],[33,41,20,43],[33,42,20,44],[34,6,21,8],[34,10,21,12],[34,11,21,13,"outputShape"],[34,22,21,24],[34,25,21,27,"shape"],[34,30,21,32],[35,6,22,8],[35,10,22,12,"cCoords"],[35,17,22,19],[36,6,23,8],[36,10,23,12,"abCoords"],[36,18,23,20],[37,6,24,8],[37,10,24,12,"rank"],[37,14,24,16],[37,17,24,19],[37,18,24,20],[37,20,24,22],[38,8,25,12],[38,14,25,18,"Error"],[38,19,25,23],[38,20,25,24],[38,38,25,42,"rank"],[38,42,25,46],[38,65,25,69],[38,66,25,70],[39,6,26,8],[40,6,27,8],[40,10,27,12,"rank"],[40,14,27,16],[40,19,27,21],[40,20,27,22],[40,22,27,24],[41,8,28,12,"abCoords"],[41,16,28,20],[41,19,28,23],[41,26,28,30],[42,8,29,12,"cCoords"],[42,15,29,19],[42,18,29,22],[42,25,29,29],[43,6,30,8],[43,7,30,9],[43,13,31,13],[44,8,32,12],[44,14,32,18,"currentCoords"],[44,27,32,31],[44,30,32,34],[44,31,32,35],[44,40,32,44],[44,42,32,46],[44,51,32,55],[44,53,32,57],[44,62,32,66],[44,64,32,68],[44,73,32,77],[44,74,32,78],[45,8,33,12],[45,14,33,18,"cCoordVars"],[45,24,33,28],[45,27,33,31],[45,29,33,33],[46,8,34,12],[46,14,34,18,"abCoordVars"],[46,25,34,29],[46,28,34,32],[46,30,34,34],[47,8,35,12],[47,13,35,17],[47,17,35,21,"i"],[47,18,35,22],[47,21,35,25],[47,22,35,26],[47,24,35,28,"i"],[47,25,35,29],[47,28,35,32,"shape"],[47,33,35,37],[47,34,35,38,"length"],[47,40,35,44],[47,42,35,46,"i"],[47,43,35,47],[47,45,35,49],[47,47,35,51],[48,10,36,16,"abCoordVars"],[48,21,36,27],[48,22,36,28,"push"],[48,26,36,32],[48,27,36,33],[48,30,36,36,"currentCoords"],[48,43,36,49],[48,44,36,50,"i"],[48,45,36,51],[48,46,36,52],[48,48,36,54],[48,49,36,55],[49,10,37,16],[49,14,37,20,"i"],[49,15,37,21],[49,18,37,24,"cRank"],[49,23,37,29],[49,25,37,31],[50,12,38,20,"cCoordVars"],[50,22,38,30],[50,23,38,31,"push"],[50,27,38,35],[50,28,38,36],[50,31,38,39,"currentCoords"],[50,44,38,52],[50,45,38,53,"i"],[50,46,38,54],[50,47,38,55],[50,49,38,57],[50,50,38,58],[51,10,39,16],[52,8,40,12],[53,8,41,12,"cCoords"],[53,15,41,19],[53,18,41,22,"cCoordVars"],[53,28,41,32],[53,29,41,33,"join"],[53,33,41,37],[53,34,41,38],[53,35,41,39],[54,8,42,12,"abCoords"],[54,16,42,20],[54,19,42,23,"abCoordVars"],[54,30,42,34],[54,31,42,35,"join"],[54,35,42,39],[54,36,42,40],[54,37,42,41],[55,6,43,8],[56,6,44,8],[56,12,44,14,"dtype"],[56,17,44,19],[56,20,44,22],[56,24,44,22,"getCoordsDataType"],[56,40,44,39],[56,41,44,39,"getCoordsDataType"],[56,58,44,39],[56,60,44,40,"rank"],[56,64,44,44],[56,65,44,45],[57,6,45,8],[57,10,45,12],[57,11,45,13,"userCode"],[57,19,45,21],[57,22,45,24],[58,0,46,0],[59,0,47,0],[59,10,47,10,"dtype"],[59,15,47,15],[60,0,48,0],[60,28,48,28,"cCoords"],[60,35,48,35],[61,0,49,0],[62,0,50,0],[62,27,50,27,"abCoords"],[62,35,50,35],[63,0,51,0],[64,0,52,0],[64,27,52,27,"abCoords"],[64,35,52,35],[65,0,53,0],[66,0,54,0],[67,0,55,0],[67,5,55,5],[68,4,56,4],[69,2,57,0],[70,0,57,1],[70,3]],"functionMap":{"names":["<global>","SelectProgram","SelectProgram#constructor"],"mappings":"AAA;OCiB;ICC;KDqC;CDC"},"hasCjsExports":false},"type":"js/module"}]}