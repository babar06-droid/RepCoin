{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":79,"index":782}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}},{"name":"../kernel_utils/shared","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":783},"end":{"line":18,"column":61,"index":844}}],"key":"JzS9qfQGP0NvwhobUV8d6bPV3h4=","exportNames":["*"],"imports":1}},{"name":"../strided_slice_gpu","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":845},"end":{"line":19,"column":59,"index":904}}],"key":"K2ks/u906WTduAMXTnV4P9NohhI=","exportNames":["*"],"imports":1}},{"name":"./Reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":905},"end":{"line":20,"column":36,"index":941}}],"key":"EUWK+oKi/AwokPOQ1jng5DYfQSc=","exportNames":["*"],"imports":1}},{"name":"./Slice","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":942},"end":{"line":21,"column":32,"index":974}}],"key":"vT5DoMUDLMOWA6T5MsUbbgr2jdc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.stridedSlice = stridedSlice;\n  Object.defineProperty(exports, \"stridedSliceConfig\", {\n    enumerable: true,\n    get: function () {\n      return stridedSliceConfig;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  var _kernel_utilsShared = require(_dependencyMap[1], \"../kernel_utils/shared\");\n  var _strided_slice_gpu = require(_dependencyMap[2], \"../strided_slice_gpu\");\n  var _Reshape = require(_dependencyMap[3], \"./Reshape\");\n  var _Slice = require(_dependencyMap[4], \"./Slice\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  function stridedSlice(args) {\n    const {\n      inputs,\n      backend,\n      attrs\n    } = args;\n    const {\n      x\n    } = inputs;\n    const {\n      begin,\n      end,\n      strides,\n      beginMask,\n      endMask,\n      ellipsisMask,\n      newAxisMask,\n      shrinkAxisMask\n    } = attrs;\n    const {\n      finalShapeSparse,\n      finalShape,\n      isIdentity,\n      sliceDim0,\n      isSimpleSlice,\n      begin: $begin,\n      end: $end,\n      strides: $strides\n    } = _tensorflowTfjsCore.slice_util.sliceInfo(x.shape, begin, end, strides, beginMask, endMask, ellipsisMask, newAxisMask, shrinkAxisMask);\n    let result;\n    if (isIdentity) {\n      // Optimization #1, slice is a no-op plus reshape\n      result = (0, _Reshape.reshape)({\n        inputs: {\n          x\n        },\n        backend,\n        attrs: {\n          shape: finalShape\n        }\n      });\n    } else if (sliceDim0 || isSimpleSlice) {\n      // Optimization #2, slice is memory contiguous (only occurs in dim 0)\n      _tensorflowTfjsCore.util.assert(x.shape.length >= 1, () => `Input must have rank at least 1, got: ${x.shape.length}`);\n      const size = _tensorflowTfjsCore.slice_util.computeOutShape($begin, $end, $strides);\n      // To tolerate begin[0] > end[0] (a 0-output slice), we min(begin, end).\n      const sliced = (0, _Slice.slice)({\n        inputs: {\n          x\n        },\n        backend,\n        attrs: {\n          begin: $begin,\n          size\n        }\n      });\n      result = (0, _Reshape.reshape)({\n        inputs: {\n          x: sliced\n        },\n        backend,\n        attrs: {\n          shape: finalShape\n        }\n      });\n      backend.disposeIntermediateTensorInfo(sliced);\n    } else {\n      const shouldExecuteOnCPU = backend.shouldExecuteOnCPU([x]);\n      if (shouldExecuteOnCPU) {\n        // tslint:disable-next-line: no-unnecessary-type-assertion\n        const values = backend.readSync(x.dataId);\n        // tslint:disable-next-line: no-unnecessary-type-assertion\n        const xBuf = (0, _tensorflowTfjsCore.buffer)(x.shape, x.dtype, values);\n        const resultValues = (0, _kernel_utilsShared.stridedSliceImplCPU)(finalShapeSparse, xBuf, $strides, $begin);\n        result = backend.makeTensorInfo(finalShape, x.dtype, resultValues.values);\n      } else {\n        const program = new _strided_slice_gpu.StridedSliceProgram($begin, $strides, finalShapeSparse);\n        result = backend.runWebGLProgram(program, [x], x.dtype);\n      }\n    }\n    const resultReshaped = (0, _Reshape.reshape)({\n      inputs: {\n        x: result\n      },\n      backend,\n      attrs: {\n        shape: finalShape\n      }\n    });\n    backend.disposeIntermediateTensorInfo(result);\n    return resultReshaped;\n  }\n  const stridedSliceConfig = {\n    kernelName: _tensorflowTfjsCore.StridedSlice,\n    backendName: 'webgl',\n    kernelFunc: stridedSlice\n  };\n});","lineCount":133,"map":[[7,2,22,0,"exports"],[7,9,22,0],[7,10,22,0,"stridedSlice"],[7,22,22,0],[7,25,22,0,"stridedSlice"],[7,37,22,0],[8,2,61,0,"Object"],[8,8,61,0],[8,9,61,0,"defineProperty"],[8,23,61,0],[8,24,61,0,"exports"],[8,31,61,0],[9,4,61,0,"enumerable"],[9,14,61,0],[10,4,61,0,"get"],[10,7,61,0],[10,18,61,0,"get"],[10,19,61,0],[11,6,61,0],[11,13,61,0,"stridedSliceConfig"],[11,31,61,0],[12,4,61,0],[13,2,61,0],[14,2,17,0],[14,6,17,0,"_tensorflowTfjsCore"],[14,25,17,0],[14,28,17,0,"require"],[14,35,17,0],[14,36,17,0,"_dependencyMap"],[14,50,17,0],[15,2,18,0],[15,6,18,0,"_kernel_utilsShared"],[15,25,18,0],[15,28,18,0,"require"],[15,35,18,0],[15,36,18,0,"_dependencyMap"],[15,50,18,0],[16,2,19,0],[16,6,19,0,"_strided_slice_gpu"],[16,24,19,0],[16,27,19,0,"require"],[16,34,19,0],[16,35,19,0,"_dependencyMap"],[16,49,19,0],[17,2,20,0],[17,6,20,0,"_Reshape"],[17,14,20,0],[17,17,20,0,"require"],[17,24,20,0],[17,25,20,0,"_dependencyMap"],[17,39,20,0],[18,2,21,0],[18,6,21,0,"_Slice"],[18,12,21,0],[18,15,21,0,"require"],[18,22,21,0],[18,23,21,0,"_dependencyMap"],[18,37,21,0],[19,2,1,0],[20,0,2,0],[21,0,3,0],[22,0,4,0],[23,0,5,0],[24,0,6,0],[25,0,7,0],[26,0,8,0],[27,0,9,0],[28,0,10,0],[29,0,11,0],[30,0,12,0],[31,0,13,0],[32,0,14,0],[33,0,15,0],[34,0,16,0],[36,2,22,7],[36,11,22,16,"stridedSlice"],[36,23,22,28,"stridedSlice"],[36,24,22,29,"args"],[36,28,22,33],[36,30,22,35],[37,4,23,4],[37,10,23,10],[38,6,23,12,"inputs"],[38,12,23,18],[39,6,23,20,"backend"],[39,13,23,27],[40,6,23,29,"attrs"],[41,4,23,35],[41,5,23,36],[41,8,23,39,"args"],[41,12,23,43],[42,4,24,4],[42,10,24,10],[43,6,24,12,"x"],[44,4,24,14],[44,5,24,15],[44,8,24,18,"inputs"],[44,14,24,24],[45,4,25,4],[45,10,25,10],[46,6,25,12,"begin"],[46,11,25,17],[47,6,25,19,"end"],[47,9,25,22],[48,6,25,24,"strides"],[48,13,25,31],[49,6,25,33,"beginMask"],[49,15,25,42],[50,6,25,44,"endMask"],[50,13,25,51],[51,6,25,53,"ellipsisMask"],[51,18,25,65],[52,6,25,67,"newAxisMask"],[52,17,25,78],[53,6,25,80,"shrinkAxisMask"],[54,4,25,95],[54,5,25,96],[54,8,25,99,"attrs"],[54,13,25,104],[55,4,26,4],[55,10,26,10],[56,6,26,12,"finalShapeSparse"],[56,22,26,28],[57,6,26,30,"finalShape"],[57,16,26,40],[58,6,26,42,"isIdentity"],[58,16,26,52],[59,6,26,54,"sliceDim0"],[59,15,26,63],[60,6,26,65,"isSimpleSlice"],[60,19,26,78],[61,6,26,80,"begin"],[61,11,26,85],[61,13,26,87,"$begin"],[61,19,26,93],[62,6,26,95,"end"],[62,9,26,98],[62,11,26,100,"$end"],[62,15,26,104],[63,6,26,106,"strides"],[63,13,26,113],[63,15,26,115,"$strides"],[64,4,26,124],[64,5,26,125],[64,8,26,128,"slice_util"],[64,27,26,138],[64,28,26,138,"slice_util"],[64,38,26,138],[64,39,26,139,"sliceInfo"],[64,48,26,148],[64,49,26,149,"x"],[64,50,26,150],[64,51,26,151,"shape"],[64,56,26,156],[64,58,26,158,"begin"],[64,63,26,163],[64,65,26,165,"end"],[64,68,26,168],[64,70,26,170,"strides"],[64,77,26,177],[64,79,26,179,"beginMask"],[64,88,26,188],[64,90,26,190,"endMask"],[64,97,26,197],[64,99,26,199,"ellipsisMask"],[64,111,26,211],[64,113,26,213,"newAxisMask"],[64,124,26,224],[64,126,26,226,"shrinkAxisMask"],[64,140,26,240],[64,141,26,241],[65,4,27,4],[65,8,27,8,"result"],[65,14,27,14],[66,4,28,4],[66,8,28,8,"isIdentity"],[66,18,28,18],[66,20,28,20],[67,6,29,8],[68,6,30,8,"result"],[68,12,30,14],[68,15,30,17],[68,19,30,17,"reshape"],[68,27,30,24],[68,28,30,24,"reshape"],[68,35,30,24],[68,37,30,25],[69,8,30,27,"inputs"],[69,14,30,33],[69,16,30,35],[70,10,30,37,"x"],[71,8,30,39],[71,9,30,40],[72,8,30,42,"backend"],[72,15,30,49],[73,8,30,51,"attrs"],[73,13,30,56],[73,15,30,58],[74,10,30,60,"shape"],[74,15,30,65],[74,17,30,67,"finalShape"],[75,8,30,78],[76,6,30,80],[76,7,30,81],[76,8,30,82],[77,4,31,4],[77,5,31,5],[77,11,32,9],[77,15,32,13,"sliceDim0"],[77,24,32,22],[77,28,32,26,"isSimpleSlice"],[77,41,32,39],[77,43,32,41],[78,6,33,8],[79,6,34,8,"util"],[79,25,34,12],[79,26,34,12,"util"],[79,30,34,12],[79,31,34,13,"assert"],[79,37,34,19],[79,38,34,20,"x"],[79,39,34,21],[79,40,34,22,"shape"],[79,45,34,27],[79,46,34,28,"length"],[79,52,34,34],[79,56,34,38],[79,57,34,39],[79,59,34,41],[79,65,34,47],[79,106,34,88,"x"],[79,107,34,89],[79,108,34,90,"shape"],[79,113,34,95],[79,114,34,96,"length"],[79,120,34,102],[79,122,34,104],[79,123,34,105],[80,6,35,8],[80,12,35,14,"size"],[80,16,35,18],[80,19,35,21,"slice_util"],[80,38,35,31],[80,39,35,31,"slice_util"],[80,49,35,31],[80,50,35,32,"computeOutShape"],[80,65,35,47],[80,66,35,48,"$begin"],[80,72,35,54],[80,74,35,56,"$end"],[80,78,35,60],[80,80,35,62,"$strides"],[80,88,35,70],[80,89,35,71],[81,6,36,8],[82,6,37,8],[82,12,37,14,"sliced"],[82,18,37,20],[82,21,37,23],[82,25,37,23,"slice"],[82,31,37,28],[82,32,37,28,"slice"],[82,37,37,28],[82,39,37,29],[83,8,37,31,"inputs"],[83,14,37,37],[83,16,37,39],[84,10,37,41,"x"],[85,8,37,43],[85,9,37,44],[86,8,37,46,"backend"],[86,15,37,53],[87,8,37,55,"attrs"],[87,13,37,60],[87,15,37,62],[88,10,37,64,"begin"],[88,15,37,69],[88,17,37,71,"$begin"],[88,23,37,77],[89,10,37,79,"size"],[90,8,37,84],[91,6,37,86],[91,7,37,87],[91,8,37,88],[92,6,38,8,"result"],[92,12,38,14],[92,15,39,12],[92,19,39,12,"reshape"],[92,27,39,19],[92,28,39,19,"reshape"],[92,35,39,19],[92,37,39,20],[93,8,39,22,"inputs"],[93,14,39,28],[93,16,39,30],[94,10,39,32,"x"],[94,11,39,33],[94,13,39,35,"sliced"],[95,8,39,42],[95,9,39,43],[96,8,39,45,"backend"],[96,15,39,52],[97,8,39,54,"attrs"],[97,13,39,59],[97,15,39,61],[98,10,39,63,"shape"],[98,15,39,68],[98,17,39,70,"finalShape"],[99,8,39,81],[100,6,39,83],[100,7,39,84],[100,8,39,85],[101,6,40,8,"backend"],[101,13,40,15],[101,14,40,16,"disposeIntermediateTensorInfo"],[101,43,40,45],[101,44,40,46,"sliced"],[101,50,40,52],[101,51,40,53],[102,4,41,4],[102,5,41,5],[102,11,42,9],[103,6,43,8],[103,12,43,14,"shouldExecuteOnCPU"],[103,30,43,32],[103,33,43,35,"backend"],[103,40,43,42],[103,41,43,43,"shouldExecuteOnCPU"],[103,59,43,61],[103,60,43,62],[103,61,43,63,"x"],[103,62,43,64],[103,63,43,65],[103,64,43,66],[104,6,44,8],[104,10,44,12,"shouldExecuteOnCPU"],[104,28,44,30],[104,30,44,32],[105,8,45,12],[106,8,46,12],[106,14,46,18,"values"],[106,20,46,24],[106,23,46,27,"backend"],[106,30,46,34],[106,31,46,35,"readSync"],[106,39,46,43],[106,40,46,44,"x"],[106,41,46,45],[106,42,46,46,"dataId"],[106,48,46,52],[106,49,46,53],[107,8,47,12],[108,8,48,12],[108,14,48,18,"xBuf"],[108,18,48,22],[108,21,48,25],[108,25,48,25,"buffer"],[108,44,48,31],[108,45,48,31,"buffer"],[108,51,48,31],[108,53,48,32,"x"],[108,54,48,33],[108,55,48,34,"shape"],[108,60,48,39],[108,62,48,41,"x"],[108,63,48,42],[108,64,48,43,"dtype"],[108,69,48,48],[108,71,48,50,"values"],[108,77,48,56],[108,78,48,57],[109,8,49,12],[109,14,49,18,"resultValues"],[109,26,49,30],[109,29,49,33],[109,33,49,33,"stridedSliceImplCPU"],[109,52,49,52],[109,53,49,52,"stridedSliceImplCPU"],[109,72,49,52],[109,74,49,53,"finalShapeSparse"],[109,90,49,69],[109,92,49,71,"xBuf"],[109,96,49,75],[109,98,49,77,"$strides"],[109,106,49,85],[109,108,49,87,"$begin"],[109,114,49,93],[109,115,49,94],[110,8,50,12,"result"],[110,14,50,18],[110,17,50,21,"backend"],[110,24,50,28],[110,25,50,29,"makeTensorInfo"],[110,39,50,43],[110,40,50,44,"finalShape"],[110,50,50,54],[110,52,50,56,"x"],[110,53,50,57],[110,54,50,58,"dtype"],[110,59,50,63],[110,61,50,65,"resultValues"],[110,73,50,77],[110,74,50,78,"values"],[110,80,50,84],[110,81,50,85],[111,6,51,8],[111,7,51,9],[111,13,52,13],[112,8,53,12],[112,14,53,18,"program"],[112,21,53,25],[112,24,53,28],[112,28,53,32,"StridedSliceProgram"],[112,46,53,51],[112,47,53,51,"StridedSliceProgram"],[112,66,53,51],[112,67,53,52,"$begin"],[112,73,53,58],[112,75,53,60,"$strides"],[112,83,53,68],[112,85,53,70,"finalShapeSparse"],[112,101,53,86],[112,102,53,87],[113,8,54,12,"result"],[113,14,54,18],[113,17,54,21,"backend"],[113,24,54,28],[113,25,54,29,"runWebGLProgram"],[113,40,54,44],[113,41,54,45,"program"],[113,48,54,52],[113,50,54,54],[113,51,54,55,"x"],[113,52,54,56],[113,53,54,57],[113,55,54,59,"x"],[113,56,54,60],[113,57,54,61,"dtype"],[113,62,54,66],[113,63,54,67],[114,6,55,8],[115,4,56,4],[116,4,57,4],[116,10,57,10,"resultReshaped"],[116,24,57,24],[116,27,57,27],[116,31,57,27,"reshape"],[116,39,57,34],[116,40,57,34,"reshape"],[116,47,57,34],[116,49,57,35],[117,6,57,37,"inputs"],[117,12,57,43],[117,14,57,45],[118,8,57,47,"x"],[118,9,57,48],[118,11,57,50,"result"],[119,6,57,57],[119,7,57,58],[120,6,57,60,"backend"],[120,13,57,67],[121,6,57,69,"attrs"],[121,11,57,74],[121,13,57,76],[122,8,57,78,"shape"],[122,13,57,83],[122,15,57,85,"finalShape"],[123,6,57,96],[124,4,57,98],[124,5,57,99],[124,6,57,100],[125,4,58,4,"backend"],[125,11,58,11],[125,12,58,12,"disposeIntermediateTensorInfo"],[125,41,58,41],[125,42,58,42,"result"],[125,48,58,48],[125,49,58,49],[126,4,59,4],[126,11,59,11,"resultReshaped"],[126,25,59,25],[127,2,60,0],[128,2,61,7],[128,8,61,13,"stridedSliceConfig"],[128,26,61,31],[128,29,61,34],[129,4,62,4,"kernelName"],[129,14,62,14],[129,16,62,16,"StridedSlice"],[129,35,62,28],[129,36,62,28,"StridedSlice"],[129,48,62,28],[130,4,63,4,"backendName"],[130,15,63,15],[130,17,63,17],[130,24,63,24],[131,4,64,4,"kernelFunc"],[131,14,64,14],[131,16,64,16,"stridedSlice"],[132,2,65,0],[132,3,65,1],[133,0,65,2],[133,3]],"functionMap":{"names":["<global>","stridedSlice","util.assert$argument_1"],"mappings":"AAA;OCqB;yCCY,+DD;CD0B"},"hasCjsExports":false},"type":"js/module"}]}