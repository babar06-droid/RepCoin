{"dependencies":[{"name":"../engine","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":35,"index":738}}],"key":"zbTTi8rtwr8rjl75PzEo829Yvss=","exportNames":["*"],"imports":1}},{"name":"../kernel_names","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":739},"end":{"line":18,"column":47,"index":786}}],"key":"gQVznmdGA0uoBQvR5Q4/qW+ITHg=","exportNames":["*"],"imports":1}},{"name":"../tensor_util_env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":787},"end":{"line":19,"column":53,"index":840}}],"key":"UCKDOr/oOGi3nbD26ZhyAVW61qk=","exportNames":["*"],"imports":1}},{"name":"../util_base","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":841},"end":{"line":20,"column":45,"index":886}}],"key":"1ccyuuVckWa4c5ThWdKkMdVe+ak=","exportNames":["*"],"imports":1}},{"name":"./operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":887},"end":{"line":21,"column":33,"index":920}}],"key":"lmmEAb6oR3TWnrsrETceKUovfkM=","exportNames":["*"],"imports":1}},{"name":"./reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":22,"column":0,"index":921},"end":{"line":22,"column":36,"index":957}}],"key":"dz8GCsFShMGnHX1Wj7bBySjBnSE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"searchSorted\", {\n    enumerable: true,\n    get: function () {\n      return searchSorted;\n    }\n  });\n  var _engine = require(_dependencyMap[0], \"../engine\");\n  var _kernel_names = require(_dependencyMap[1], \"../kernel_names\");\n  var _tensor_util_env = require(_dependencyMap[2], \"../tensor_util_env\");\n  var _util_base = require(_dependencyMap[3], \"../util_base\");\n  var _operation = require(_dependencyMap[4], \"./operation\");\n  var _reshape = require(_dependencyMap[5], \"./reshape\");\n  /**\n   * @license\n   * Copyright 2022 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  const INT32_MAX = 2147483648;\n  /**\n   * Searches for where a value would go in a sorted sequence.\n   *\n   * This is not a method for checking containment (like javascript in).\n   *\n   * The typical use case for this operation is \"binning\", \"bucketing\", or\n   * \"discretizing\". The values are assigned to bucket-indices based on the edges\n   * listed in 'sortedSequence'. This operation returns the bucket-index for each\n   * value.\n   *\n   * The side argument controls which index is returned if a value lands exactly\n   * on an edge.\n   *\n   * The axis is not settable for this operation. It always operates on the\n   * innermost dimension (axis=-1). The operation will accept any number of outer\n   * dimensions.\n   *\n   * Note: This operation assumes that 'sortedSequence' is sorted along the\n   * innermost axis, maybe using 'sort(..., axis=-1)'. If the sequence is not\n   * sorted no error is raised and the content of the returned tensor is not well\n   * defined.\n   *\n   * ```js\n   * const edges = tf.tensor1d([-1, 3.3, 9.1, 10.0]);\n   * let values = tf.tensor1d([0.0, 4.1, 12.0]);\n   * const result1 = tf.searchSorted(edges, values, 'left');\n   * result1.print(); // [1, 2, 4]\n   *\n   * const seq = tf.tensor1d([0, 3, 9, 10, 10]);\n   * values = tf.tensor1d([0, 4, 10]);\n   * const result2 = tf.searchSorted(seq, values, 'left');\n   * result2.print(); // [0, 2, 3]\n   * const result3 = tf.searchSorted(seq, values, 'right');\n   * result3.print(); // [1, 2, 5]\n   *\n   * const sortedSequence = tf.tensor2d([[0., 3., 8., 9., 10.],\n   *                                     [1., 2., 3., 4., 5.]]);\n   * values = tf.tensor2d([[9.8, 2.1, 4.3],\n   *                       [0.1, 6.6, 4.5, ]]);\n   * const result4 = tf.searchSorted(sortedSequence, values, 'left');\n   * result4.print(); // [[4, 1, 2], [0, 5, 4]]\n   * ```\n   * @param sortedSequence: N-D. Sorted sequence.\n   * @param values: N-D. Search values.\n   * @param side: 'left'|'right'. Defaults to 'left'. 'left' corresponds to lower\n   *     bound and 'right' to upper bound.\n   * @return An N-D int32 tensor the size of values containing the result of\n   *     applying either lower bound or upper bound (depending on side) to each\n   *     value. The result is not a global index to the entire Tensor, but the\n   *     index in the last dimension.\n   * @doc {heading: 'Operations', subheading: 'Evaluation'}\n   */\n  function searchSorted_(sortedSequence, values, side = 'left') {\n    const $sortedSequence = (0, _tensor_util_env.convertToTensor)(sortedSequence, 'sortedSequence', 'searchSorted');\n    const $values = (0, _tensor_util_env.convertToTensor)(values, 'values', 'searchSorted');\n    const sequenceSize = $sortedSequence.shape[$sortedSequence.shape.length - 1];\n    const valuesSize = $values.shape[$values.shape.length - 1];\n    const $sortedSequence2D = (0, _reshape.reshape)($sortedSequence, [-1, sequenceSize]);\n    const $values2D = (0, _reshape.reshape)($values, [-1, valuesSize]);\n    if ($sortedSequence2D.rank < 2) {\n      throw new Error(`Sorted input argument must be at least 2-dimensional`);\n    }\n    if ($sortedSequence2D.shape[0] !== $values2D.shape[0]) {\n      throw new Error(`Leading dimension of 'sortedSequence' and 'values' must match.`);\n    }\n    if ((0, _util_base.sizeFromShape)($values2D.shape) >= INT32_MAX) {\n      throw new Error(`values tensor size must less than ${INT32_MAX}`);\n    }\n    if ($sortedSequence2D.shape[1] >= INT32_MAX) {\n      throw new Error(`trailing dim_size must less than ${INT32_MAX} for int32 output type, was ${$sortedSequence2D.shape[1]}`);\n    }\n    const inputs = {\n      sortedSequence: $sortedSequence2D,\n      values: $values2D\n    };\n    const attrs = {\n      side\n    };\n    return _engine.ENGINE.runKernel(_kernel_names.SearchSorted, inputs, attrs);\n  }\n  const searchSorted = /* @__PURE__ */(0, _operation.op)({\n    searchSorted_\n  });\n});","lineCount":120,"map":[[7,2,102,0,"Object"],[7,8,102,0],[7,9,102,0,"defineProperty"],[7,23,102,0],[7,24,102,0,"exports"],[7,31,102,0],[8,4,102,0,"enumerable"],[8,14,102,0],[9,4,102,0,"get"],[9,7,102,0],[9,18,102,0,"get"],[9,19,102,0],[10,6,102,0],[10,13,102,0,"searchSorted"],[10,25,102,0],[11,4,102,0],[12,2,102,0],[13,2,17,0],[13,6,17,0,"_engine"],[13,13,17,0],[13,16,17,0,"require"],[13,23,17,0],[13,24,17,0,"_dependencyMap"],[13,38,17,0],[14,2,18,0],[14,6,18,0,"_kernel_names"],[14,19,18,0],[14,22,18,0,"require"],[14,29,18,0],[14,30,18,0,"_dependencyMap"],[14,44,18,0],[15,2,19,0],[15,6,19,0,"_tensor_util_env"],[15,22,19,0],[15,25,19,0,"require"],[15,32,19,0],[15,33,19,0,"_dependencyMap"],[15,47,19,0],[16,2,20,0],[16,6,20,0,"_util_base"],[16,16,20,0],[16,19,20,0,"require"],[16,26,20,0],[16,27,20,0,"_dependencyMap"],[16,41,20,0],[17,2,21,0],[17,6,21,0,"_operation"],[17,16,21,0],[17,19,21,0,"require"],[17,26,21,0],[17,27,21,0,"_dependencyMap"],[17,41,21,0],[18,2,22,0],[18,6,22,0,"_reshape"],[18,14,22,0],[18,17,22,0,"require"],[18,24,22,0],[18,25,22,0,"_dependencyMap"],[18,39,22,0],[19,2,1,0],[20,0,2,0],[21,0,3,0],[22,0,4,0],[23,0,5,0],[24,0,6,0],[25,0,7,0],[26,0,8,0],[27,0,9,0],[28,0,10,0],[29,0,11,0],[30,0,12,0],[31,0,13,0],[32,0,14,0],[33,0,15,0],[34,0,16,0],[36,2,23,0],[36,8,23,6,"INT32_MAX"],[36,17,23,15],[36,20,23,18],[36,30,23,28],[37,2,24,0],[38,0,25,0],[39,0,26,0],[40,0,27,0],[41,0,28,0],[42,0,29,0],[43,0,30,0],[44,0,31,0],[45,0,32,0],[46,0,33,0],[47,0,34,0],[48,0,35,0],[49,0,36,0],[50,0,37,0],[51,0,38,0],[52,0,39,0],[53,0,40,0],[54,0,41,0],[55,0,42,0],[56,0,43,0],[57,0,44,0],[58,0,45,0],[59,0,46,0],[60,0,47,0],[61,0,48,0],[62,0,49,0],[63,0,50,0],[64,0,51,0],[65,0,52,0],[66,0,53,0],[67,0,54,0],[68,0,55,0],[69,0,56,0],[70,0,57,0],[71,0,58,0],[72,0,59,0],[73,0,60,0],[74,0,61,0],[75,0,62,0],[76,0,63,0],[77,0,64,0],[78,0,65,0],[79,0,66,0],[80,0,67,0],[81,0,68,0],[82,0,69,0],[83,0,70,0],[84,0,71,0],[85,0,72,0],[86,0,73,0],[87,0,74,0],[88,0,75,0],[89,2,76,0],[89,11,76,9,"searchSorted_"],[89,24,76,22,"searchSorted_"],[89,25,76,23,"sortedSequence"],[89,39,76,37],[89,41,76,39,"values"],[89,47,76,45],[89,49,76,47,"side"],[89,53,76,51],[89,56,76,54],[89,62,76,60],[89,64,76,62],[90,4,77,4],[90,10,77,10,"$sortedSequence"],[90,25,77,25],[90,28,77,28],[90,32,77,28,"convertToTensor"],[90,48,77,43],[90,49,77,43,"convertToTensor"],[90,64,77,43],[90,66,77,44,"sortedSequence"],[90,80,77,58],[90,82,77,60],[90,98,77,76],[90,100,77,78],[90,114,77,92],[90,115,77,93],[91,4,78,4],[91,10,78,10,"$values"],[91,17,78,17],[91,20,78,20],[91,24,78,20,"convertToTensor"],[91,40,78,35],[91,41,78,35,"convertToTensor"],[91,56,78,35],[91,58,78,36,"values"],[91,64,78,42],[91,66,78,44],[91,74,78,52],[91,76,78,54],[91,90,78,68],[91,91,78,69],[92,4,79,4],[92,10,79,10,"sequenceSize"],[92,22,79,22],[92,25,79,25,"$sortedSequence"],[92,40,79,40],[92,41,79,41,"shape"],[92,46,79,46],[92,47,79,47,"$sortedSequence"],[92,62,79,62],[92,63,79,63,"shape"],[92,68,79,68],[92,69,79,69,"length"],[92,75,79,75],[92,78,79,78],[92,79,79,79],[92,80,79,80],[93,4,80,4],[93,10,80,10,"valuesSize"],[93,20,80,20],[93,23,80,23,"$values"],[93,30,80,30],[93,31,80,31,"shape"],[93,36,80,36],[93,37,80,37,"$values"],[93,44,80,44],[93,45,80,45,"shape"],[93,50,80,50],[93,51,80,51,"length"],[93,57,80,57],[93,60,80,60],[93,61,80,61],[93,62,80,62],[94,4,81,4],[94,10,81,10,"$sortedSequence2D"],[94,27,81,27],[94,30,81,30],[94,34,81,30,"reshape"],[94,42,81,37],[94,43,81,37,"reshape"],[94,50,81,37],[94,52,81,38,"$sortedSequence"],[94,67,81,53],[94,69,81,55],[94,70,81,56],[94,71,81,57],[94,72,81,58],[94,74,81,60,"sequenceSize"],[94,86,81,72],[94,87,81,73],[94,88,81,74],[95,4,82,4],[95,10,82,10,"$values2D"],[95,19,82,19],[95,22,82,22],[95,26,82,22,"reshape"],[95,34,82,29],[95,35,82,29,"reshape"],[95,42,82,29],[95,44,82,30,"$values"],[95,51,82,37],[95,53,82,39],[95,54,82,40],[95,55,82,41],[95,56,82,42],[95,58,82,44,"valuesSize"],[95,68,82,54],[95,69,82,55],[95,70,82,56],[96,4,83,4],[96,8,83,8,"$sortedSequence2D"],[96,25,83,25],[96,26,83,26,"rank"],[96,30,83,30],[96,33,83,33],[96,34,83,34],[96,36,83,36],[97,6,84,8],[97,12,84,14],[97,16,84,18,"Error"],[97,21,84,23],[97,22,84,24],[97,76,84,78],[97,77,84,79],[98,4,85,4],[99,4,86,4],[99,8,86,8,"$sortedSequence2D"],[99,25,86,25],[99,26,86,26,"shape"],[99,31,86,31],[99,32,86,32],[99,33,86,33],[99,34,86,34],[99,39,86,39,"$values2D"],[99,48,86,48],[99,49,86,49,"shape"],[99,54,86,54],[99,55,86,55],[99,56,86,56],[99,57,86,57],[99,59,86,59],[100,6,87,8],[100,12,87,14],[100,16,87,18,"Error"],[100,21,87,23],[100,22,87,24],[100,86,87,88],[100,87,87,89],[101,4,88,4],[102,4,89,4],[102,8,89,8],[102,12,89,8,"sizeFromShape"],[102,22,89,21],[102,23,89,21,"sizeFromShape"],[102,36,89,21],[102,38,89,22,"$values2D"],[102,47,89,31],[102,48,89,32,"shape"],[102,53,89,37],[102,54,89,38],[102,58,89,42,"INT32_MAX"],[102,67,89,51],[102,69,89,53],[103,6,90,8],[103,12,90,14],[103,16,90,18,"Error"],[103,21,90,23],[103,22,90,24],[103,59,90,61,"INT32_MAX"],[103,68,90,70],[103,70,90,72],[103,71,90,73],[104,4,91,4],[105,4,92,4],[105,8,92,8,"$sortedSequence2D"],[105,25,92,25],[105,26,92,26,"shape"],[105,31,92,31],[105,32,92,32],[105,33,92,33],[105,34,92,34],[105,38,92,38,"INT32_MAX"],[105,47,92,47],[105,49,92,49],[106,6,93,8],[106,12,93,14],[106,16,93,18,"Error"],[106,21,93,23],[106,22,93,24],[106,58,93,60,"INT32_MAX"],[106,67,93,69],[106,98,93,100,"$sortedSequence2D"],[106,115,93,117],[106,116,93,118,"shape"],[106,121,93,123],[106,122,93,124],[106,123,93,125],[106,124,93,126],[106,126,93,128],[106,127,93,129],[107,4,94,4],[108,4,95,4],[108,10,95,10,"inputs"],[108,16,95,16],[108,19,95,19],[109,6,96,8,"sortedSequence"],[109,20,96,22],[109,22,96,24,"$sortedSequence2D"],[109,39,96,41],[110,6,97,8,"values"],[110,12,97,14],[110,14,97,16,"$values2D"],[111,4,98,4],[111,5,98,5],[112,4,99,4],[112,10,99,10,"attrs"],[112,15,99,15],[112,18,99,18],[113,6,99,20,"side"],[114,4,99,25],[114,5,99,26],[115,4,100,4],[115,11,100,11,"ENGINE"],[115,18,100,17],[115,19,100,17,"ENGINE"],[115,25,100,17],[115,26,100,18,"runKernel"],[115,35,100,27],[115,36,100,28,"SearchSorted"],[115,49,100,40],[115,50,100,40,"SearchSorted"],[115,62,100,40],[115,64,100,42,"inputs"],[115,70,100,48],[115,72,100,50,"attrs"],[115,77,100,55],[115,78,100,56],[116,2,101,0],[117,2,102,7],[117,8,102,13,"searchSorted"],[117,20,102,25],[117,23,102,28],[117,38,102,44],[117,42,102,44,"op"],[117,52,102,46],[117,53,102,46,"op"],[117,55,102,46],[117,57,102,47],[118,4,102,49,"searchSorted_"],[119,2,102,63],[119,3,102,64],[119,4,102,65],[120,0,102,66],[120,3]],"functionMap":{"names":["<global>","searchSorted_"],"mappings":"AAA;AC2E;CDyB"},"hasCjsExports":false},"type":"js/module"}]}