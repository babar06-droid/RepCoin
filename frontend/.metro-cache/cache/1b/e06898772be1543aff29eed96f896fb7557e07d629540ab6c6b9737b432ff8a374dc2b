{"dependencies":[{"name":"./broadcast_util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":51,"index":754}}],"key":"lgDbDB8RRwl2tZf6kU21ceWf6rA=","exportNames":["*"],"imports":1}},{"name":"./elu","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":755},"end":{"line":18,"column":28,"index":783}}],"key":"/hdDjWFL8yhPTtXdzuuqHf6Rstc=","exportNames":["*"],"imports":1}},{"name":"./leaky_relu","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":784},"end":{"line":19,"column":41,"index":825}}],"key":"iRCp1mc7dyll/bCLxoZ6LNNFlaY=","exportNames":["*"],"imports":1}},{"name":"./mul","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":826},"end":{"line":20,"column":28,"index":854}}],"key":"dGJcm1XT1xn6xqxUHy8IlN16LWU=","exportNames":["*"],"imports":1}},{"name":"./prelu","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":855},"end":{"line":21,"column":32,"index":887}}],"key":"cAZC1n0faTS68boTSVxRXhL+Z9A=","exportNames":["*"],"imports":1}},{"name":"./relu","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":22,"column":0,"index":888},"end":{"line":22,"column":30,"index":918}}],"key":"gNAL4U/jnDQhSkJ6JvaxTrWBLXM=","exportNames":["*"],"imports":1}},{"name":"./relu6","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":23,"column":0,"index":919},"end":{"line":23,"column":32,"index":951}}],"key":"jR/Jpr+jaP6gHDNf2scM16VuH00=","exportNames":["*"],"imports":1}},{"name":"./reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":24,"column":0,"index":952},"end":{"line":24,"column":36,"index":988}}],"key":"dz8GCsFShMGnHX1Wj7bBySjBnSE=","exportNames":["*"],"imports":1}},{"name":"./sigmoid","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":25,"column":0,"index":989},"end":{"line":25,"column":36,"index":1025}}],"key":"2olHe+V8gT9PUYmCxTlJk4agPd8=","exportNames":["*"],"imports":1}},{"name":"./step","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":26,"column":0,"index":1026},"end":{"line":26,"column":30,"index":1056}}],"key":"xBZMjCi9X6SHl3xp5pTAaAoOu5Y=","exportNames":["*"],"imports":1}},{"name":"./sum","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":27,"column":0,"index":1057},"end":{"line":27,"column":28,"index":1085}}],"key":"z5+UEKYm7EPFOvDayPGqJL+s3oY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.getFusedDyActivation = getFusedDyActivation;\n  exports.getFusedBiasGradient = getFusedBiasGradient;\n  exports.applyActivation = applyActivation;\n  Object.defineProperty(exports, \"shouldFuse\", {\n    enumerable: true,\n    get: function () {\n      return shouldFuse;\n    }\n  });\n  var _broadcast_util = require(_dependencyMap[0], \"./broadcast_util\");\n  var broadcast_util = _interopNamespace(_broadcast_util);\n  var _elu = require(_dependencyMap[1], \"./elu\");\n  var _leaky_relu = require(_dependencyMap[2], \"./leaky_relu\");\n  var _mul = require(_dependencyMap[3], \"./mul\");\n  var _prelu = require(_dependencyMap[4], \"./prelu\");\n  var _relu = require(_dependencyMap[5], \"./relu\");\n  var _relu2 = require(_dependencyMap[6], \"./relu6\");\n  var _reshape = require(_dependencyMap[7], \"./reshape\");\n  var _sigmoid = require(_dependencyMap[8], \"./sigmoid\");\n  var _step = require(_dependencyMap[9], \"./step\");\n  var _sum = require(_dependencyMap[10], \"./sum\");\n  /**\n   * @license\n   * Copyright 2019 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  // Returns gradient for fused activation.\n  function getFusedDyActivation(dy, y, activation) {\n    if (activation == null || activation === 'linear') {\n      return dy;\n    }\n    if (activation === 'relu') {\n      return (0, _mul.mul)(dy, (0, _step.step)(y));\n    }\n    throw new Error(`Cannot compute gradient for fused activation ${activation}.`);\n  }\n  // Returns gradient for fused bias.\n  function getFusedBiasGradient(bias, dyActivation) {\n    let res = dyActivation;\n    const reduceAxes = broadcast_util.getReductionAxes(bias.shape, dyActivation.shape);\n    if (reduceAxes.length > 0) {\n      res = (0, _sum.sum)(res, reduceAxes);\n    }\n    return (0, _reshape.reshape)(res, bias.shape);\n  }\n  function applyActivation(x, activation, preluActivationWeights, leakyreluAlpha) {\n    if (activation === 'linear') {\n      return x;\n    } else if (activation === 'relu') {\n      return (0, _relu.relu)(x);\n    } else if (activation === 'elu') {\n      return (0, _elu.elu)(x);\n    } else if (activation === 'relu6') {\n      return (0, _relu2.relu6)(x);\n    } else if (activation === 'prelu') {\n      return (0, _prelu.prelu)(x, preluActivationWeights);\n    } else if (activation === 'leakyrelu') {\n      return (0, _leaky_relu.leakyRelu)(x, leakyreluAlpha);\n    } else if (activation === 'sigmoid') {\n      return (0, _sigmoid.sigmoid)(x);\n    }\n    throw new Error(`Unknown fused activation ${activation}.`);\n  }\n  // Whether we should call fused ops.\n  const shouldFuse = (gradientDepth, activation) => {\n    const gradientMode = gradientDepth > 0;\n    return !gradientMode || activation === 'linear';\n  };\n});","lineCount":102,"map":[[22,2,29,0,"exports"],[22,9,29,0],[22,10,29,0,"getFusedDyActivation"],[22,30,29,0],[22,33,29,0,"getFusedDyActivation"],[22,53,29,0],[23,2,39,0,"exports"],[23,9,39,0],[23,10,39,0,"getFusedBiasGradient"],[23,30,39,0],[23,33,39,0,"getFusedBiasGradient"],[23,53,39,0],[24,2,47,0,"exports"],[24,9,47,0],[24,10,47,0,"applyActivation"],[24,25,47,0],[24,28,47,0,"applyActivation"],[24,43,47,0],[25,2,72,0,"Object"],[25,8,72,0],[25,9,72,0,"defineProperty"],[25,23,72,0],[25,24,72,0,"exports"],[25,31,72,0],[26,4,72,0,"enumerable"],[26,14,72,0],[27,4,72,0,"get"],[27,7,72,0],[27,18,72,0,"get"],[27,19,72,0],[28,6,72,0],[28,13,72,0,"shouldFuse"],[28,23,72,0],[29,4,72,0],[30,2,72,0],[31,2,17,0],[31,6,17,0,"_broadcast_util"],[31,21,17,0],[31,24,17,0,"require"],[31,31,17,0],[31,32,17,0,"_dependencyMap"],[31,46,17,0],[32,2,17,0],[32,6,17,0,"broadcast_util"],[32,20,17,0],[32,23,17,0,"_interopNamespace"],[32,40,17,0],[32,41,17,0,"_broadcast_util"],[32,56,17,0],[33,2,18,0],[33,6,18,0,"_elu"],[33,10,18,0],[33,13,18,0,"require"],[33,20,18,0],[33,21,18,0,"_dependencyMap"],[33,35,18,0],[34,2,19,0],[34,6,19,0,"_leaky_relu"],[34,17,19,0],[34,20,19,0,"require"],[34,27,19,0],[34,28,19,0,"_dependencyMap"],[34,42,19,0],[35,2,20,0],[35,6,20,0,"_mul"],[35,10,20,0],[35,13,20,0,"require"],[35,20,20,0],[35,21,20,0,"_dependencyMap"],[35,35,20,0],[36,2,21,0],[36,6,21,0,"_prelu"],[36,12,21,0],[36,15,21,0,"require"],[36,22,21,0],[36,23,21,0,"_dependencyMap"],[36,37,21,0],[37,2,22,0],[37,6,22,0,"_relu"],[37,11,22,0],[37,14,22,0,"require"],[37,21,22,0],[37,22,22,0,"_dependencyMap"],[37,36,22,0],[38,2,23,0],[38,6,23,0,"_relu2"],[38,12,23,0],[38,15,23,0,"require"],[38,22,23,0],[38,23,23,0,"_dependencyMap"],[38,37,23,0],[39,2,24,0],[39,6,24,0,"_reshape"],[39,14,24,0],[39,17,24,0,"require"],[39,24,24,0],[39,25,24,0,"_dependencyMap"],[39,39,24,0],[40,2,25,0],[40,6,25,0,"_sigmoid"],[40,14,25,0],[40,17,25,0,"require"],[40,24,25,0],[40,25,25,0,"_dependencyMap"],[40,39,25,0],[41,2,26,0],[41,6,26,0,"_step"],[41,11,26,0],[41,14,26,0,"require"],[41,21,26,0],[41,22,26,0,"_dependencyMap"],[41,36,26,0],[42,2,27,0],[42,6,27,0,"_sum"],[42,10,27,0],[42,13,27,0,"require"],[42,20,27,0],[42,21,27,0,"_dependencyMap"],[42,35,27,0],[43,2,1,0],[44,0,2,0],[45,0,3,0],[46,0,4,0],[47,0,5,0],[48,0,6,0],[49,0,7,0],[50,0,8,0],[51,0,9,0],[52,0,10,0],[53,0,11,0],[54,0,12,0],[55,0,13,0],[56,0,14,0],[57,0,15,0],[58,0,16,0],[60,2,28,0],[61,2,29,7],[61,11,29,16,"getFusedDyActivation"],[61,31,29,36,"getFusedDyActivation"],[61,32,29,37,"dy"],[61,34,29,39],[61,36,29,41,"y"],[61,37,29,42],[61,39,29,44,"activation"],[61,49,29,54],[61,51,29,56],[62,4,30,4],[62,8,30,8,"activation"],[62,18,30,18],[62,22,30,22],[62,26,30,26],[62,30,30,30,"activation"],[62,40,30,40],[62,45,30,45],[62,53,30,53],[62,55,30,55],[63,6,31,8],[63,13,31,15,"dy"],[63,15,31,17],[64,4,32,4],[65,4,33,4],[65,8,33,8,"activation"],[65,18,33,18],[65,23,33,23],[65,29,33,29],[65,31,33,31],[66,6,34,8],[66,13,34,15],[66,17,34,15,"mul"],[66,21,34,18],[66,22,34,18,"mul"],[66,25,34,18],[66,27,34,19,"dy"],[66,29,34,21],[66,31,34,23],[66,35,34,23,"step"],[66,40,34,27],[66,41,34,27,"step"],[66,45,34,27],[66,47,34,28,"y"],[66,48,34,29],[66,49,34,30],[66,50,34,31],[67,4,35,4],[68,4,36,4],[68,10,36,10],[68,14,36,14,"Error"],[68,19,36,19],[68,20,36,20],[68,68,36,68,"activation"],[68,78,36,78],[68,81,36,81],[68,82,36,82],[69,2,37,0],[70,2,38,0],[71,2,39,7],[71,11,39,16,"getFusedBiasGradient"],[71,31,39,36,"getFusedBiasGradient"],[71,32,39,37,"bias"],[71,36,39,41],[71,38,39,43,"dyActivation"],[71,50,39,55],[71,52,39,57],[72,4,40,4],[72,8,40,8,"res"],[72,11,40,11],[72,14,40,14,"dyActivation"],[72,26,40,26],[73,4,41,4],[73,10,41,10,"reduceAxes"],[73,20,41,20],[73,23,41,23,"broadcast_util"],[73,37,41,37],[73,38,41,38,"getReductionAxes"],[73,54,41,54],[73,55,41,55,"bias"],[73,59,41,59],[73,60,41,60,"shape"],[73,65,41,65],[73,67,41,67,"dyActivation"],[73,79,41,79],[73,80,41,80,"shape"],[73,85,41,85],[73,86,41,86],[74,4,42,4],[74,8,42,8,"reduceAxes"],[74,18,42,18],[74,19,42,19,"length"],[74,25,42,25],[74,28,42,28],[74,29,42,29],[74,31,42,31],[75,6,43,8,"res"],[75,9,43,11],[75,12,43,14],[75,16,43,14,"sum"],[75,20,43,17],[75,21,43,17,"sum"],[75,24,43,17],[75,26,43,18,"res"],[75,29,43,21],[75,31,43,23,"reduceAxes"],[75,41,43,33],[75,42,43,34],[76,4,44,4],[77,4,45,4],[77,11,45,11],[77,15,45,11,"reshape"],[77,23,45,18],[77,24,45,18,"reshape"],[77,31,45,18],[77,33,45,19,"res"],[77,36,45,22],[77,38,45,24,"bias"],[77,42,45,28],[77,43,45,29,"shape"],[77,48,45,34],[77,49,45,35],[78,2,46,0],[79,2,47,7],[79,11,47,16,"applyActivation"],[79,26,47,31,"applyActivation"],[79,27,47,32,"x"],[79,28,47,33],[79,30,47,35,"activation"],[79,40,47,45],[79,42,47,47,"preluActivationWeights"],[79,64,47,69],[79,66,47,71,"leakyreluAlpha"],[79,80,47,85],[79,82,47,87],[80,4,48,4],[80,8,48,8,"activation"],[80,18,48,18],[80,23,48,23],[80,31,48,31],[80,33,48,33],[81,6,49,8],[81,13,49,15,"x"],[81,14,49,16],[82,4,50,4],[82,5,50,5],[82,11,51,9],[82,15,51,13,"activation"],[82,25,51,23],[82,30,51,28],[82,36,51,34],[82,38,51,36],[83,6,52,8],[83,13,52,15],[83,17,52,15,"relu"],[83,22,52,19],[83,23,52,19,"relu"],[83,27,52,19],[83,29,52,20,"x"],[83,30,52,21],[83,31,52,22],[84,4,53,4],[84,5,53,5],[84,11,54,9],[84,15,54,13,"activation"],[84,25,54,23],[84,30,54,28],[84,35,54,33],[84,37,54,35],[85,6,55,8],[85,13,55,15],[85,17,55,15,"elu"],[85,21,55,18],[85,22,55,18,"elu"],[85,25,55,18],[85,27,55,19,"x"],[85,28,55,20],[85,29,55,21],[86,4,56,4],[86,5,56,5],[86,11,57,9],[86,15,57,13,"activation"],[86,25,57,23],[86,30,57,28],[86,37,57,35],[86,39,57,37],[87,6,58,8],[87,13,58,15],[87,17,58,15,"relu6"],[87,23,58,20],[87,24,58,20,"relu6"],[87,29,58,20],[87,31,58,21,"x"],[87,32,58,22],[87,33,58,23],[88,4,59,4],[88,5,59,5],[88,11,60,9],[88,15,60,13,"activation"],[88,25,60,23],[88,30,60,28],[88,37,60,35],[88,39,60,37],[89,6,61,8],[89,13,61,15],[89,17,61,15,"prelu"],[89,23,61,20],[89,24,61,20,"prelu"],[89,29,61,20],[89,31,61,21,"x"],[89,32,61,22],[89,34,61,24,"preluActivationWeights"],[89,56,61,46],[89,57,61,47],[90,4,62,4],[90,5,62,5],[90,11,63,9],[90,15,63,13,"activation"],[90,25,63,23],[90,30,63,28],[90,41,63,39],[90,43,63,41],[91,6,64,8],[91,13,64,15],[91,17,64,15,"leakyRelu"],[91,28,64,24],[91,29,64,24,"leakyRelu"],[91,38,64,24],[91,40,64,25,"x"],[91,41,64,26],[91,43,64,28,"leakyreluAlpha"],[91,57,64,42],[91,58,64,43],[92,4,65,4],[92,5,65,5],[92,11,66,9],[92,15,66,13,"activation"],[92,25,66,23],[92,30,66,28],[92,39,66,37],[92,41,66,39],[93,6,67,8],[93,13,67,15],[93,17,67,15,"sigmoid"],[93,25,67,22],[93,26,67,22,"sigmoid"],[93,33,67,22],[93,35,67,23,"x"],[93,36,67,24],[93,37,67,25],[94,4,68,4],[95,4,69,4],[95,10,69,10],[95,14,69,14,"Error"],[95,19,69,19],[95,20,69,20],[95,48,69,48,"activation"],[95,58,69,58],[95,61,69,61],[95,62,69,62],[96,2,70,0],[97,2,71,0],[98,2,72,7],[98,8,72,13,"shouldFuse"],[98,18,72,23],[98,21,72,26,"shouldFuse"],[98,22,72,27,"gradientDepth"],[98,35,72,40],[98,37,72,42,"activation"],[98,47,72,52],[98,52,72,57],[99,4,73,4],[99,10,73,10,"gradientMode"],[99,22,73,22],[99,25,73,25,"gradientDepth"],[99,38,73,38],[99,41,73,41],[99,42,73,42],[100,4,74,4],[100,11,74,11],[100,12,74,12,"gradientMode"],[100,24,74,24],[100,28,74,28,"activation"],[100,38,74,38],[100,43,74,43],[100,51,74,51],[101,2,75,0],[101,3,75,1],[102,0,75,2],[102,3]],"functionMap":{"names":["<global>","getFusedDyActivation","getFusedBiasGradient","applyActivation","shouldFuse"],"mappings":"AAA;OC4B;CDQ;OEE;CFO;OGC;CHuB;0BIE;CJG"},"hasCjsExports":false},"type":"js/module"}]}