{"dependencies":[{"name":"../../tensor_util_env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":56,"index":56}}],"key":"xfSGNGkCJdZhfQ673y/6d+no2yU=","exportNames":["*"],"imports":1}},{"name":"../../util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":57},"end":{"line":2,"column":47,"index":104}}],"key":"OiLVMoS12Mp3xgHkQeTdnQIBX6Q=","exportNames":["*"],"imports":1}},{"name":"../loss_ops_utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":105},"end":{"line":3,"column":46,"index":151}}],"key":"DAPyQ0ldu7pmRn3jRz+wBfmq/uQ=","exportNames":["*"],"imports":1}},{"name":"../mul","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":152},"end":{"line":4,"column":29,"index":181}}],"key":"IV74B7MBUPoSZUTM5ocGXe9fIRE=","exportNames":["*"],"imports":1}},{"name":"../operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":182},"end":{"line":5,"column":34,"index":216}}],"key":"fQilPqfSvhAHjyfKT0P4wel7jE4=","exportNames":["*"],"imports":1}},{"name":"../relu","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":217},"end":{"line":6,"column":31,"index":248}}],"key":"/b5XZF1raYdGkxO3BUEKjJ7sgLI=","exportNames":["*"],"imports":1}},{"name":"../scalar","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":249},"end":{"line":7,"column":35,"index":284}}],"key":"u3TTm6Tdu30WLt+AMD6qMWu+U20=","exportNames":["*"],"imports":1}},{"name":"../sub","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":285},"end":{"line":8,"column":29,"index":314}}],"key":"VHM5JuAkEzgPhqMJH9y/GvrNozc=","exportNames":["*"],"imports":1}},{"name":"./compute_weighted_loss","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":315},"end":{"line":9,"column":62,"index":377}}],"key":"GQ6sNEw27lLpLYC7mByWPpwMOcY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"hingeLoss\", {\n    enumerable: true,\n    get: function () {\n      return hingeLoss;\n    }\n  });\n  var _tensor_util_env = require(_dependencyMap[0], \"../../tensor_util_env\");\n  var _util = require(_dependencyMap[1], \"../../util\");\n  var _loss_ops_utils = require(_dependencyMap[2], \"../loss_ops_utils\");\n  var _mul = require(_dependencyMap[3], \"../mul\");\n  var _operation = require(_dependencyMap[4], \"../operation\");\n  var _relu = require(_dependencyMap[5], \"../relu\");\n  var _scalar = require(_dependencyMap[6], \"../scalar\");\n  var _sub = require(_dependencyMap[7], \"../sub\");\n  var _compute_weighted_loss = require(_dependencyMap[8], \"./compute_weighted_loss\");\n  /**\n   * Computes the Hinge loss between two tensors.\n   *\n   * @param labels The ground truth output tensor, same dimensions as\n   *    'predictions'.\n   * @param predictions The predicted outputs.\n   * @param weights Tensor whose rank is either 0, or the same rank as\n   *    `labels`, and must be broadcastable to `labels` (i.e., all dimensions\n   *    must be either `1`, or the same as the corresponding `losses`\n   *    dimension).\n   * @param reduction Type of reduction to apply to loss. Should be of type\n   *    `Reduction`\n   *\n   * @doc {heading: 'Training', subheading: 'Losses', namespace: 'losses'}\n   */\n  function hingeLoss_(labels, predictions, weights, reduction = _loss_ops_utils.Reduction.SUM_BY_NONZERO_WEIGHTS) {\n    let $labels = (0, _tensor_util_env.convertToTensor)(labels, 'labels', 'hingeLoss');\n    const $predictions = (0, _tensor_util_env.convertToTensor)(predictions, 'predictions', 'hingeLoss');\n    let $weights = null;\n    if (weights != null) {\n      $weights = (0, _tensor_util_env.convertToTensor)(weights, 'weights', 'hingeLoss');\n    }\n    (0, _util.assertShapesMatch)($labels.shape, $predictions.shape, 'Error in hingeLoss: ');\n    const one = (0, _scalar.scalar)(1);\n    // Convert binary labels to (-1, 1)\n    $labels = (0, _sub.sub)((0, _mul.mul)((0, _scalar.scalar)(2), $labels), one);\n    const losses = (0, _relu.relu)((0, _sub.sub)(one, (0, _mul.mul)($labels, $predictions)));\n    return (0, _compute_weighted_loss.computeWeightedLoss)(losses, $weights, reduction);\n  }\n  const hingeLoss = /* @__PURE__ */(0, _operation.op)({\n    hingeLoss_\n  });\n});","lineCount":54,"map":[[7,2,39,0,"Object"],[7,8,39,0],[7,9,39,0,"defineProperty"],[7,23,39,0],[7,24,39,0,"exports"],[7,31,39,0],[8,4,39,0,"enumerable"],[8,14,39,0],[9,4,39,0,"get"],[9,7,39,0],[9,18,39,0,"get"],[9,19,39,0],[10,6,39,0],[10,13,39,0,"hingeLoss"],[10,22,39,0],[11,4,39,0],[12,2,39,0],[13,2,1,0],[13,6,1,0,"_tensor_util_env"],[13,22,1,0],[13,25,1,0,"require"],[13,32,1,0],[13,33,1,0,"_dependencyMap"],[13,47,1,0],[14,2,2,0],[14,6,2,0,"_util"],[14,11,2,0],[14,14,2,0,"require"],[14,21,2,0],[14,22,2,0,"_dependencyMap"],[14,36,2,0],[15,2,3,0],[15,6,3,0,"_loss_ops_utils"],[15,21,3,0],[15,24,3,0,"require"],[15,31,3,0],[15,32,3,0,"_dependencyMap"],[15,46,3,0],[16,2,4,0],[16,6,4,0,"_mul"],[16,10,4,0],[16,13,4,0,"require"],[16,20,4,0],[16,21,4,0,"_dependencyMap"],[16,35,4,0],[17,2,5,0],[17,6,5,0,"_operation"],[17,16,5,0],[17,19,5,0,"require"],[17,26,5,0],[17,27,5,0,"_dependencyMap"],[17,41,5,0],[18,2,6,0],[18,6,6,0,"_relu"],[18,11,6,0],[18,14,6,0,"require"],[18,21,6,0],[18,22,6,0,"_dependencyMap"],[18,36,6,0],[19,2,7,0],[19,6,7,0,"_scalar"],[19,13,7,0],[19,16,7,0,"require"],[19,23,7,0],[19,24,7,0,"_dependencyMap"],[19,38,7,0],[20,2,8,0],[20,6,8,0,"_sub"],[20,10,8,0],[20,13,8,0,"require"],[20,20,8,0],[20,21,8,0,"_dependencyMap"],[20,35,8,0],[21,2,9,0],[21,6,9,0,"_compute_weighted_loss"],[21,28,9,0],[21,31,9,0,"require"],[21,38,9,0],[21,39,9,0,"_dependencyMap"],[21,53,9,0],[22,2,10,0],[23,0,11,0],[24,0,12,0],[25,0,13,0],[26,0,14,0],[27,0,15,0],[28,0,16,0],[29,0,17,0],[30,0,18,0],[31,0,19,0],[32,0,20,0],[33,0,21,0],[34,0,22,0],[35,0,23,0],[36,0,24,0],[37,2,25,0],[37,11,25,9,"hingeLoss_"],[37,21,25,19,"hingeLoss_"],[37,22,25,20,"labels"],[37,28,25,26],[37,30,25,28,"predictions"],[37,41,25,39],[37,43,25,41,"weights"],[37,50,25,48],[37,52,25,50,"reduction"],[37,61,25,59],[37,64,25,62,"Reduction"],[37,79,25,71],[37,80,25,71,"Reduction"],[37,89,25,71],[37,90,25,72,"SUM_BY_NONZERO_WEIGHTS"],[37,112,25,94],[37,114,25,96],[38,4,26,4],[38,8,26,8,"$labels"],[38,15,26,15],[38,18,26,18],[38,22,26,18,"convertToTensor"],[38,38,26,33],[38,39,26,33,"convertToTensor"],[38,54,26,33],[38,56,26,34,"labels"],[38,62,26,40],[38,64,26,42],[38,72,26,50],[38,74,26,52],[38,85,26,63],[38,86,26,64],[39,4,27,4],[39,10,27,10,"$predictions"],[39,22,27,22],[39,25,27,25],[39,29,27,25,"convertToTensor"],[39,45,27,40],[39,46,27,40,"convertToTensor"],[39,61,27,40],[39,63,27,41,"predictions"],[39,74,27,52],[39,76,27,54],[39,89,27,67],[39,91,27,69],[39,102,27,80],[39,103,27,81],[40,4,28,4],[40,8,28,8,"$weights"],[40,16,28,16],[40,19,28,19],[40,23,28,23],[41,4,29,4],[41,8,29,8,"weights"],[41,15,29,15],[41,19,29,19],[41,23,29,23],[41,25,29,25],[42,6,30,8,"$weights"],[42,14,30,16],[42,17,30,19],[42,21,30,19,"convertToTensor"],[42,37,30,34],[42,38,30,34,"convertToTensor"],[42,53,30,34],[42,55,30,35,"weights"],[42,62,30,42],[42,64,30,44],[42,73,30,53],[42,75,30,55],[42,86,30,66],[42,87,30,67],[43,4,31,4],[44,4,32,4],[44,8,32,4,"assertShapesMatch"],[44,13,32,21],[44,14,32,21,"assertShapesMatch"],[44,31,32,21],[44,33,32,22,"$labels"],[44,40,32,29],[44,41,32,30,"shape"],[44,46,32,35],[44,48,32,37,"$predictions"],[44,60,32,49],[44,61,32,50,"shape"],[44,66,32,55],[44,68,32,57],[44,90,32,79],[44,91,32,80],[45,4,33,4],[45,10,33,10,"one"],[45,13,33,13],[45,16,33,16],[45,20,33,16,"scalar"],[45,27,33,22],[45,28,33,22,"scalar"],[45,34,33,22],[45,36,33,23],[45,37,33,24],[45,38,33,25],[46,4,34,4],[47,4,35,4,"$labels"],[47,11,35,11],[47,14,35,14],[47,18,35,14,"sub"],[47,22,35,17],[47,23,35,17,"sub"],[47,26,35,17],[47,28,35,18],[47,32,35,18,"mul"],[47,36,35,21],[47,37,35,21,"mul"],[47,40,35,21],[47,42,35,22],[47,46,35,22,"scalar"],[47,53,35,28],[47,54,35,28,"scalar"],[47,60,35,28],[47,62,35,29],[47,63,35,30],[47,64,35,31],[47,66,35,33,"$labels"],[47,73,35,40],[47,74,35,41],[47,76,35,43,"one"],[47,79,35,46],[47,80,35,47],[48,4,36,4],[48,10,36,10,"losses"],[48,16,36,16],[48,19,36,19],[48,23,36,19,"relu"],[48,28,36,23],[48,29,36,23,"relu"],[48,33,36,23],[48,35,36,24],[48,39,36,24,"sub"],[48,43,36,27],[48,44,36,27,"sub"],[48,47,36,27],[48,49,36,28,"one"],[48,52,36,31],[48,54,36,33],[48,58,36,33,"mul"],[48,62,36,36],[48,63,36,36,"mul"],[48,66,36,36],[48,68,36,37,"$labels"],[48,75,36,44],[48,77,36,46,"$predictions"],[48,89,36,58],[48,90,36,59],[48,91,36,60],[48,92,36,61],[49,4,37,4],[49,11,37,11],[49,15,37,11,"computeWeightedLoss"],[49,37,37,30],[49,38,37,30,"computeWeightedLoss"],[49,57,37,30],[49,59,37,31,"losses"],[49,65,37,37],[49,67,37,39,"$weights"],[49,75,37,47],[49,77,37,49,"reduction"],[49,86,37,58],[49,87,37,59],[50,2,38,0],[51,2,39,7],[51,8,39,13,"hingeLoss"],[51,17,39,22],[51,20,39,25],[51,35,39,41],[51,39,39,41,"op"],[51,49,39,43],[51,50,39,43,"op"],[51,52,39,43],[51,54,39,44],[52,4,39,46,"hingeLoss_"],[53,2,39,57],[53,3,39,58],[53,4,39,59],[54,0,39,60],[54,3]],"functionMap":{"names":["<global>","hingeLoss_"],"mappings":"AAA;ACwB;CDa"},"hasCjsExports":false},"type":"js/module"}]}