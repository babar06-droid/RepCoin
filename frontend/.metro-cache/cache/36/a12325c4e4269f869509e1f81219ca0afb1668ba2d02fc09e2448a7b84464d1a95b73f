{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":81,"index":784}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}},{"name":"@tensorflow/tfjs-core/dist/ops/ops_for_converter","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":835},"end":{"line":19,"column":74,"index":909}}],"key":"2I6FkuhD1B37IaeqPXQAZSdUm9o=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"HashTable\", {\n    enumerable: true,\n    get: function () {\n      return HashTable;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  var _tensorflowTfjsCoreDistOpsOps_for_converter = require(_dependencyMap[1], \"@tensorflow/tfjs-core/dist/ops/ops_for_converter\");\n  var tfOps = _interopNamespace(_tensorflowTfjsCoreDistOpsOps_for_converter);\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  // tslint:disable-next-line: no-imports-from-dist\n\n  /**\n   * Hashtable contains a set of tensors, which can be accessed by key.\n   */\n  class HashTable {\n    get id() {\n      return this.handle.id;\n    }\n    /**\n     * Constructor of HashTable. Creates a hash table.\n     *\n     * @param keyDType `dtype` of the table keys.\n     * @param valueDType `dtype` of the table values.\n     */\n    constructor(keyDType, valueDType) {\n      this.keyDType = keyDType;\n      this.valueDType = valueDType;\n      this.handle = (0, _tensorflowTfjsCore.scalar)(0);\n      // tslint:disable-next-line: no-any\n      this.tensorMap = new Map();\n      (0, _tensorflowTfjsCore.keep)(this.handle);\n    }\n    /**\n     * Dispose the tensors and handle and clear the hashtable.\n     */\n    clearAndClose() {\n      this.tensorMap.forEach(value => value.dispose());\n      this.tensorMap.clear();\n      this.handle.dispose();\n    }\n    /**\n     * The number of items in the hash table.\n     */\n    size() {\n      return this.tensorMap.size;\n    }\n    /**\n     * The number of items in the hash table as a rank-0 tensor.\n     */\n    tensorSize() {\n      return tfOps.scalar(this.size(), 'int32');\n    }\n    /**\n     * Replaces the contents of the table with the specified keys and values.\n     * @param keys Keys to store in the hashtable.\n     * @param values Values to store in the hashtable.\n     */\n    async import(keys, values) {\n      this.checkKeyAndValueTensor(keys, values);\n      // We only store the primitive values of the keys, this allows lookup\n      // to be O(1).\n      const $keys = await keys.data();\n      // Clear the hashTable before inserting new values.\n      this.tensorMap.forEach(value => value.dispose());\n      this.tensorMap.clear();\n      return (0, _tensorflowTfjsCore.tidy)(() => {\n        const $values = (0, _tensorflowTfjsCore.unstack)(values);\n        const keysLength = $keys.length;\n        const valuesLength = $values.length;\n        _tensorflowTfjsCore.util.assert(keysLength === valuesLength, () => `The number of elements doesn't match, keys has ` + `${keysLength} elements, the values has ${valuesLength} ` + `elements.`);\n        for (let i = 0; i < keysLength; i++) {\n          const key = $keys[i];\n          const value = $values[i];\n          (0, _tensorflowTfjsCore.keep)(value);\n          this.tensorMap.set(key, value);\n        }\n        return this.handle;\n      });\n    }\n    /**\n     * Looks up keys in a hash table, outputs the corresponding values.\n     *\n     * Performs batch lookups, for every element in the key tensor, `find`\n     * stacks the corresponding value into the return tensor.\n     *\n     * If an element is not present in the table, the given `defaultValue` is\n     * used.\n     *\n     * @param keys Keys to look up. Must have the same type as the keys of the\n     *     table.\n     * @param defaultValue The scalar `defaultValue` is the value output for keys\n     *     not present in the table. It must also be of the same type as the\n     *     table values.\n     */\n    async find(keys, defaultValue) {\n      this.checkKeyAndValueTensor(keys, defaultValue);\n      const $keys = await keys.data();\n      return (0, _tensorflowTfjsCore.tidy)(() => {\n        const result = [];\n        for (let i = 0; i < $keys.length; i++) {\n          const key = $keys[i];\n          const value = this.findWithDefault(key, defaultValue);\n          result.push(value);\n        }\n        return (0, _tensorflowTfjsCore.stack)(result);\n      });\n    }\n    // tslint:disable-next-line: no-any\n    findWithDefault(key, defaultValue) {\n      const result = this.tensorMap.get(key);\n      return result != null ? result : defaultValue;\n    }\n    checkKeyAndValueTensor(key, value) {\n      if (key.dtype !== this.keyDType) {\n        throw new Error(`Expect key dtype ${this.keyDType}, but got ` + `${key.dtype}`);\n      }\n      if (value.dtype !== this.valueDType) {\n        throw new Error(`Expect value dtype ${this.valueDType}, but got ` + `${value.dtype}`);\n      }\n    }\n  }\n});","lineCount":160,"map":[[22,2,23,0,"Object"],[22,8,23,0],[22,9,23,0,"defineProperty"],[22,23,23,0],[22,24,23,0,"exports"],[22,31,23,0],[23,4,23,0,"enumerable"],[23,14,23,0],[24,4,23,0,"get"],[24,7,23,0],[24,18,23,0,"get"],[24,19,23,0],[25,6,23,0],[25,13,23,0,"HashTable"],[25,22,23,0],[26,4,23,0],[27,2,23,0],[28,2,17,0],[28,6,17,0,"_tensorflowTfjsCore"],[28,25,17,0],[28,28,17,0,"require"],[28,35,17,0],[28,36,17,0,"_dependencyMap"],[28,50,17,0],[29,2,19,0],[29,6,19,0,"_tensorflowTfjsCoreDistOpsOps_for_converter"],[29,49,19,0],[29,52,19,0,"require"],[29,59,19,0],[29,60,19,0,"_dependencyMap"],[29,74,19,0],[30,2,19,0],[30,6,19,0,"tfOps"],[30,11,19,0],[30,14,19,0,"_interopNamespace"],[30,31,19,0],[30,32,19,0,"_tensorflowTfjsCoreDistOpsOps_for_converter"],[30,75,19,0],[31,2,1,0],[32,0,2,0],[33,0,3,0],[34,0,4,0],[35,0,5,0],[36,0,6,0],[37,0,7,0],[38,0,8,0],[39,0,9,0],[40,0,10,0],[41,0,11,0],[42,0,12,0],[43,0,13,0],[44,0,14,0],[45,0,15,0],[46,0,16,0],[48,2,18,0],[50,2,20,0],[51,0,21,0],[52,0,22,0],[53,2,23,7],[53,8,23,13,"HashTable"],[53,17,23,22],[53,18,23,23],[54,4,24,4],[54,8,24,8,"id"],[54,10,24,10,"id"],[54,11,24,10],[54,13,24,13],[55,6,25,8],[55,13,25,15],[55,17,25,19],[55,18,25,20,"handle"],[55,24,25,26],[55,25,25,27,"id"],[55,27,25,29],[56,4,26,4],[57,4,27,4],[58,0,28,0],[59,0,29,0],[60,0,30,0],[61,0,31,0],[62,0,32,0],[63,4,33,4,"constructor"],[63,15,33,15,"constructor"],[63,16,33,16,"keyDType"],[63,24,33,24],[63,26,33,26,"valueDType"],[63,36,33,36],[63,38,33,38],[64,6,34,8],[64,10,34,12],[64,11,34,13,"keyDType"],[64,19,34,21],[64,22,34,24,"keyDType"],[64,30,34,32],[65,6,35,8],[65,10,35,12],[65,11,35,13,"valueDType"],[65,21,35,23],[65,24,35,26,"valueDType"],[65,34,35,36],[66,6,36,8],[66,10,36,12],[66,11,36,13,"handle"],[66,17,36,19],[66,20,36,22],[66,24,36,22,"scalar"],[66,43,36,28],[66,44,36,28,"scalar"],[66,50,36,28],[66,52,36,29],[66,53,36,30],[66,54,36,31],[67,6,37,8],[68,6,38,8],[68,10,38,12],[68,11,38,13,"tensorMap"],[68,20,38,22],[68,23,38,25],[68,27,38,29,"Map"],[68,30,38,32],[68,31,38,33],[68,32,38,34],[69,6,39,8],[69,10,39,8,"keep"],[69,29,39,12],[69,30,39,12,"keep"],[69,34,39,12],[69,36,39,13],[69,40,39,17],[69,41,39,18,"handle"],[69,47,39,24],[69,48,39,25],[70,4,40,4],[71,4,41,4],[72,0,42,0],[73,0,43,0],[74,4,44,4,"clearAndClose"],[74,17,44,17,"clearAndClose"],[74,18,44,17],[74,20,44,20],[75,6,45,8],[75,10,45,12],[75,11,45,13,"tensorMap"],[75,20,45,22],[75,21,45,23,"forEach"],[75,28,45,30],[75,29,45,31,"value"],[75,34,45,36],[75,38,45,40,"value"],[75,43,45,45],[75,44,45,46,"dispose"],[75,51,45,53],[75,52,45,54],[75,53,45,55],[75,54,45,56],[76,6,46,8],[76,10,46,12],[76,11,46,13,"tensorMap"],[76,20,46,22],[76,21,46,23,"clear"],[76,26,46,28],[76,27,46,29],[76,28,46,30],[77,6,47,8],[77,10,47,12],[77,11,47,13,"handle"],[77,17,47,19],[77,18,47,20,"dispose"],[77,25,47,27],[77,26,47,28],[77,27,47,29],[78,4,48,4],[79,4,49,4],[80,0,50,0],[81,0,51,0],[82,4,52,4,"size"],[82,8,52,8,"size"],[82,9,52,8],[82,11,52,11],[83,6,53,8],[83,13,53,15],[83,17,53,19],[83,18,53,20,"tensorMap"],[83,27,53,29],[83,28,53,30,"size"],[83,32,53,34],[84,4,54,4],[85,4,55,4],[86,0,56,0],[87,0,57,0],[88,4,58,4,"tensorSize"],[88,14,58,14,"tensorSize"],[88,15,58,14],[88,17,58,17],[89,6,59,8],[89,13,59,15,"tfOps"],[89,18,59,20],[89,19,59,21,"scalar"],[89,25,59,27],[89,26,59,28],[89,30,59,32],[89,31,59,33,"size"],[89,35,59,37],[89,36,59,38],[89,37,59,39],[89,39,59,41],[89,46,59,48],[89,47,59,49],[90,4,60,4],[91,4,61,4],[92,0,62,0],[93,0,63,0],[94,0,64,0],[95,0,65,0],[96,4,66,4],[96,10,66,10,"import"],[96,16,66,16,"import"],[96,17,66,17,"keys"],[96,21,66,21],[96,23,66,23,"values"],[96,29,66,29],[96,31,66,31],[97,6,67,8],[97,10,67,12],[97,11,67,13,"checkKeyAndValueTensor"],[97,33,67,35],[97,34,67,36,"keys"],[97,38,67,40],[97,40,67,42,"values"],[97,46,67,48],[97,47,67,49],[98,6,68,8],[99,6,69,8],[100,6,70,8],[100,12,70,14,"$keys"],[100,17,70,19],[100,20,70,22],[100,26,70,28,"keys"],[100,30,70,32],[100,31,70,33,"data"],[100,35,70,37],[100,36,70,38],[100,37,70,39],[101,6,71,8],[102,6,72,8],[102,10,72,12],[102,11,72,13,"tensorMap"],[102,20,72,22],[102,21,72,23,"forEach"],[102,28,72,30],[102,29,72,31,"value"],[102,34,72,36],[102,38,72,40,"value"],[102,43,72,45],[102,44,72,46,"dispose"],[102,51,72,53],[102,52,72,54],[102,53,72,55],[102,54,72,56],[103,6,73,8],[103,10,73,12],[103,11,73,13,"tensorMap"],[103,20,73,22],[103,21,73,23,"clear"],[103,26,73,28],[103,27,73,29],[103,28,73,30],[104,6,74,8],[104,13,74,15],[104,17,74,15,"tidy"],[104,36,74,19],[104,37,74,19,"tidy"],[104,41,74,19],[104,43,74,20],[104,49,74,26],[105,8,75,12],[105,14,75,18,"$values"],[105,21,75,25],[105,24,75,28],[105,28,75,28,"unstack"],[105,47,75,35],[105,48,75,35,"unstack"],[105,55,75,35],[105,57,75,36,"values"],[105,63,75,42],[105,64,75,43],[106,8,76,12],[106,14,76,18,"keysLength"],[106,24,76,28],[106,27,76,31,"$keys"],[106,32,76,36],[106,33,76,37,"length"],[106,39,76,43],[107,8,77,12],[107,14,77,18,"valuesLength"],[107,26,77,30],[107,29,77,33,"$values"],[107,36,77,40],[107,37,77,41,"length"],[107,43,77,47],[108,8,78,12,"util"],[108,27,78,16],[108,28,78,16,"util"],[108,32,78,16],[108,33,78,17,"assert"],[108,39,78,23],[108,40,78,24,"keysLength"],[108,50,78,34],[108,55,78,39,"valuesLength"],[108,67,78,51],[108,69,78,53],[108,75,78,59],[108,124,78,108],[108,127,79,16],[108,130,79,19,"keysLength"],[108,140,79,29],[108,169,79,58,"valuesLength"],[108,181,79,70],[108,184,79,73],[108,187,80,16],[108,198,80,27],[108,199,80,28],[109,8,81,12],[109,13,81,17],[109,17,81,21,"i"],[109,18,81,22],[109,21,81,25],[109,22,81,26],[109,24,81,28,"i"],[109,25,81,29],[109,28,81,32,"keysLength"],[109,38,81,42],[109,40,81,44,"i"],[109,41,81,45],[109,43,81,47],[109,45,81,49],[110,10,82,16],[110,16,82,22,"key"],[110,19,82,25],[110,22,82,28,"$keys"],[110,27,82,33],[110,28,82,34,"i"],[110,29,82,35],[110,30,82,36],[111,10,83,16],[111,16,83,22,"value"],[111,21,83,27],[111,24,83,30,"$values"],[111,31,83,37],[111,32,83,38,"i"],[111,33,83,39],[111,34,83,40],[112,10,84,16],[112,14,84,16,"keep"],[112,33,84,20],[112,34,84,20,"keep"],[112,38,84,20],[112,40,84,21,"value"],[112,45,84,26],[112,46,84,27],[113,10,85,16],[113,14,85,20],[113,15,85,21,"tensorMap"],[113,24,85,30],[113,25,85,31,"set"],[113,28,85,34],[113,29,85,35,"key"],[113,32,85,38],[113,34,85,40,"value"],[113,39,85,45],[113,40,85,46],[114,8,86,12],[115,8,87,12],[115,15,87,19],[115,19,87,23],[115,20,87,24,"handle"],[115,26,87,30],[116,6,88,8],[116,7,88,9],[116,8,88,10],[117,4,89,4],[118,4,90,4],[119,0,91,0],[120,0,92,0],[121,0,93,0],[122,0,94,0],[123,0,95,0],[124,0,96,0],[125,0,97,0],[126,0,98,0],[127,0,99,0],[128,0,100,0],[129,0,101,0],[130,0,102,0],[131,0,103,0],[132,0,104,0],[133,4,105,4],[133,10,105,10,"find"],[133,14,105,14,"find"],[133,15,105,15,"keys"],[133,19,105,19],[133,21,105,21,"defaultValue"],[133,33,105,33],[133,35,105,35],[134,6,106,8],[134,10,106,12],[134,11,106,13,"checkKeyAndValueTensor"],[134,33,106,35],[134,34,106,36,"keys"],[134,38,106,40],[134,40,106,42,"defaultValue"],[134,52,106,54],[134,53,106,55],[135,6,107,8],[135,12,107,14,"$keys"],[135,17,107,19],[135,20,107,22],[135,26,107,28,"keys"],[135,30,107,32],[135,31,107,33,"data"],[135,35,107,37],[135,36,107,38],[135,37,107,39],[136,6,108,8],[136,13,108,15],[136,17,108,15,"tidy"],[136,36,108,19],[136,37,108,19,"tidy"],[136,41,108,19],[136,43,108,20],[136,49,108,26],[137,8,109,12],[137,14,109,18,"result"],[137,20,109,24],[137,23,109,27],[137,25,109,29],[138,8,110,12],[138,13,110,17],[138,17,110,21,"i"],[138,18,110,22],[138,21,110,25],[138,22,110,26],[138,24,110,28,"i"],[138,25,110,29],[138,28,110,32,"$keys"],[138,33,110,37],[138,34,110,38,"length"],[138,40,110,44],[138,42,110,46,"i"],[138,43,110,47],[138,45,110,49],[138,47,110,51],[139,10,111,16],[139,16,111,22,"key"],[139,19,111,25],[139,22,111,28,"$keys"],[139,27,111,33],[139,28,111,34,"i"],[139,29,111,35],[139,30,111,36],[140,10,112,16],[140,16,112,22,"value"],[140,21,112,27],[140,24,112,30],[140,28,112,34],[140,29,112,35,"findWithDefault"],[140,44,112,50],[140,45,112,51,"key"],[140,48,112,54],[140,50,112,56,"defaultValue"],[140,62,112,68],[140,63,112,69],[141,10,113,16,"result"],[141,16,113,22],[141,17,113,23,"push"],[141,21,113,27],[141,22,113,28,"value"],[141,27,113,33],[141,28,113,34],[142,8,114,12],[143,8,115,12],[143,15,115,19],[143,19,115,19,"stack"],[143,38,115,24],[143,39,115,24,"stack"],[143,44,115,24],[143,46,115,25,"result"],[143,52,115,31],[143,53,115,32],[144,6,116,8],[144,7,116,9],[144,8,116,10],[145,4,117,4],[146,4,118,4],[147,4,119,4,"findWithDefault"],[147,19,119,19,"findWithDefault"],[147,20,119,20,"key"],[147,23,119,23],[147,25,119,25,"defaultValue"],[147,37,119,37],[147,39,119,39],[148,6,120,8],[148,12,120,14,"result"],[148,18,120,20],[148,21,120,23],[148,25,120,27],[148,26,120,28,"tensorMap"],[148,35,120,37],[148,36,120,38,"get"],[148,39,120,41],[148,40,120,42,"key"],[148,43,120,45],[148,44,120,46],[149,6,121,8],[149,13,121,15,"result"],[149,19,121,21],[149,23,121,25],[149,27,121,29],[149,30,121,32,"result"],[149,36,121,38],[149,39,121,41,"defaultValue"],[149,51,121,53],[150,4,122,4],[151,4,123,4,"checkKeyAndValueTensor"],[151,26,123,26,"checkKeyAndValueTensor"],[151,27,123,27,"key"],[151,30,123,30],[151,32,123,32,"value"],[151,37,123,37],[151,39,123,39],[152,6,124,8],[152,10,124,12,"key"],[152,13,124,15],[152,14,124,16,"dtype"],[152,19,124,21],[152,24,124,26],[152,28,124,30],[152,29,124,31,"keyDType"],[152,37,124,39],[152,39,124,41],[153,8,125,12],[153,14,125,18],[153,18,125,22,"Error"],[153,23,125,27],[153,24,125,28],[153,44,125,48],[153,48,125,52],[153,49,125,53,"keyDType"],[153,57,125,61],[153,69,125,73],[153,72,126,16],[153,75,126,19,"key"],[153,78,126,22],[153,79,126,23,"dtype"],[153,84,126,28],[153,86,126,30],[153,87,126,31],[154,6,127,8],[155,6,128,8],[155,10,128,12,"value"],[155,15,128,17],[155,16,128,18,"dtype"],[155,21,128,23],[155,26,128,28],[155,30,128,32],[155,31,128,33,"valueDType"],[155,41,128,43],[155,43,128,45],[156,8,129,12],[156,14,129,18],[156,18,129,22,"Error"],[156,23,129,27],[156,24,129,28],[156,46,129,50],[156,50,129,54],[156,51,129,55,"valueDType"],[156,61,129,65],[156,73,129,77],[156,76,130,16],[156,79,130,19,"value"],[156,84,130,24],[156,85,130,25,"dtype"],[156,90,130,30],[156,92,130,32],[156,93,130,33],[157,6,131,8],[158,4,132,4],[159,2,133,0],[160,0,133,1],[160,3]],"functionMap":{"names":["<global>","HashTable","HashTable#get__id","HashTable#constructor","HashTable#clearAndClose","tensorMap.forEach$argument_0","HashTable#size","HashTable#tensorSize","HashTable#_import","tidy$argument_0","util.assert$argument_1","HashTable#find","HashTable#findWithDefault","HashTable#checkKeyAndValueTensor"],"mappings":"AAA;OCsB;ICC;KDE;IEO;KFO;IGI;+BCC,wBD;KHG;IKI;KLE;IMI;KNE;IOM;+BHM,wBG;oBCE;qDCI;2BDE;SDQ;KPC;IUgB;oBFG;SEQ;KVC;IWE;KXG;IYC;KZS;CDC"},"hasCjsExports":false},"type":"js/module"}]}