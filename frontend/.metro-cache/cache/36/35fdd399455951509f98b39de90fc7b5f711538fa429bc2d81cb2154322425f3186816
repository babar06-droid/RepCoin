{"dependencies":[{"name":"../engine","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":35,"index":738}}],"key":"zbTTi8rtwr8rjl75PzEo829Yvss=","exportNames":["*"],"imports":1}},{"name":"../kernel_names","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":739},"end":{"line":18,"column":41,"index":780}}],"key":"gQVznmdGA0uoBQvR5Q4/qW+ITHg=","exportNames":["*"],"imports":1}},{"name":"../tensor_util_env","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":781},"end":{"line":19,"column":53,"index":834}}],"key":"UCKDOr/oOGi3nbD26ZhyAVW61qk=","exportNames":["*"],"imports":1}},{"name":"../util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":835},"end":{"line":20,"column":32,"index":867}}],"key":"DTmef1GE5grNQfsvpIzpBlINy9c=","exportNames":["*"],"imports":1}},{"name":"./conv_util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":868},"end":{"line":21,"column":92,"index":960}}],"key":"INQe0zbIADI7uIipkS0WmYFlLZ8=","exportNames":["*"],"imports":1}},{"name":"./operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":22,"column":0,"index":961},"end":{"line":22,"column":33,"index":994}}],"key":"lmmEAb6oR3TWnrsrETceKUovfkM=","exportNames":["*"],"imports":1}},{"name":"./reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":23,"column":0,"index":995},"end":{"line":23,"column":36,"index":1031}}],"key":"dz8GCsFShMGnHX1Wj7bBySjBnSE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"conv3d\", {\n    enumerable: true,\n    get: function () {\n      return conv3d;\n    }\n  });\n  var _engine = require(_dependencyMap[0], \"../engine\");\n  var _kernel_names = require(_dependencyMap[1], \"../kernel_names\");\n  var _tensor_util_env = require(_dependencyMap[2], \"../tensor_util_env\");\n  var _util = require(_dependencyMap[3], \"../util\");\n  var util = _interopNamespace(_util);\n  var _conv_util = require(_dependencyMap[4], \"./conv_util\");\n  var _operation = require(_dependencyMap[5], \"./operation\");\n  var _reshape = require(_dependencyMap[6], \"./reshape\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  /**\n   * Computes a 3D convolution over the input x.\n   *\n   * @param x The input tensor, of rank 5 or rank 4, of shape\n   *     `[batch, depth, height, width, channels]`. If rank 4,\n   * batch of 1 is assumed.\n   * @param filter The filter, rank 5, of shape\n   *     `[filterDepth, filterHeight, filterWidth, inChannels, outChannels]`.\n   *      inChannels must match between input and filter.\n   * @param strides The strides of the convolution: `[strideDepth, strideHeight,\n   * strideWidth]`.\n   * @param pad The type of padding algorithm.\n   *    - `same` and stride 1: output will be of same size as input,\n   *       regardless of filter size.\n   *    - `valid`: output will be smaller than input if filter is larger\n   *       than 1x1.\n   *   - For more info, see this guide:\n   *     [https://www.tensorflow.org/api_docs/python/tf/nn/convolution](\n   *          https://www.tensorflow.org/api_docs/python/tf/nn/convolution)\n   * @param dataFormat: An optional string from: \"NDHWC\", \"NCDHW\". Defaults to\n   *     \"NDHWC\". Specify the data format of the input and output data. With the\n   *     default format \"NDHWC\", the data is stored in the order of: [batch,\n   *     depth, height, width, channels]. Only \"NDHWC\" is currently supported.\n   * @param dilations The dilation rates: `[dilationDepth, dilationHeight,\n   *     dilationWidth]` in which we sample input values across the height\n   *     and width dimensions in atrous convolution. Defaults to `[1, 1, 1]`.\n   *     If `dilations` is a single number, then\n   *     `dilationDepth == dilationHeight == dilationWidth`. If it is greater\n   *     than 1, then all values of `strides` must be 1.\n   *\n   * @doc {heading: 'Operations', subheading: 'Convolution'}\n   */\n  function conv3d_(x, filter, strides, pad, dataFormat = 'NDHWC', dilations = [1, 1, 1]) {\n    const $x = (0, _tensor_util_env.convertToTensor)(x, 'x', 'conv3d');\n    const $filter = (0, _tensor_util_env.convertToTensor)(filter, 'filter', 'conv3d');\n    let x5D = $x;\n    let reshapedTo5D = false;\n    if ($x.rank === 4) {\n      reshapedTo5D = true;\n      x5D = (0, _reshape.reshape)($x, [1, $x.shape[0], $x.shape[1], $x.shape[2], $x.shape[3]]);\n    }\n    util.assert(x5D.rank === 5, () => `Error in conv3d: input must be rank 5, but got rank ${x5D.rank}.`);\n    util.assert($filter.rank === 5, () => `Error in conv3d: filter must be rank 5, but got rank ` + `${$filter.rank}.`);\n    util.assert(x5D.shape[4] === $filter.shape[3], () => `Error in conv3d: depth of input (${x5D.shape[4]}) must match ` + `input depth for filter ${$filter.shape[3]}.`);\n    util.assert((0, _conv_util.eitherStridesOrDilationsAreOne)(strides, dilations), () => 'Error in conv3D: Either strides or dilations must be 1. ' + `Got strides ${strides} and dilations '${dilations}'`);\n    util.assert(dataFormat === 'NDHWC', () => `Error in conv3d: got dataFormat of ${dataFormat} but only NDHWC is currently supported.`);\n    util.assert((0, _conv_util.stridesOrDilationsArePositive)(dilations), () => 'Error in conv3D: Dilated rates should be larger than 0.');\n    util.assert((0, _conv_util.stridesOrDilationsArePositive)(strides), () => 'Error in conv3D: Strides should be larger than 0.');\n    const inputs = {\n      x: x5D,\n      filter: $filter\n    };\n    const attrs = {\n      strides,\n      pad,\n      dataFormat,\n      dilations\n    };\n    // tslint:disable-next-line: no-unnecessary-type-assertion\n    const res = _engine.ENGINE.runKernel(_kernel_names.Conv3D, inputs, attrs);\n    if (reshapedTo5D) {\n      return (0, _reshape.reshape)(res, [res.shape[1], res.shape[2], res.shape[3], res.shape[4]]);\n    }\n    return res;\n  }\n  const conv3d = /* @__PURE__ */(0, _operation.op)({\n    conv3d_\n  });\n});","lineCount":121,"map":[[22,2,84,0,"Object"],[22,8,84,0],[22,9,84,0,"defineProperty"],[22,23,84,0],[22,24,84,0,"exports"],[22,31,84,0],[23,4,84,0,"enumerable"],[23,14,84,0],[24,4,84,0,"get"],[24,7,84,0],[24,18,84,0,"get"],[24,19,84,0],[25,6,84,0],[25,13,84,0,"conv3d"],[25,19,84,0],[26,4,84,0],[27,2,84,0],[28,2,17,0],[28,6,17,0,"_engine"],[28,13,17,0],[28,16,17,0,"require"],[28,23,17,0],[28,24,17,0,"_dependencyMap"],[28,38,17,0],[29,2,18,0],[29,6,18,0,"_kernel_names"],[29,19,18,0],[29,22,18,0,"require"],[29,29,18,0],[29,30,18,0,"_dependencyMap"],[29,44,18,0],[30,2,19,0],[30,6,19,0,"_tensor_util_env"],[30,22,19,0],[30,25,19,0,"require"],[30,32,19,0],[30,33,19,0,"_dependencyMap"],[30,47,19,0],[31,2,20,0],[31,6,20,0,"_util"],[31,11,20,0],[31,14,20,0,"require"],[31,21,20,0],[31,22,20,0,"_dependencyMap"],[31,36,20,0],[32,2,20,0],[32,6,20,0,"util"],[32,10,20,0],[32,13,20,0,"_interopNamespace"],[32,30,20,0],[32,31,20,0,"_util"],[32,36,20,0],[33,2,21,0],[33,6,21,0,"_conv_util"],[33,16,21,0],[33,19,21,0,"require"],[33,26,21,0],[33,27,21,0,"_dependencyMap"],[33,41,21,0],[34,2,22,0],[34,6,22,0,"_operation"],[34,16,22,0],[34,19,22,0,"require"],[34,26,22,0],[34,27,22,0,"_dependencyMap"],[34,41,22,0],[35,2,23,0],[35,6,23,0,"_reshape"],[35,14,23,0],[35,17,23,0,"require"],[35,24,23,0],[35,25,23,0,"_dependencyMap"],[35,39,23,0],[36,2,1,0],[37,0,2,0],[38,0,3,0],[39,0,4,0],[40,0,5,0],[41,0,6,0],[42,0,7,0],[43,0,8,0],[44,0,9,0],[45,0,10,0],[46,0,11,0],[47,0,12,0],[48,0,13,0],[49,0,14,0],[50,0,15,0],[51,0,16,0],[53,2,24,0],[54,0,25,0],[55,0,26,0],[56,0,27,0],[57,0,28,0],[58,0,29,0],[59,0,30,0],[60,0,31,0],[61,0,32,0],[62,0,33,0],[63,0,34,0],[64,0,35,0],[65,0,36,0],[66,0,37,0],[67,0,38,0],[68,0,39,0],[69,0,40,0],[70,0,41,0],[71,0,42,0],[72,0,43,0],[73,0,44,0],[74,0,45,0],[75,0,46,0],[76,0,47,0],[77,0,48,0],[78,0,49,0],[79,0,50,0],[80,0,51,0],[81,0,52,0],[82,0,53,0],[83,0,54,0],[84,0,55,0],[85,2,56,0],[85,11,56,9,"conv3d_"],[85,18,56,16,"conv3d_"],[85,19,56,17,"x"],[85,20,56,18],[85,22,56,20,"filter"],[85,28,56,26],[85,30,56,28,"strides"],[85,37,56,35],[85,39,56,37,"pad"],[85,42,56,40],[85,44,56,42,"dataFormat"],[85,54,56,52],[85,57,56,55],[85,64,56,62],[85,66,56,64,"dilations"],[85,75,56,73],[85,78,56,76],[85,79,56,77],[85,80,56,78],[85,82,56,80],[85,83,56,81],[85,85,56,83],[85,86,56,84],[85,87,56,85],[85,89,56,87],[86,4,57,4],[86,10,57,10,"$x"],[86,12,57,12],[86,15,57,15],[86,19,57,15,"convertToTensor"],[86,35,57,30],[86,36,57,30,"convertToTensor"],[86,51,57,30],[86,53,57,31,"x"],[86,54,57,32],[86,56,57,34],[86,59,57,37],[86,61,57,39],[86,69,57,47],[86,70,57,48],[87,4,58,4],[87,10,58,10,"$filter"],[87,17,58,17],[87,20,58,20],[87,24,58,20,"convertToTensor"],[87,40,58,35],[87,41,58,35,"convertToTensor"],[87,56,58,35],[87,58,58,36,"filter"],[87,64,58,42],[87,66,58,44],[87,74,58,52],[87,76,58,54],[87,84,58,62],[87,85,58,63],[88,4,59,4],[88,8,59,8,"x5D"],[88,11,59,11],[88,14,59,14,"$x"],[88,16,59,16],[89,4,60,4],[89,8,60,8,"reshapedTo5D"],[89,20,60,20],[89,23,60,23],[89,28,60,28],[90,4,61,4],[90,8,61,8,"$x"],[90,10,61,10],[90,11,61,11,"rank"],[90,15,61,15],[90,20,61,20],[90,21,61,21],[90,23,61,23],[91,6,62,8,"reshapedTo5D"],[91,18,62,20],[91,21,62,23],[91,25,62,27],[92,6,63,8,"x5D"],[92,9,63,11],[92,12,63,14],[92,16,63,14,"reshape"],[92,24,63,21],[92,25,63,21,"reshape"],[92,32,63,21],[92,34,63,22,"$x"],[92,36,63,24],[92,38,63,26],[92,39,63,27],[92,40,63,28],[92,42,63,30,"$x"],[92,44,63,32],[92,45,63,33,"shape"],[92,50,63,38],[92,51,63,39],[92,52,63,40],[92,53,63,41],[92,55,63,43,"$x"],[92,57,63,45],[92,58,63,46,"shape"],[92,63,63,51],[92,64,63,52],[92,65,63,53],[92,66,63,54],[92,68,63,56,"$x"],[92,70,63,58],[92,71,63,59,"shape"],[92,76,63,64],[92,77,63,65],[92,78,63,66],[92,79,63,67],[92,81,63,69,"$x"],[92,83,63,71],[92,84,63,72,"shape"],[92,89,63,77],[92,90,63,78],[92,91,63,79],[92,92,63,80],[92,93,63,81],[92,94,63,82],[93,4,64,4],[94,4,65,4,"util"],[94,8,65,8],[94,9,65,9,"assert"],[94,15,65,15],[94,16,65,16,"x5D"],[94,19,65,19],[94,20,65,20,"rank"],[94,24,65,24],[94,29,65,29],[94,30,65,30],[94,32,65,32],[94,38,65,38],[94,93,65,93,"x5D"],[94,96,65,96],[94,97,65,97,"rank"],[94,101,65,101],[94,104,65,104],[94,105,65,105],[95,4,66,4,"util"],[95,8,66,8],[95,9,66,9,"assert"],[95,15,66,15],[95,16,66,16,"$filter"],[95,23,66,23],[95,24,66,24,"rank"],[95,28,66,28],[95,33,66,33],[95,34,66,34],[95,36,66,36],[95,42,66,42],[95,97,66,97],[95,100,67,8],[95,103,67,11,"$filter"],[95,110,67,18],[95,111,67,19,"rank"],[95,115,67,23],[95,118,67,26],[95,119,67,27],[96,4,68,4,"util"],[96,8,68,8],[96,9,68,9,"assert"],[96,15,68,15],[96,16,68,16,"x5D"],[96,19,68,19],[96,20,68,20,"shape"],[96,25,68,25],[96,26,68,26],[96,27,68,27],[96,28,68,28],[96,33,68,33,"$filter"],[96,40,68,40],[96,41,68,41,"shape"],[96,46,68,46],[96,47,68,47],[96,48,68,48],[96,49,68,49],[96,51,68,51],[96,57,68,57],[96,93,68,93,"x5D"],[96,96,68,96],[96,97,68,97,"shape"],[96,102,68,102],[96,103,68,103],[96,104,68,104],[96,105,68,105],[96,120,68,120],[96,123,69,8],[96,149,69,34,"$filter"],[96,156,69,41],[96,157,69,42,"shape"],[96,162,69,47],[96,163,69,48],[96,164,69,49],[96,165,69,50],[96,168,69,53],[96,169,69,54],[97,4,70,4,"util"],[97,8,70,8],[97,9,70,9,"assert"],[97,15,70,15],[97,16,70,16],[97,20,70,16,"eitherStridesOrDilationsAreOne"],[97,30,70,46],[97,31,70,46,"eitherStridesOrDilationsAreOne"],[97,61,70,46],[97,63,70,47,"strides"],[97,70,70,54],[97,72,70,56,"dilations"],[97,81,70,65],[97,82,70,66],[97,84,70,68],[97,90,70,74],[97,148,70,132],[97,151,71,8],[97,166,71,23,"strides"],[97,173,71,30],[97,192,71,49,"dilations"],[97,201,71,58],[97,204,71,61],[97,205,71,62],[98,4,72,4,"util"],[98,8,72,8],[98,9,72,9,"assert"],[98,15,72,15],[98,16,72,16,"dataFormat"],[98,26,72,26],[98,31,72,31],[98,38,72,38],[98,40,72,40],[98,46,72,46],[98,84,72,84,"dataFormat"],[98,94,72,94],[98,135,72,135],[98,136,72,136],[99,4,73,4,"util"],[99,8,73,8],[99,9,73,9,"assert"],[99,15,73,15],[99,16,73,16],[99,20,73,16,"stridesOrDilationsArePositive"],[99,30,73,45],[99,31,73,45,"stridesOrDilationsArePositive"],[99,60,73,45],[99,62,73,46,"dilations"],[99,71,73,55],[99,72,73,56],[99,74,73,58],[99,80,73,64],[99,137,73,121],[99,138,73,122],[100,4,74,4,"util"],[100,8,74,8],[100,9,74,9,"assert"],[100,15,74,15],[100,16,74,16],[100,20,74,16,"stridesOrDilationsArePositive"],[100,30,74,45],[100,31,74,45,"stridesOrDilationsArePositive"],[100,60,74,45],[100,62,74,46,"strides"],[100,69,74,53],[100,70,74,54],[100,72,74,56],[100,78,74,62],[100,129,74,113],[100,130,74,114],[101,4,75,4],[101,10,75,10,"inputs"],[101,16,75,16],[101,19,75,19],[102,6,75,21,"x"],[102,7,75,22],[102,9,75,24,"x5D"],[102,12,75,27],[103,6,75,29,"filter"],[103,12,75,35],[103,14,75,37,"$filter"],[104,4,75,45],[104,5,75,46],[105,4,76,4],[105,10,76,10,"attrs"],[105,15,76,15],[105,18,76,18],[106,6,76,20,"strides"],[106,13,76,27],[107,6,76,29,"pad"],[107,9,76,32],[108,6,76,34,"dataFormat"],[108,16,76,44],[109,6,76,46,"dilations"],[110,4,76,56],[110,5,76,57],[111,4,77,4],[112,4,78,4],[112,10,78,10,"res"],[112,13,78,13],[112,16,78,16,"ENGINE"],[112,23,78,22],[112,24,78,22,"ENGINE"],[112,30,78,22],[112,31,78,23,"runKernel"],[112,40,78,32],[112,41,78,33,"Conv3D"],[112,54,78,39],[112,55,78,39,"Conv3D"],[112,61,78,39],[112,63,78,41,"inputs"],[112,69,78,47],[112,71,78,49,"attrs"],[112,76,78,54],[112,77,78,55],[113,4,79,4],[113,8,79,8,"reshapedTo5D"],[113,20,79,20],[113,22,79,22],[114,6,80,8],[114,13,80,15],[114,17,80,15,"reshape"],[114,25,80,22],[114,26,80,22,"reshape"],[114,33,80,22],[114,35,80,23,"res"],[114,38,80,26],[114,40,80,28],[114,41,80,29,"res"],[114,44,80,32],[114,45,80,33,"shape"],[114,50,80,38],[114,51,80,39],[114,52,80,40],[114,53,80,41],[114,55,80,43,"res"],[114,58,80,46],[114,59,80,47,"shape"],[114,64,80,52],[114,65,80,53],[114,66,80,54],[114,67,80,55],[114,69,80,57,"res"],[114,72,80,60],[114,73,80,61,"shape"],[114,78,80,66],[114,79,80,67],[114,80,80,68],[114,81,80,69],[114,83,80,71,"res"],[114,86,80,74],[114,87,80,75,"shape"],[114,92,80,80],[114,93,80,81],[114,94,80,82],[114,95,80,83],[114,96,80,84],[114,97,80,85],[115,4,81,4],[116,4,82,4],[116,11,82,11,"res"],[116,14,82,14],[117,2,83,0],[118,2,84,7],[118,8,84,13,"conv3d"],[118,14,84,19],[118,17,84,22],[118,32,84,38],[118,36,84,38,"op"],[118,46,84,40],[118,47,84,40,"op"],[118,49,84,40],[118,51,84,41],[119,4,84,43,"conv3d_"],[120,2,84,51],[120,3,84,52],[120,4,84,53],[121,0,84,54],[121,3]],"functionMap":{"names":["<global>","conv3d_","util.assert$argument_1"],"mappings":"AAA;ACuD;gCCS,wED;oCCC;0BDC;mDCC;qDDC;oECC;6DDC;wCCC,+FD;0DCC,+DD;wDCC,yDD;CDS"},"hasCjsExports":false},"type":"js/module"}]}