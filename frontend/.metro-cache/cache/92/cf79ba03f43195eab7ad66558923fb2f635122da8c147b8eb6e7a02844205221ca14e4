{"dependencies":[{"name":"../engine","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":35,"index":738}}],"key":"zbTTi8rtwr8rjl75PzEo829Yvss=","exportNames":["*"],"imports":1}},{"name":"../kernel_names","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":739},"end":{"line":18,"column":54,"index":793}}],"key":"gQVznmdGA0uoBQvR5Q4/qW+ITHg=","exportNames":["*"],"imports":1}},{"name":"../util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":794},"end":{"line":19,"column":32,"index":826}}],"key":"DTmef1GE5grNQfsvpIzpBlINy9c=","exportNames":["*"],"imports":1}},{"name":"./conv_util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":827},"end":{"line":20,"column":41,"index":868}}],"key":"INQe0zbIADI7uIipkS0WmYFlLZ8=","exportNames":["*"],"imports":1}},{"name":"./operation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":21,"column":0,"index":869},"end":{"line":21,"column":33,"index":902}}],"key":"lmmEAb6oR3TWnrsrETceKUovfkM=","exportNames":["*"],"imports":1}},{"name":"./reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":22,"column":0,"index":903},"end":{"line":22,"column":36,"index":939}}],"key":"dz8GCsFShMGnHX1Wj7bBySjBnSE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"conv2DBackpropInput\", {\n    enumerable: true,\n    get: function () {\n      return conv2DBackpropInput;\n    }\n  });\n  var _engine = require(_dependencyMap[0], \"../engine\");\n  var _kernel_names = require(_dependencyMap[1], \"../kernel_names\");\n  var _util = require(_dependencyMap[2], \"../util\");\n  var util = _interopNamespace(_util);\n  var _conv_util = require(_dependencyMap[3], \"./conv_util\");\n  var conv_util = _interopNamespace(_conv_util);\n  var _operation = require(_dependencyMap[4], \"./operation\");\n  var _reshape = require(_dependencyMap[5], \"./reshape\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  /**\n   * Computes the derivative of the input of a 2D convolution.\n   *\n   * @param xShape The shape of the input: [batch, height, width, inDepth].\n   * If length of 3, batch of 1 is assumed.\n   * @param dy The derivative of the output, of rank 4 or rank 3 of shape\n   *   `[batch, outHeight, outWidth, outDepth]`. If rank 3, batch of 1 is\n   * assumed.\n   * @param filter The filter, rank 4, of shape\n   *     `[filterHeight, filterWidth, inDepth, outDepth]`.\n   * @param strides The strides of the convolution: `[strideHeight,\n   * strideWidth]`.\n   * @param pad The type of padding algorithm used:\n   *    - `same` and stride 1: output will be of same size as input,\n   *       regardless of filter size.\n   *    - `valid`: output will be smaller than input if filter is larger\n   *       than 1x1.\n   * @param dataFormat: An optional string from: \"NHWC\", \"NCHW\". Defaults to\n   *     \"NHWC\". Specify the data format of the input and output data. With the\n   *     default format \"NHWC\", the data is stored in the order of: [batch,\n   *     height, width, channels].\n   * @param dimRoundingMode A string from: 'ceil', 'round', 'floor'. If none is\n   *     provided, it will default to truncate.\n   */\n  function conv2DBackpropInput_(xShape, dy, filter, strides, pad, dataFormat = 'NHWC', dimRoundingMode) {\n    util.assert(xShape.length === dy.rank, () => `Length of inShape ` + `(${xShape.length}) and rank of dy (${dy.rank}) must match`);\n    let xShape4D = xShape;\n    let dy4D = dy;\n    let reshapedTo4D = false;\n    if (dy.rank === 3) {\n      reshapedTo4D = true;\n      dy4D = (0, _reshape.reshape)(dy, [1, dy.shape[0], dy.shape[1], dy.shape[2]]);\n      xShape4D = [1, xShape[0], xShape[1], xShape[2]];\n    }\n    util.assert(xShape4D.length === 4, () => `Error in conv2dDerInput: inShape must be length 4, but got length ` + `${xShape4D.length}.`);\n    util.assert(dy4D.rank === 4, () => `Error in conv2dDerInput: dy must be rank 4, but got ` + `rank ${dy4D.rank}`);\n    util.assert(filter.rank === 4, () => `Error in conv2dDerInput: filter must be rank 4, but got ` + `rank ${filter.rank}`);\n    const inDepth = dataFormat === 'NHWC' ? xShape4D[3] : xShape4D[1];\n    const outDepth = dataFormat === 'NHWC' ? dy4D.shape[3] : dy4D.shape[1];\n    util.assert(inDepth === filter.shape[2], () => `Error in conv2dDerInput: depth of input (${inDepth}) must ` + `match input depth for filter ${filter.shape[2]}.`);\n    util.assert(outDepth === filter.shape[3], () => `Error in conv2dDerInput: depth of output (${outDepth}) must ` + `match output depth for filter ${filter.shape[3]}.`);\n    conv_util.checkPadOnDimRoundingMode('conv2dDerInput', pad, dimRoundingMode);\n    const inputs = {\n      dy: dy4D,\n      filter\n    };\n    const attrs = {\n      strides,\n      pad,\n      dataFormat,\n      dimRoundingMode,\n      inputShape: xShape4D\n    };\n    // tslint:disable-next-line: no-unnecessary-type-assertion\n    const res = _engine.ENGINE.runKernel(_kernel_names.Conv2DBackpropInput, inputs, attrs);\n    if (reshapedTo4D) {\n      return (0, _reshape.reshape)(res, [res.shape[1], res.shape[2], res.shape[3]]);\n    }\n    return res;\n  }\n  const conv2DBackpropInput = /* @__PURE__ */(0, _operation.op)({\n    conv2DBackpropInput_\n  });\n});","lineCount":116,"map":[[22,2,80,0,"Object"],[22,8,80,0],[22,9,80,0,"defineProperty"],[22,23,80,0],[22,24,80,0,"exports"],[22,31,80,0],[23,4,80,0,"enumerable"],[23,14,80,0],[24,4,80,0,"get"],[24,7,80,0],[24,18,80,0,"get"],[24,19,80,0],[25,6,80,0],[25,13,80,0,"conv2DBackpropInput"],[25,32,80,0],[26,4,80,0],[27,2,80,0],[28,2,17,0],[28,6,17,0,"_engine"],[28,13,17,0],[28,16,17,0,"require"],[28,23,17,0],[28,24,17,0,"_dependencyMap"],[28,38,17,0],[29,2,18,0],[29,6,18,0,"_kernel_names"],[29,19,18,0],[29,22,18,0,"require"],[29,29,18,0],[29,30,18,0,"_dependencyMap"],[29,44,18,0],[30,2,19,0],[30,6,19,0,"_util"],[30,11,19,0],[30,14,19,0,"require"],[30,21,19,0],[30,22,19,0,"_dependencyMap"],[30,36,19,0],[31,2,19,0],[31,6,19,0,"util"],[31,10,19,0],[31,13,19,0,"_interopNamespace"],[31,30,19,0],[31,31,19,0,"_util"],[31,36,19,0],[32,2,20,0],[32,6,20,0,"_conv_util"],[32,16,20,0],[32,19,20,0,"require"],[32,26,20,0],[32,27,20,0,"_dependencyMap"],[32,41,20,0],[33,2,20,0],[33,6,20,0,"conv_util"],[33,15,20,0],[33,18,20,0,"_interopNamespace"],[33,35,20,0],[33,36,20,0,"_conv_util"],[33,46,20,0],[34,2,21,0],[34,6,21,0,"_operation"],[34,16,21,0],[34,19,21,0,"require"],[34,26,21,0],[34,27,21,0,"_dependencyMap"],[34,41,21,0],[35,2,22,0],[35,6,22,0,"_reshape"],[35,14,22,0],[35,17,22,0,"require"],[35,24,22,0],[35,25,22,0,"_dependencyMap"],[35,39,22,0],[36,2,1,0],[37,0,2,0],[38,0,3,0],[39,0,4,0],[40,0,5,0],[41,0,6,0],[42,0,7,0],[43,0,8,0],[44,0,9,0],[45,0,10,0],[46,0,11,0],[47,0,12,0],[48,0,13,0],[49,0,14,0],[50,0,15,0],[51,0,16,0],[53,2,23,0],[54,0,24,0],[55,0,25,0],[56,0,26,0],[57,0,27,0],[58,0,28,0],[59,0,29,0],[60,0,30,0],[61,0,31,0],[62,0,32,0],[63,0,33,0],[64,0,34,0],[65,0,35,0],[66,0,36,0],[67,0,37,0],[68,0,38,0],[69,0,39,0],[70,0,40,0],[71,0,41,0],[72,0,42,0],[73,0,43,0],[74,0,44,0],[75,0,45,0],[76,0,46,0],[77,2,47,0],[77,11,47,9,"conv2DBackpropInput_"],[77,31,47,29,"conv2DBackpropInput_"],[77,32,47,30,"xShape"],[77,38,47,36],[77,40,47,38,"dy"],[77,42,47,40],[77,44,47,42,"filter"],[77,50,47,48],[77,52,47,50,"strides"],[77,59,47,57],[77,61,47,59,"pad"],[77,64,47,62],[77,66,47,64,"dataFormat"],[77,76,47,74],[77,79,47,77],[77,85,47,83],[77,87,47,85,"dimRoundingMode"],[77,102,47,100],[77,104,47,102],[78,4,48,4,"util"],[78,8,48,8],[78,9,48,9,"assert"],[78,15,48,15],[78,16,48,16,"xShape"],[78,22,48,22],[78,23,48,23,"length"],[78,29,48,29],[78,34,48,34,"dy"],[78,36,48,36],[78,37,48,37,"rank"],[78,41,48,41],[78,43,48,43],[78,49,48,49],[78,69,48,69],[78,72,49,8],[78,76,49,12,"xShape"],[78,82,49,18],[78,83,49,19,"length"],[78,89,49,25],[78,110,49,46,"dy"],[78,112,49,48],[78,113,49,49,"rank"],[78,117,49,53],[78,131,49,67],[78,132,49,68],[79,4,50,4],[79,8,50,8,"xShape4D"],[79,16,50,16],[79,19,50,19,"xShape"],[79,25,50,25],[80,4,51,4],[80,8,51,8,"dy4D"],[80,12,51,12],[80,15,51,15,"dy"],[80,17,51,17],[81,4,52,4],[81,8,52,8,"reshapedTo4D"],[81,20,52,20],[81,23,52,23],[81,28,52,28],[82,4,53,4],[82,8,53,8,"dy"],[82,10,53,10],[82,11,53,11,"rank"],[82,15,53,15],[82,20,53,20],[82,21,53,21],[82,23,53,23],[83,6,54,8,"reshapedTo4D"],[83,18,54,20],[83,21,54,23],[83,25,54,27],[84,6,55,8,"dy4D"],[84,10,55,12],[84,13,55,15],[84,17,55,15,"reshape"],[84,25,55,22],[84,26,55,22,"reshape"],[84,33,55,22],[84,35,55,23,"dy"],[84,37,55,25],[84,39,55,27],[84,40,55,28],[84,41,55,29],[84,43,55,31,"dy"],[84,45,55,33],[84,46,55,34,"shape"],[84,51,55,39],[84,52,55,40],[84,53,55,41],[84,54,55,42],[84,56,55,44,"dy"],[84,58,55,46],[84,59,55,47,"shape"],[84,64,55,52],[84,65,55,53],[84,66,55,54],[84,67,55,55],[84,69,55,57,"dy"],[84,71,55,59],[84,72,55,60,"shape"],[84,77,55,65],[84,78,55,66],[84,79,55,67],[84,80,55,68],[84,81,55,69],[84,82,55,70],[85,6,56,8,"xShape4D"],[85,14,56,16],[85,17,56,19],[85,18,56,20],[85,19,56,21],[85,21,56,23,"xShape"],[85,27,56,29],[85,28,56,30],[85,29,56,31],[85,30,56,32],[85,32,56,34,"xShape"],[85,38,56,40],[85,39,56,41],[85,40,56,42],[85,41,56,43],[85,43,56,45,"xShape"],[85,49,56,51],[85,50,56,52],[85,51,56,53],[85,52,56,54],[85,53,56,55],[86,4,57,4],[87,4,58,4,"util"],[87,8,58,8],[87,9,58,9,"assert"],[87,15,58,15],[87,16,58,16,"xShape4D"],[87,24,58,24],[87,25,58,25,"length"],[87,31,58,31],[87,36,58,36],[87,37,58,37],[87,39,58,39],[87,45,58,45],[87,113,58,113],[87,116,59,8],[87,119,59,11,"xShape4D"],[87,127,59,19],[87,128,59,20,"length"],[87,134,59,26],[87,137,59,29],[87,138,59,30],[88,4,60,4,"util"],[88,8,60,8],[88,9,60,9,"assert"],[88,15,60,15],[88,16,60,16,"dy4D"],[88,20,60,20],[88,21,60,21,"rank"],[88,25,60,25],[88,30,60,30],[88,31,60,31],[88,33,60,33],[88,39,60,39],[88,93,60,93],[88,96,61,8],[88,104,61,16,"dy4D"],[88,108,61,20],[88,109,61,21,"rank"],[88,113,61,25],[88,115,61,27],[88,116,61,28],[89,4,62,4,"util"],[89,8,62,8],[89,9,62,9,"assert"],[89,15,62,15],[89,16,62,16,"filter"],[89,22,62,22],[89,23,62,23,"rank"],[89,27,62,27],[89,32,62,32],[89,33,62,33],[89,35,62,35],[89,41,62,41],[89,99,62,99],[89,102,63,8],[89,110,63,16,"filter"],[89,116,63,22],[89,117,63,23,"rank"],[89,121,63,27],[89,123,63,29],[89,124,63,30],[90,4,64,4],[90,10,64,10,"inDepth"],[90,17,64,17],[90,20,64,20,"dataFormat"],[90,30,64,30],[90,35,64,35],[90,41,64,41],[90,44,64,44,"xShape4D"],[90,52,64,52],[90,53,64,53],[90,54,64,54],[90,55,64,55],[90,58,64,58,"xShape4D"],[90,66,64,66],[90,67,64,67],[90,68,64,68],[90,69,64,69],[91,4,65,4],[91,10,65,10,"outDepth"],[91,18,65,18],[91,21,65,21,"dataFormat"],[91,31,65,31],[91,36,65,36],[91,42,65,42],[91,45,65,45,"dy4D"],[91,49,65,49],[91,50,65,50,"shape"],[91,55,65,55],[91,56,65,56],[91,57,65,57],[91,58,65,58],[91,61,65,61,"dy4D"],[91,65,65,65],[91,66,65,66,"shape"],[91,71,65,71],[91,72,65,72],[91,73,65,73],[91,74,65,74],[92,4,66,4,"util"],[92,8,66,8],[92,9,66,9,"assert"],[92,15,66,15],[92,16,66,16,"inDepth"],[92,23,66,23],[92,28,66,28,"filter"],[92,34,66,34],[92,35,66,35,"shape"],[92,40,66,40],[92,41,66,41],[92,42,66,42],[92,43,66,43],[92,45,66,45],[92,51,66,51],[92,95,66,95,"inDepth"],[92,102,66,102],[92,111,66,111],[92,114,67,8],[92,146,67,40,"filter"],[92,152,67,46],[92,153,67,47,"shape"],[92,158,67,52],[92,159,67,53],[92,160,67,54],[92,161,67,55],[92,164,67,58],[92,165,67,59],[93,4,68,4,"util"],[93,8,68,8],[93,9,68,9,"assert"],[93,15,68,15],[93,16,68,16,"outDepth"],[93,24,68,24],[93,29,68,29,"filter"],[93,35,68,35],[93,36,68,36,"shape"],[93,41,68,41],[93,42,68,42],[93,43,68,43],[93,44,68,44],[93,46,68,46],[93,52,68,52],[93,97,68,97,"outDepth"],[93,105,68,105],[93,114,68,114],[93,117,69,8],[93,150,69,41,"filter"],[93,156,69,47],[93,157,69,48,"shape"],[93,162,69,53],[93,163,69,54],[93,164,69,55],[93,165,69,56],[93,168,69,59],[93,169,69,60],[94,4,70,4,"conv_util"],[94,13,70,13],[94,14,70,14,"checkPadOnDimRoundingMode"],[94,39,70,39],[94,40,70,40],[94,56,70,56],[94,58,70,58,"pad"],[94,61,70,61],[94,63,70,63,"dimRoundingMode"],[94,78,70,78],[94,79,70,79],[95,4,71,4],[95,10,71,10,"inputs"],[95,16,71,16],[95,19,71,19],[96,6,71,21,"dy"],[96,8,71,23],[96,10,71,25,"dy4D"],[96,14,71,29],[97,6,71,31,"filter"],[98,4,71,38],[98,5,71,39],[99,4,72,4],[99,10,72,10,"attrs"],[99,15,72,15],[99,18,72,18],[100,6,72,20,"strides"],[100,13,72,27],[101,6,72,29,"pad"],[101,9,72,32],[102,6,72,34,"dataFormat"],[102,16,72,44],[103,6,72,46,"dimRoundingMode"],[103,21,72,61],[104,6,72,63,"inputShape"],[104,16,72,73],[104,18,72,75,"xShape4D"],[105,4,72,84],[105,5,72,85],[106,4,73,4],[107,4,74,4],[107,10,74,10,"res"],[107,13,74,13],[107,16,74,16,"ENGINE"],[107,23,74,22],[107,24,74,22,"ENGINE"],[107,30,74,22],[107,31,74,23,"runKernel"],[107,40,74,32],[107,41,74,33,"Conv2DBackpropInput"],[107,54,74,52],[107,55,74,52,"Conv2DBackpropInput"],[107,74,74,52],[107,76,74,54,"inputs"],[107,82,74,60],[107,84,74,62,"attrs"],[107,89,74,67],[107,90,74,68],[108,4,75,4],[108,8,75,8,"reshapedTo4D"],[108,20,75,20],[108,22,75,22],[109,6,76,8],[109,13,76,15],[109,17,76,15,"reshape"],[109,25,76,22],[109,26,76,22,"reshape"],[109,33,76,22],[109,35,76,23,"res"],[109,38,76,26],[109,40,76,28],[109,41,76,29,"res"],[109,44,76,32],[109,45,76,33,"shape"],[109,50,76,38],[109,51,76,39],[109,52,76,40],[109,53,76,41],[109,55,76,43,"res"],[109,58,76,46],[109,59,76,47,"shape"],[109,64,76,52],[109,65,76,53],[109,66,76,54],[109,67,76,55],[109,69,76,57,"res"],[109,72,76,60],[109,73,76,61,"shape"],[109,78,76,66],[109,79,76,67],[109,80,76,68],[109,81,76,69],[109,82,76,70],[109,83,76,71],[110,4,77,4],[111,4,78,4],[111,11,78,11,"res"],[111,14,78,14],[112,2,79,0],[113,2,80,7],[113,8,80,13,"conv2DBackpropInput"],[113,27,80,32],[113,30,80,35],[113,45,80,51],[113,49,80,51,"op"],[113,59,80,53],[113,60,80,53,"op"],[113,62,80,53],[113,64,80,54],[114,4,80,56,"conv2DBackpropInput_"],[115,2,80,77],[115,3,80,78],[115,4,80,79],[116,0,80,80],[116,3]],"functionMap":{"names":["<global>","conv2DBackpropInput_","util.assert$argument_1"],"mappings":"AAA;AC8C;2CCC;mEDC;uCCS;6BDC;iCCC;2BDC;mCCC;6BDC;6CCG;0DDC;8CCC;2DDC;CDU"},"hasCjsExports":false},"type":"js/module"}]}