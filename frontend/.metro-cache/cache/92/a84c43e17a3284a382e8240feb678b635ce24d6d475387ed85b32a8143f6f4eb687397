{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"RowPartitionType\", {\n    enumerable: true,\n    get: function () {\n      return RowPartitionType;\n    }\n  });\n  exports.combineRaggedTensorToTensorShapes = combineRaggedTensorToTensorShapes;\n  exports.getRowPartitionTypesHelper = getRowPartitionTypesHelper;\n  exports.getRaggedRank = getRaggedRank;\n  exports.validateDefaultValueShape = validateDefaultValueShape;\n  /**\n   * @license\n   * Copyright 2022 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n  var RowPartitionType;\n  (function (RowPartitionType) {\n    RowPartitionType[RowPartitionType[\"FIRST_DIM_SIZE\"] = 0] = \"FIRST_DIM_SIZE\";\n    RowPartitionType[RowPartitionType[\"VALUE_ROWIDS\"] = 1] = \"VALUE_ROWIDS\";\n    RowPartitionType[RowPartitionType[\"ROW_LENGTHS\"] = 2] = \"ROW_LENGTHS\";\n    RowPartitionType[RowPartitionType[\"ROW_SPLITS\"] = 3] = \"ROW_SPLITS\";\n    RowPartitionType[RowPartitionType[\"ROW_LIMITS\"] = 4] = \"ROW_LIMITS\";\n    RowPartitionType[RowPartitionType[\"ROW_STARTS\"] = 5] = \"ROW_STARTS\";\n  })(RowPartitionType || (RowPartitionType = {}));\n  function combineRaggedTensorToTensorShapes(raggedRank, shape, valueShape) {\n    // Test for consistency of valueShape and shape specified.\n    // If shape is unspecified and valueShape is specified, then copy\n    // over the size from the valueShape dimension.\n    let outputShape = new Array();\n    if (valueShape == null && shape == null) {\n      return outputShape;\n    }\n    if (shape == null) {\n      // Here, value_shape must be of known size.\n      while (outputShape.length < raggedRank + valueShape.length) {\n        outputShape.push(-1);\n      }\n    } else {\n      outputShape = shape.slice();\n    }\n    if (valueShape == null) {\n      return outputShape;\n    }\n    // At this point, valueShape and output_shape have known ranks.\n    if (raggedRank + valueShape.length !== outputShape.length) {\n      throw new Error(`rt input.shape and shape=${shape} are incompatible: rt input.rank = ${raggedRank + valueShape.length}, but shape.rank = ${outputShape.length}`);\n    }\n    for (let i = 1; i < valueShape.length; ++i) {\n      const valueDim = valueShape[i];\n      const outputShapeDimIndex = outputShape[outputShape.length - valueShape.length + i];\n      const outputShapeDim = outputShape[outputShapeDimIndex];\n      if (valueDim >= 0) {\n        if (outputShapeDim >= 0) {\n          if (outputShapeDim !== valueDim) {\n            throw new Error(`rt input.shape and shape=${shape} are incompatible: rt input.shape[${i + raggedRank}] = ${valueDim} but shape[${i + raggedRank}] = ${outputShapeDim}`);\n          }\n        } else {\n          outputShape[outputShapeDimIndex] = valueDim;\n        }\n      }\n    }\n    return outputShape;\n  }\n  function getRowPartitionTypesHelper(rowPartitionTypeStrings) {\n    const stringToType = {\n      'FIRST_DIM_SIZE': RowPartitionType.FIRST_DIM_SIZE,\n      'VALUE_ROWIDS': RowPartitionType.VALUE_ROWIDS,\n      'ROW_LENGTHS': RowPartitionType.ROW_LENGTHS,\n      'ROW_SPLITS': RowPartitionType.ROW_SPLITS,\n      'ROW_LIMITS': RowPartitionType.ROW_LIMITS,\n      'ROW_STARTS': RowPartitionType.ROW_STARTS\n    };\n    const result = [];\n    for (const typeStr of rowPartitionTypeStrings) {\n      if (typeStr in stringToType) {\n        result.push(stringToType[typeStr]);\n      } else {\n        break;\n      }\n    }\n    return result;\n  }\n  function getRaggedRank(rowPartitionTypes) {\n    if (rowPartitionTypes.length === 0) {\n      return 0;\n    }\n    if (rowPartitionTypes[0] === RowPartitionType.FIRST_DIM_SIZE) {\n      return rowPartitionTypes.length - 1;\n    }\n    return rowPartitionTypes.length;\n  }\n  function validateDefaultValueShape(defaultValueShape, valueShape) {\n    if (defaultValueShape == null || valueShape == null) {\n      return;\n    }\n    const defaultNDims = defaultValueShape.length;\n    const valuesNDims = valueShape.length;\n    if (defaultNDims >= valuesNDims) {\n      throw new Error(`defaultValue.shape=${defaultValueShape} and ragged tensor flatValues.shape=${valueShape}, are incompatible: defaultValue.rank = ${defaultNDims} must be less than ragged tensor input flatValues.rank = ${valuesNDims})`);\n    }\n    for (let i = 0; i < Math.min(defaultNDims, valuesNDims - 1); ++i) {\n      const defaultDim = defaultValueShape[i];\n      const valueDim = valueShape[i + 1];\n      if (defaultDim >= 0 && valueDim >= 0 && defaultDim !== 1 && defaultDim !== valueDim) {\n        throw new Error(`defaultValue.shape=${defaultValueShape}, and ragged tensor input flatValues.shape=${valueShape} are incompatible: defaultValue.shape[${i - defaultValueShape.length}] = ${defaultDim} but ragged tensor input.flatValues.shape[${i - defaultValueShape.length}] = ${valueDim}`);\n      }\n    }\n  }\n});","lineCount":126,"map":[[7,2,17,0,"Object"],[7,8,17,0],[7,9,17,0,"defineProperty"],[7,23,17,0],[7,24,17,0,"exports"],[7,31,17,0],[8,4,17,0,"enumerable"],[8,14,17,0],[9,4,17,0,"get"],[9,7,17,0],[9,18,17,0,"get"],[9,19,17,0],[10,6,17,0],[10,13,17,0,"RowPartitionType"],[10,29,17,0],[11,4,17,0],[12,2,17,0],[13,2,26,0,"exports"],[13,9,26,0],[13,10,26,0,"combineRaggedTensorToTensorShapes"],[13,43,26,0],[13,46,26,0,"combineRaggedTensorToTensorShapes"],[13,79,26,0],[14,2,68,0,"exports"],[14,9,68,0],[14,10,68,0,"getRowPartitionTypesHelper"],[14,36,68,0],[14,39,68,0,"getRowPartitionTypesHelper"],[14,65,68,0],[15,2,88,0,"exports"],[15,9,88,0],[15,10,88,0,"getRaggedRank"],[15,23,88,0],[15,26,88,0,"getRaggedRank"],[15,39,88,0],[16,2,97,0,"exports"],[16,9,97,0],[16,10,97,0,"validateDefaultValueShape"],[16,35,97,0],[16,38,97,0,"validateDefaultValueShape"],[16,63,97,0],[17,2,1,0],[18,0,2,0],[19,0,3,0],[20,0,4,0],[21,0,5,0],[22,0,6,0],[23,0,7,0],[24,0,8,0],[25,0,9,0],[26,0,10,0],[27,0,11,0],[28,0,12,0],[29,0,13,0],[30,0,14,0],[31,0,15,0],[32,0,16,0],[33,2,17,7],[33,6,17,11,"RowPartitionType"],[33,22,17,27],[34,2,18,0],[34,3,18,1],[34,13,18,11,"RowPartitionType"],[34,29,18,27],[34,31,18,29],[35,4,19,4,"RowPartitionType"],[35,20,19,20],[35,21,19,21,"RowPartitionType"],[35,37,19,37],[35,38,19,38],[35,54,19,54],[35,55,19,55],[35,58,19,58],[35,59,19,59],[35,60,19,60],[35,63,19,63],[35,79,19,79],[36,4,20,4,"RowPartitionType"],[36,20,20,20],[36,21,20,21,"RowPartitionType"],[36,37,20,37],[36,38,20,38],[36,52,20,52],[36,53,20,53],[36,56,20,56],[36,57,20,57],[36,58,20,58],[36,61,20,61],[36,75,20,75],[37,4,21,4,"RowPartitionType"],[37,20,21,20],[37,21,21,21,"RowPartitionType"],[37,37,21,37],[37,38,21,38],[37,51,21,51],[37,52,21,52],[37,55,21,55],[37,56,21,56],[37,57,21,57],[37,60,21,60],[37,73,21,73],[38,4,22,4,"RowPartitionType"],[38,20,22,20],[38,21,22,21,"RowPartitionType"],[38,37,22,37],[38,38,22,38],[38,50,22,50],[38,51,22,51],[38,54,22,54],[38,55,22,55],[38,56,22,56],[38,59,22,59],[38,71,22,71],[39,4,23,4,"RowPartitionType"],[39,20,23,20],[39,21,23,21,"RowPartitionType"],[39,37,23,37],[39,38,23,38],[39,50,23,50],[39,51,23,51],[39,54,23,54],[39,55,23,55],[39,56,23,56],[39,59,23,59],[39,71,23,71],[40,4,24,4,"RowPartitionType"],[40,20,24,20],[40,21,24,21,"RowPartitionType"],[40,37,24,37],[40,38,24,38],[40,50,24,50],[40,51,24,51],[40,54,24,54],[40,55,24,55],[40,56,24,56],[40,59,24,59],[40,71,24,71],[41,2,25,0],[41,3,25,1],[41,5,25,3,"RowPartitionType"],[41,21,25,19],[41,26,25,24,"RowPartitionType"],[41,42,25,40],[41,45,25,43],[41,46,25,44],[41,47,25,45],[41,48,25,46],[41,49,25,47],[42,2,26,7],[42,11,26,16,"combineRaggedTensorToTensorShapes"],[42,44,26,49,"combineRaggedTensorToTensorShapes"],[42,45,26,50,"raggedRank"],[42,55,26,60],[42,57,26,62,"shape"],[42,62,26,67],[42,64,26,69,"valueShape"],[42,74,26,79],[42,76,26,81],[43,4,27,4],[44,4,28,4],[45,4,29,4],[46,4,30,4],[46,8,30,8,"outputShape"],[46,19,30,19],[46,22,30,22],[46,26,30,26,"Array"],[46,31,30,31],[46,32,30,32],[46,33,30,33],[47,4,31,4],[47,8,31,8,"valueShape"],[47,18,31,18],[47,22,31,22],[47,26,31,26],[47,30,31,30,"shape"],[47,35,31,35],[47,39,31,39],[47,43,31,43],[47,45,31,45],[48,6,32,8],[48,13,32,15,"outputShape"],[48,24,32,26],[49,4,33,4],[50,4,34,4],[50,8,34,8,"shape"],[50,13,34,13],[50,17,34,17],[50,21,34,21],[50,23,34,23],[51,6,35,8],[52,6,36,8],[52,13,36,15,"outputShape"],[52,24,36,26],[52,25,36,27,"length"],[52,31,36,33],[52,34,36,36,"raggedRank"],[52,44,36,46],[52,47,36,49,"valueShape"],[52,57,36,59],[52,58,36,60,"length"],[52,64,36,66],[52,66,36,68],[53,8,37,12,"outputShape"],[53,19,37,23],[53,20,37,24,"push"],[53,24,37,28],[53,25,37,29],[53,26,37,30],[53,27,37,31],[53,28,37,32],[54,6,38,8],[55,4,39,4],[55,5,39,5],[55,11,40,9],[56,6,41,8,"outputShape"],[56,17,41,19],[56,20,41,22,"shape"],[56,25,41,27],[56,26,41,28,"slice"],[56,31,41,33],[56,32,41,34],[56,33,41,35],[57,4,42,4],[58,4,43,4],[58,8,43,8,"valueShape"],[58,18,43,18],[58,22,43,22],[58,26,43,26],[58,28,43,28],[59,6,44,8],[59,13,44,15,"outputShape"],[59,24,44,26],[60,4,45,4],[61,4,46,4],[62,4,47,4],[62,8,47,8,"raggedRank"],[62,18,47,18],[62,21,47,21,"valueShape"],[62,31,47,31],[62,32,47,32,"length"],[62,38,47,38],[62,43,47,43,"outputShape"],[62,54,47,54],[62,55,47,55,"length"],[62,61,47,61],[62,63,47,63],[63,6,48,8],[63,12,48,14],[63,16,48,18,"Error"],[63,21,48,23],[63,22,48,24],[63,50,48,52,"shape"],[63,55,48,57],[63,93,48,95,"raggedRank"],[63,103,48,105],[63,106,49,12,"valueShape"],[63,116,49,22],[63,117,49,23,"length"],[63,123,49,29],[63,145,49,51,"outputShape"],[63,156,49,62],[63,157,49,63,"length"],[63,163,49,69],[63,165,49,71],[63,166,49,72],[64,4,50,4],[65,4,51,4],[65,9,51,9],[65,13,51,13,"i"],[65,14,51,14],[65,17,51,17],[65,18,51,18],[65,20,51,20,"i"],[65,21,51,21],[65,24,51,24,"valueShape"],[65,34,51,34],[65,35,51,35,"length"],[65,41,51,41],[65,43,51,43],[65,45,51,45,"i"],[65,46,51,46],[65,48,51,48],[66,6,52,8],[66,12,52,14,"valueDim"],[66,20,52,22],[66,23,52,25,"valueShape"],[66,33,52,35],[66,34,52,36,"i"],[66,35,52,37],[66,36,52,38],[67,6,53,8],[67,12,53,14,"outputShapeDimIndex"],[67,31,53,33],[67,34,53,36,"outputShape"],[67,45,53,47],[67,46,53,48,"outputShape"],[67,57,53,59],[67,58,53,60,"length"],[67,64,53,66],[67,67,53,69,"valueShape"],[67,77,53,79],[67,78,53,80,"length"],[67,84,53,86],[67,87,53,89,"i"],[67,88,53,90],[67,89,53,91],[68,6,54,8],[68,12,54,14,"outputShapeDim"],[68,26,54,28],[68,29,54,31,"outputShape"],[68,40,54,42],[68,41,54,43,"outputShapeDimIndex"],[68,60,54,62],[68,61,54,63],[69,6,55,8],[69,10,55,12,"valueDim"],[69,18,55,20],[69,22,55,24],[69,23,55,25],[69,25,55,27],[70,8,56,12],[70,12,56,16,"outputShapeDim"],[70,26,56,30],[70,30,56,34],[70,31,56,35],[70,33,56,37],[71,10,57,16],[71,14,57,20,"outputShapeDim"],[71,28,57,34],[71,33,57,39,"valueDim"],[71,41,57,47],[71,43,57,49],[72,12,58,20],[72,18,58,26],[72,22,58,30,"Error"],[72,27,58,35],[72,28,58,36],[72,56,58,64,"shape"],[72,61,58,69],[72,98,58,106,"i"],[72,99,58,107],[72,102,58,110,"raggedRank"],[72,112,58,120],[72,119,58,127,"valueDim"],[72,127,58,135],[72,141,58,149,"i"],[72,142,58,150],[72,145,58,153,"raggedRank"],[72,155,58,163],[72,162,58,170,"outputShapeDim"],[72,176,58,184],[72,178,58,186],[72,179,58,187],[73,10,59,16],[74,8,60,12],[74,9,60,13],[74,15,61,17],[75,10,62,16,"outputShape"],[75,21,62,27],[75,22,62,28,"outputShapeDimIndex"],[75,41,62,47],[75,42,62,48],[75,45,62,51,"valueDim"],[75,53,62,59],[76,8,63,12],[77,6,64,8],[78,4,65,4],[79,4,66,4],[79,11,66,11,"outputShape"],[79,22,66,22],[80,2,67,0],[81,2,68,7],[81,11,68,16,"getRowPartitionTypesHelper"],[81,37,68,42,"getRowPartitionTypesHelper"],[81,38,68,43,"rowPartitionTypeStrings"],[81,61,68,66],[81,63,68,68],[82,4,69,4],[82,10,69,10,"stringToType"],[82,22,69,22],[82,25,69,25],[83,6,70,8],[83,22,70,24],[83,24,70,26,"RowPartitionType"],[83,40,70,42],[83,41,70,43,"FIRST_DIM_SIZE"],[83,55,70,57],[84,6,71,8],[84,20,71,22],[84,22,71,24,"RowPartitionType"],[84,38,71,40],[84,39,71,41,"VALUE_ROWIDS"],[84,51,71,53],[85,6,72,8],[85,19,72,21],[85,21,72,23,"RowPartitionType"],[85,37,72,39],[85,38,72,40,"ROW_LENGTHS"],[85,49,72,51],[86,6,73,8],[86,18,73,20],[86,20,73,22,"RowPartitionType"],[86,36,73,38],[86,37,73,39,"ROW_SPLITS"],[86,47,73,49],[87,6,74,8],[87,18,74,20],[87,20,74,22,"RowPartitionType"],[87,36,74,38],[87,37,74,39,"ROW_LIMITS"],[87,47,74,49],[88,6,75,8],[88,18,75,20],[88,20,75,22,"RowPartitionType"],[88,36,75,38],[88,37,75,39,"ROW_STARTS"],[89,4,76,4],[89,5,76,5],[90,4,77,4],[90,10,77,10,"result"],[90,16,77,16],[90,19,77,19],[90,21,77,21],[91,4,78,4],[91,9,78,9],[91,15,78,15,"typeStr"],[91,22,78,22],[91,26,78,26,"rowPartitionTypeStrings"],[91,49,78,49],[91,51,78,51],[92,6,79,8],[92,10,79,12,"typeStr"],[92,17,79,19],[92,21,79,23,"stringToType"],[92,33,79,35],[92,35,79,37],[93,8,80,12,"result"],[93,14,80,18],[93,15,80,19,"push"],[93,19,80,23],[93,20,80,24,"stringToType"],[93,32,80,36],[93,33,80,37,"typeStr"],[93,40,80,44],[93,41,80,45],[93,42,80,46],[94,6,81,8],[94,7,81,9],[94,13,82,13],[95,8,83,12],[96,6,84,8],[97,4,85,4],[98,4,86,4],[98,11,86,11,"result"],[98,17,86,17],[99,2,87,0],[100,2,88,7],[100,11,88,16,"getRaggedRank"],[100,24,88,29,"getRaggedRank"],[100,25,88,30,"rowPartitionTypes"],[100,42,88,47],[100,44,88,49],[101,4,89,4],[101,8,89,8,"rowPartitionTypes"],[101,25,89,25],[101,26,89,26,"length"],[101,32,89,32],[101,37,89,37],[101,38,89,38],[101,40,89,40],[102,6,90,8],[102,13,90,15],[102,14,90,16],[103,4,91,4],[104,4,92,4],[104,8,92,8,"rowPartitionTypes"],[104,25,92,25],[104,26,92,26],[104,27,92,27],[104,28,92,28],[104,33,92,33,"RowPartitionType"],[104,49,92,49],[104,50,92,50,"FIRST_DIM_SIZE"],[104,64,92,64],[104,66,92,66],[105,6,93,8],[105,13,93,15,"rowPartitionTypes"],[105,30,93,32],[105,31,93,33,"length"],[105,37,93,39],[105,40,93,42],[105,41,93,43],[106,4,94,4],[107,4,95,4],[107,11,95,11,"rowPartitionTypes"],[107,28,95,28],[107,29,95,29,"length"],[107,35,95,35],[108,2,96,0],[109,2,97,7],[109,11,97,16,"validateDefaultValueShape"],[109,36,97,41,"validateDefaultValueShape"],[109,37,97,42,"defaultValueShape"],[109,54,97,59],[109,56,97,61,"valueShape"],[109,66,97,71],[109,68,97,73],[110,4,98,4],[110,8,98,8,"defaultValueShape"],[110,25,98,25],[110,29,98,29],[110,33,98,33],[110,37,98,37,"valueShape"],[110,47,98,47],[110,51,98,51],[110,55,98,55],[110,57,98,57],[111,6,99,8],[112,4,100,4],[113,4,101,4],[113,10,101,10,"defaultNDims"],[113,22,101,22],[113,25,101,25,"defaultValueShape"],[113,42,101,42],[113,43,101,43,"length"],[113,49,101,49],[114,4,102,4],[114,10,102,10,"valuesNDims"],[114,21,102,21],[114,24,102,24,"valueShape"],[114,34,102,34],[114,35,102,35,"length"],[114,41,102,41],[115,4,103,4],[115,8,103,8,"defaultNDims"],[115,20,103,20],[115,24,103,24,"valuesNDims"],[115,35,103,35],[115,37,103,37],[116,6,104,8],[116,12,104,14],[116,16,104,18,"Error"],[116,21,104,23],[116,22,104,24],[116,44,104,46,"defaultValueShape"],[116,61,104,63],[116,100,104,102,"valueShape"],[116,110,104,112],[116,153,104,155,"defaultNDims"],[116,165,104,167],[116,225,104,227,"valuesNDims"],[116,236,104,238],[116,239,104,241],[116,240,104,242],[117,4,105,4],[118,4,106,4],[118,9,106,9],[118,13,106,13,"i"],[118,14,106,14],[118,17,106,17],[118,18,106,18],[118,20,106,20,"i"],[118,21,106,21],[118,24,106,24,"Math"],[118,28,106,28],[118,29,106,29,"min"],[118,32,106,32],[118,33,106,33,"defaultNDims"],[118,45,106,45],[118,47,106,47,"valuesNDims"],[118,58,106,58],[118,61,106,61],[118,62,106,62],[118,63,106,63],[118,65,106,65],[118,67,106,67,"i"],[118,68,106,68],[118,70,106,70],[119,6,107,8],[119,12,107,14,"defaultDim"],[119,22,107,24],[119,25,107,27,"defaultValueShape"],[119,42,107,44],[119,43,107,45,"i"],[119,44,107,46],[119,45,107,47],[120,6,108,8],[120,12,108,14,"valueDim"],[120,20,108,22],[120,23,108,25,"valueShape"],[120,33,108,35],[120,34,108,36,"i"],[120,35,108,37],[120,38,108,40],[120,39,108,41],[120,40,108,42],[121,6,109,8],[121,10,109,12,"defaultDim"],[121,20,109,22],[121,24,109,26],[121,25,109,27],[121,29,109,31,"valueDim"],[121,37,109,39],[121,41,109,43],[121,42,109,44],[121,46,109,48,"defaultDim"],[121,56,109,58],[121,61,109,63],[121,62,109,64],[121,66,110,12,"defaultDim"],[121,76,110,22],[121,81,110,27,"valueDim"],[121,89,110,35],[121,91,110,37],[122,8,111,12],[122,14,111,18],[122,18,111,22,"Error"],[122,23,111,27],[122,24,111,28],[122,46,111,50,"defaultValueShape"],[122,63,111,67],[122,109,111,113,"valueShape"],[122,119,111,123],[122,160,111,164,"i"],[122,161,111,165],[122,164,111,168,"defaultValueShape"],[122,181,111,185],[122,182,111,186,"length"],[122,188,111,192],[122,195,111,199,"defaultDim"],[122,205,111,209],[122,250,111,254,"i"],[122,251,111,255],[122,254,111,258,"defaultValueShape"],[122,271,111,275],[122,272,111,276,"length"],[122,278,111,282],[122,285,111,289,"valueDim"],[122,293,111,297],[122,295,111,299],[122,296,111,300],[123,6,112,8],[124,4,113,4],[125,2,114,0],[126,0,114,1],[126,3]],"functionMap":{"names":["<global>","<anonymous>","combineRaggedTensorToTensorShapes","getRowPartitionTypesHelper","getRaggedRank","validateDefaultValueShape"],"mappings":"AAA;CCiB;CDO;OEC;CFyC;OGC;CHmB;OIC;CJQ;OKC;CLiB"},"hasCjsExports":false},"type":"js/module"}]}