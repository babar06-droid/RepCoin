{"dependencies":[{"name":"@tensorflow/tfjs-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":74,"index":777}}],"key":"qIleUpSDMUXFynEGc51k60/pDSs=","exportNames":["*"],"imports":1}},{"name":"../kernel_utils/shared","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":778},"end":{"line":18,"column":56,"index":834}}],"key":"JzS9qfQGP0NvwhobUV8d6bPV3h4=","exportNames":["*"],"imports":1}},{"name":"../scatter_gpu","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":835},"end":{"line":19,"column":48,"index":883}}],"key":"GRK5YsbRkKChK693sWTEUrzdWBE=","exportNames":["*"],"imports":1}},{"name":"./Reshape","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":884},"end":{"line":20,"column":36,"index":920}}],"key":"EUWK+oKi/AwokPOQ1jng5DYfQSc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.sparseToDense = sparseToDense;\n  Object.defineProperty(exports, \"sparseToDenseConfig\", {\n    enumerable: true,\n    get: function () {\n      return sparseToDenseConfig;\n    }\n  });\n  var _tensorflowTfjsCore = require(_dependencyMap[0], \"@tensorflow/tfjs-core\");\n  var _kernel_utilsShared = require(_dependencyMap[1], \"../kernel_utils/shared\");\n  var _scatter_gpu = require(_dependencyMap[2], \"../scatter_gpu\");\n  var _Reshape = require(_dependencyMap[3], \"./Reshape\");\n  /**\n   * @license\n   * Copyright 2020 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  function sparseToDense(args) {\n    const {\n      inputs,\n      backend,\n      attrs\n    } = args;\n    const {\n      sparseIndices,\n      sparseValues,\n      defaultValue\n    } = inputs;\n    const {\n      outputShape\n    } = attrs;\n    const {\n      sliceRank,\n      numUpdates,\n      sliceSize,\n      strides,\n      outputSize\n    } = _tensorflowTfjsCore.backend_util.calculateShapes(sparseValues, sparseIndices, outputShape);\n    const sumDupeIndices = false;\n    if (sparseValues.dtype === 'string') {\n      const indicesBuf = backend.bufferSync(sparseIndices);\n      const updatesBuf = backend.bufferSync(sparseValues);\n      const $defaultValue = _tensorflowTfjsCore.util.decodeString(backend.readSync(defaultValue.dataId)[0]);\n      const outBuf = (0, _kernel_utilsShared.scatterImplCPU)(indicesBuf, updatesBuf, outputShape, outputSize, sliceSize, numUpdates, sliceRank, strides, $defaultValue, sumDupeIndices);\n      return backend.makeTensorInfo(outputShape, outBuf.dtype, outBuf.values);\n    }\n    const program = new _scatter_gpu.ScatterProgram(numUpdates, sliceRank, sparseIndices.shape.length, sparseValues.shape.length, strides, [outputSize, 1], sumDupeIndices);\n    const res = backend.runWebGLProgram(program, [sparseValues, sparseIndices, defaultValue], sparseValues.dtype);\n    const reshaped = (0, _Reshape.reshape)({\n      inputs: {\n        x: res\n      },\n      backend,\n      attrs: {\n        shape: outputShape\n      }\n    });\n    backend.disposeIntermediateTensorInfo(res);\n    return reshaped;\n  }\n  const sparseToDenseConfig = {\n    kernelName: _tensorflowTfjsCore.SparseToDense,\n    backendName: 'webgl',\n    kernelFunc: sparseToDense\n  };\n});","lineCount":83,"map":[[7,2,21,0,"exports"],[7,9,21,0],[7,10,21,0,"sparseToDense"],[7,23,21,0],[7,26,21,0,"sparseToDense"],[7,39,21,0],[8,2,40,0,"Object"],[8,8,40,0],[8,9,40,0,"defineProperty"],[8,23,40,0],[8,24,40,0,"exports"],[8,31,40,0],[9,4,40,0,"enumerable"],[9,14,40,0],[10,4,40,0,"get"],[10,7,40,0],[10,18,40,0,"get"],[10,19,40,0],[11,6,40,0],[11,13,40,0,"sparseToDenseConfig"],[11,32,40,0],[12,4,40,0],[13,2,40,0],[14,2,17,0],[14,6,17,0,"_tensorflowTfjsCore"],[14,25,17,0],[14,28,17,0,"require"],[14,35,17,0],[14,36,17,0,"_dependencyMap"],[14,50,17,0],[15,2,18,0],[15,6,18,0,"_kernel_utilsShared"],[15,25,18,0],[15,28,18,0,"require"],[15,35,18,0],[15,36,18,0,"_dependencyMap"],[15,50,18,0],[16,2,19,0],[16,6,19,0,"_scatter_gpu"],[16,18,19,0],[16,21,19,0,"require"],[16,28,19,0],[16,29,19,0,"_dependencyMap"],[16,43,19,0],[17,2,20,0],[17,6,20,0,"_Reshape"],[17,14,20,0],[17,17,20,0,"require"],[17,24,20,0],[17,25,20,0,"_dependencyMap"],[17,39,20,0],[18,2,1,0],[19,0,2,0],[20,0,3,0],[21,0,4,0],[22,0,5,0],[23,0,6,0],[24,0,7,0],[25,0,8,0],[26,0,9,0],[27,0,10,0],[28,0,11,0],[29,0,12,0],[30,0,13,0],[31,0,14,0],[32,0,15,0],[33,0,16,0],[35,2,21,7],[35,11,21,16,"sparseToDense"],[35,24,21,29,"sparseToDense"],[35,25,21,30,"args"],[35,29,21,34],[35,31,21,36],[36,4,22,4],[36,10,22,10],[37,6,22,12,"inputs"],[37,12,22,18],[38,6,22,20,"backend"],[38,13,22,27],[39,6,22,29,"attrs"],[40,4,22,35],[40,5,22,36],[40,8,22,39,"args"],[40,12,22,43],[41,4,23,4],[41,10,23,10],[42,6,23,12,"sparseIndices"],[42,19,23,25],[43,6,23,27,"sparseValues"],[43,18,23,39],[44,6,23,41,"defaultValue"],[45,4,23,54],[45,5,23,55],[45,8,23,58,"inputs"],[45,14,23,64],[46,4,24,4],[46,10,24,10],[47,6,24,12,"outputShape"],[48,4,24,24],[48,5,24,25],[48,8,24,28,"attrs"],[48,13,24,33],[49,4,25,4],[49,10,25,10],[50,6,25,12,"sliceRank"],[50,15,25,21],[51,6,25,23,"numUpdates"],[51,16,25,33],[52,6,25,35,"sliceSize"],[52,15,25,44],[53,6,25,46,"strides"],[53,13,25,53],[54,6,25,55,"outputSize"],[55,4,25,66],[55,5,25,67],[55,8,25,70,"backend_util"],[55,27,25,82],[55,28,25,82,"backend_util"],[55,40,25,82],[55,41,25,83,"calculateShapes"],[55,56,25,98],[55,57,25,99,"sparseValues"],[55,69,25,111],[55,71,25,113,"sparseIndices"],[55,84,25,126],[55,86,25,128,"outputShape"],[55,97,25,139],[55,98,25,140],[56,4,26,4],[56,10,26,10,"sumDupeIndices"],[56,24,26,24],[56,27,26,27],[56,32,26,32],[57,4,27,4],[57,8,27,8,"sparseValues"],[57,20,27,20],[57,21,27,21,"dtype"],[57,26,27,26],[57,31,27,31],[57,39,27,39],[57,41,27,41],[58,6,28,8],[58,12,28,14,"indicesBuf"],[58,22,28,24],[58,25,28,27,"backend"],[58,32,28,34],[58,33,28,35,"bufferSync"],[58,43,28,45],[58,44,28,46,"sparseIndices"],[58,57,28,59],[58,58,28,60],[59,6,29,8],[59,12,29,14,"updatesBuf"],[59,22,29,24],[59,25,29,27,"backend"],[59,32,29,34],[59,33,29,35,"bufferSync"],[59,43,29,45],[59,44,29,46,"sparseValues"],[59,56,29,58],[59,57,29,59],[60,6,30,8],[60,12,30,14,"$defaultValue"],[60,25,30,27],[60,28,30,30,"util"],[60,47,30,34],[60,48,30,34,"util"],[60,52,30,34],[60,53,30,35,"decodeString"],[60,65,30,47],[60,66,30,48,"backend"],[60,73,30,55],[60,74,30,56,"readSync"],[60,82,30,64],[60,83,30,65,"defaultValue"],[60,95,30,77],[60,96,30,78,"dataId"],[60,102,30,84],[60,103,30,85],[60,104,30,86],[60,105,30,87],[60,106,30,88],[60,107,30,89],[61,6,31,8],[61,12,31,14,"outBuf"],[61,18,31,20],[61,21,31,23],[61,25,31,23,"scatterImplCPU"],[61,44,31,37],[61,45,31,37,"scatterImplCPU"],[61,59,31,37],[61,61,31,38,"indicesBuf"],[61,71,31,48],[61,73,31,50,"updatesBuf"],[61,83,31,60],[61,85,31,62,"outputShape"],[61,96,31,73],[61,98,31,75,"outputSize"],[61,108,31,85],[61,110,31,87,"sliceSize"],[61,119,31,96],[61,121,31,98,"numUpdates"],[61,131,31,108],[61,133,31,110,"sliceRank"],[61,142,31,119],[61,144,31,121,"strides"],[61,151,31,128],[61,153,31,130,"$defaultValue"],[61,166,31,143],[61,168,31,145,"sumDupeIndices"],[61,182,31,159],[61,183,31,160],[62,6,32,8],[62,13,32,15,"backend"],[62,20,32,22],[62,21,32,23,"makeTensorInfo"],[62,35,32,37],[62,36,32,38,"outputShape"],[62,47,32,49],[62,49,32,51,"outBuf"],[62,55,32,57],[62,56,32,58,"dtype"],[62,61,32,63],[62,63,32,65,"outBuf"],[62,69,32,71],[62,70,32,72,"values"],[62,76,32,78],[62,77,32,79],[63,4,33,4],[64,4,34,4],[64,10,34,10,"program"],[64,17,34,17],[64,20,34,20],[64,24,34,24,"ScatterProgram"],[64,36,34,38],[64,37,34,38,"ScatterProgram"],[64,51,34,38],[64,52,34,39,"numUpdates"],[64,62,34,49],[64,64,34,51,"sliceRank"],[64,73,34,60],[64,75,34,62,"sparseIndices"],[64,88,34,75],[64,89,34,76,"shape"],[64,94,34,81],[64,95,34,82,"length"],[64,101,34,88],[64,103,34,90,"sparseValues"],[64,115,34,102],[64,116,34,103,"shape"],[64,121,34,108],[64,122,34,109,"length"],[64,128,34,115],[64,130,34,117,"strides"],[64,137,34,124],[64,139,34,126],[64,140,34,127,"outputSize"],[64,150,34,137],[64,152,34,139],[64,153,34,140],[64,154,34,141],[64,156,34,143,"sumDupeIndices"],[64,170,34,157],[64,171,34,158],[65,4,35,4],[65,10,35,10,"res"],[65,13,35,13],[65,16,35,16,"backend"],[65,23,35,23],[65,24,35,24,"runWebGLProgram"],[65,39,35,39],[65,40,35,40,"program"],[65,47,35,47],[65,49,35,49],[65,50,35,50,"sparseValues"],[65,62,35,62],[65,64,35,64,"sparseIndices"],[65,77,35,77],[65,79,35,79,"defaultValue"],[65,91,35,91],[65,92,35,92],[65,94,35,94,"sparseValues"],[65,106,35,106],[65,107,35,107,"dtype"],[65,112,35,112],[65,113,35,113],[66,4,36,4],[66,10,36,10,"reshaped"],[66,18,36,18],[66,21,36,21],[66,25,36,21,"reshape"],[66,33,36,28],[66,34,36,28,"reshape"],[66,41,36,28],[66,43,36,29],[67,6,36,31,"inputs"],[67,12,36,37],[67,14,36,39],[68,8,36,41,"x"],[68,9,36,42],[68,11,36,44,"res"],[69,6,36,48],[69,7,36,49],[70,6,36,51,"backend"],[70,13,36,58],[71,6,36,60,"attrs"],[71,11,36,65],[71,13,36,67],[72,8,36,69,"shape"],[72,13,36,74],[72,15,36,76,"outputShape"],[73,6,36,88],[74,4,36,90],[74,5,36,91],[74,6,36,92],[75,4,37,4,"backend"],[75,11,37,11],[75,12,37,12,"disposeIntermediateTensorInfo"],[75,41,37,41],[75,42,37,42,"res"],[75,45,37,45],[75,46,37,46],[76,4,38,4],[76,11,38,11,"reshaped"],[76,19,38,19],[77,2,39,0],[78,2,40,7],[78,8,40,13,"sparseToDenseConfig"],[78,27,40,32],[78,30,40,35],[79,4,41,4,"kernelName"],[79,14,41,14],[79,16,41,16,"SparseToDense"],[79,35,41,29],[79,36,41,29,"SparseToDense"],[79,49,41,29],[80,4,42,4,"backendName"],[80,15,42,15],[80,17,42,17],[80,24,42,24],[81,4,43,4,"kernelFunc"],[81,14,43,14],[81,16,43,16,"sparseToDense"],[82,2,44,0],[82,3,44,1],[83,0,44,2],[83,3]],"functionMap":{"names":["<global>","sparseToDense"],"mappings":"AAA;OCoB;CDkB"},"hasCjsExports":false},"type":"js/module"}]}