{"dependencies":[{"name":"../engine","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":17,"column":0,"index":703},"end":{"line":17,"column":35,"index":738}}],"key":"zbTTi8rtwr8rjl75PzEo829Yvss=","exportNames":["*"],"imports":1}},{"name":"../util","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":739},"end":{"line":18,"column":36,"index":775}}],"key":"DTmef1GE5grNQfsvpIzpBlINy9c=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"OP_SCOPE_SUFFIX\", {\n    enumerable: true,\n    get: function () {\n      return OP_SCOPE_SUFFIX;\n    }\n  });\n  exports.op = op;\n  var _engine = require(_dependencyMap[0], \"../engine\");\n  var _util = require(_dependencyMap[1], \"../util\");\n  /**\n   * @license\n   * Copyright 2018 Google LLC. All Rights Reserved.\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * =============================================================================\n   */\n\n  const OP_SCOPE_SUFFIX = '__op';\n  /**\n   * Used for wrapping functions that perform math operations on\n   * Tensors. The function will be wrapped in a named scope that cleans all\n   * memory usage after the function is done.\n   */\n  function op(f) {\n    const keys = Object.keys(f);\n    if (keys.length !== 1) {\n      throw new Error(`Please provide an object with a single key ` + `(operation name) mapping to a function. Got an object with ` + `${keys.length} keys.`);\n    }\n    let opName = keys[0];\n    const fn = f[opName];\n    // Strip the underscore from the end of the function name.\n    if (opName.endsWith('_')) {\n      opName = opName.substring(0, opName.length - 1);\n    }\n    // add an __op suffix to distinguish ops from kernels in tf.profile\n    opName = opName + OP_SCOPE_SUFFIX;\n    // tslint:disable-next-line:no-any\n    const f2 = (...args) => {\n      _engine.ENGINE.startScope(opName);\n      try {\n        const result = fn(...args);\n        if ((0, _util.isPromise)(result)) {\n          console.error('Cannot return a Promise inside of tidy.');\n        }\n        _engine.ENGINE.endScope(result);\n        return result;\n      } catch (ex) {\n        _engine.ENGINE.endScope(null);\n        throw ex;\n      }\n    };\n    Object.defineProperty(f2, 'name', {\n      value: opName,\n      configurable: true\n    });\n    // tslint:disable-next-line:no-any\n    return f2;\n  }\n});","lineCount":74,"map":[[7,2,19,0,"Object"],[7,8,19,0],[7,9,19,0,"defineProperty"],[7,23,19,0],[7,24,19,0,"exports"],[7,31,19,0],[8,4,19,0,"enumerable"],[8,14,19,0],[9,4,19,0,"get"],[9,7,19,0],[9,18,19,0,"get"],[9,19,19,0],[10,6,19,0],[10,13,19,0,"OP_SCOPE_SUFFIX"],[10,28,19,0],[11,4,19,0],[12,2,19,0],[13,2,25,0,"exports"],[13,9,25,0],[13,10,25,0,"op"],[13,12,25,0],[13,15,25,0,"op"],[13,17,25,0],[14,2,17,0],[14,6,17,0,"_engine"],[14,13,17,0],[14,16,17,0,"require"],[14,23,17,0],[14,24,17,0,"_dependencyMap"],[14,38,17,0],[15,2,18,0],[15,6,18,0,"_util"],[15,11,18,0],[15,14,18,0,"require"],[15,21,18,0],[15,22,18,0,"_dependencyMap"],[15,36,18,0],[16,2,1,0],[17,0,2,0],[18,0,3,0],[19,0,4,0],[20,0,5,0],[21,0,6,0],[22,0,7,0],[23,0,8,0],[24,0,9,0],[25,0,10,0],[26,0,11,0],[27,0,12,0],[28,0,13,0],[29,0,14,0],[30,0,15,0],[31,0,16,0],[33,2,19,7],[33,8,19,13,"OP_SCOPE_SUFFIX"],[33,23,19,28],[33,26,19,31],[33,32,19,37],[34,2,20,0],[35,0,21,0],[36,0,22,0],[37,0,23,0],[38,0,24,0],[39,2,25,7],[39,11,25,16,"op"],[39,13,25,18,"op"],[39,14,25,19,"f"],[39,15,25,20],[39,17,25,22],[40,4,26,4],[40,10,26,10,"keys"],[40,14,26,14],[40,17,26,17,"Object"],[40,23,26,23],[40,24,26,24,"keys"],[40,28,26,28],[40,29,26,29,"f"],[40,30,26,30],[40,31,26,31],[41,4,27,4],[41,8,27,8,"keys"],[41,12,27,12],[41,13,27,13,"length"],[41,19,27,19],[41,24,27,24],[41,25,27,25],[41,27,27,27],[42,6,28,8],[42,12,28,14],[42,16,28,18,"Error"],[42,21,28,23],[42,22,28,24],[42,67,28,69],[42,70,29,12],[42,131,29,73],[42,134,30,12],[42,137,30,15,"keys"],[42,141,30,19],[42,142,30,20,"length"],[42,148,30,26],[42,156,30,34],[42,157,30,35],[43,4,31,4],[44,4,32,4],[44,8,32,8,"opName"],[44,14,32,14],[44,17,32,17,"keys"],[44,21,32,21],[44,22,32,22],[44,23,32,23],[44,24,32,24],[45,4,33,4],[45,10,33,10,"fn"],[45,12,33,12],[45,15,33,15,"f"],[45,16,33,16],[45,17,33,17,"opName"],[45,23,33,23],[45,24,33,24],[46,4,34,4],[47,4,35,4],[47,8,35,8,"opName"],[47,14,35,14],[47,15,35,15,"endsWith"],[47,23,35,23],[47,24,35,24],[47,27,35,27],[47,28,35,28],[47,30,35,30],[48,6,36,8,"opName"],[48,12,36,14],[48,15,36,17,"opName"],[48,21,36,23],[48,22,36,24,"substring"],[48,31,36,33],[48,32,36,34],[48,33,36,35],[48,35,36,37,"opName"],[48,41,36,43],[48,42,36,44,"length"],[48,48,36,50],[48,51,36,53],[48,52,36,54],[48,53,36,55],[49,4,37,4],[50,4,38,4],[51,4,39,4,"opName"],[51,10,39,10],[51,13,39,13,"opName"],[51,19,39,19],[51,22,39,22,"OP_SCOPE_SUFFIX"],[51,37,39,37],[52,4,40,4],[53,4,41,4],[53,10,41,10,"f2"],[53,12,41,12],[53,15,41,15,"f2"],[53,16,41,16],[53,19,41,19,"args"],[53,23,41,23],[53,28,41,28],[54,6,42,8,"ENGINE"],[54,13,42,14],[54,14,42,14,"ENGINE"],[54,20,42,14],[54,21,42,15,"startScope"],[54,31,42,25],[54,32,42,26,"opName"],[54,38,42,32],[54,39,42,33],[55,6,43,8],[55,10,43,12],[56,8,44,12],[56,14,44,18,"result"],[56,20,44,24],[56,23,44,27,"fn"],[56,25,44,29],[56,26,44,30],[56,29,44,33,"args"],[56,33,44,37],[56,34,44,38],[57,8,45,12],[57,12,45,16],[57,16,45,16,"isPromise"],[57,21,45,25],[57,22,45,25,"isPromise"],[57,31,45,25],[57,33,45,26,"result"],[57,39,45,32],[57,40,45,33],[57,42,45,35],[58,10,46,16,"console"],[58,17,46,23],[58,18,46,24,"error"],[58,23,46,29],[58,24,46,30],[58,65,46,71],[58,66,46,72],[59,8,47,12],[60,8,48,12,"ENGINE"],[60,15,48,18],[60,16,48,18,"ENGINE"],[60,22,48,18],[60,23,48,19,"endScope"],[60,31,48,27],[60,32,48,28,"result"],[60,38,48,34],[60,39,48,35],[61,8,49,12],[61,15,49,19,"result"],[61,21,49,25],[62,6,50,8],[62,7,50,9],[62,8,51,8],[62,15,51,15,"ex"],[62,17,51,17],[62,19,51,19],[63,8,52,12,"ENGINE"],[63,15,52,18],[63,16,52,18,"ENGINE"],[63,22,52,18],[63,23,52,19,"endScope"],[63,31,52,27],[63,32,52,28],[63,36,52,32],[63,37,52,33],[64,8,53,12],[64,14,53,18,"ex"],[64,16,53,20],[65,6,54,8],[66,4,55,4],[66,5,55,5],[67,4,56,4,"Object"],[67,10,56,10],[67,11,56,11,"defineProperty"],[67,25,56,25],[67,26,56,26,"f2"],[67,28,56,28],[67,30,56,30],[67,36,56,36],[67,38,56,38],[68,6,56,40,"value"],[68,11,56,45],[68,13,56,47,"opName"],[68,19,56,53],[69,6,56,55,"configurable"],[69,18,56,67],[69,20,56,69],[70,4,56,74],[70,5,56,75],[70,6,56,76],[71,4,57,4],[72,4,58,4],[72,11,58,11,"f2"],[72,13,58,13],[73,2,59,0],[74,0,59,1],[74,3]],"functionMap":{"names":["<global>","op","f2"],"mappings":"AAA;OCwB;eCgB;KDc;CDI"},"hasCjsExports":false},"type":"js/module"}]}